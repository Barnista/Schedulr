(self["webpackChunkschedulr"]=self["webpackChunkschedulr"]||[]).push([[504],{34:function(t,e,n){"use strict";var r=n(4901);t.exports=function(t){return"object"==typeof t?null!==t:r(t)}},81:function(t,e,n){"use strict";var r=n(9565),i=n(9306),o=n(8551),s=n(6823),a=n(851),c=TypeError;t.exports=function(t,e){var n=arguments.length<2?a(t):e;if(i(n))return o(r(n,t));throw new c(s(t)+" is not iterable")}},116:function(t,e,n){"use strict";var r=n(6518),i=n(9565),o=n(2652),s=n(9306),a=n(8551),c=n(1767),u=n(9539),l=n(4549),h=l("find",TypeError);r({target:"Iterator",proto:!0,real:!0,forced:h},{find:function(t){a(this);try{s(t)}catch(r){u(this,"throw",r)}if(h)return i(h,this,t);var e=c(this),n=0;return o(e,(function(e,r){if(t(e,n++))return r(e)}),{IS_RECORD:!0,INTERRUPTED:!0}).result}})},144:function(t,e,n){"use strict";n.d(e,{BA:function(){return Lt},C4:function(){return I},EW:function(){return Vt},Gc:function(){return _t},IG:function(){return kt},IJ:function(){return Ot},KR:function(){return Nt},Kh:function(){return vt},Pr:function(){return jt},R1:function(){return Mt},X2:function(){return h},bl:function(){return k},fE:function(){return Ct},g8:function(){return Et},hV:function(){return qt},hZ:function(){return j},i9:function(){return At},jr:function(){return u},ju:function(){return St},lJ:function(){return xt},o5:function(){return c},qA:function(){return V},u4:function(){return F},uY:function(){return a},ux:function(){return It},wB:function(){return Wt},yC:function(){return s}});n(4114),n(8111),n(2489),n(7588),n(1701),n(3579),n(7642),n(8004),n(3853),n(5876),n(2475),n(5024),n(1698);var r=n(4232);let i,o;class s{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=i,!t&&i&&(this.index=(i.scopes||(i.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){let t,e;if(this._isPaused=!0,this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].pause();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){let t,e;if(this._isPaused=!1,this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].resume();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].resume()}}run(t){if(this._active){const e=i;try{return i=this,t()}finally{i=e}}else 0}on(){i=this}off(){i=this.parent}stop(t){if(this._active){let e,n;for(this._active=!1,e=0,n=this.effects.length;e<n;e++)this.effects[e].stop();for(this.effects.length=0,e=0,n=this.cleanups.length;e<n;e++)this.cleanups[e]();if(this.cleanups.length=0,this.scopes){for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const t=this.parent.scopes.pop();t&&t!==this&&(this.parent.scopes[this.index]=t,t.index=this.index)}this.parent=void 0}}}function a(t){return new s(t)}function c(){return i}function u(t,e=!1){i&&i.cleanups.push(t)}const l=new WeakSet;class h{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,i&&i.active&&i.effects.push(this)}pause(){this.flags|=64}resume(){64&this.flags&&(this.flags&=-65,l.has(this)&&(l.delete(this),this.trigger()))}notify(){2&this.flags&&!(32&this.flags)||8&this.flags||m(this)}run(){if(!(1&this.flags))return this.fn();this.flags|=2,x(this),v(this);const t=o,e=C;o=this,C=!0;try{return this.fn()}finally{0,_(this),o=t,C=e,this.flags&=-3}}stop(){if(1&this.flags){for(let t=this.deps;t;t=t.nextDep)E(t);this.deps=this.depsTail=void 0,x(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){64&this.flags?l.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){w(this)&&this.run()}get dirty(){return w(this)}}let d,f,p=0;function m(t,e=!1){if(t.flags|=8,e)return t.next=f,void(f=t);t.next=d,d=t}function g(){p++}function y(){if(--p>0)return;if(f){let t=f;f=void 0;while(t){const e=t.next;t.next=void 0,t.flags&=-9,t=e}}let t;while(d){let n=d;d=void 0;while(n){const r=n.next;if(n.next=void 0,n.flags&=-9,1&n.flags)try{n.trigger()}catch(e){t||(t=e)}n=r}}if(t)throw t}function v(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function _(t){let e,n=t.depsTail,r=n;while(r){const t=r.prevDep;-1===r.version?(r===n&&(n=t),E(r),T(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=t}t.deps=e,t.depsTail=n}function w(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(b(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function b(t){if(4&t.flags&&!(16&t.flags))return;if(t.flags&=-17,t.globalVersion===D)return;t.globalVersion=D;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!w(t))return void(t.flags&=-3);const n=o,i=C;o=t,C=!0;try{v(t);const n=t.fn(t._value);(0===e.version||(0,r.$H)(n,t._value))&&(t._value=n,e.version++)}catch(s){throw e.version++,s}finally{o=n,C=i,_(t),t.flags&=-3}}function E(t,e=!1){const{dep:n,prevSub:r,nextSub:i}=t;if(r&&(r.nextSub=i,t.prevSub=void 0),i&&(i.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let t=n.computed.deps;t;t=t.nextDep)E(t,!0)}e||--n.sc||!n.map||n.map.delete(n.key)}function T(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let C=!0;const S=[];function I(){S.push(C),C=!1}function k(){const t=S.pop();C=void 0===t||t}function x(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const t=o;o=void 0;try{e()}finally{o=t}}}let D=0;class A{constructor(t,e){this.sub=t,this.dep=e,this.version=e.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class N{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!o||!C||o===this.computed)return;let e=this.activeLink;if(void 0===e||e.sub!==o)e=this.activeLink=new A(o,this),o.deps?(e.prevDep=o.depsTail,o.depsTail.nextDep=e,o.depsTail=e):o.deps=o.depsTail=e,O(e);else if(-1===e.version&&(e.version=this.version,e.nextDep)){const t=e.nextDep;t.prevDep=e.prevDep,e.prevDep&&(e.prevDep.nextDep=t),e.prevDep=o.depsTail,e.nextDep=void 0,o.depsTail.nextDep=e,o.depsTail=e,o.deps===e&&(o.deps=t)}return e}trigger(t){this.version++,D++,this.notify(t)}notify(t){g();try{0;for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{y()}}}function O(t){if(t.dep.sc++,4&t.sub.flags){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let t=e.deps;t;t=t.nextDep)O(t)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const P=new WeakMap,R=Symbol(""),M=Symbol(""),L=Symbol("");function F(t,e,n){if(C&&o){let e=P.get(t);e||P.set(t,e=new Map);let r=e.get(n);r||(e.set(n,r=new N),r.map=e,r.key=n),r.track()}}function j(t,e,n,i,o,s){const a=P.get(t);if(!a)return void D++;const c=t=>{t&&t.trigger()};if(g(),"clear"===e)a.forEach(c);else{const o=(0,r.cy)(t),s=o&&(0,r.yI)(n);if(o&&"length"===n){const t=Number(i);a.forEach(((e,n)=>{("length"===n||n===L||!(0,r.Bm)(n)&&n>=t)&&c(e)}))}else switch((void 0!==n||a.has(void 0))&&c(a.get(n)),s&&c(a.get(L)),e){case"add":o?s&&c(a.get("length")):(c(a.get(R)),(0,r.CE)(t)&&c(a.get(M)));break;case"delete":o||(c(a.get(R)),(0,r.CE)(t)&&c(a.get(M)));break;case"set":(0,r.CE)(t)&&c(a.get(R));break}}y()}function U(t){const e=It(t);return e===t?e:(F(e,"iterate",L),Ct(t)?e:e.map(xt))}function V(t){return F(t=It(t),"iterate",L),t}const $={__proto__:null,[Symbol.iterator](){return H(this,Symbol.iterator,xt)},concat(...t){return U(this).concat(...t.map((t=>(0,r.cy)(t)?U(t):t)))},entries(){return H(this,"entries",(t=>(t[1]=xt(t[1]),t)))},every(t,e){return z(this,"every",t,e,void 0,arguments)},filter(t,e){return z(this,"filter",t,e,(t=>t.map(xt)),arguments)},find(t,e){return z(this,"find",t,e,xt,arguments)},findIndex(t,e){return z(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return z(this,"findLast",t,e,xt,arguments)},findLastIndex(t,e){return z(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return z(this,"forEach",t,e,void 0,arguments)},includes(...t){return q(this,"includes",t)},indexOf(...t){return q(this,"indexOf",t)},join(t){return U(this).join(t)},lastIndexOf(...t){return q(this,"lastIndexOf",t)},map(t,e){return z(this,"map",t,e,void 0,arguments)},pop(){return K(this,"pop")},push(...t){return K(this,"push",t)},reduce(t,...e){return W(this,"reduce",t,e)},reduceRight(t,...e){return W(this,"reduceRight",t,e)},shift(){return K(this,"shift")},some(t,e){return z(this,"some",t,e,void 0,arguments)},splice(...t){return K(this,"splice",t)},toReversed(){return U(this).toReversed()},toSorted(t){return U(this).toSorted(t)},toSpliced(...t){return U(this).toSpliced(...t)},unshift(...t){return K(this,"unshift",t)},values(){return H(this,"values",xt)}};function H(t,e,n){const r=V(t),i=r[e]();return r===t||Ct(t)||(i._next=i.next,i.next=()=>{const t=i._next();return t.value&&(t.value=n(t.value)),t}),i}const B=Array.prototype;function z(t,e,n,r,i,o){const s=V(t),a=s!==t&&!Ct(t),c=s[e];if(c!==B[e]){const e=c.apply(t,o);return a?xt(e):e}let u=n;s!==t&&(a?u=function(e,r){return n.call(this,xt(e),r,t)}:n.length>2&&(u=function(e,r){return n.call(this,e,r,t)}));const l=c.call(s,u,r);return a&&i?i(l):l}function W(t,e,n,r){const i=V(t);let o=n;return i!==t&&(Ct(t)?n.length>3&&(o=function(e,r,i){return n.call(this,e,r,i,t)}):o=function(e,r,i){return n.call(this,e,xt(r),i,t)}),i[e](o,...r)}function q(t,e,n){const r=It(t);F(r,"iterate",L);const i=r[e](...n);return-1!==i&&!1!==i||!St(n[0])?i:(n[0]=It(n[0]),r[e](...n))}function K(t,e,n=[]){I(),g();const r=It(t)[e].apply(t,n);return y(),k(),r}const G=(0,r.pD)("__proto__,__v_isRef,__isVue"),Y=new Set(Object.getOwnPropertyNames(Symbol).filter((t=>"arguments"!==t&&"caller"!==t)).map((t=>Symbol[t])).filter(r.Bm));function Q(t){(0,r.Bm)(t)||(t=String(t));const e=It(this);return F(e,"has",t),e.hasOwnProperty(t)}class X{constructor(t=!1,e=!1){this._isReadonly=t,this._isShallow=e}get(t,e,n){if("__v_skip"===e)return t["__v_skip"];const i=this._isReadonly,o=this._isShallow;if("__v_isReactive"===e)return!i;if("__v_isReadonly"===e)return i;if("__v_isShallow"===e)return o;if("__v_raw"===e)return n===(i?o?mt:pt:o?ft:dt).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const s=(0,r.cy)(t);if(!i){let t;if(s&&(t=$[e]))return t;if("hasOwnProperty"===e)return Q}const a=Reflect.get(t,e,At(t)?t:n);return((0,r.Bm)(e)?Y.has(e):G(e))?a:(i||F(t,"get",e),o?a:At(a)?s&&(0,r.yI)(e)?a:a.value:(0,r.Gv)(a)?i?wt(a):vt(a):a)}}class J extends X{constructor(t=!1){super(!1,t)}set(t,e,n,i){let o=t[e];if(!this._isShallow){const e=Tt(o);if(Ct(n)||Tt(n)||(o=It(o),n=It(n)),!(0,r.cy)(t)&&At(o)&&!At(n))return!e&&(o.value=n,!0)}const s=(0,r.cy)(t)&&(0,r.yI)(e)?Number(e)<t.length:(0,r.$3)(t,e),a=Reflect.set(t,e,n,At(t)?t:i);return t===It(i)&&(s?(0,r.$H)(n,o)&&j(t,"set",e,n,o):j(t,"add",e,n)),a}deleteProperty(t,e){const n=(0,r.$3)(t,e),i=t[e],o=Reflect.deleteProperty(t,e);return o&&n&&j(t,"delete",e,void 0,i),o}has(t,e){const n=Reflect.has(t,e);return(0,r.Bm)(e)&&Y.has(e)||F(t,"has",e),n}ownKeys(t){return F(t,"iterate",(0,r.cy)(t)?"length":R),Reflect.ownKeys(t)}}class Z extends X{constructor(t=!1){super(!0,t)}set(t,e){return!0}deleteProperty(t,e){return!0}}const tt=new J,et=new Z,nt=new J(!0),rt=t=>t,it=t=>Reflect.getPrototypeOf(t);function ot(t,e,n){return function(...i){const o=this["__v_raw"],s=It(o),a=(0,r.CE)(s),c="entries"===t||t===Symbol.iterator&&a,u="keys"===t&&a,l=o[t](...i),h=n?rt:e?Dt:xt;return!e&&F(s,"iterate",u?M:R),{next(){const{value:t,done:e}=l.next();return e?{value:t,done:e}:{value:c?[h(t[0]),h(t[1])]:h(t),done:e}},[Symbol.iterator](){return this}}}}function st(t){return function(...e){return"delete"!==t&&("clear"===t?void 0:this)}}function at(t,e){const n={get(n){const i=this["__v_raw"],o=It(i),s=It(n);t||((0,r.$H)(n,s)&&F(o,"get",n),F(o,"get",s));const{has:a}=it(o),c=e?rt:t?Dt:xt;return a.call(o,n)?c(i.get(n)):a.call(o,s)?c(i.get(s)):void(i!==o&&i.get(n))},get size(){const e=this["__v_raw"];return!t&&F(It(e),"iterate",R),Reflect.get(e,"size",e)},has(e){const n=this["__v_raw"],i=It(n),o=It(e);return t||((0,r.$H)(e,o)&&F(i,"has",e),F(i,"has",o)),e===o?n.has(e):n.has(e)||n.has(o)},forEach(n,r){const i=this,o=i["__v_raw"],s=It(o),a=e?rt:t?Dt:xt;return!t&&F(s,"iterate",R),o.forEach(((t,e)=>n.call(r,a(t),a(e),i)))}};(0,r.X$)(n,t?{add:st("add"),set:st("set"),delete:st("delete"),clear:st("clear")}:{add(t){e||Ct(t)||Tt(t)||(t=It(t));const n=It(this),r=it(n),i=r.has.call(n,t);return i||(n.add(t),j(n,"add",t,t)),this},set(t,n){e||Ct(n)||Tt(n)||(n=It(n));const i=It(this),{has:o,get:s}=it(i);let a=o.call(i,t);a||(t=It(t),a=o.call(i,t));const c=s.call(i,t);return i.set(t,n),a?(0,r.$H)(n,c)&&j(i,"set",t,n,c):j(i,"add",t,n),this},delete(t){const e=It(this),{has:n,get:r}=it(e);let i=n.call(e,t);i||(t=It(t),i=n.call(e,t));const o=r?r.call(e,t):void 0,s=e.delete(t);return i&&j(e,"delete",t,void 0,o),s},clear(){const t=It(this),e=0!==t.size,n=void 0,r=t.clear();return e&&j(t,"clear",void 0,void 0,n),r}});const i=["keys","values","entries",Symbol.iterator];return i.forEach((r=>{n[r]=ot(r,t,e)})),n}function ct(t,e){const n=at(t,e);return(e,i,o)=>"__v_isReactive"===i?!t:"__v_isReadonly"===i?t:"__v_raw"===i?e:Reflect.get((0,r.$3)(n,i)&&i in e?n:e,i,o)}const ut={get:ct(!1,!1)},lt={get:ct(!1,!0)},ht={get:ct(!0,!1)};const dt=new WeakMap,ft=new WeakMap,pt=new WeakMap,mt=new WeakMap;function gt(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function yt(t){return t["__v_skip"]||!Object.isExtensible(t)?0:gt((0,r.Zf)(t))}function vt(t){return Tt(t)?t:bt(t,!1,tt,ut,dt)}function _t(t){return bt(t,!1,nt,lt,ft)}function wt(t){return bt(t,!0,et,ht,pt)}function bt(t,e,n,i,o){if(!(0,r.Gv)(t))return t;if(t["__v_raw"]&&(!e||!t["__v_isReactive"]))return t;const s=o.get(t);if(s)return s;const a=yt(t);if(0===a)return t;const c=new Proxy(t,2===a?i:n);return o.set(t,c),c}function Et(t){return Tt(t)?Et(t["__v_raw"]):!(!t||!t["__v_isReactive"])}function Tt(t){return!(!t||!t["__v_isReadonly"])}function Ct(t){return!(!t||!t["__v_isShallow"])}function St(t){return!!t&&!!t["__v_raw"]}function It(t){const e=t&&t["__v_raw"];return e?It(e):t}function kt(t){return!(0,r.$3)(t,"__v_skip")&&Object.isExtensible(t)&&(0,r.yQ)(t,"__v_skip",!0),t}const xt=t=>(0,r.Gv)(t)?vt(t):t,Dt=t=>(0,r.Gv)(t)?wt(t):t;function At(t){return!!t&&!0===t["__v_isRef"]}function Nt(t){return Pt(t,!1)}function Ot(t){return Pt(t,!0)}function Pt(t,e){return At(t)?t:new Rt(t,e)}class Rt{constructor(t,e){this.dep=new N,this["__v_isRef"]=!0,this["__v_isShallow"]=!1,this._rawValue=e?t:It(t),this._value=e?t:xt(t),this["__v_isShallow"]=e}get value(){return this.dep.track(),this._value}set value(t){const e=this._rawValue,n=this["__v_isShallow"]||Ct(t)||Tt(t);t=n?t:It(t),(0,r.$H)(t,e)&&(this._rawValue=t,this._value=n?t:xt(t),this.dep.trigger())}}function Mt(t){return At(t)?t.value:t}function Lt(t){return(0,r.Tn)(t)?t():Mt(t)}const Ft={get:(t,e,n)=>"__v_raw"===e?t:Mt(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return At(i)&&!At(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function jt(t){return Et(t)?t:new Proxy(t,Ft)}class Ut{constructor(t,e,n){this.fn=t,this.setter=e,this._value=void 0,this.dep=new N(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=D-1,this.next=void 0,this.effect=this,this["__v_isReadonly"]=!e,this.isSSR=n}notify(){if(this.flags|=16,!(8&this.flags||o===this))return m(this,!0),!0}get value(){const t=this.dep.track();return b(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Vt(t,e,n=!1){let i,o;(0,r.Tn)(t)?i=t:(i=t.get,o=t.set);const s=new Ut(i,o,n);return s}const $t={},Ht=new WeakMap;let Bt;function zt(t,e=!1,n=Bt){if(n){let e=Ht.get(n);e||Ht.set(n,e=[]),e.push(t)}else 0}function Wt(t,e,n=r.MZ){const{immediate:i,deep:o,once:s,scheduler:a,augmentJob:u,call:l}=n,d=t=>o?t:Ct(t)||!1===o||0===o?qt(t,1):qt(t);let f,p,m,g,y=!1,v=!1;if(At(t)?(p=()=>t.value,y=Ct(t)):Et(t)?(p=()=>d(t),y=!0):(0,r.cy)(t)?(v=!0,y=t.some((t=>Et(t)||Ct(t))),p=()=>t.map((t=>At(t)?t.value:Et(t)?d(t):(0,r.Tn)(t)?l?l(t,2):t():void 0))):p=(0,r.Tn)(t)?e?l?()=>l(t,2):t:()=>{if(m){I();try{m()}finally{k()}}const e=Bt;Bt=f;try{return l?l(t,3,[g]):t(g)}finally{Bt=e}}:r.tE,e&&o){const t=p,e=!0===o?1/0:o;p=()=>qt(t(),e)}const _=c(),w=()=>{f.stop(),_&&_.active&&(0,r.TF)(_.effects,f)};if(s&&e){const t=e;e=(...e)=>{t(...e),w()}}let b=v?new Array(t.length).fill($t):$t;const E=t=>{if(1&f.flags&&(f.dirty||t))if(e){const t=f.run();if(o||y||(v?t.some(((t,e)=>(0,r.$H)(t,b[e]))):(0,r.$H)(t,b))){m&&m();const n=Bt;Bt=f;try{const n=[t,b===$t?void 0:v&&b[0]===$t?[]:b,g];l?l(e,3,n):e(...n),b=t}finally{Bt=n}}}else f.run()};return u&&u(E),f=new h(p),f.scheduler=a?()=>a(E,!1):E,g=t=>zt(t,!1,f),m=f.onStop=()=>{const t=Ht.get(f);if(t){if(l)l(t,4);else for(const e of t)e();Ht.delete(f)}},e?i?E(!0):b=f.run():a?a(E.bind(null,!0),!0):f.run(),w.pause=f.pause.bind(f),w.resume=f.resume.bind(f),w.stop=w,w}function qt(t,e=1/0,n){if(e<=0||!(0,r.Gv)(t)||t["__v_skip"])return t;if(n=n||new Set,n.has(t))return t;if(n.add(t),e--,At(t))qt(t.value,e,n);else if((0,r.cy)(t))for(let r=0;r<t.length;r++)qt(t[r],e,n);else if((0,r.vM)(t)||(0,r.CE)(t))t.forEach((t=>{qt(t,e,n)}));else if((0,r.Qd)(t)){for(const r in t)qt(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&qt(t[r],e,n)}return t}},263:function(t,e,n){"use strict";n.d(e,{Nz:function(){return ua},zJ:function(){return oa},Ge:function(){return ia}});n(4114),n(8111),n(2489),n(7588),n(1701),n(8237);var r=n(6509),i=n(144),o=n(6768),s=(n(1148),n(116),n(7642),n(8004),n(3853),n(5876),n(2475),n(5024),n(1698),n(6086)),a=n(798),c=n(2455),u=n(6189);const l="@firebase/database",h="1.1.0";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let d="";function f(t){d=t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,c.As)(e))}get(t){const e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,c.$L)(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e}get(t){return(0,c.gR)(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g=function(t){try{if("undefined"!==typeof window&&"undefined"!==typeof window[t]){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new p(e)}}catch(e){}return new m},y=g("localStorage"),v=g("sessionStorage"),_=new u.Vy("@firebase/database"),w=function(){let t=1;return function(){return t++}}(),b=function(t){const e=(0,c.kj)(t),n=new c.gz;n.update(e);const r=n.digest();return c.K3.encodeByteArray(r)},E=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?e+=E.apply(null,r):e+="object"===typeof r?(0,c.As)(r):r,e+=" "}return e};let T=null,C=!0;const S=function(t,e){(0,c.vA)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(_.logLevel=u.$b.VERBOSE,T=_.log.bind(_),e&&v.set("logging_enabled",!0)):"function"===typeof t?T=t:(T=null,v.remove("logging_enabled"))},I=function(...t){if(!0===C&&(C=!1,null===T&&!0===v.get("logging_enabled")&&S(!0)),T){const e=E.apply(null,t);T(e)}},k=function(t){return function(...e){I(t,...e)}},x=function(...t){const e="FIREBASE INTERNAL ERROR: "+E(...t);_.error(e)},D=function(...t){const e=`FIREBASE FATAL ERROR: ${E(...t)}`;throw _.error(e),new Error(e)},A=function(...t){const e="FIREBASE WARNING: "+E(...t);_.warn(e)},N=function(){"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&A("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},O=function(t){return"number"===typeof t&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},P=function(t){if((0,c.$g)()||"complete"===document.readyState)t();else{let e=!1;const n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}},R="[MIN_NAME]",M="[MAX_NAME]",L=function(t,e){if(t===e)return 0;if(t===R||e===M)return-1;if(e===R||t===M)return 1;{const n=G(t),r=G(e);return null!==n?null!==r?n-r===0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1}},F=function(t,e){return t===e?0:t<e?-1:1},j=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+(0,c.As)(e))},U=function(t){if("object"!==typeof t||null===t)return(0,c.As)(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)0!==r&&(n+=","),n+=(0,c.As)(e[r]),n+=":",n+=U(t[e[r]]);return n+="}",n},V=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function $(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const H=function(t){(0,c.vA)(!O(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,o,s,a,u;0===t?(o=0,s=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),o=a+r,s=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(o=0,s=Math.round(t/Math.pow(2,1-r-n))));const l=[];for(u=n;u;u-=1)l.push(s%2?1:0),s=Math.floor(s/2);for(u=e;u;u-=1)l.push(o%2?1:0),o=Math.floor(o/2);l.push(i?1:0),l.reverse();const h=l.join("");let d="";for(u=0;u<64;u+=8){let t=parseInt(h.substr(u,8),2).toString(16);1===t.length&&(t="0"+t),d+=t}return d.toLowerCase()},B=function(){return!("object"!==typeof window||!window["chrome"]||!window["chrome"]["extension"]||/^chrome/.test(window.location.href))},z=function(){return"object"===typeof Windows&&"object"===typeof Windows.UI};const W=new RegExp("^-?(0*)\\d{1,10}$"),q=-2147483648,K=2147483647,G=function(t){if(W.test(t)){const e=Number(t);if(e>=q&&e<=K)return e}return null},Y=function(t){try{t()}catch(e){setTimeout((()=>{const t=e.stack||"";throw A("Exception was thrown by user callback.",t),e}),Math.floor(0))}},Q=function(){const t="object"===typeof window&&window["navigator"]&&window["navigator"]["userAgent"]||"";return t.search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},X=function(t,e){const n=setTimeout(t,e);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno["unrefTimer"]?Deno.unrefTimer(n):"object"===typeof n&&n["unref"]&&n["unref"](),n};
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class J{constructor(t,e){this.appCheckProvider=e,this.appName=t.name,(0,s.xZ)(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.appCheck=e?.getImmediate({optional:!0}),this.appCheck||e?.get().then((t=>this.appCheck=t))}getToken(t){if(this.serverAppAppCheckToken){if(t)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(t):new Promise(((e,n)=>{setTimeout((()=>{this.appCheck?this.getToken(t).then(e,n):e(null)}),0)}))}addTokenChangeListener(t){this.appCheckProvider?.get().then((e=>e.addTokenListener(t)))}notifyForInvalidToken(){A(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(t,e,n){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((t=>this.auth_=t))}getToken(t){return this.auth_?this.auth_.getToken(t).catch((t=>t&&"auth/token-not-initialized"===t.code?(I("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t))):new Promise(((e,n)=>{setTimeout((()=>{this.auth_?this.getToken(t).then(e,n):e(null)}),0)}))}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then((e=>e.addAuthTokenListener(t)))}removeTokenChangeListener(t){this.authProvider_.get().then((e=>e.removeAuthTokenListener(t)))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',A(t)}}class tt{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}tt.OWNER="owner";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const et="5",nt="v",rt="s",it="r",ot="f",st=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,at="ls",ct="p",ut="ac",lt="websocket",ht="long_polling";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class dt{constructor(t,e,n,r,i=!1,o="",s=!1,a=!1,c=null){this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.isUsingEmulator=a,this.emulatorOptions=c,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=y.get("host:"+t)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&y.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){const t=this.secure?"https://":"http://",e=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${e}`}}function ft(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function pt(t,e,n){let r;if((0,c.vA)("string"===typeof e,"typeof type must == string"),(0,c.vA)("object"===typeof n,"typeof params must == object"),e===lt)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==ht)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}ft(t)&&(n["ns"]=t.namespace);const i=[];return $(n,((t,e)=>{i.push(t+"="+e)})),r+i.join("&")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(){this.counters_={}}incrementCounter(t,e=1){(0,c.gR)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return(0,c.A4)(this.counters_)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gt={},yt={};function vt(t){const e=t.toString();return gt[e]||(gt[e]=new mt),gt[e]}function _t(t,e){const n=t.toString();return yt[n]||(yt[n]=e()),yt[n]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){this.pendingResponses[t]=e;while(this.pendingResponses[this.currentResponseNum]){const t=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let e=0;e<t.length;++e)t[e]&&Y((()=>{this.onMessage_(t[e])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bt="start",Et="close",Tt="pLPCommand",Ct="pRTLPCB",St="id",It="pw",kt="ser",xt="cb",Dt="seg",At="ts",Nt="d",Ot="dframe",Pt=1870,Rt=30,Mt=Pt-Rt,Lt=25e3,Ft=3e4;class jt{constructor(t,e,n,r,i,o,s){this.connId=t,this.repoInfo=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=k(t),this.stats_=vt(e),this.urlFn=t=>(this.appCheckToken&&(t[ut]=this.appCheckToken),pt(e,ht,t))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new wt(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(Ft)),P((()=>{if(this.isClosed_)return;this.scriptTagHolder=new Ut(((...t)=>{const[e,n,r,i,o]=t;if(this.incrementIncomingBytes_(t),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,e===bt)this.id=n,this.password=r;else{if(e!==Et)throw new Error("Unrecognized command received: "+e);n?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(n,(()=>{this.onClosed_()}))):this.onClosed_()}}),((...t)=>{const[e,n]=t;this.incrementIncomingBytes_(t),this.myPacketOrderer.handleResponse(e,n)}),(()=>{this.onClosed_()}),this.urlFn);const t={};t[bt]="t",t[kt]=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(t[xt]=this.scriptTagHolder.uniqueCallbackIdentifier),t[nt]=et,this.transportSessionId&&(t[rt]=this.transportSessionId),this.lastSessionId&&(t[at]=this.lastSessionId),this.applicationId&&(t[ct]=this.applicationId),this.appCheckToken&&(t[ut]=this.appCheckToken),"undefined"!==typeof location&&location.hostname&&st.test(location.hostname)&&(t[it]=ot);const e=this.urlFn(t);this.log_("Connecting via long-poll to "+e),this.scriptTagHolder.addTag(e,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){jt.forceAllow_=!0}static forceDisallow(){jt.forceDisallow_=!0}static isAvailable(){return!(0,c.$g)()&&(!!jt.forceAllow_||!jt.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!B()&&!z())}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const e=(0,c.As)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const n=(0,c.KA)(e),r=V(n,Mt);for(let i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}addDisconnectPingFrame(t,e){if((0,c.$g)())return;this.myDisconnFrame=document.createElement("iframe");const n={};n[Ot]="t",n[St]=t,n[It]=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const e=(0,c.As)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class Ut{constructor(t,e,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,c.$g)())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=w(),window[Tt+this.uniqueCallbackIdentifier]=t,window[Ct+this.uniqueCallbackIdentifier]=e,this.myIFrame=Ut.createIFrame_();let n="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)){const t=document.domain;n='<script>document.domain="'+t+'";<\/script>'}const r="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(r),this.myIFrame.doc.close()}catch(i){I("frame writing exception"),i.stack&&I(i.stack),I(i)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{const e=t.contentWindow.document;e||I("No IE domain setting required")}catch(e){const n=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){this.myID=t,this.myPW=e,this.alive=!0;while(this.newRequest_());}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t[St]=this.myID,t[It]=this.myPW,t[kt]=this.currentSerial;let e=this.urlFn(t),n="",r=0;while(this.pendingSegs.length>0){const t=this.pendingSegs[0];if(!(t.d.length+Rt+n.length<=Pt))break;{const t=this.pendingSegs.shift();n=n+"&"+Dt+r+"="+t.seg+"&"+At+r+"="+t.ts+"&"+Nt+r+"="+t.d,r++}}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1}enqueueSegment(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);const n=()=>{this.outstandingRequests.delete(e),this.newRequest_()},r=setTimeout(n,Math.floor(Lt)),i=()=>{clearTimeout(r),n()};this.addTag(t,i)}addTag(t,e){(0,c.$g)()?this.doNodeLongPoll(t,e):setTimeout((()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=t,n.onload=n.onreadystatechange=function(){const t=n.readyState;t&&"loaded"!==t&&"complete"!==t||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),e())},n.onerror=()=>{I("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(n){}}),Math.floor(1))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vt=16384,$t=45e3;let Ht=null;"undefined"!==typeof MozWebSocket?Ht=MozWebSocket:"undefined"!==typeof WebSocket&&(Ht=WebSocket);class Bt{constructor(t,e,n,r,i,o,s){this.connId=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=k(this.connId),this.stats_=vt(e),this.connURL=Bt.connectionURL_(e,o,s,r,n),this.nodeAdmin=e.nodeAdmin}static connectionURL_(t,e,n,r,i){const o={};return o[nt]=et,!(0,c.$g)()&&"undefined"!==typeof location&&location.hostname&&st.test(location.hostname)&&(o[it]=ot),e&&(o[rt]=e),n&&(o[at]=n),r&&(o[ut]=r),i&&(o[ct]=i),pt(t,lt,o)}open(t,e){this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,y.set("previous_websocket_failure",!0);try{let t;if((0,c.$g)()){const e=this.nodeAdmin?"AdminNode":"Node";t={headers:{"User-Agent":`Firebase/${et}/${d}/${process.platform}/${e}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(t.headers["Authorization"]=`Bearer ${this.authToken}`),this.appCheckToken&&(t.headers["X-Firebase-AppCheck"]=this.appCheckToken);const n={NODE_ENV:"production",BASE_URL:"/"},r=0===this.connURL.indexOf("wss://")?n["HTTPS_PROXY"]||n["https_proxy"]:n["HTTP_PROXY"]||n["http_proxy"];r&&(t["proxy"]={origin:r})}this.mySock=new Ht(this.connURL,[],t)}catch(n){this.log_("Error instantiating WebSocket.");const t=n.message||n.data;return t&&this.log_(t),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=t=>{this.handleIncomingFrame(t)},this.mySock.onerror=t=>{this.log_("WebSocket error.  Closing connection.");const e=t.message||t.data;e&&this.log_(e),this.onClosed_()}}start(){}static forceDisallow(){Bt.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){const e=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(e);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==Ht&&!Bt.forceDisallow_}static previouslyFailed(){return y.isInMemoryStorage||!0===y.get("previous_websocket_failure")}markConnectionHealthy(){y.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const e=(0,c.$L)(t);this.onMessage(e)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,c.vA)(null===this.frames,"We already have a frame buffer"),t.length<=6){const e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const e=t["data"];if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{const t=this.extractFrameCount_(e);null!==t&&this.appendFrame_(t)}}send(t){this.resetKeepAlive();const e=(0,c.As)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const n=V(e,Vt);n.length>1&&this.sendString_(String(n.length));for(let r=0;r<n.length;r++)this.sendString_(n[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor($t))}sendString_(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Bt.responsesRequiredToBeHealthy=2,Bt.healthyTimeout=3e4;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class zt{static get ALL_TRANSPORTS(){return[jt,Bt]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(t){this.initTransports_(t)}initTransports_(t){const e=Bt&&Bt["isAvailable"]();let n=e&&!Bt.previouslyFailed();if(t.webSocketOnly&&(e||A("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[Bt];else{const t=this.transports_=[];for(const e of zt.ALL_TRANSPORTS)e&&e["isAvailable"]()&&t.push(e);zt.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}zt.globalTransportInitialized_=!1;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Wt=6e4,qt=5e3,Kt=10240,Gt=102400,Yt="t",Qt="d",Xt="s",Jt="r",Zt="e",te="o",ee="a",ne="n",re="p",ie="h";class oe{constructor(t,e,n,r,i,o,s,a,c,u){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=a,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=k("c:"+this.id+":"),this.transportManager_=new zt(e),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t["responsesRequiredToBeHealthy"]||0;const e=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(e,n)}),Math.floor(0));const r=t["healthyTimeout"]||0;r>0&&(this.healthyTimeout_=X((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Gt?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Kt?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{2!==this.state_&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){const e={t:"d",d:t};this.sendData_(e)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(Yt in t){const e=t[Yt];e===ee?this.upgradeIfSecondaryHealthy_():e===Jt?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):e===te&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const e=j("t",t),n=j("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:re,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:ee,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:ne,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const e=j("t",t),n=j("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const e=j(Yt,t);if(Qt in t){const n=t[Qt];if(e===ie){const t={...n};this.repoInfo_.isUsingEmulator&&(t.h=this.repoInfo_.host),this.onHandshake_(t)}else if(e===ne){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let t=0;t<this.pendingDataMessages.length;++t)this.onDataMessage_(this.pendingDataMessages[t]);this.pendingDataMessages=[],this.tryCleanupConnection()}else e===Xt?this.onConnectionShutdown_(n):e===Jt?this.onReset_(n):e===Zt?x("Server Error: "+n):e===te?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):x("Unknown control packet command: "+e)}}onHandshake_(t){const e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),et!==n&&A("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t["responsesRequiredToBeHealthy"]||0;const e=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,n),X((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(Wt))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):X((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(qt))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:re,d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()}onConnectionLost_(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(y.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{put(t,e,n,r){}merge(t,e,n,r){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,n){}onDisconnectMerge(t,e,n){}onDisconnectCancel(t,e){}reportStats(t){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(t){this.allowedEvents_=t,this.listeners_={},(0,c.vA)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){const n=[...this.listeners_[t]];for(let t=0;t<n.length;t++)n[t].callback.apply(n[t].context,e)}}on(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});const r=this.getInitialEvent(t);r&&e.apply(n,r)}off(t,e,n){this.validateEventType_(t);const r=this.listeners_[t]||[];for(let i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)}validateEventType_(t){(0,c.vA)(this.allowedEvents_.find((e=>e===t)),"Unknown event: "+t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce extends ae{static getInstance(){return new ce}constructor(){super(["online"]),this.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||(0,c.jZ)()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}getInitialEvent(t){return(0,c.vA)("online"===t,"Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ue=32,le=768;class he{constructor(t,e){if(void 0===e){this.pieces_=t.split("/");let e=0;for(let t=0;t<this.pieces_.length;t++)this.pieces_[t].length>0&&(this.pieces_[e]=this.pieces_[t],e++);this.pieces_.length=e,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"}}function de(){return new he("")}function fe(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function pe(t){return t.pieces_.length-t.pieceNum_}function me(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new he(t.pieces_,e)}function ge(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function ye(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function ve(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function _e(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new he(e,0)}function we(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof he)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const t=e.split("/");for(let e=0;e<t.length;e++)t[e].length>0&&n.push(t[e])}return new he(n,0)}function be(t){return t.pieceNum_>=t.pieces_.length}function Ee(t,e){const n=fe(t),r=fe(e);if(null===n)return e;if(n===r)return Ee(me(t),me(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Te(t,e){if(pe(t)!==pe(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Ce(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(pe(t)>pe(e))return!1;while(n<t.pieces_.length){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class Se{constructor(t,e){this.errorPrefix_=e,this.parts_=ve(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=(0,c.OE)(this.parts_[n]);xe(this)}}function Ie(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=(0,c.OE)(e),xe(t)}function ke(t){const e=t.parts_.pop();t.byteLength_-=(0,c.OE)(e),t.parts_.length>0&&(t.byteLength_-=1)}function xe(t){if(t.byteLength_>le)throw new Error(t.errorPrefix_+"has a key path longer than "+le+" bytes ("+t.byteLength_+").");if(t.parts_.length>ue)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+ue+") or object contains a cycle "+De(t))}function De(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae extends ae{static getInstance(){return new Ae}constructor(){let t,e;super(["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document["hidden"]?(e="visibilitychange",t="hidden"):"undefined"!==typeof document["mozHidden"]?(e="mozvisibilitychange",t="mozHidden"):"undefined"!==typeof document["msHidden"]?(e="msvisibilitychange",t="msHidden"):"undefined"!==typeof document["webkitHidden"]&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,(()=>{const e=!document[t];e!==this.visible_&&(this.visible_=e,this.trigger("visible",e))}),!1)}getInitialEvent(t){return(0,c.vA)("visible"===t,"Unknown event type: "+t),[this.visible_]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ne=1e3,Oe=3e5,Pe=3e4,Re=1.3,Me=3e4,Le="server_kill",Fe=3;class je extends se{constructor(t,e,n,r,i,o,s,a){if(super(),this.repoInfo_=t,this.applicationId_=e,this.onDataUpdate_=n,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=s,this.authOverride_=a,this.id=je.nextPersistentConnectionId_++,this.log_=k("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ne,this.maxReconnectDelay_=Oe,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a&&!(0,c.$g)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Ae.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&ce.getInstance().on("online",this.onOnline_,this)}sendRequest(t,e,n){const r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_((0,c.As)(i)),(0,c.vA)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}get(t){this.initConnection_();const e=new c.cY,n={p:t._path.toString(),q:t._queryObject},r={action:"g",request:n,onComplete:t=>{const n=t["d"];"ok"===t["s"]?e.resolve(n):e.reject(n)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),e.promise}listen(t,e,n,r){this.initConnection_();const i=t._queryIdentifier,o=t._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),(0,c.vA)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,c.vA)(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const s={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(o).set(i,s),this.connected_&&this.sendListen_(s)}sendGet_(t){const e=this.outstandingGets_[t];this.sendRequest("g",e.request,(n=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),e.onComplete&&e.onComplete(n)}))}sendListen_(t){const e=t.query,n=e._path.toString(),r=e._queryIdentifier;this.log_("Listen on "+n+" for "+r);const i={p:n},o="q";t.tag&&(i["q"]=e._queryObject,i["t"]=t.tag),i["h"]=t.hashFn(),this.sendRequest(o,i,(i=>{const o=i["d"],s=i["s"];je.warnOnListenWarnings_(o,e);const a=this.listens.get(n)&&this.listens.get(n).get(r);a===t&&(this.log_("listen response",i),"ok"!==s&&this.removeListen_(n,r),t.onComplete&&t.onComplete(s,o))}))}static warnOnListenWarnings_(t,e){if(t&&"object"===typeof t&&(0,c.gR)(t,"w")){const n=(0,c.yw)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const t='".indexOn": "'+e._queryParams.getIndex().toString()+'"',n=e._path.toString();A(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${t} at ${n} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){const e=t&&40===t.length;(e||(0,c.qc)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Pe)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,e=(0,c.Cv)(t)?"auth":"gauth",n={cred:t};null===this.authOverride_?n["noauth"]=!0:"object"===typeof this.authOverride_&&(n["authvar"]=this.authOverride_),this.sendRequest(e,n,(e=>{const n=e["s"],r=e["d"]||"error";this.authToken_===t&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,r))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(t=>{const e=t["s"],n=t["d"]||"error";"ok"===e?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(e,n)}))}unlisten(t,e){const n=t._path.toString(),r=t._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),(0,c.vA)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");const i=this.removeListen_(n,r);i&&this.connected_&&this.sendUnlisten_(n,r,t._queryObject,e)}sendUnlisten_(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);const i={p:t},o="n";r&&(i["q"]=n,i["t"]=r),this.sendRequest(o,i)}onDisconnectPut(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})}onDisconnectMerge(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})}onDisconnectCancel(t,e){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})}sendOnDisconnect_(t,e,n,r){const i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,(t=>{r&&setTimeout((()=>{r(t["s"],t["d"])}),Math.floor(0))}))}put(t,e,n,r){this.putInternal("p",t,e,n,r)}merge(t,e,n,r){this.putInternal("m",t,e,n,r)}putInternal(t,e,n,r,i){this.initConnection_();const o={p:e,d:n};void 0!==i&&(o["h"]=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++;const s=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(s):this.log_("Buffering put: "+e)}sendPut_(t){const e=this.outstandingPuts_[t].action,n=this.outstandingPuts_[t].request,r=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(e,n,(n=>{this.log_(e+" response",n),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(n["s"],n["d"])}))}reportStats(t){if(this.connected_){const e={c:t};this.log_("reportStats",e),this.sendRequest("s",e,(t=>{const e=t["s"];if("ok"!==e){const e=t["d"];this.log_("reportStats","Error sending stats: "+e)}}))}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,c.As)(t));const e=t["r"],n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t["b"]))}else{if("error"in t)throw"A server-side error has occurred: "+t["error"];"a"in t&&this.onDataPush_(t["a"],t["b"])}}onDataPush_(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e["p"],e["d"],!1,e["t"]):"m"===t?this.onDataUpdate_(e["p"],e["d"],!0,e["t"]):"c"===t?this.onListenRevoked_(e["p"],e["q"]):"ac"===t?this.onAuthRevoked_(e["s"],e["d"]):"apc"===t?this.onAppCheckRevoked_(e["s"],e["d"]):"sd"===t?this.onSecurityDebugPacket_(e):x("Unrecognized action received from server: "+(0,c.As)(t)+"\nAre you using the latest client?")}onReady_(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,c.vA)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ne,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Ne,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){const t=(new Date).getTime()-this.lastConnectionEstablishedTime_;t>Me&&(this.reconnectDelay_=Ne),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();const t=Math.max(0,(new Date).getTime()-this.lastConnectionAttemptTime_);let e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Re)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),e=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+je.nextConnectionId_++,i=this.lastSessionId;let o=!1,s=null;const a=function(){s?s.close():(o=!0,n())},u=function(t){(0,c.vA)(s,"sendRequest call when we're not connected not allowed."),s.sendRequest(t)};this.realtime_={close:a,sendRequest:u};const l=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[a,c]=await Promise.all([this.authTokenProvider_.getToken(l),this.appCheckTokenProvider_.getToken(l)]);o?I("getToken() completed but was canceled"):(I("getToken() completed. Creating connection."),this.authToken_=a&&a.accessToken,this.appCheckToken_=c&&c.token,s=new oe(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,e,n,(t=>{A(t+" ("+this.repoInfo_.toString()+")"),this.interrupt(Le)}),i))}catch(x){this.log_("Failed to get token: "+x),o||(this.repoInfo_.nodeAdmin&&A(x),a())}}}interrupt(t){I("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){I("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,c.Im)(this.interruptReasons_)&&(this.reconnectDelay_=Ne,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,e){let n;n=e?e.map((t=>U(t))).join("$"):"default";const r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(t,e){const n=new he(t).toString();let r;if(this.listens.has(n)){const t=this.listens.get(n);r=t.get(e),t.delete(e),0===t.size&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(t,e){I("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Fe&&(this.reconnectDelay_=Pe,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,e){I("App check token revoked: "+t+"/"+e),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Fe&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t["msg"].replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const e of t.values())this.sendListen_(e);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);while(this.onDisconnectRequestQueue_.length){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let e="js";(0,c.$g)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+d.replace(/\./g,"-")]=1,(0,c.jZ)()?t["framework.cordova"]=1:(0,c.lV)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=ce.getInstance().currentlyOnline();return(0,c.Im)(this.interruptReasons_)&&t}}je.nextPersistentConnectionId_=0,je.nextConnectionId_=0;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ue{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new Ue(t,e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){const n=new Ue(R,t),r=new Ue(R,e);return 0!==this.compare(n,r)}minPost(){return Ue.MIN}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $e;class He extends Ve{static get __EMPTY_NODE(){return $e}static set __EMPTY_NODE(t){$e=t}compare(t,e){return L(t.name,e.name)}isDefinedOn(t){throw(0,c.Hk)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return Ue.MIN}maxPost(){return new Ue(M,$e)}makePost(t,e){return(0,c.vA)("string"===typeof t,"KeyIndex indexValue must always be a string."),new Ue(t,$e)}toString(){return".key"}}const Be=new He;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(t,e,n,r,i=null){this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let o=1;while(!t.isEmpty())if(o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_){e=e.left;while(!e.isEmpty())this.nodeStack_.push(e),e=e.right}else{e=e.right;while(!e.isEmpty())this.nodeStack_.push(e),e=e.left}return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}class We{constructor(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:We.RED,this.left=null!=r?r:Ke.EMPTY_NODE,this.right=null!=i?i:Ke.EMPTY_NODE}copy(t,e,n,r,i){return new We(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let r=this;const i=n(t,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ke.EMPTY_NODE;let t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,e){let n,r;if(n=this,e(t,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Ke.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,We.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,We.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}We.RED=!0,We.BLACK=!1;class qe{copy(t,e,n,r,i){return this}insert(t,e,n){return new We(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Ke{constructor(t,e=Ke.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new Ke(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,We.BLACK,null,null))}remove(t){return new Ke(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,We.BLACK,null,null))}get(t){let e,n=this.root_;while(!n.isEmpty()){if(e=this.comparator_(t,n.key),0===e)return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null}getPredecessorKey(t){let e,n=this.root_,r=null;while(!n.isEmpty()){if(e=this.comparator_(t,n.key),0===e){if(n.left.isEmpty())return r?r.key:null;n=n.left;while(!n.right.isEmpty())n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new ze(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new ze(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new ze(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new ze(this.root_,null,this.comparator_,!0,t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ge(t,e){return L(t.name,e.name)}function Ye(t,e){return L(t,e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qe;function Xe(t){Qe=t}Ke.EMPTY_NODE=new qe;const Je=function(t){return"number"===typeof t?"number:"+H(t):"string:"+t},Ze=function(t){if(t.isLeafNode()){const e=t.val();(0,c.vA)("string"===typeof e||"number"===typeof e||"object"===typeof e&&(0,c.gR)(e,".sv"),"Priority must be a string or number.")}else(0,c.vA)(t===Qe||t.isEmpty(),"priority of unexpected type.");(0,c.vA)(t===Qe||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let tn,en,nn;class rn{static set __childrenNodeConstructor(t){tn=t}static get __childrenNodeConstructor(){return tn}constructor(t,e=rn.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=e,this.lazyHash_=null,(0,c.vA)(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Ze(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new rn(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:rn.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return be(t)?this:".priority"===fe(t)?this.priorityNode_:rn.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,e){return null}updateImmediateChild(t,e){return".priority"===t?this.updatePriority(e):e.isEmpty()&&".priority"!==t?this:rn.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,e).updatePriority(this.priorityNode_)}updateChild(t,e){const n=fe(t);return null===n?e:e.isEmpty()&&".priority"!==n?this:((0,c.vA)(".priority"!==n||1===pe(t),".priority must be the last token in a path"),this.updateImmediateChild(n,rn.__childrenNodeConstructor.EMPTY_NODE.updateChild(me(t),e)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,e){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+Je(this.priorityNode_.val())+":");const e=typeof this.value_;t+=e+":",t+="number"===e?H(this.value_):this.value_,this.lazyHash_=b(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===rn.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof rn.__childrenNodeConstructor?-1:((0,c.vA)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const e=typeof t.value_,n=typeof this.value_,r=rn.VALUE_TYPE_ORDER.indexOf(e),i=rn.VALUE_TYPE_ORDER.indexOf(n);return(0,c.vA)(r>=0,"Unknown leaf type: "+e),(0,c.vA)(i>=0,"Unknown leaf type: "+n),r===i?"object"===n?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}return!1}}function on(t){en=t}function sn(t){nn=t}rn.VALUE_TYPE_ORDER=["object","boolean","number","string"];class an extends Ve{compare(t,e){const n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?L(t.name,e.name):i}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return Ue.MIN}maxPost(){return new Ue(M,new rn("[PRIORITY-POST]",nn))}makePost(t,e){const n=en(t);return new Ue(e,new rn("[PRIORITY-POST]",n))}toString(){return".priority"}}const cn=new an,un=Math.log(2);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(t){const e=t=>parseInt(Math.log(t)/un,10),n=t=>parseInt(Array(t+1).join("1"),2);this.count=e(t+1),this.current_=this.count-1;const r=n(this.count);this.bits_=t+1&r}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const hn=function(t,e,n,r){t.sort(e);const i=function(e,r){const o=r-e;let s,a;if(0===o)return null;if(1===o)return s=t[e],a=n?n(s):s,new We(a,s.node,We.BLACK,null,null);{const c=parseInt(o/2,10)+e,u=i(e,c),l=i(c+1,r);return s=t[c],a=n?n(s):s,new We(a,s.node,We.BLACK,u,l)}},o=function(e){let r=null,o=null,s=t.length;const a=function(e,r){const o=s-e,a=s;s-=e;const u=i(o+1,a),l=t[o],h=n?n(l):l;c(new We(h,l.node,r,null,u))},c=function(t){r?(r.left=t,r=t):(o=t,r=t)};for(let t=0;t<e.count;++t){const n=e.nextBitIsOne(),r=Math.pow(2,e.count-(t+1));n?a(r,We.BLACK):(a(r,We.BLACK),a(r,We.RED))}return o},s=new ln(t.length),a=o(s);return new Ke(r||e,a)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dn;const fn={};class pn{static get Default(){return(0,c.vA)(fn&&cn,"ChildrenNode.ts has not been loaded"),dn=dn||new pn({".priority":fn},{".priority":cn}),dn}constructor(t,e){this.indexes_=t,this.indexSet_=e}get(t){const e=(0,c.yw)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Ke?e:null}hasIndex(t){return(0,c.gR)(this.indexSet_,t.toString())}addIndex(t,e){(0,c.vA)(t!==Be,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let r=!1;const i=e.getIterator(Ue.Wrap);let o,s=i.getNext();while(s)r=r||t.isDefinedOn(s.node),n.push(s),s=i.getNext();o=r?hn(n,t.getCompare()):fn;const a=t.toString(),u={...this.indexSet_};u[a]=t;const l={...this.indexes_};return l[a]=o,new pn(l,u)}addToIndexes(t,e){const n=(0,c.kH)(this.indexes_,((n,r)=>{const i=(0,c.yw)(this.indexSet_,r);if((0,c.vA)(i,"Missing index implementation for "+r),n===fn){if(i.isDefinedOn(t.node)){const n=[],r=e.getIterator(Ue.Wrap);let o=r.getNext();while(o)o.name!==t.name&&n.push(o),o=r.getNext();return n.push(t),hn(n,i.getCompare())}return fn}{const r=e.get(t.name);let i=n;return r&&(i=i.remove(new Ue(t.name,r))),i.insert(t,t.node)}}));return new pn(n,this.indexSet_)}removeFromIndexes(t,e){const n=(0,c.kH)(this.indexes_,(n=>{if(n===fn)return n;{const r=e.get(t.name);return r?n.remove(new Ue(t.name,r)):n}}));return new pn(n,this.indexSet_)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mn;class gn{static get EMPTY_NODE(){return mn||(mn=new gn(new Ke(Ye),null,pn.Default))}constructor(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Ze(this.priorityNode_),this.children_.isEmpty()&&(0,c.vA)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||mn}updatePriority(t){return this.children_.isEmpty()?this:new gn(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const e=this.children_.get(t);return null===e?mn:e}}getChild(t){const e=fe(t);return null===e?this:this.getImmediateChild(e).getChild(me(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,e){if((0,c.vA)(e,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(e);{const n=new Ue(t,e);let r,i;e.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(t,e),i=this.indexMap_.addToIndexes(n,this.children_));const o=r.isEmpty()?mn:this.priorityNode_;return new gn(r,o,i)}}updateChild(t,e){const n=fe(t);if(null===n)return e;{(0,c.vA)(".priority"!==fe(t)||1===pe(t),".priority must be the last token in a path");const r=this.getImmediateChild(n).updateChild(me(t),e);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const e={};let n=0,r=0,i=!0;if(this.forEachChild(cn,((o,s)=>{e[o]=s.val(t),n++,i&&gn.INTEGER_REGEXP_.test(o)?r=Math.max(r,Number(o)):i=!1})),!t&&i&&r<2*n){const t=[];for(const n in e)t[n]=e[n];return t}return t&&!this.getPriority().isEmpty()&&(e[".priority"]=this.getPriority().val()),e}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+Je(this.getPriority().val())+":"),this.forEachChild(cn,((e,n)=>{const r=n.hash();""!==r&&(t+=":"+e+":"+r)})),this.lazyHash_=""===t?"":b(t)}return this.lazyHash_}getPredecessorChildName(t,e,n){const r=this.resolveIndex_(n);if(r){const n=r.getPredecessorKey(new Ue(t,e));return n?n.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const e=this.resolveIndex_(t);if(e){const t=e.minKey();return t&&t.name}return this.children_.minKey()}getFirstChild(t){const e=this.getFirstChildName(t);return e?new Ue(e,this.children_.get(e)):null}getLastChildName(t){const e=this.resolveIndex_(t);if(e){const t=e.maxKey();return t&&t.name}return this.children_.maxKey()}getLastChild(t){const e=this.getLastChildName(t);return e?new Ue(e,this.children_.get(e)):null}forEachChild(t,e){const n=this.resolveIndex_(t);return n?n.inorderTraversal((t=>e(t.name,t.node))):this.children_.inorderTraversal(e)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,e){const n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(t=>t));{const n=this.children_.getIteratorFrom(t.name,Ue.Wrap);let r=n.peek();while(null!=r&&e.compare(r,t)<0)n.getNext(),r=n.peek();return n}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,e){const n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(t=>t));{const n=this.children_.getReverseIteratorFrom(t.name,Ue.Wrap);let r=n.peek();while(null!=r&&e.compare(r,t)>0)n.getNext(),r=n.peek();return n}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===vn?-1:0}withIndex(t){if(t===Be||this.indexMap_.hasIndex(t))return this;{const e=this.indexMap_.addIndex(t,this.children_);return new gn(this.children_,this.priorityNode_,e)}}isIndexed(t){return t===Be||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){const t=this.getIterator(cn),n=e.getIterator(cn);let r=t.getNext(),i=n.getNext();while(r&&i){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=t.getNext(),i=n.getNext()}return null===r&&null===i}return!1}return!1}}resolveIndex_(t){return t===Be?null:this.indexMap_.get(t.toString())}}gn.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class yn extends gn{constructor(){super(new Ke(Ye),gn.EMPTY_NODE,pn.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return gn.EMPTY_NODE}isEmpty(){return!1}}const vn=new yn;Object.defineProperties(Ue,{MIN:{value:new Ue(R,gn.EMPTY_NODE)},MAX:{value:new Ue(M,vn)}}),He.__EMPTY_NODE=gn.EMPTY_NODE,rn.__childrenNodeConstructor=gn,Xe(vn),sn(vn);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const _n=!0;function wn(t,e=null){if(null===t)return gn.EMPTY_NODE;if("object"===typeof t&&".priority"in t&&(e=t[".priority"]),(0,c.vA)(null===e||"string"===typeof e||"number"===typeof e||"object"===typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"===typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!==typeof t||".sv"in t){const n=t;return new rn(n,wn(e))}if(t instanceof Array||!_n){let n=gn.EMPTY_NODE;return $(t,((e,r)=>{if((0,c.gR)(t,e)&&"."!==e.substring(0,1)){const t=wn(r);!t.isLeafNode()&&t.isEmpty()||(n=n.updateImmediateChild(e,t))}})),n.updatePriority(wn(e))}{const n=[];let r=!1;const i=t;if($(i,((t,e)=>{if("."!==t.substring(0,1)){const i=wn(e);i.isEmpty()||(r=r||!i.getPriority().isEmpty(),n.push(new Ue(t,i)))}})),0===n.length)return gn.EMPTY_NODE;const o=hn(n,Ge,(t=>t.name),Ye);if(r){const t=hn(n,cn.getCompare());return new gn(o,wn(e),new pn({".priority":t},{".priority":cn}))}return new gn(o,wn(e),pn.Default)}}on(wn);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class bn extends Ve{constructor(t){super(),this.indexPath_=t,(0,c.vA)(!be(t)&&".priority"!==fe(t),"Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){const n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?L(t.name,e.name):i}makePost(t,e){const n=wn(t),r=gn.EMPTY_NODE.updateChild(this.indexPath_,n);return new Ue(e,r)}maxPost(){const t=gn.EMPTY_NODE.updateChild(this.indexPath_,vn);return new Ue(M,t)}toString(){return ve(this.indexPath_,0).join("/")}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En extends Ve{compare(t,e){const n=t.node.compareTo(e.node);return 0===n?L(t.name,e.name):n}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return Ue.MIN}maxPost(){return Ue.MAX}makePost(t,e){const n=wn(t);return new Ue(e,n)}toString(){return".value"}}const Tn=new En;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cn(t){return{type:"value",snapshotNode:t}}function Sn(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function In(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function kn(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function xn(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Dn{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=cn}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,c.vA)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,c.vA)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:R}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,c.vA)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,c.vA)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:M}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,c.vA)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===cn}copy(){const t=new Dn;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function An(t){const e={};if(t.isDefault())return e;let n;if(t.index_===cn?n="$priority":t.index_===Tn?n="$value":t.index_===Be?n="$key":((0,c.vA)(t.index_ instanceof bn,"Unrecognized index type!"),n=t.index_.toString()),e["orderBy"]=(0,c.As)(n),t.startSet_){const n=t.startAfterSet_?"startAfter":"startAt";e[n]=(0,c.As)(t.indexStartValue_),t.startNameSet_&&(e[n]+=","+(0,c.As)(t.indexStartName_))}if(t.endSet_){const n=t.endBeforeSet_?"endBefore":"endAt";e[n]=(0,c.As)(t.indexEndValue_),t.endNameSet_&&(e[n]+=","+(0,c.As)(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e["limitToFirst"]=t.limit_:e["limitToLast"]=t.limit_),e}function Nn(t){const e={};if(t.startSet_&&(e["sp"]=t.indexStartValue_,t.startNameSet_&&(e["sn"]=t.indexStartName_),e["sin"]=!t.startAfterSet_),t.endSet_&&(e["ep"]=t.indexEndValue_,t.endNameSet_&&(e["en"]=t.indexEndName_),e["ein"]=!t.endBeforeSet_),t.limitSet_){e["l"]=t.limit_;let n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e["vf"]=n}return t.index_!==cn&&(e["i"]=t.index_.toString()),e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On extends se{reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return void 0!==e?"tag$"+e:((0,c.vA)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}constructor(t,e,n,r){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=k("p:rest:"),this.listens_={}}listen(t,e,n,r){const i=t._path.toString();this.log_("Listen called for "+i+" "+t._queryIdentifier);const o=On.getListenId_(t,n),s={};this.listens_[o]=s;const a=An(t._queryParams);this.restRequest_(i+".json",a,((t,e)=>{let a=e;if(404===t&&(a=null,t=null),null===t&&this.onDataUpdate_(i,a,!1,n),(0,c.yw)(this.listens_,o)===s){let e;e=t?401===t?"permission_denied":"rest_error:"+t:"ok",r(e,null)}}))}unlisten(t,e){const n=On.getListenId_(t,e);delete this.listens_[n]}get(t){const e=An(t._queryParams),n=t._path.toString(),r=new c.cY;return this.restRequest_(n+".json",e,((t,e)=>{let i=e;404===t&&(i=null,t=null),null===t?(this.onDataUpdate_(n,i,!1,null),r.resolve(i)):r.reject(new Error(i))})),r.promise}refreshAuthToken(t){}restRequest_(t,e={},n){return e["format"]="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((([r,i])=>{r&&r.accessToken&&(e["auth"]=r.accessToken),i&&i.token&&(e["ac"]=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+(0,c.Am)(e);this.log_("Sending REST request for "+o);const s=new XMLHttpRequest;s.onreadystatechange=()=>{if(n&&4===s.readyState){this.log_("REST Response for "+o+" received. status:",s.status,"response:",s.responseText);let e=null;if(s.status>=200&&s.status<300){try{e=(0,c.$L)(s.responseText)}catch(t){A("Failed to parse JSON response for "+o+": "+s.responseText)}n(null,e)}else 401!==s.status&&404!==s.status&&A("Got unsuccessful REST response for "+o+" Status: "+s.status),n(s.status);n=null}},s.open("GET",o,!0),s.send()}))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(){this.rootNode_=gn.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rn(){return{value:null,children:new Map}}function Mn(t,e,n){if(be(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{const r=fe(e);t.children.has(r)||t.children.set(r,Rn());const i=t.children.get(r);e=me(e),Mn(i,e,n)}}function Ln(t,e,n){null!==t.value?n(e,t.value):Fn(t,((t,r)=>{const i=new he(e.toString()+"/"+t);Ln(r,i,n)}))}function Fn(t,e){t.children.forEach(((t,n)=>{e(n,t)}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),e={...t};return this.last_&&$(this.last_,((t,n)=>{e[t]=e[t]-n})),this.last_=t,e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Un=1e4,Vn=3e4,$n=3e5;class Hn{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new jn(t);const n=Un+(Vn-Un)*Math.random();X(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const t=this.statsListener_.get(),e={};let n=!1;$(t,((t,r)=>{r>0&&(0,c.gR)(this.statsToReport_,t)&&(e[t]=r,n=!0)})),n&&this.server_.reportStats(e),X(this.reportStats_.bind(this),Math.floor(2*Math.random()*$n))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bn;function zn(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Wn(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function qn(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(t){t[t["OVERWRITE"]=0]="OVERWRITE",t[t["MERGE"]=1]="MERGE",t[t["ACK_USER_WRITE"]=2]="ACK_USER_WRITE",t[t["LISTEN_COMPLETE"]=3]="LISTEN_COMPLETE"})(Bn||(Bn={}));class Kn{constructor(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=Bn.ACK_USER_WRITE,this.source=zn()}operationForChild(t){if(be(this.path)){if(null!=this.affectedTree.value)return(0,c.vA)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new he(t));return new Kn(de(),e,this.revert)}}return(0,c.vA)(fe(this.path)===t,"operationForChild called for unrelated child."),new Kn(me(this.path),this.affectedTree,this.revert)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Gn{constructor(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=Bn.OVERWRITE}operationForChild(t){return be(this.path)?new Gn(this.source,de(),this.snap.getImmediateChild(t)):new Gn(this.source,me(this.path),this.snap)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(t,e,n){this.source=t,this.path=e,this.children=n,this.type=Bn.MERGE}operationForChild(t){if(be(this.path)){const e=this.children.subtree(new he(t));return e.isEmpty()?null:e.value?new Gn(this.source,de(),e.value):new Yn(this.source,de(),e)}return(0,c.vA)(fe(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new Yn(this.source,me(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(be(t))return this.isFullyInitialized()&&!this.filtered_;const e=fe(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xn(t,e,n,r){const i=[],o=[];return e.forEach((e=>{"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push(xn(e.childName,e.snapshotNode))})),Jn(t,i,"child_removed",e,r,n),Jn(t,i,"child_added",e,r,n),Jn(t,i,"child_moved",o,r,n),Jn(t,i,"child_changed",e,r,n),Jn(t,i,"value",e,r,n),i}function Jn(t,e,n,r,i,o){const s=r.filter((t=>t.type===n));s.sort(((e,n)=>tr(t,e,n))),s.forEach((n=>{const r=Zn(t,n,o);i.forEach((i=>{i.respondsTo(n.type)&&e.push(i.createEvent(r,t.query_))}))}))}function Zn(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function tr(t,e,n){if(null==e.childName||null==n.childName)throw(0,c.Hk)("Should only compare child_ events.");const r=new Ue(e.childName,e.snapshotNode),i=new Ue(n.childName,n.snapshotNode);return t.index_.compare(r,i)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(t,e){return{eventCache:t,serverCache:e}}function nr(t,e,n,r){return er(new Qn(e,n,r),t.serverCache)}function rr(t,e,n,r){return er(t.eventCache,new Qn(e,n,r))}function ir(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function or(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sr;const ar=()=>(sr||(sr=new Ke(F)),sr);class cr{static fromObject(t){let e=new cr(null);return $(t,((t,n)=>{e=e.set(new he(t),n)})),e}constructor(t,e=ar()){this.value=t,this.children=e}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(null!=this.value&&e(this.value))return{path:de(),value:this.value};if(be(t))return null;{const n=fe(t),r=this.children.get(n);if(null!==r){const i=r.findRootMostMatchingPathAndValue(me(t),e);if(null!=i){const t=we(new he(n),i.path);return{path:t,value:i.value}}return null}return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,(()=>!0))}subtree(t){if(be(t))return this;{const e=fe(t),n=this.children.get(e);return null!==n?n.subtree(me(t)):new cr(null)}}set(t,e){if(be(t))return new cr(e,this.children);{const n=fe(t),r=this.children.get(n)||new cr(null),i=r.set(me(t),e),o=this.children.insert(n,i);return new cr(this.value,o)}}remove(t){if(be(t))return this.children.isEmpty()?new cr(null):new cr(null,this.children);{const e=fe(t),n=this.children.get(e);if(n){const r=n.remove(me(t));let i;return i=r.isEmpty()?this.children.remove(e):this.children.insert(e,r),null===this.value&&i.isEmpty()?new cr(null):new cr(this.value,i)}return this}}get(t){if(be(t))return this.value;{const e=fe(t),n=this.children.get(e);return n?n.get(me(t)):null}}setTree(t,e){if(be(t))return e;{const n=fe(t),r=this.children.get(n)||new cr(null),i=r.setTree(me(t),e);let o;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),new cr(this.value,o)}}fold(t){return this.fold_(de(),t)}fold_(t,e){const n={};return this.children.inorderTraversal(((r,i)=>{n[r]=i.fold_(we(t,r),e)})),e(t,this.value,n)}findOnPath(t,e){return this.findOnPath_(t,de(),e)}findOnPath_(t,e,n){const r=!!this.value&&n(e,this.value);if(r)return r;if(be(t))return null;{const r=fe(t),i=this.children.get(r);return i?i.findOnPath_(me(t),we(e,r),n):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,de(),e)}foreachOnPath_(t,e,n){if(be(t))return this;{this.value&&n(e,this.value);const r=fe(t),i=this.children.get(r);return i?i.foreachOnPath_(me(t),we(e,r),n):new cr(null)}}foreach(t){this.foreach_(de(),t)}foreach_(t,e){this.children.inorderTraversal(((n,r)=>{r.foreach_(we(t,n),e)})),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal(((e,n)=>{n.value&&t(e,n.value)}))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(t){this.writeTree_=t}static empty(){return new ur(new cr(null))}}function lr(t,e,n){if(be(e))return new ur(new cr(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let o=r.value;const s=Ee(i,e);return o=o.updateChild(s,n),new ur(t.writeTree_.set(i,o))}{const r=new cr(n),i=t.writeTree_.setTree(e,r);return new ur(i)}}}function hr(t,e,n){let r=t;return $(n,((t,n)=>{r=lr(r,we(e,t),n)})),r}function dr(t,e){if(be(e))return ur.empty();{const n=t.writeTree_.setTree(e,new cr(null));return new ur(n)}}function fr(t,e){return null!=pr(t,e)}function pr(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(Ee(n.path,e)):null}function mr(t){const e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(cn,((t,n)=>{e.push(new Ue(t,n))})):t.writeTree_.children.inorderTraversal(((t,n)=>{null!=n.value&&e.push(new Ue(t,n.value))})),e}function gr(t,e){if(be(e))return t;{const n=pr(t,e);return new ur(null!=n?new cr(n):t.writeTree_.subtree(e))}}function yr(t){return t.writeTree_.isEmpty()}function vr(t,e){return _r(de(),t.writeTree_,e)}function _r(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal(((e,i)=>{".priority"===e?((0,c.vA)(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=_r(we(t,e),i,n)})),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(we(t,".priority"),r)),n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wr(t,e){return Hr(e,t)}function br(t,e,n,r,i){(0,c.vA)(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=lr(t.visibleWrites,e,n)),t.lastWriteId=r}function Er(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function Tr(t,e){const n=t.allWrites.findIndex((t=>t.writeId===e));(0,c.vA)(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,o=!1,s=t.allWrites.length-1;while(i&&s>=0){const e=t.allWrites[s];e.visible&&(s>=n&&Cr(e,r.path)?i=!1:Ce(r.path,e.path)&&(o=!0)),s--}if(i){if(o)return Sr(t),!0;if(r.snap)t.visibleWrites=dr(t.visibleWrites,r.path);else{const e=r.children;$(e,(e=>{t.visibleWrites=dr(t.visibleWrites,we(r.path,e))}))}return!0}return!1}function Cr(t,e){if(t.snap)return Ce(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Ce(we(t.path,n),e))return!0;return!1}function Sr(t){t.visibleWrites=kr(t.allWrites,Ir,de()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function Ir(t){return t.visible}function kr(t,e,n){let r=ur.empty();for(let i=0;i<t.length;++i){const o=t[i];if(e(o)){const t=o.path;let e;if(o.snap)Ce(n,t)?(e=Ee(n,t),r=lr(r,e,o.snap)):Ce(t,n)&&(e=Ee(t,n),r=lr(r,de(),o.snap.getChild(e)));else{if(!o.children)throw(0,c.Hk)("WriteRecord should have .snap or .children");if(Ce(n,t))e=Ee(n,t),r=hr(r,e,o.children);else if(Ce(t,n))if(e=Ee(t,n),be(e))r=hr(r,de(),o.children);else{const t=(0,c.yw)(o.children,fe(e));if(t){const n=t.getChild(me(e));r=lr(r,de(),n)}}}}}return r}function xr(t,e,n,r,i){if(r||i){const o=gr(t.visibleWrites,e);if(!i&&yr(o))return n;if(i||null!=n||fr(o,de())){const o=function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(Ce(t.path,e)||Ce(e,t.path))},s=kr(t.allWrites,o,e),a=n||gn.EMPTY_NODE;return vr(s,a)}return null}{const r=pr(t.visibleWrites,e);if(null!=r)return r;{const r=gr(t.visibleWrites,e);if(yr(r))return n;if(null!=n||fr(r,de())){const t=n||gn.EMPTY_NODE;return vr(r,t)}return null}}}function Dr(t,e,n){let r=gn.EMPTY_NODE;const i=pr(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(cn,((t,e)=>{r=r.updateImmediateChild(t,e)})),r;if(n){const i=gr(t.visibleWrites,e);return n.forEachChild(cn,((t,e)=>{const n=vr(gr(i,new he(t)),e);r=r.updateImmediateChild(t,n)})),mr(i).forEach((t=>{r=r.updateImmediateChild(t.name,t.node)})),r}{const n=gr(t.visibleWrites,e);return mr(n).forEach((t=>{r=r.updateImmediateChild(t.name,t.node)})),r}}function Ar(t,e,n,r,i){(0,c.vA)(r||i,"Either existingEventSnap or existingServerSnap must exist");const o=we(e,n);if(fr(t.visibleWrites,o))return null;{const e=gr(t.visibleWrites,o);return yr(e)?i.getChild(n):vr(e,i.getChild(n))}}function Nr(t,e,n,r){const i=we(e,n),o=pr(t.visibleWrites,i);if(null!=o)return o;if(r.isCompleteForChild(n)){const e=gr(t.visibleWrites,i);return vr(e,r.getNode().getImmediateChild(n))}return null}function Or(t,e){return pr(t.visibleWrites,e)}function Pr(t,e,n,r,i,o,s){let a;const c=gr(t.visibleWrites,e),u=pr(c,de());if(null!=u)a=u;else{if(null==n)return[];a=vr(c,n)}if(a=a.withIndex(s),a.isEmpty()||a.isLeafNode())return[];{const t=[],e=s.getCompare(),n=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s);let c=n.getNext();while(c&&t.length<i)0!==e(c,r)&&t.push(c),c=n.getNext();return t}}function Rr(){return{visibleWrites:ur.empty(),allWrites:[],lastWriteId:-1}}function Mr(t,e,n,r){return xr(t.writeTree,t.treePath,e,n,r)}function Lr(t,e){return Dr(t.writeTree,t.treePath,e)}function Fr(t,e,n,r){return Ar(t.writeTree,t.treePath,e,n,r)}function jr(t,e){return Or(t.writeTree,we(t.treePath,e))}function Ur(t,e,n,r,i,o){return Pr(t.writeTree,t.treePath,e,n,r,i,o)}function Vr(t,e,n){return Nr(t.writeTree,t.treePath,e,n)}function $r(t,e){return Hr(we(t.treePath,e),t.writeTree)}function Hr(t,e){return{treePath:t,writeTree:e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(){this.changeMap=new Map}trackChildChange(t){const e=t.type,n=t.childName;(0,c.vA)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,c.vA)(".priority"!==n,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(n);if(r){const i=r.type;if("child_added"===e&&"child_removed"===i)this.changeMap.set(n,kn(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===i)this.changeMap.set(n,In(n,r.oldSnap));else if("child_changed"===e&&"child_added"===i)this.changeMap.set(n,Sn(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==i)throw(0,c.Hk)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,kn(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)}getChanges(){return Array.from(this.changeMap.values())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{getCompleteChild(t){return null}getChildAfterChild(t,e,n){return null}}const Wr=new zr;class qr{constructor(t,e,n=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}getCompleteChild(t){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{const e=null!=this.optCompleteServerCache_?new Qn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Vr(this.writes_,t,e)}}getChildAfterChild(t,e,n){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:or(this.viewCache_),i=Ur(this.writes_,r,e,1,n,t);return 0===i.length?null:i[0]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kr(t,e){(0,c.vA)(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),(0,c.vA)(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function Gr(t,e,n,r,i){const o=new Br;let s,a;if(n.type===Bn.OVERWRITE){const u=n;u.source.fromUser?s=Jr(t,e,u.path,u.snap,r,i,o):((0,c.vA)(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!be(u.path),s=Xr(t,e,u.path,u.snap,r,i,a,o))}else if(n.type===Bn.MERGE){const u=n;u.source.fromUser?s=ti(t,e,u.path,u.children,r,i,o):((0,c.vA)(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),s=ni(t,e,u.path,u.children,r,i,a,o))}else if(n.type===Bn.ACK_USER_WRITE){const a=n;s=a.revert?oi(t,e,a.path,r,i,o):ri(t,e,a.path,a.affectedTree,r,i,o)}else{if(n.type!==Bn.LISTEN_COMPLETE)throw(0,c.Hk)("Unknown operation type: "+n.type);s=ii(t,e,n.path,r,o)}const u=o.getChanges();return Yr(e,s,u),{viewCache:s,changes:u}}function Yr(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=ir(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(Cn(ir(e)))}}function Qr(t,e,n,r,i,o){const s=e.eventCache;if(null!=jr(r,n))return e;{let a,u;if(be(n))if((0,c.vA)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const n=or(e),i=n instanceof gn?n:gn.EMPTY_NODE,s=Lr(r,i);a=t.filter.updateFullNode(e.eventCache.getNode(),s,o)}else{const n=Mr(r,or(e));a=t.filter.updateFullNode(e.eventCache.getNode(),n,o)}else{const l=fe(n);if(".priority"===l){(0,c.vA)(1===pe(n),"Can't have a priority with additional path components");const i=s.getNode();u=e.serverCache.getNode();const o=Fr(r,n,i,u);a=null!=o?t.filter.updatePriority(i,o):s.getNode()}else{const c=me(n);let h;if(s.isCompleteForChild(l)){u=e.serverCache.getNode();const t=Fr(r,n,s.getNode(),u);h=null!=t?s.getNode().getImmediateChild(l).updateChild(c,t):s.getNode().getImmediateChild(l)}else h=Vr(r,l,e.serverCache);a=null!=h?t.filter.updateChild(s.getNode(),l,h,c,i,o):s.getNode()}}return nr(e,a,s.isFullyInitialized()||be(n),t.filter.filtersNodes())}}function Xr(t,e,n,r,i,o,s,a){const c=e.serverCache;let u;const l=s?t.filter:t.filter.getIndexedFilter();if(be(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){const t=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),t,null)}else{const t=fe(n);if(!c.isCompleteForPath(n)&&pe(n)>1)return e;const i=me(n),o=c.getNode().getImmediateChild(t),s=o.updateChild(i,r);u=".priority"===t?l.updatePriority(c.getNode(),s):l.updateChild(c.getNode(),t,s,i,Wr,null)}const h=rr(e,u,c.isFullyInitialized()||be(n),l.filtersNodes()),d=new qr(i,h,o);return Qr(t,h,n,i,d,a)}function Jr(t,e,n,r,i,o,s){const a=e.eventCache;let c,u;const l=new qr(i,e,o);if(be(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,s),c=nr(e,u,!0,t.filter.filtersNodes());else{const i=fe(n);if(".priority"===i)u=t.filter.updatePriority(e.eventCache.getNode(),r),c=nr(e,u,a.isFullyInitialized(),a.isFiltered());else{const o=me(n),u=a.getNode().getImmediateChild(i);let h;if(be(o))h=r;else{const t=l.getCompleteChild(i);h=null!=t?".priority"===ge(o)&&t.getChild(_e(o)).isEmpty()?t:t.updateChild(o,r):gn.EMPTY_NODE}if(u.equals(h))c=e;else{const n=t.filter.updateChild(a.getNode(),i,h,o,l,s);c=nr(e,n,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function Zr(t,e){return t.eventCache.isCompleteForChild(e)}function ti(t,e,n,r,i,o,s){let a=e;return r.foreach(((r,c)=>{const u=we(n,r);Zr(e,fe(u))&&(a=Jr(t,a,u,c,i,o,s))})),r.foreach(((r,c)=>{const u=we(n,r);Zr(e,fe(u))||(a=Jr(t,a,u,c,i,o,s))})),a}function ei(t,e,n){return n.foreach(((t,n)=>{e=e.updateChild(t,n)})),e}function ni(t,e,n,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c,u=e;c=be(n)?r:new cr(null).setTree(n,r);const l=e.serverCache.getNode();return c.children.inorderTraversal(((n,r)=>{if(l.hasChild(n)){const c=e.serverCache.getNode().getImmediateChild(n),l=ei(t,c,r);u=Xr(t,u,new he(n),l,i,o,s,a)}})),c.children.inorderTraversal(((n,r)=>{const c=!e.serverCache.isCompleteForChild(n)&&null===r.value;if(!l.hasChild(n)&&!c){const c=e.serverCache.getNode().getImmediateChild(n),l=ei(t,c,r);u=Xr(t,u,new he(n),l,i,o,s,a)}})),u}function ri(t,e,n,r,i,o,s){if(null!=jr(i,n))return e;const a=e.serverCache.isFiltered(),c=e.serverCache;if(null!=r.value){if(be(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Xr(t,e,n,c.getNode().getChild(n),i,o,a,s);if(be(n)){let r=new cr(null);return c.getNode().forEachChild(Be,((t,e)=>{r=r.set(new he(t),e)})),ni(t,e,n,r,i,o,a,s)}return e}{let u=new cr(null);return r.foreach(((t,e)=>{const r=we(n,t);c.isCompleteForPath(r)&&(u=u.set(t,c.getNode().getChild(r)))})),ni(t,e,n,u,i,o,a,s)}}function ii(t,e,n,r,i){const o=e.serverCache,s=rr(e,o.getNode(),o.isFullyInitialized()||be(n),o.isFiltered());return Qr(t,s,n,r,Wr,i)}function oi(t,e,n,r,i,o){let s;if(null!=jr(r,n))return e;{const a=new qr(r,e,i),u=e.eventCache.getNode();let l;if(be(n)||".priority"===fe(n)){let n;if(e.serverCache.isFullyInitialized())n=Mr(r,or(e));else{const t=e.serverCache.getNode();(0,c.vA)(t instanceof gn,"serverChildren would be complete if leaf node"),n=Lr(r,t)}l=t.filter.updateFullNode(u,n,o)}else{const i=fe(n);let c=Vr(r,i,e.serverCache);null==c&&e.serverCache.isCompleteForChild(i)&&(c=u.getImmediateChild(i)),l=null!=c?t.filter.updateChild(u,i,c,me(n),a,o):e.eventCache.getNode().hasChild(i)?t.filter.updateChild(u,i,gn.EMPTY_NODE,me(n),a,o):u,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(s=Mr(r,or(e)),s.isLeafNode()&&(l=t.filter.updateFullNode(l,s,o)))}return s=e.serverCache.isFullyInitialized()||null!=jr(r,de()),nr(e,l,s,t.filter.filtersNodes())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function si(t,e){const n=or(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!be(e)&&!n.getImmediateChild(fe(e)).isEmpty())?n.getChild(e):null}function ai(t,e,n,r){e.type===Bn.MERGE&&null!==e.source.queryId&&((0,c.vA)(or(t.viewCache_),"We should always have a full cache before handling merges"),(0,c.vA)(ir(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,o=Gr(t.processor_,i,e,n,r);return Kr(t.processor_,o.viewCache),(0,c.vA)(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=o.viewCache,ci(t,o.changes,o.viewCache.eventCache.getNode(),null)}function ci(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return Xn(t.eventGenerator_,e,n,i)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ui,li;function hi(t){(0,c.vA)(!ui,"__referenceConstructor has already been defined"),ui=t}function di(t,e,n,r){const i=e.source.queryId;if(null!==i){const o=t.views.get(i);return(0,c.vA)(null!=o,"SyncTree gave us an op for an invalid query."),ai(o,e,n,r)}{let i=[];for(const o of t.views.values())i=i.concat(ai(o,e,n,r));return i}}function fi(t,e){let n=null;for(const r of t.views.values())n=n||si(r,e);return n}function pi(t){(0,c.vA)(!li,"__referenceConstructor has already been defined"),li=t}class mi{constructor(t){this.listenProvider_=t,this.syncPointTree_=new cr(null),this.pendingWriteTree_=Rr(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function gi(t,e,n,r,i){return br(t.pendingWriteTree_,e,n,r,i),i?Ti(t,new Gn(zn(),e,n)):[]}function yi(t,e,n=!1){const r=Er(t.pendingWriteTree_,e),i=Tr(t.pendingWriteTree_,e);if(i){let e=new cr(null);return null!=r.snap?e=e.set(de(),!0):$(r.children,(t=>{e=e.set(new he(t),!0)})),Ti(t,new Kn(r.path,e,n))}return[]}function vi(t,e,n){return Ti(t,new Gn(Wn(),e,n))}function _i(t,e,n){const r=cr.fromObject(n);return Ti(t,new Yn(Wn(),e,r))}function wi(t,e,n,r){const i=Ii(t,r);if(null!=i){const r=ki(i),o=r.path,s=r.queryId,a=Ee(o,e),c=new Gn(qn(s),a,n);return xi(t,o,c)}return[]}function bi(t,e,n,r){const i=Ii(t,r);if(i){const r=ki(i),o=r.path,s=r.queryId,a=Ee(o,e),c=cr.fromObject(n),u=new Yn(qn(s),a,c);return xi(t,o,u)}return[]}function Ei(t,e,n){const r=!0,i=t.pendingWriteTree_,o=t.syncPointTree_.findOnPath(e,((t,n)=>{const r=Ee(t,e),i=fi(n,r);if(i)return i}));return xr(i,e,o,n,r)}function Ti(t,e){return Ci(e,t.syncPointTree_,null,wr(t.pendingWriteTree_,de()))}function Ci(t,e,n,r){if(be(t.path))return Si(t,e,n,r);{const i=e.get(de());null==n&&null!=i&&(n=fi(i,de()));let o=[];const s=fe(t.path),a=t.operationForChild(s),c=e.children.get(s);if(c&&a){const t=n?n.getImmediateChild(s):null,e=$r(r,s);o=o.concat(Ci(a,c,t,e))}return i&&(o=o.concat(di(i,t,r,n))),o}}function Si(t,e,n,r){const i=e.get(de());null==n&&null!=i&&(n=fi(i,de()));let o=[];return e.children.inorderTraversal(((e,i)=>{const s=n?n.getImmediateChild(e):null,a=$r(r,e),c=t.operationForChild(e);c&&(o=o.concat(Si(c,i,s,a)))})),i&&(o=o.concat(di(i,t,r,n))),o}function Ii(t,e){return t.tagToQueryMap.get(e)}function ki(t){const e=t.indexOf("$");return(0,c.vA)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new he(t.substr(0,e))}}function xi(t,e,n){const r=t.syncPointTree_.get(e);(0,c.vA)(r,"Missing sync point for query tag that we're tracking");const i=wr(t.pendingWriteTree_,e);return di(r,n,i,null)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Di{constructor(t){this.node_=t}getImmediateChild(t){const e=this.node_.getImmediateChild(t);return new Di(e)}node(){return this.node_}}class Ai{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){const e=we(this.path_,t);return new Ai(this.syncTree_,e)}node(){return Ei(this.syncTree_,this.path_)}}const Ni=function(t){return t=t||{},t["timestamp"]=t["timestamp"]||(new Date).getTime(),t},Oi=function(t,e,n){return t&&"object"===typeof t?((0,c.vA)(".sv"in t,"Unexpected leaf node or priority contents"),"string"===typeof t[".sv"]?Pi(t[".sv"],e,n):"object"===typeof t[".sv"]?Ri(t[".sv"],e):void(0,c.vA)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},Pi=function(t,e,n){switch(t){case"timestamp":return n["timestamp"];default:(0,c.vA)(!1,"Unexpected server value: "+t)}},Ri=function(t,e,n){t.hasOwnProperty("increment")||(0,c.vA)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t["increment"];"number"!==typeof r&&(0,c.vA)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,c.vA)(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i,s=o.getValue();return"number"!==typeof s?r:s+r},Mi=function(t,e,n,r){return Fi(e,new Ai(n,t),r)},Li=function(t,e,n){return Fi(t,new Di(e),n)};function Fi(t,e,n){const r=t.getPriority().val(),i=Oi(r,e.getImmediateChild(".priority"),n);let o;if(t.isLeafNode()){const r=t,o=Oi(r.getValue(),e,n);return o!==r.getValue()||i!==r.getPriority().val()?new rn(o,wn(i)):t}{const r=t;return o=r,i!==r.getPriority().val()&&(o=o.updatePriority(new rn(i))),r.forEachChild(cn,((t,r)=>{const i=Fi(r,e.getImmediateChild(t),n);i!==r&&(o=o.updateImmediateChild(t,i))})),o}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(t="",e=null,n={children:{},childCount:0}){this.name=t,this.parent=e,this.node=n}}function Ui(t,e){let n=e instanceof he?e:new he(e),r=t,i=fe(n);while(null!==i){const t=(0,c.yw)(r.node.children,i)||{children:{},childCount:0};r=new ji(i,r,t),n=me(n),i=fe(n)}return r}function Vi(t){return t.node.value}function $i(t,e){t.node.value=e,Gi(t)}function Hi(t){return t.node.childCount>0}function Bi(t){return void 0===Vi(t)&&!Hi(t)}function zi(t,e){$(t.node.children,((n,r)=>{e(new ji(n,t,r))}))}function Wi(t,e,n,r){n&&!r&&e(t),zi(t,(t=>{Wi(t,e,!0,r)})),n&&r&&e(t)}function qi(t,e,n){let r=n?t:t.parent;while(null!==r){if(e(r))return!0;r=r.parent}return!1}function Ki(t){return new he(null===t.parent?t.name:Ki(t.parent)+"/"+t.name)}function Gi(t){null!==t.parent&&Yi(t.parent,t.name,t)}function Yi(t,e,n){const r=Bi(n),i=(0,c.gR)(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Gi(t)):r||i||(t.node.children[e]=n.node,t.node.childCount++,Gi(t))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qi=/[\[\].#$\/\u0000-\u001F\u007F]/,Xi=/[\[\].#$\u0000-\u001F\u007F]/,Ji=10485760,Zi=function(t){return"string"===typeof t&&0!==t.length&&!Qi.test(t)},to=function(t){return"string"===typeof t&&0!==t.length&&!Xi.test(t)},eo=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),to(t)},no=function(t,e,n){const r=n instanceof he?new Se(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+De(r));if("function"===typeof e)throw new Error(t+"contains a function "+De(r)+" with contents = "+e.toString());if(O(e))throw new Error(t+"contains "+e.toString()+" "+De(r));if("string"===typeof e&&e.length>Ji/3&&(0,c.OE)(e)>Ji)throw new Error(t+"contains a string greater than "+Ji+" utf8 bytes "+De(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"===typeof e){let n=!1,i=!1;if($(e,((e,o)=>{if(".value"===e)n=!0;else if(".priority"!==e&&".sv"!==e&&(i=!0,!Zi(e)))throw new Error(t+" contains an invalid key ("+e+") "+De(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');Ie(r,e),no(t,o,r),ke(r)})),n&&i)throw new Error(t+' contains ".value" child '+De(r)+" in addition to actual children.")}},ro=function(t,e){const n=e.path.toString();if("string"!==typeof e.repoInfo.host||0===e.repoInfo.host.length||!Zi(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!eo(n))throw new Error((0,c.dI)(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class io{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function oo(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],o=i.getPath();null===n||Te(o,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function so(t,e,n){oo(t,n),ao(t,(t=>Ce(t,e)||Ce(e,t)))}function ao(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const o=i.path;e(o)?(co(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function co(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(null!==n){t.events[e]=null;const r=n.getEventRunner();T&&I("event: "+n.toString()),Y(r)}}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uo="repo_interrupt",lo=25;class ho{constructor(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new io,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Rn(),this.transactionQueueTree_=new ji,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function fo(t,e,n){if(t.stats_=vt(t.repoInfo_),t.forceRestClient_||Q())t.server_=new On(t.repoInfo_,((e,n,r,i)=>{go(t,e,n,r,i)}),t.authTokenProvider_,t.appCheckProvider_),setTimeout((()=>yo(t,!0)),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,c.As)(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new je(t.repoInfo_,e,((e,n,r,i)=>{go(t,e,n,r,i)}),(e=>{yo(t,e)}),(e=>{vo(t,e)}),t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener((e=>{t.server_.refreshAuthToken(e)})),t.appCheckProvider_.addTokenChangeListener((e=>{t.server_.refreshAppCheckToken(e.token)})),t.statsReporter_=_t(t.repoInfo_,(()=>new Hn(t.stats_,t.server_))),t.infoData_=new Pn,t.infoSyncTree_=new mi({startListening:(e,n,r,i)=>{let o=[];const s=t.infoData_.getNode(e._path);return s.isEmpty()||(o=vi(t.infoSyncTree_,e._path,s),setTimeout((()=>{i("ok")}),0)),o},stopListening:()=>{}}),_o(t,"connected",!1),t.serverSyncTree_=new mi({startListening:(e,n,r,i)=>(t.server_.listen(e,r,n,((n,r)=>{const o=i(n,r);so(t.eventQueue_,e._path,o)})),[]),stopListening:(e,n)=>{t.server_.unlisten(e,n)}})}function po(t){const e=t.infoData_.getNode(new he(".info/serverTimeOffset")),n=e.val()||0;return(new Date).getTime()+n}function mo(t){return Ni({timestamp:po(t)})}function go(t,e,n,r,i){t.dataUpdateCount++;const o=new he(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let s=[];if(i)if(r){const e=(0,c.kH)(n,(t=>wn(t)));s=bi(t.serverSyncTree_,o,e,i)}else{const e=wn(n);s=wi(t.serverSyncTree_,o,e,i)}else if(r){const e=(0,c.kH)(n,(t=>wn(t)));s=_i(t.serverSyncTree_,o,e)}else{const e=wn(n);s=vi(t.serverSyncTree_,o,e)}let a=o;s.length>0&&(a=ko(t,o)),so(t.eventQueue_,a,s)}function yo(t,e){_o(t,"connected",e),!1===e&&bo(t)}function vo(t,e){$(e,((e,n)=>{_o(t,e,n)}))}function _o(t,e,n){const r=new he("/.info/"+e),i=wn(n);t.infoData_.updateSnapshot(r,i);const o=vi(t.infoSyncTree_,r,i);so(t.eventQueue_,r,o)}function wo(t){return t.nextWriteId_++}function bo(t){To(t,"onDisconnectEvents");const e=mo(t),n=Rn();Ln(t.onDisconnect_,de(),((r,i)=>{const o=Mi(r,i,t.serverSyncTree_,e);Mn(n,r,o)}));let r=[];Ln(n,de(),((e,n)=>{r=r.concat(vi(t.serverSyncTree_,e,n));const i=Po(t,e);ko(t,i)})),t.onDisconnect_=Rn(),so(t.eventQueue_,de(),r)}function Eo(t){t.persistentConnection_&&t.persistentConnection_.interrupt(uo)}function To(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),I(n,...e)}function Co(t,e,n){return Ei(t.serverSyncTree_,e,n)||gn.EMPTY_NODE}function So(t,e=t.transactionQueueTree_){if(e||Oo(t,e),Vi(e)){const n=Ao(t,e);(0,c.vA)(n.length>0,"Sending zero length transaction queue");const r=n.every((t=>0===t.status));r&&Io(t,Ki(e),n)}else Hi(e)&&zi(e,(e=>{So(t,e)}))}function Io(t,e,n){const r=n.map((t=>t.currentWriteId)),i=Co(t,e,r);let o=i;const s=i.hash();for(let l=0;l<n.length;l++){const t=n[l];(0,c.vA)(0===t.status,"tryToSendTransactionQueue_: items in queue should all be run."),t.status=1,t.retryCount++;const r=Ee(e,t.path);o=o.updateChild(r,t.currentOutputSnapshotRaw)}const a=o.val(!0),u=e;t.server_.put(u.toString(),a,(r=>{To(t,"transaction put response",{path:u.toString(),status:r});let i=[];if("ok"===r){const r=[];for(let e=0;e<n.length;e++)n[e].status=2,i=i.concat(yi(t.serverSyncTree_,n[e].currentWriteId)),n[e].onComplete&&r.push((()=>n[e].onComplete(null,!0,n[e].currentOutputSnapshotResolved))),n[e].unwatcher();Oo(t,Ui(t.transactionQueueTree_,e)),So(t,t.transactionQueueTree_),so(t.eventQueue_,e,i);for(let t=0;t<r.length;t++)Y(r[t])}else{if("datastale"===r)for(let t=0;t<n.length;t++)3===n[t].status?n[t].status=4:n[t].status=0;else{A("transaction at "+u.toString()+" failed: "+r);for(let t=0;t<n.length;t++)n[t].status=4,n[t].abortReason=r}ko(t,e)}}),s)}function ko(t,e){const n=Do(t,e),r=Ki(n),i=Ao(t,n);return xo(t,i,r),r}function xo(t,e,n){if(0===e.length)return;const r=[];let i=[];const o=e.filter((t=>0===t.status)),s=o.map((t=>t.currentWriteId));for(let a=0;a<e.length;a++){const o=e[a],u=Ee(n,o.path);let l,h=!1;if((0,c.vA)(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),4===o.status)h=!0,l=o.abortReason,i=i.concat(yi(t.serverSyncTree_,o.currentWriteId,!0));else if(0===o.status)if(o.retryCount>=lo)h=!0,l="maxretry",i=i.concat(yi(t.serverSyncTree_,o.currentWriteId,!0));else{const n=Co(t,o.path,s);o.currentInputSnapshot=n;const r=e[a].update(n.val());if(void 0!==r){no("transaction failed: Data returned ",r,o.path);let e=wn(r);const a="object"===typeof r&&null!=r&&(0,c.gR)(r,".priority");a||(e=e.updatePriority(n.getPriority()));const u=o.currentWriteId,l=mo(t),h=Li(e,n,l);o.currentOutputSnapshotRaw=e,o.currentOutputSnapshotResolved=h,o.currentWriteId=wo(t),s.splice(s.indexOf(u),1),i=i.concat(gi(t.serverSyncTree_,o.path,h,o.currentWriteId,o.applyLocally)),i=i.concat(yi(t.serverSyncTree_,u,!0))}else h=!0,l="nodata",i=i.concat(yi(t.serverSyncTree_,o.currentWriteId,!0))}so(t.eventQueue_,n,i),i=[],h&&(e[a].status=2,function(t){setTimeout(t,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&("nodata"===l?r.push((()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot))):r.push((()=>e[a].onComplete(new Error(l),!1,null)))))}Oo(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Y(r[a]);So(t,t.transactionQueueTree_)}function Do(t,e){let n,r=t.transactionQueueTree_;n=fe(e);while(null!==n&&void 0===Vi(r))r=Ui(r,n),e=me(e),n=fe(e);return r}function Ao(t,e){const n=[];return No(t,e,n),n.sort(((t,e)=>t.order-e.order)),n}function No(t,e,n){const r=Vi(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);zi(e,(e=>{No(t,e,n)}))}function Oo(t,e){const n=Vi(e);if(n){let t=0;for(let e=0;e<n.length;e++)2!==n[e].status&&(n[t]=n[e],t++);n.length=t,$i(e,n.length>0?n:void 0)}zi(e,(e=>{Oo(t,e)}))}function Po(t,e){const n=Ki(Do(t,e)),r=Ui(t.transactionQueueTree_,e);return qi(r,(e=>{Ro(t,e)})),Ro(t,r),Wi(r,(e=>{Ro(t,e)})),n}function Ro(t,e){const n=Vi(e);if(n){const r=[];let i=[],o=-1;for(let e=0;e<n.length;e++)3===n[e].status||(1===n[e].status?((0,c.vA)(o===e-1,"All SENT items should be at beginning of queue."),o=e,n[e].status=3,n[e].abortReason="set"):((0,c.vA)(0===n[e].status,"Unexpected transaction status in abort"),n[e].unwatcher(),i=i.concat(yi(t.serverSyncTree_,n[e].currentWriteId,!0)),n[e].onComplete&&r.push(n[e].onComplete.bind(null,new Error("set"),!1,null))));-1===o?$i(e,void 0):n.length=o+1,so(t.eventQueue_,Ki(e),i);for(let t=0;t<r.length;t++)Y(r[t])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mo(t){let e="";const n=t.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let t=n[i];try{t=decodeURIComponent(t.replace(/\+/g," "))}catch(r){}e+="/"+t}return e}function Lo(t){const e={};"?"===t.charAt(0)&&(t=t.substring(1));for(const n of t.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):A(`Invalid query segment '${n}' in query '${t}'`)}return e}const Fo=function(t,e){const n=jo(t),r=n.namespace;"firebase.com"===n.domain&&D(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||D("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||N();const i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new dt(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new he(n.pathString)}},jo=function(t){let e="",n="",r="",i="",o="",s=!0,a="https",c=443;if("string"===typeof t){let u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));let l=t.indexOf("/");-1===l&&(l=t.length);let h=t.indexOf("?");-1===h&&(h=t.length),e=t.substring(0,Math.min(l,h)),l<h&&(i=Mo(t.substring(l,h)));const d=Lo(t.substring(Math.min(t.length,h)));u=e.indexOf(":"),u>=0?(s="https"===a||"wss"===a,c=parseInt(e.substring(u+1),10)):u=e.length;const f=e.slice(0,u);if("localhost"===f.toLowerCase())n="localhost";else if(f.split(".").length<=2)n=f;else{const t=e.indexOf(".");r=e.substring(0,t).toLowerCase(),n=e.substring(t+1),o=r}"ns"in d&&(o=d["ns"])}return{host:e,port:c,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}},Uo="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz";(function(){let t=0;const e=[]})();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Vo{constructor(t,e,n,r){this._repo=t,this._path=e,this._queryParams=n,this._orderByCalled=r}get key(){return be(this._path)?null:ge(this._path)}get ref(){return new $o(this._repo,this._path)}get _queryIdentifier(){const t=Nn(this._queryParams),e=U(t);return"{}"===e?"default":e}get _queryObject(){return Nn(this._queryParams)}isEqual(t){if(t=(0,c.Ku)(t),!(t instanceof Vo))return!1;const e=this._repo===t._repo,n=Te(this._path,t._path),r=this._queryIdentifier===t._queryIdentifier;return e&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+ye(this._path)}}class $o extends Vo{constructor(t,e){super(t,e,new Dn,!1)}get parent(){const t=_e(this._path);return null===t?null:new $o(this._repo,t)}get root(){let t=this;while(null!==t.parent)t=t.parent;return t}}hi($o),pi($o);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Ho="FIREBASE_DATABASE_EMULATOR_HOST",Bo={};let zo=!1;function Wo(t,e,n,r,i){let o=r||t.options.databaseURL;void 0===o&&(t.options.projectId||D("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),I("Using default host for project ",t.options.projectId),o=`${t.options.projectId}-default-rtdb.firebaseio.com`);let s,a,c=Fo(o,i),u=c.repoInfo;"undefined"!==typeof process&&(a={NODE_ENV:"production",BASE_URL:"/"}[Ho]),a?(s=!0,o=`http://${a}?ns=${u.namespace}`,c=Fo(o,i),u=c.repoInfo):s=!c.repoInfo.secure;const l=i&&s?new tt(tt.OWNER):new Z(t.name,t.options,e);ro("Invalid Firebase Database URL",c),be(c.path)||D("Database URL must point to the root of a Firebase Database (not including a child path).");const h=Ko(u,t,l,new J(t,n));return new Go(h,t)}function qo(t,e){const n=Bo[e];n&&n[t.key]===t||D(`Database ${e}(${t.repoInfo_}) has already been deleted.`),Eo(t),delete n[t.key]}function Ko(t,e,n,r){let i=Bo[e.name];i||(i={},Bo[e.name]=i);let o=i[t.toURLString()];return o&&D("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new ho(t,zo,n,r),i[t.toURLString()]=o,o}class Go{constructor(t,e){this._repoInternal=t,this.app=e,this["type"]="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(fo(this._repoInternal,this.app.options.appId,this.app.options["databaseAuthVariableOverride"]),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new $o(this._repo,de())),this._rootInternal}_delete(){return null!==this._rootInternal&&(qo(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){null===this._rootInternal&&D("Cannot call "+t+" on a deleted database.")}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Yo(t){f(s.MF),(0,s.om)(new a.uA("database",((t,{instanceIdentifier:e})=>{const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return Wo(n,r,i,e)}),"PUBLIC").setMultipleInstances(!0)),(0,s.KO)(l,h,t),(0,s.KO)(l,h,"esm2020")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */je.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},je.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};Yo();var Qo=n(2832),Xo=n(4388);n(4979);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Jo="firebasestorage.googleapis.com",Zo="storageBucket",ts=12e4,es=6e5;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class ns extends c.g{constructor(t,e,n=0){super(os(t),`Firebase Storage: ${e} (${os(t)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ns.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return os(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}\n${this.customData.serverResponse}`:this.message=this._baseMessage}}var rs,is;function os(t){return"storage/"+t}function ss(){const t="An unknown error occurred, please check the error payload for server response.";return new ns(rs.UNKNOWN,t)}function as(){return new ns(rs.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function cs(){return new ns(rs.CANCELED,"User canceled the upload/download.")}function us(t){return new ns(rs.INVALID_URL,"Invalid URL '"+t+"'.")}function ls(t){return new ns(rs.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function hs(t){return new ns(rs.INVALID_ARGUMENT,t)}function ds(){return new ns(rs.APP_DELETED,"The Firebase app was deleted.")}function fs(t){return new ns(rs.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(function(t){t["UNKNOWN"]="unknown",t["OBJECT_NOT_FOUND"]="object-not-found",t["BUCKET_NOT_FOUND"]="bucket-not-found",t["PROJECT_NOT_FOUND"]="project-not-found",t["QUOTA_EXCEEDED"]="quota-exceeded",t["UNAUTHENTICATED"]="unauthenticated",t["UNAUTHORIZED"]="unauthorized",t["UNAUTHORIZED_APP"]="unauthorized-app",t["RETRY_LIMIT_EXCEEDED"]="retry-limit-exceeded",t["INVALID_CHECKSUM"]="invalid-checksum",t["CANCELED"]="canceled",t["INVALID_EVENT_NAME"]="invalid-event-name",t["INVALID_URL"]="invalid-url",t["INVALID_DEFAULT_BUCKET"]="invalid-default-bucket",t["NO_DEFAULT_BUCKET"]="no-default-bucket",t["CANNOT_SLICE_BLOB"]="cannot-slice-blob",t["SERVER_FILE_WRONG_SIZE"]="server-file-wrong-size",t["NO_DOWNLOAD_URL"]="no-download-url",t["INVALID_ARGUMENT"]="invalid-argument",t["INVALID_ARGUMENT_COUNT"]="invalid-argument-count",t["APP_DELETED"]="app-deleted",t["INVALID_ROOT_OPERATION"]="invalid-root-operation",t["INVALID_FORMAT"]="invalid-format",t["INTERNAL_ERROR"]="internal-error",t["UNSUPPORTED_ENVIRONMENT"]="unsupported-environment"})(rs||(rs={}));
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class ps{constructor(t,e){this.bucket=t,this.path_=e}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o"}static makeFromBucketSpec(t,e){let n;try{n=ps.makeFromUrl(t,e)}catch(r){return new ps(t,"")}if(""===n.path)return n;throw ls(t)}static makeFromUrl(t,e){let n=null;const r="([A-Za-z0-9.\\-_]+)";function i(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}const o="(/(.*))?$",s=new RegExp("^gs://"+r+o,"i"),a={bucket:1,path:3};function c(t){t.path_=decodeURIComponent(t.path)}const u="v[A-Za-z0-9_]+",l=e.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",d=new RegExp(`^https?://${l}/${u}/b/${r}/o${h}`,"i"),f={bucket:1,path:3},p=e===Jo?"(?:storage.googleapis.com|storage.cloud.google.com)":e,m="([^?#]*)",g=new RegExp(`^https?://${p}/${r}/${m}`,"i"),y={bucket:1,path:2},v=[{regex:s,indices:a,postModify:i},{regex:d,indices:f,postModify:c},{regex:g,indices:y,postModify:c}];for(let _=0;_<v.length;_++){const e=v[_],r=e.regex.exec(t);if(r){const t=r[e.indices.bucket];let i=r[e.indices.path];i||(i=""),n=new ps(t,i),e.postModify(n);break}}if(null==n)throw us(t);return n}}class ms{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gs(t,e,n){let r=1,i=null,o=null,s=!1,a=0;function c(){return 2===a}let u=!1;function l(...t){u||(u=!0,e.apply(null,t))}function h(e){i=setTimeout((()=>{i=null,t(f,c())}),e)}function d(){o&&clearTimeout(o)}function f(t,...e){if(u)return void d();if(t)return d(),void l.call(null,t,...e);const n=c()||s;if(n)return d(),void l.call(null,t,...e);let i;r<64&&(r*=2),1===a?(a=2,i=0):i=1e3*(r+Math.random()),h(i)}let p=!1;function m(t){p||(p=!0,d(),u||(null!==i?(t||(a=2),clearTimeout(i),h(0)):t||(a=1)))}return h(0),o=setTimeout((()=>{s=!0,m(!0)}),n),m}function ys(t){t(!1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vs(t){return void 0!==t}function _s(t,e,n,r){if(r<e)throw hs(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw hs(`Invalid value for '${t}'. Expected ${n} or less.`)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ws(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function bs(t,e){const n=t>=500&&t<600,r=[408,429],i=-1!==r.indexOf(t),o=-1!==e.indexOf(t);return n||i||o}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(t){t[t["NO_ERROR"]=0]="NO_ERROR",t[t["NETWORK_ERROR"]=1]="NETWORK_ERROR",t[t["ABORT"]=2]="ABORT"})(is||(is={}));class Es{constructor(t,e,n,r,i,o,s,a,c,u,l,h=!0,d=!1){this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=s,this.errorCallback_=a,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=l,this.retry=h,this.isUsingEmulator=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((t,e)=>{this.resolve_=t,this.reject_=e,this.start_()}))}start_(){const t=(t,e)=>{if(e)return void t(!1,new Ts(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=t=>{const e=t.loaded,n=t.lengthComputable?t.total:-1;null!==this.progressCallback_&&this.progressCallback_(e,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const e=n.getErrorCode()===is.NO_ERROR,i=n.getStatus();if(!e||bs(i,this.additionalRetryCodes_)&&this.retry){const e=n.getErrorCode()===is.ABORT;return void t(!1,new Ts(!1,null,e))}const o=-1!==this.successCodes_.indexOf(i);t(!0,new Ts(o,n))}))},e=(t,e)=>{const n=this.resolve_,r=this.reject_,i=e.connection;if(e.wasSuccessCode)try{const t=this.callback_(i,i.getResponse());vs(t)?n(t):n()}catch(o){r(o)}else if(null!==i){const t=ss();t.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,t)):r(t)}else if(e.canceled){const t=this.appDelete_?ds():cs();r(t)}else{const t=as();r(t)}};this.canceled_?e(!1,new Ts(!1,null,!0)):this.backoffId_=gs(t,e,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&ys(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Ts{constructor(t,e,n){this.wasSuccessCode=t,this.connection=e,this.canceled=!!n}}function Cs(t,e){null!==e&&e.length>0&&(t["Authorization"]="Firebase "+e)}function Ss(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Is(t,e){e&&(t["X-Firebase-GMPID"]=e)}function ks(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}function xs(t,e,n,r,i,o,s=!0,a=!1){const c=ws(t.urlParams),u=t.url+c,l=Object.assign({},t.headers);return Is(l,e),Cs(l,n),Ss(l,o),ks(l,r),new Es(u,t.method,l,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,s,a)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ds(t){if(0===t.length)return null;const e=t.lastIndexOf("/");if(-1===e)return"";const n=t.slice(0,e);return n}function As(t){const e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ns{constructor(t,e){this._service=t,this._location=e instanceof ps?e:ps.makeFromUrl(e,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,e){return new Ns(t,e)}get root(){const t=new ps(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return As(this._location.path)}get storage(){return this._service}get parent(){const t=Ds(this._location.path);if(null===t)return null;const e=new ps(this._location.bucket,t);return new Ns(this._service,e)}_throwIfRoot(t){if(""===this._location.path)throw fs(t)}}function Os(t,e){const n=e?.[Zo];return null==n?null:ps.makeFromBucketSpec(n,t)}class Ps{constructor(t,e,n,r,i,o=!1){this.app=t,this._authProvider=e,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=Jo,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=ts,this._maxUploadRetryTime=es,this._requests=new Set,this._bucket=null!=r?ps.makeFromBucketSpec(r,this._host):Os(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,null!=this._url?this._bucket=ps.makeFromBucketSpec(this._url,t):this._bucket=Os(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){_s("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){_s("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const e=await t.getToken();if(null!==e)return e.accessToken}return null}async _getAppCheckToken(){if((0,s.xZ)(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});if(t){const e=await t.getToken();return e.token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((t=>t.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Ns(this,t)}_makeRequest(t,e,n,r,i=!0){if(this._deleted)return new ms(ds());{const o=xs(t,this._appId,n,r,e,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then((()=>this._requests.delete(o)),(()=>this._requests.delete(o))),o}}async makeRequestWithTokens(t,e){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,e,n,r).getPromise()}}const Rs="@firebase/storage",Ms="0.14.0",Ls="storage";function Fs(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Ps(n,r,i,e,s.MF)}function js(){(0,s.om)(new a.uA(Ls,Fs,"PUBLIC").setMultipleInstances(!0)),(0,s.KO)(Rs,Ms,""),(0,s.KO)(Rs,Ms,"esm2020")}js();n(3092),n(6400);const Us=new WeakMap;function Vs(t,e){return Us.has(e)||Us.set(e,t||{f:{},r:{},s:{},u:{}}),Us.get(e)}function $s(t,e,n,r){if(!t)return n;const[i,o]=Bs(t);if(!i)return n;const s=Vs(void 0,r)[i]||{},a=e||o;return a&&a in s?s[a]:n}function Hs(t,e,n,i){if(!t)return;const[o,s]=Bs(t);if(!o)return;const a=Vs(void 0,i)[o],c=e||s;return c?(n.then((t=>{a[c]=t})).catch(r.n),c):void 0}function Bs(t){return(0,r.i)(t)||(0,r.a)(t)?["f",t.path]:(0,r.b)(t)?["r",t.toString()]:(0,r.c)(t)?["s",t.toString()]:[]}const zs=new WeakMap;function Ws(t,e,n){const i=(0,r.u)();zs.has(i)||zs.set(i,new Map);const o=zs.get(i),s=Hs(e,n,t,i);return s&&o.set(s,t),s?()=>o.delete(s):r.n}const qs={toFirestore(t){return t},fromFirestore(t,e){return t.exists()?Object.defineProperties(t.data(e),{id:{value:t.id}}):null}};function Ks(t,e,n,i){if(!(0,r.g)(t))return[t,{}];const o=[{},{}],s=Object.keys(n).reduce(((t,e)=>{const r=n[e];return t[r.path]=r.data(),t}),{});function a(t,e,o,c){e=e||{};const[u,l]=c;Object.getOwnPropertyNames(t).forEach((e=>{const n=Object.getOwnPropertyDescriptor(t,e);n&&!n.enumerable&&Object.defineProperty(u,e,n)}));for(const h in t){const c=t[h];if(null==c||c instanceof Date||c instanceof Qo.Dc||c instanceof Qo.Ci)u[h]=c;else if((0,r.h)(c)){const t=o+h;u[h]=t in n?e[h]:c.path,l[t]=c.converter?c:c.withConverter(i.converter)}else if(Array.isArray(c)){u[h]=Array(c.length);for(let t=0;t<c.length;t++){const e=c[t];e&&e.path in s&&(u[h][t]=s[e.path])}a(c,e[h]||u[h],o+h+".",[u[h],l])}else(0,r.d)(c)?(u[h]={},a(c,e[h],o+h+".",[u[h],l])):u[h]=c}}return a(t,e,"",o),o}const Gs={reset:!1,wait:!0,maxRefDepth:2,converter:qs,snapshotOptions:{serverTimestamps:"estimate"}};function Ys(t){for(const e in t)t[e].unsub()}function Qs(t,e,n,i,o,s,a,c,u){const[l,h]=Ks(i.data(t.snapshotOptions),(0,r.w)(e,n),o,t);s.set(e,n,l),Js(t,e,n,o,h,s,a,c,u)}function Xs({ref:t,target:e,path:n,depth:i,resolve:o,reject:s,ops:a},c){const u=Object.create(null);let l=r.n;return c.once?(0,Qo.x7)(t).then((t=>{t.exists()?Qs(c,e,n,t,u,a,i,o,s):(a.set(e,n,null),o())})).catch(s):l=(0,Qo.aQ)(t,(t=>{t.exists()?Qs(c,e,n,t,u,a,i,o,s):(a.set(e,n,null),o())}),s),()=>{l(),Ys(u)}}function Js(t,e,n,i,o,s,a,c,u){const l=Object.keys(o),h=Object.keys(i).filter((t=>l.indexOf(t)<0));if(h.forEach((t=>{i[t].unsub(),delete i[t]})),!l.length||++a>t.maxRefDepth)return c(n);let d=0;const f=l.length,p=Object.create(null);function m(t){t in p&&++d>=f&&c(n)}l.forEach((c=>{const l=i[c],h=o[c],d=`${n}.${c}`;if(p[d]=!0,l){if(l.path===h.path)return;l.unsub()}i[c]={data:()=>(0,r.w)(e,d),unsub:Xs({ref:h,target:e,path:d,depth:a,ops:s,resolve:m.bind(null,d),reject:u},t),path:h.path}}))}function Zs(t,e,n,o,s,a){const c=Object.assign({},Gs,a),{snapshotListenOptions:u,snapshotOptions:l,wait:h,once:d}=c,f="value";let p=(0,i.KR)(h?[]:t.value);h||n.set(t,f,[]);const m=o;let g,y=r.n;const v=[],_={added:({newIndex:t,doc:e})=>{v.splice(t,0,Object.create(null));const r=v[t],[a,u]=Ks(e.data(l),void 0,r,c);n.add((0,i.BA)(p),t,a),Js(c,p,`${f}.${t}`,r,u,n,0,o.bind(null,e),s)},modified:({oldIndex:t,newIndex:e,doc:r})=>{const a=(0,i.BA)(p),u=v[t],h=a[t],[d,m]=Ks(r.data(l),h,u,c);v.splice(e,0,u),n.remove(a,t),n.add(a,e,d),Js(c,p,`${f}.${e}`,u,m,n,0,o,s)},removed:({oldIndex:t})=>{const e=(0,i.BA)(p);n.remove(e,t),Ys(v.splice(t,1)[0])}};function w(e){const s=e.docChanges(u);if(!g&&s.length){g=!0;let e=0;const a=s.length,c=Object.create(null);for(let t=0;t<a;t++)c[s[t].doc.id]=!0;o=s=>{s&&s.id in c&&++e>=a&&(h&&(n.set(t,f,(0,i.BA)(p)),p=t),m((0,i.BA)(p)),o=r.n)}}s.forEach((t=>{_[t.type](t)})),s.length||(h&&(n.set(t,f,(0,i.BA)(p)),p=t),o((0,i.BA)(p)))}return d?(0,Qo.GG)(e).then(w).catch(s):y=(0,Qo.aQ)(e,w,s),e=>{if(y(),e){const r="function"===typeof e?e():[];n.set(t,f,r)}v.forEach(Ys)}}function ta(t,e,n,i,o,s){const a=Object.assign({},Gs,s),c="value",u=Object.create(null);i=(0,r.j)(i,(()=>(0,r.w)(t,c)));let l=r.n;function h(e){e.exists()?Qs(a,t,c,e,u,n,0,i,o):(n.set(t,c,null),i(null))}return a.once?(0,Qo.x7)(e).then(h).catch(o):l=(0,Qo.aQ)(e,h,o),e=>{if(l(),e){const r="function"===typeof e?e():null;n.set(t,c,r)}Ys(u)}}const ea=Symbol();function na(t,e){let n=r.n;const s=Object.assign({},Gs,e),a=(0,i.BA)(t),c=s.target||(0,i.KR)();(0,r.f)()&&(s.once=!0);const u=$s(a,s.ssrKey,ea,(0,r.u)()),l=u!==ea;l&&(c.value=u);let h=!l;const d=(0,i.KR)(!1),f=(0,i.KR)(),p=(0,i.IJ)(),m=(0,i.o5)();let g=r.n;function y(){let e=(0,i.BA)(t);const o=new Promise(((t,i)=>{if(n(s.reset),!e)return n=r.n,t(null);d.value=h,h=!0,e.converter||(e=e.withConverter(s.converter)),n=((0,r.h)(e)?ta:Zs)(c,e,ra,t,i,s)})).catch((t=>(p.value===o&&(f.value=t),Promise.reject(t)))).finally((()=>{p.value===o&&(d.value=!1)}));p.value=o}let v=r.n;function _(t=s.reset){v(),g(),n(t)}return((0,i.i9)(t)||"function"===typeof t)&&(v=(0,o.wB)(t,y)),y(),a&&(g=Ws(p.value,a,s.ssrKey)),(0,o.nI)()&&(0,o.SS)((()=>p.value)),m&&(0,i.jr)(_),Object.defineProperties(c,{error:{get:()=>f},data:{get:()=>c},pending:{get:()=>d},promise:{get:()=>p},stop:{get:()=>_}})}const ra={set:(t,e,n)=>(0,r.k)(t,e,n),add:(t,e,n)=>t.splice(e,0,n),remove:(t,e)=>t.splice(e,1)};function ia(t,e){return na(t,{target:(0,i.KR)([]),...e})}function oa(t){return aa({initialUser:t,dependencies:{popupRedirectResolver:Xo.hk,persistence:[Xo.Gt,Xo.F0,Xo.iM]}})}const sa=Symbol("VueFireAuth");function aa({dependencies:t,initialUser:e}){return(n,i)=>{const[o,s]=ca(n,i,e,t);(0,r.s)(o,s)}}function ca(t,e,n,o,s=(0,Xo.Nu)(t,o)){const a=(0,r.l)(t,e).run((()=>(0,i.KR)(n)));return r.m.set(t,a),e.provide(sa,s),[a,s]}function ua(t,{firebaseApp:e,modules:n=[]}){t.provide(r._,e);for(const r of n)r(e,t)}},283:function(t,e,n){"use strict";var r=n(9504),i=n(9039),o=n(4901),s=n(9297),a=n(3724),c=n(350).CONFIGURABLE,u=n(3706),l=n(1181),h=l.enforce,d=l.get,f=String,p=Object.defineProperty,m=r("".slice),g=r("".replace),y=r([].join),v=a&&!i((function(){return 8!==p((function(){}),"length",{value:8}).length})),_=String(String).split("String"),w=t.exports=function(t,e,n){"Symbol("===m(f(e),0,7)&&(e="["+g(f(e),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),n&&n.getter&&(e="get "+e),n&&n.setter&&(e="set "+e),(!s(t,"name")||c&&t.name!==e)&&(a?p(t,"name",{value:e,configurable:!0}):t.name=e),v&&n&&s(n,"arity")&&t.length!==n.arity&&p(t,"length",{value:n.arity});try{n&&s(n,"constructor")&&n.constructor?a&&p(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(i){}var r=h(t);return s(r,"source")||(r.source=y(_,"string"==typeof e?e:"")),t};Function.prototype.toString=w((function(){return o(this)&&d(this).source||u(this)}),"toString")},323:function(t,e,n){n(4114),n(8111),n(1148),n(2489),n(116),n(7588),n(1701),n(8237),n(3579),n(7642),n(8004),n(3853),n(5876),n(2475),n(5024),n(1698),function(e,n){t.exports=n()}(0,(function(){"use strict";const t=new Map,e={set(e,n,r){t.has(e)||t.set(e,new Map);const i=t.get(e);i.has(n)||0===i.size?i.set(n,r):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(i.keys())[0]}.`)},get:(e,n)=>t.has(e)&&t.get(e).get(n)||null,remove(e,n){if(!t.has(e))return;const r=t.get(e);r.delete(n),0===r.size&&t.delete(e)}},n="transitionend",r=t=>(t&&window.CSS&&window.CSS.escape&&(t=t.replace(/#([^\s"#']+)/g,((t,e)=>`#${CSS.escape(e)}`))),t),i=t=>{t.dispatchEvent(new Event(n))},o=t=>!(!t||"object"!=typeof t)&&(void 0!==t.jquery&&(t=t[0]),void 0!==t.nodeType),s=t=>o(t)?t.jquery?t[0]:t:"string"==typeof t&&t.length>0?document.querySelector(r(t)):null,a=t=>{if(!o(t)||0===t.getClientRects().length)return!1;const e="visible"===getComputedStyle(t).getPropertyValue("visibility"),n=t.closest("details:not([open])");if(!n)return e;if(n!==t){const e=t.closest("summary");if(e&&e.parentNode!==n)return!1;if(null===e)return!1}return e},c=t=>!t||t.nodeType!==Node.ELEMENT_NODE||!!t.classList.contains("disabled")||(void 0!==t.disabled?t.disabled:t.hasAttribute("disabled")&&"false"!==t.getAttribute("disabled")),u=t=>{if(!document.documentElement.attachShadow)return null;if("function"==typeof t.getRootNode){const e=t.getRootNode();return e instanceof ShadowRoot?e:null}return t instanceof ShadowRoot?t:t.parentNode?u(t.parentNode):null},l=()=>{},h=t=>{t.offsetHeight},d=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,f=[],p=()=>"rtl"===document.documentElement.dir,m=t=>{var e;e=()=>{const e=d();if(e){const n=t.NAME,r=e.fn[n];e.fn[n]=t.jQueryInterface,e.fn[n].Constructor=t,e.fn[n].noConflict=()=>(e.fn[n]=r,t.jQueryInterface)}},"loading"===document.readyState?(f.length||document.addEventListener("DOMContentLoaded",(()=>{for(const t of f)t()})),f.push(e)):e()},g=(t,e=[],n=t)=>"function"==typeof t?t.call(...e):n,y=(t,e,r=!0)=>{if(!r)return void g(t);const o=(t=>{if(!t)return 0;let{transitionDuration:e,transitionDelay:n}=window.getComputedStyle(t);const r=Number.parseFloat(e),i=Number.parseFloat(n);return r||i?(e=e.split(",")[0],n=n.split(",")[0],1e3*(Number.parseFloat(e)+Number.parseFloat(n))):0})(e)+5;let s=!1;const a=({target:r})=>{r===e&&(s=!0,e.removeEventListener(n,a),g(t))};e.addEventListener(n,a),setTimeout((()=>{s||i(e)}),o)},v=(t,e,n,r)=>{const i=t.length;let o=t.indexOf(e);return-1===o?!n&&r?t[i-1]:t[0]:(o+=n?1:-1,r&&(o=(o+i)%i),t[Math.max(0,Math.min(o,i-1))])},_=/[^.]*(?=\..*)\.|.*/,w=/\..*/,b=/::\d+$/,E={};let T=1;const C={mouseenter:"mouseover",mouseleave:"mouseout"},S=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function I(t,e){return e&&`${e}::${T++}`||t.uidEvent||T++}function k(t){const e=I(t);return t.uidEvent=e,E[e]=E[e]||{},E[e]}function x(t,e,n=null){return Object.values(t).find((t=>t.callable===e&&t.delegationSelector===n))}function D(t,e,n){const r="string"==typeof e,i=r?n:e||n;let o=P(t);return S.has(o)||(o=t),[r,i,o]}function A(t,e,n,r,i){if("string"!=typeof e||!t)return;let[o,s,a]=D(e,n,r);if(e in C){const t=t=>function(e){if(!e.relatedTarget||e.relatedTarget!==e.delegateTarget&&!e.delegateTarget.contains(e.relatedTarget))return t.call(this,e)};s=t(s)}const c=k(t),u=c[a]||(c[a]={}),l=x(u,s,o?n:null);if(l)return void(l.oneOff=l.oneOff&&i);const h=I(s,e.replace(_,"")),d=o?function(t,e,n){return function r(i){const o=t.querySelectorAll(e);for(let{target:s}=i;s&&s!==this;s=s.parentNode)for(const a of o)if(a===s)return M(i,{delegateTarget:s}),r.oneOff&&R.off(t,i.type,e,n),n.apply(s,[i])}}(t,n,s):function(t,e){return function n(r){return M(r,{delegateTarget:t}),n.oneOff&&R.off(t,r.type,e),e.apply(t,[r])}}(t,s);d.delegationSelector=o?n:null,d.callable=s,d.oneOff=i,d.uidEvent=h,u[h]=d,t.addEventListener(a,d,o)}function N(t,e,n,r,i){const o=x(e[n],r,i);o&&(t.removeEventListener(n,o,Boolean(i)),delete e[n][o.uidEvent])}function O(t,e,n,r){const i=e[n]||{};for(const[o,s]of Object.entries(i))o.includes(r)&&N(t,e,n,s.callable,s.delegationSelector)}function P(t){return t=t.replace(w,""),C[t]||t}const R={on(t,e,n,r){A(t,e,n,r,!1)},one(t,e,n,r){A(t,e,n,r,!0)},off(t,e,n,r){if("string"!=typeof e||!t)return;const[i,o,s]=D(e,n,r),a=s!==e,c=k(t),u=c[s]||{},l=e.startsWith(".");if(void 0===o){if(l)for(const n of Object.keys(c))O(t,c,n,e.slice(1));for(const[n,r]of Object.entries(u)){const i=n.replace(b,"");a&&!e.includes(i)||N(t,c,s,r.callable,r.delegationSelector)}}else{if(!Object.keys(u).length)return;N(t,c,s,o,i?n:null)}},trigger(t,e,n){if("string"!=typeof e||!t)return null;const r=d();let i=null,o=!0,s=!0,a=!1;e!==P(e)&&r&&(i=r.Event(e,n),r(t).trigger(i),o=!i.isPropagationStopped(),s=!i.isImmediatePropagationStopped(),a=i.isDefaultPrevented());const c=M(new Event(e,{bubbles:o,cancelable:!0}),n);return a&&c.preventDefault(),s&&t.dispatchEvent(c),c.defaultPrevented&&i&&i.preventDefault(),c}};function M(t,e={}){for(const[n,r]of Object.entries(e))try{t[n]=r}catch(e){Object.defineProperty(t,n,{configurable:!0,get:()=>r})}return t}function L(t){if("true"===t)return!0;if("false"===t)return!1;if(t===Number(t).toString())return Number(t);if(""===t||"null"===t)return null;if("string"!=typeof t)return t;try{return JSON.parse(decodeURIComponent(t))}catch(e){return t}}function F(t){return t.replace(/[A-Z]/g,(t=>`-${t.toLowerCase()}`))}const j={setDataAttribute(t,e,n){t.setAttribute(`data-bs-${F(e)}`,n)},removeDataAttribute(t,e){t.removeAttribute(`data-bs-${F(e)}`)},getDataAttributes(t){if(!t)return{};const e={},n=Object.keys(t.dataset).filter((t=>t.startsWith("bs")&&!t.startsWith("bsConfig")));for(const r of n){let n=r.replace(/^bs/,"");n=n.charAt(0).toLowerCase()+n.slice(1),e[n]=L(t.dataset[r])}return e},getDataAttribute:(t,e)=>L(t.getAttribute(`data-bs-${F(e)}`))};class U{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,e){const n=o(e)?j.getDataAttribute(e,"config"):{};return{...this.constructor.Default,..."object"==typeof n?n:{},...o(e)?j.getDataAttributes(e):{},..."object"==typeof t?t:{}}}_typeCheckConfig(t,e=this.constructor.DefaultType){for(const[r,i]of Object.entries(e)){const e=t[r],s=o(e)?"element":null==(n=e)?`${n}`:Object.prototype.toString.call(n).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(i).test(s))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${r}" provided type "${s}" but expected type "${i}".`)}var n}}class V extends U{constructor(t,n){super(),(t=s(t))&&(this._element=t,this._config=this._getConfig(n),e.set(this._element,this.constructor.DATA_KEY,this))}dispose(){e.remove(this._element,this.constructor.DATA_KEY),R.off(this._element,this.constructor.EVENT_KEY);for(const t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,e,n=!0){y(t,e,n)}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return e.get(s(t),this.DATA_KEY)}static getOrCreateInstance(t,e={}){return this.getInstance(t)||new this(t,"object"==typeof e?e:null)}static get VERSION(){return"5.3.5"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}}const $=t=>{let e=t.getAttribute("data-bs-target");if(!e||"#"===e){let n=t.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n=`#${n.split("#")[1]}`),e=n&&"#"!==n?n.trim():null}return e?e.split(",").map((t=>r(t))).join(","):null},H={find:(t,e=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(e,t)),findOne:(t,e=document.documentElement)=>Element.prototype.querySelector.call(e,t),children:(t,e)=>[].concat(...t.children).filter((t=>t.matches(e))),parents(t,e){const n=[];let r=t.parentNode.closest(e);for(;r;)n.push(r),r=r.parentNode.closest(e);return n},prev(t,e){let n=t.previousElementSibling;for(;n;){if(n.matches(e))return[n];n=n.previousElementSibling}return[]},next(t,e){let n=t.nextElementSibling;for(;n;){if(n.matches(e))return[n];n=n.nextElementSibling}return[]},focusableChildren(t){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map((t=>`${t}:not([tabindex^="-"])`)).join(",");return this.find(e,t).filter((t=>!c(t)&&a(t)))},getSelectorFromElement(t){const e=$(t);return e&&H.findOne(e)?e:null},getElementFromSelector(t){const e=$(t);return e?H.findOne(e):null},getMultipleElementsFromSelector(t){const e=$(t);return e?H.find(e):[]}},B=(t,e="hide")=>{const n=`click.dismiss${t.EVENT_KEY}`,r=t.NAME;R.on(document,n,`[data-bs-dismiss="${r}"]`,(function(n){if(["A","AREA"].includes(this.tagName)&&n.preventDefault(),c(this))return;const i=H.getElementFromSelector(this)||this.closest(`.${r}`);t.getOrCreateInstance(i)[e]()}))},z=".bs.alert",W=`close${z}`,q=`closed${z}`;class K extends V{static get NAME(){return"alert"}close(){if(R.trigger(this._element,W).defaultPrevented)return;this._element.classList.remove("show");const t=this._element.classList.contains("fade");this._queueCallback((()=>this._destroyElement()),this._element,t)}_destroyElement(){this._element.remove(),R.trigger(this._element,q),this.dispose()}static jQueryInterface(t){return this.each((function(){const e=K.getOrCreateInstance(this);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}B(K,"close"),m(K);const G='[data-bs-toggle="button"]';class Y extends V{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(t){return this.each((function(){const e=Y.getOrCreateInstance(this);"toggle"===t&&e[t]()}))}}R.on(document,"click.bs.button.data-api",G,(t=>{t.preventDefault();const e=t.target.closest(G);Y.getOrCreateInstance(e).toggle()})),m(Y);const Q=".bs.swipe",X=`touchstart${Q}`,J=`touchmove${Q}`,Z=`touchend${Q}`,tt=`pointerdown${Q}`,et=`pointerup${Q}`,nt={endCallback:null,leftCallback:null,rightCallback:null},rt={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class it extends U{constructor(t,e){super(),this._element=t,t&&it.isSupported()&&(this._config=this._getConfig(e),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return nt}static get DefaultType(){return rt}static get NAME(){return"swipe"}dispose(){R.off(this._element,Q)}_start(t){this._supportPointerEvents?this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX):this._deltaX=t.touches[0].clientX}_end(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX),this._handleSwipe(),g(this._config.endCallback)}_move(t){this._deltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this._deltaX}_handleSwipe(){const t=Math.abs(this._deltaX);if(t<=40)return;const e=t/this._deltaX;this._deltaX=0,e&&g(e>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(R.on(this._element,tt,(t=>this._start(t))),R.on(this._element,et,(t=>this._end(t))),this._element.classList.add("pointer-event")):(R.on(this._element,X,(t=>this._start(t))),R.on(this._element,J,(t=>this._move(t))),R.on(this._element,Z,(t=>this._end(t))))}_eventIsPointerPenTouch(t){return this._supportPointerEvents&&("pen"===t.pointerType||"touch"===t.pointerType)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const ot=".bs.carousel",st=".data-api",at="ArrowLeft",ct="ArrowRight",ut="next",lt="prev",ht="left",dt="right",ft=`slide${ot}`,pt=`slid${ot}`,mt=`keydown${ot}`,gt=`mouseenter${ot}`,yt=`mouseleave${ot}`,vt=`dragstart${ot}`,_t=`load${ot}${st}`,wt=`click${ot}${st}`,bt="carousel",Et="active",Tt=".active",Ct=".carousel-item",St=Tt+Ct,It={[at]:dt,[ct]:ht},kt={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},xt={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Dt extends V{constructor(t,e){super(t,e),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=H.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===bt&&this.cycle()}static get Default(){return kt}static get DefaultType(){return xt}static get NAME(){return"carousel"}next(){this._slide(ut)}nextWhenVisible(){!document.hidden&&a(this._element)&&this.next()}prev(){this._slide(lt)}pause(){this._isSliding&&i(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval((()=>this.nextWhenVisible()),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?R.one(this._element,pt,(()=>this.cycle())):this.cycle())}to(t){const e=this._getItems();if(t>e.length-1||t<0)return;if(this._isSliding)return void R.one(this._element,pt,(()=>this.to(t)));const n=this._getItemIndex(this._getActive());if(n===t)return;const r=t>n?ut:lt;this._slide(r,e[t])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(t){return t.defaultInterval=t.interval,t}_addEventListeners(){this._config.keyboard&&R.on(this._element,mt,(t=>this._keydown(t))),"hover"===this._config.pause&&(R.on(this._element,gt,(()=>this.pause())),R.on(this._element,yt,(()=>this._maybeEnableCycle()))),this._config.touch&&it.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const e of H.find(".carousel-item img",this._element))R.on(e,vt,(t=>t.preventDefault()));const t={leftCallback:()=>this._slide(this._directionToOrder(ht)),rightCallback:()=>this._slide(this._directionToOrder(dt)),endCallback:()=>{"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout((()=>this._maybeEnableCycle()),500+this._config.interval))}};this._swipeHelper=new it(this._element,t)}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;const e=It[t.key];e&&(t.preventDefault(),this._slide(this._directionToOrder(e)))}_getItemIndex(t){return this._getItems().indexOf(t)}_setActiveIndicatorElement(t){if(!this._indicatorsElement)return;const e=H.findOne(Tt,this._indicatorsElement);e.classList.remove(Et),e.removeAttribute("aria-current");const n=H.findOne(`[data-bs-slide-to="${t}"]`,this._indicatorsElement);n&&(n.classList.add(Et),n.setAttribute("aria-current","true"))}_updateInterval(){const t=this._activeElement||this._getActive();if(!t)return;const e=Number.parseInt(t.getAttribute("data-bs-interval"),10);this._config.interval=e||this._config.defaultInterval}_slide(t,e=null){if(this._isSliding)return;const n=this._getActive(),r=t===ut,i=e||v(this._getItems(),n,r,this._config.wrap);if(i===n)return;const o=this._getItemIndex(i),s=e=>R.trigger(this._element,e,{relatedTarget:i,direction:this._orderToDirection(t),from:this._getItemIndex(n),to:o});if(s(ft).defaultPrevented)return;if(!n||!i)return;const a=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(o),this._activeElement=i;const c=r?"carousel-item-start":"carousel-item-end",u=r?"carousel-item-next":"carousel-item-prev";i.classList.add(u),h(i),n.classList.add(c),i.classList.add(c),this._queueCallback((()=>{i.classList.remove(c,u),i.classList.add(Et),n.classList.remove(Et,u,c),this._isSliding=!1,s(pt)}),n,this._isAnimated()),a&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return H.findOne(St,this._element)}_getItems(){return H.find(Ct,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(t){return p()?t===ht?lt:ut:t===ht?ut:lt}_orderToDirection(t){return p()?t===lt?ht:dt:t===lt?dt:ht}static jQueryInterface(t){return this.each((function(){const e=Dt.getOrCreateInstance(this,t);if("number"!=typeof t){if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t]()}}else e.to(t)}))}}R.on(document,wt,"[data-bs-slide], [data-bs-slide-to]",(function(t){const e=H.getElementFromSelector(this);if(!e||!e.classList.contains(bt))return;t.preventDefault();const n=Dt.getOrCreateInstance(e),r=this.getAttribute("data-bs-slide-to");return r?(n.to(r),void n._maybeEnableCycle()):"next"===j.getDataAttribute(this,"slide")?(n.next(),void n._maybeEnableCycle()):(n.prev(),void n._maybeEnableCycle())})),R.on(window,_t,(()=>{const t=H.find('[data-bs-ride="carousel"]');for(const e of t)Dt.getOrCreateInstance(e)})),m(Dt);const At=".bs.collapse",Nt=`show${At}`,Ot=`shown${At}`,Pt=`hide${At}`,Rt=`hidden${At}`,Mt=`click${At}.data-api`,Lt="show",Ft="collapse",jt="collapsing",Ut=`:scope .${Ft} .${Ft}`,Vt='[data-bs-toggle="collapse"]',$t={parent:null,toggle:!0},Ht={parent:"(null|element)",toggle:"boolean"};class Bt extends V{constructor(t,e){super(t,e),this._isTransitioning=!1,this._triggerArray=[];const n=H.find(Vt);for(const r of n){const t=H.getSelectorFromElement(r),e=H.find(t).filter((t=>t===this._element));null!==t&&e.length&&this._triggerArray.push(r)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return $t}static get DefaultType(){return Ht}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter((t=>t!==this._element)).map((t=>Bt.getOrCreateInstance(t,{toggle:!1})))),t.length&&t[0]._isTransitioning)return;if(R.trigger(this._element,Nt).defaultPrevented)return;for(const r of t)r.hide();const e=this._getDimension();this._element.classList.remove(Ft),this._element.classList.add(jt),this._element.style[e]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const n=`scroll${e[0].toUpperCase()+e.slice(1)}`;this._queueCallback((()=>{this._isTransitioning=!1,this._element.classList.remove(jt),this._element.classList.add(Ft,Lt),this._element.style[e]="",R.trigger(this._element,Ot)}),this._element,!0),this._element.style[e]=`${this._element[n]}px`}hide(){if(this._isTransitioning||!this._isShown())return;if(R.trigger(this._element,Pt).defaultPrevented)return;const t=this._getDimension();this._element.style[t]=`${this._element.getBoundingClientRect()[t]}px`,h(this._element),this._element.classList.add(jt),this._element.classList.remove(Ft,Lt);for(const e of this._triggerArray){const t=H.getElementFromSelector(e);t&&!this._isShown(t)&&this._addAriaAndCollapsedClass([e],!1)}this._isTransitioning=!0,this._element.style[t]="",this._queueCallback((()=>{this._isTransitioning=!1,this._element.classList.remove(jt),this._element.classList.add(Ft),R.trigger(this._element,Rt)}),this._element,!0)}_isShown(t=this._element){return t.classList.contains(Lt)}_configAfterMerge(t){return t.toggle=Boolean(t.toggle),t.parent=s(t.parent),t}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const t=this._getFirstLevelChildren(Vt);for(const e of t){const t=H.getElementFromSelector(e);t&&this._addAriaAndCollapsedClass([e],this._isShown(t))}}_getFirstLevelChildren(t){const e=H.find(Ut,this._config.parent);return H.find(t,this._config.parent).filter((t=>!e.includes(t)))}_addAriaAndCollapsedClass(t,e){if(t.length)for(const n of t)n.classList.toggle("collapsed",!e),n.setAttribute("aria-expanded",e)}static jQueryInterface(t){const e={};return"string"==typeof t&&/show|hide/.test(t)&&(e.toggle=!1),this.each((function(){const n=Bt.getOrCreateInstance(this,e);if("string"==typeof t){if(void 0===n[t])throw new TypeError(`No method named "${t}"`);n[t]()}}))}}R.on(document,Mt,Vt,(function(t){("A"===t.target.tagName||t.delegateTarget&&"A"===t.delegateTarget.tagName)&&t.preventDefault();for(const e of H.getMultipleElementsFromSelector(this))Bt.getOrCreateInstance(e,{toggle:!1}).toggle()})),m(Bt);var zt="top",Wt="bottom",qt="right",Kt="left",Gt="auto",Yt=[zt,Wt,qt,Kt],Qt="start",Xt="end",Jt="clippingParents",Zt="viewport",te="popper",ee="reference",ne=Yt.reduce((function(t,e){return t.concat([e+"-"+Qt,e+"-"+Xt])}),[]),re=[].concat(Yt,[Gt]).reduce((function(t,e){return t.concat([e,e+"-"+Qt,e+"-"+Xt])}),[]),ie="beforeRead",oe="read",se="afterRead",ae="beforeMain",ce="main",ue="afterMain",le="beforeWrite",he="write",de="afterWrite",fe=[ie,oe,se,ae,ce,ue,le,he,de];function pe(t){return t?(t.nodeName||"").toLowerCase():null}function me(t){if(null==t)return window;if("[object Window]"!==t.toString()){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function ge(t){return t instanceof me(t).Element||t instanceof Element}function ye(t){return t instanceof me(t).HTMLElement||t instanceof HTMLElement}function ve(t){return"undefined"!=typeof ShadowRoot&&(t instanceof me(t).ShadowRoot||t instanceof ShadowRoot)}const _e={name:"applyStyles",enabled:!0,phase:"write",fn:function(t){var e=t.state;Object.keys(e.elements).forEach((function(t){var n=e.styles[t]||{},r=e.attributes[t]||{},i=e.elements[t];ye(i)&&pe(i)&&(Object.assign(i.style,n),Object.keys(r).forEach((function(t){var e=r[t];!1===e?i.removeAttribute(t):i.setAttribute(t,!0===e?"":e)})))}))},effect:function(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach((function(t){var r=e.elements[t],i=e.attributes[t]||{},o=Object.keys(e.styles.hasOwnProperty(t)?e.styles[t]:n[t]).reduce((function(t,e){return t[e]="",t}),{});ye(r)&&pe(r)&&(Object.assign(r.style,o),Object.keys(i).forEach((function(t){r.removeAttribute(t)})))}))}},requires:["computeStyles"]};function we(t){return t.split("-")[0]}var be=Math.max,Ee=Math.min,Te=Math.round;function Ce(){var t=navigator.userAgentData;return null!=t&&t.brands&&Array.isArray(t.brands)?t.brands.map((function(t){return t.brand+"/"+t.version})).join(" "):navigator.userAgent}function Se(){return!/^((?!chrome|android).)*safari/i.test(Ce())}function Ie(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var r=t.getBoundingClientRect(),i=1,o=1;e&&ye(t)&&(i=t.offsetWidth>0&&Te(r.width)/t.offsetWidth||1,o=t.offsetHeight>0&&Te(r.height)/t.offsetHeight||1);var s=(ge(t)?me(t):window).visualViewport,a=!Se()&&n,c=(r.left+(a&&s?s.offsetLeft:0))/i,u=(r.top+(a&&s?s.offsetTop:0))/o,l=r.width/i,h=r.height/o;return{width:l,height:h,top:u,right:c+l,bottom:u+h,left:c,x:c,y:u}}function ke(t){var e=Ie(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function xe(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&ve(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function De(t){return me(t).getComputedStyle(t)}function Ae(t){return["table","td","th"].indexOf(pe(t))>=0}function Ne(t){return((ge(t)?t.ownerDocument:t.document)||window.document).documentElement}function Oe(t){return"html"===pe(t)?t:t.assignedSlot||t.parentNode||(ve(t)?t.host:null)||Ne(t)}function Pe(t){return ye(t)&&"fixed"!==De(t).position?t.offsetParent:null}function Re(t){for(var e=me(t),n=Pe(t);n&&Ae(n)&&"static"===De(n).position;)n=Pe(n);return n&&("html"===pe(n)||"body"===pe(n)&&"static"===De(n).position)?e:n||function(t){var e=/firefox/i.test(Ce());if(/Trident/i.test(Ce())&&ye(t)&&"fixed"===De(t).position)return null;var n=Oe(t);for(ve(n)&&(n=n.host);ye(n)&&["html","body"].indexOf(pe(n))<0;){var r=De(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||e&&"filter"===r.willChange||e&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(t)||e}function Me(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Le(t,e,n){return be(t,Ee(e,n))}function Fe(t){return Object.assign({},{top:0,right:0,bottom:0,left:0},t)}function je(t,e){return e.reduce((function(e,n){return e[n]=t,e}),{})}const Ue={name:"arrow",enabled:!0,phase:"main",fn:function(t){var e,n=t.state,r=t.name,i=t.options,o=n.elements.arrow,s=n.modifiersData.popperOffsets,a=we(n.placement),c=Me(a),u=[Kt,qt].indexOf(a)>=0?"height":"width";if(o&&s){var l=function(t,e){return Fe("number"!=typeof(t="function"==typeof t?t(Object.assign({},e.rects,{placement:e.placement})):t)?t:je(t,Yt))}(i.padding,n),h=ke(o),d="y"===c?zt:Kt,f="y"===c?Wt:qt,p=n.rects.reference[u]+n.rects.reference[c]-s[c]-n.rects.popper[u],m=s[c]-n.rects.reference[c],g=Re(o),y=g?"y"===c?g.clientHeight||0:g.clientWidth||0:0,v=p/2-m/2,_=l[d],w=y-h[u]-l[f],b=y/2-h[u]/2+v,E=Le(_,b,w),T=c;n.modifiersData[r]=((e={})[T]=E,e.centerOffset=E-b,e)}},effect:function(t){var e=t.state,n=t.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!=typeof r||(r=e.elements.popper.querySelector(r)))&&xe(e.elements.popper,r)&&(e.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ve(t){return t.split("-")[1]}var $e={top:"auto",right:"auto",bottom:"auto",left:"auto"};function He(t){var e,n=t.popper,r=t.popperRect,i=t.placement,o=t.variation,s=t.offsets,a=t.position,c=t.gpuAcceleration,u=t.adaptive,l=t.roundOffsets,h=t.isFixed,d=s.x,f=void 0===d?0:d,p=s.y,m=void 0===p?0:p,g="function"==typeof l?l({x:f,y:m}):{x:f,y:m};f=g.x,m=g.y;var y=s.hasOwnProperty("x"),v=s.hasOwnProperty("y"),_=Kt,w=zt,b=window;if(u){var E=Re(n),T="clientHeight",C="clientWidth";E===me(n)&&"static"!==De(E=Ne(n)).position&&"absolute"===a&&(T="scrollHeight",C="scrollWidth"),(i===zt||(i===Kt||i===qt)&&o===Xt)&&(w=Wt,m-=(h&&E===b&&b.visualViewport?b.visualViewport.height:E[T])-r.height,m*=c?1:-1),i!==Kt&&(i!==zt&&i!==Wt||o!==Xt)||(_=qt,f-=(h&&E===b&&b.visualViewport?b.visualViewport.width:E[C])-r.width,f*=c?1:-1)}var S,I=Object.assign({position:a},u&&$e),k=!0===l?function(t,e){var n=t.x,r=t.y,i=e.devicePixelRatio||1;return{x:Te(n*i)/i||0,y:Te(r*i)/i||0}}({x:f,y:m},me(n)):{x:f,y:m};return f=k.x,m=k.y,c?Object.assign({},I,((S={})[w]=v?"0":"",S[_]=y?"0":"",S.transform=(b.devicePixelRatio||1)<=1?"translate("+f+"px, "+m+"px)":"translate3d("+f+"px, "+m+"px, 0)",S)):Object.assign({},I,((e={})[w]=v?m+"px":"",e[_]=y?f+"px":"",e.transform="",e))}const Be={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=void 0===r||r,o=n.adaptive,s=void 0===o||o,a=n.roundOffsets,c=void 0===a||a,u={placement:we(e.placement),variation:Ve(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:"fixed"===e.options.strategy};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,He(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:s,roundOffsets:c})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,He(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}};var ze={passive:!0};const We={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,o=void 0===i||i,s=r.resize,a=void 0===s||s,c=me(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&u.forEach((function(t){t.addEventListener("scroll",n.update,ze)})),a&&c.addEventListener("resize",n.update,ze),function(){o&&u.forEach((function(t){t.removeEventListener("scroll",n.update,ze)})),a&&c.removeEventListener("resize",n.update,ze)}},data:{}};var qe={left:"right",right:"left",bottom:"top",top:"bottom"};function Ke(t){return t.replace(/left|right|bottom|top/g,(function(t){return qe[t]}))}var Ge={start:"end",end:"start"};function Ye(t){return t.replace(/start|end/g,(function(t){return Ge[t]}))}function Qe(t){var e=me(t);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Xe(t){return Ie(Ne(t)).left+Qe(t).scrollLeft}function Je(t){var e=De(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function Ze(t){return["html","body","#document"].indexOf(pe(t))>=0?t.ownerDocument.body:ye(t)&&Je(t)?t:Ze(Oe(t))}function tn(t,e){var n;void 0===e&&(e=[]);var r=Ze(t),i=r===(null==(n=t.ownerDocument)?void 0:n.body),o=me(r),s=i?[o].concat(o.visualViewport||[],Je(r)?r:[]):r,a=e.concat(s);return i?a:a.concat(tn(Oe(s)))}function en(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function nn(t,e,n){return e===Zt?en(function(t,e){var n=me(t),r=Ne(t),i=n.visualViewport,o=r.clientWidth,s=r.clientHeight,a=0,c=0;if(i){o=i.width,s=i.height;var u=Se();(u||!u&&"fixed"===e)&&(a=i.offsetLeft,c=i.offsetTop)}return{width:o,height:s,x:a+Xe(t),y:c}}(t,n)):ge(e)?function(t,e){var n=Ie(t,!1,"fixed"===e);return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}(e,n):en(function(t){var e,n=Ne(t),r=Qe(t),i=null==(e=t.ownerDocument)?void 0:e.body,o=be(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=be(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+Xe(t),c=-r.scrollTop;return"rtl"===De(i||n).direction&&(a+=be(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:s,x:a,y:c}}(Ne(t)))}function rn(t){var e,n=t.reference,r=t.element,i=t.placement,o=i?we(i):null,s=i?Ve(i):null,a=n.x+n.width/2-r.width/2,c=n.y+n.height/2-r.height/2;switch(o){case zt:e={x:a,y:n.y-r.height};break;case Wt:e={x:a,y:n.y+n.height};break;case qt:e={x:n.x+n.width,y:c};break;case Kt:e={x:n.x-r.width,y:c};break;default:e={x:n.x,y:n.y}}var u=o?Me(o):null;if(null!=u){var l="y"===u?"height":"width";switch(s){case Qt:e[u]=e[u]-(n[l]/2-r[l]/2);break;case Xt:e[u]=e[u]+(n[l]/2-r[l]/2)}}return e}function on(t,e){void 0===e&&(e={});var n=e,r=n.placement,i=void 0===r?t.placement:r,o=n.strategy,s=void 0===o?t.strategy:o,a=n.boundary,c=void 0===a?Jt:a,u=n.rootBoundary,l=void 0===u?Zt:u,h=n.elementContext,d=void 0===h?te:h,f=n.altBoundary,p=void 0!==f&&f,m=n.padding,g=void 0===m?0:m,y=Fe("number"!=typeof g?g:je(g,Yt)),v=d===te?ee:te,_=t.rects.popper,w=t.elements[p?v:d],b=function(t,e,n,r){var i="clippingParents"===e?function(t){var e=tn(Oe(t)),n=["absolute","fixed"].indexOf(De(t).position)>=0&&ye(t)?Re(t):t;return ge(n)?e.filter((function(t){return ge(t)&&xe(t,n)&&"body"!==pe(t)})):[]}(t):[].concat(e),o=[].concat(i,[n]),s=o[0],a=o.reduce((function(e,n){var i=nn(t,n,r);return e.top=be(i.top,e.top),e.right=Ee(i.right,e.right),e.bottom=Ee(i.bottom,e.bottom),e.left=be(i.left,e.left),e}),nn(t,s,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}(ge(w)?w:w.contextElement||Ne(t.elements.popper),c,l,s),E=Ie(t.elements.reference),T=rn({reference:E,element:_,placement:i}),C=en(Object.assign({},_,T)),S=d===te?C:E,I={top:b.top-S.top+y.top,bottom:S.bottom-b.bottom+y.bottom,left:b.left-S.left+y.left,right:S.right-b.right+y.right},k=t.modifiersData.offset;if(d===te&&k){var x=k[i];Object.keys(I).forEach((function(t){var e=[qt,Wt].indexOf(t)>=0?1:-1,n=[zt,Wt].indexOf(t)>=0?"y":"x";I[t]+=x[n]*e}))}return I}function sn(t,e){void 0===e&&(e={});var n=e,r=n.placement,i=n.boundary,o=n.rootBoundary,s=n.padding,a=n.flipVariations,c=n.allowedAutoPlacements,u=void 0===c?re:c,l=Ve(r),h=l?a?ne:ne.filter((function(t){return Ve(t)===l})):Yt,d=h.filter((function(t){return u.indexOf(t)>=0}));0===d.length&&(d=h);var f=d.reduce((function(e,n){return e[n]=on(t,{placement:n,boundary:i,rootBoundary:o,padding:s})[we(n)],e}),{});return Object.keys(f).sort((function(t,e){return f[t]-f[e]}))}const an={name:"flip",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,o=void 0===i||i,s=n.altAxis,a=void 0===s||s,c=n.fallbackPlacements,u=n.padding,l=n.boundary,h=n.rootBoundary,d=n.altBoundary,f=n.flipVariations,p=void 0===f||f,m=n.allowedAutoPlacements,g=e.options.placement,y=we(g),v=c||(y!==g&&p?function(t){if(we(t)===Gt)return[];var e=Ke(t);return[Ye(t),e,Ye(e)]}(g):[Ke(g)]),_=[g].concat(v).reduce((function(t,n){return t.concat(we(n)===Gt?sn(e,{placement:n,boundary:l,rootBoundary:h,padding:u,flipVariations:p,allowedAutoPlacements:m}):n)}),[]),w=e.rects.reference,b=e.rects.popper,E=new Map,T=!0,C=_[0],S=0;S<_.length;S++){var I=_[S],k=we(I),x=Ve(I)===Qt,D=[zt,Wt].indexOf(k)>=0,A=D?"width":"height",N=on(e,{placement:I,boundary:l,rootBoundary:h,altBoundary:d,padding:u}),O=D?x?qt:Kt:x?Wt:zt;w[A]>b[A]&&(O=Ke(O));var P=Ke(O),R=[];if(o&&R.push(N[k]<=0),a&&R.push(N[O]<=0,N[P]<=0),R.every((function(t){return t}))){C=I,T=!1;break}E.set(I,R)}if(T)for(var M=function(t){var e=_.find((function(e){var n=E.get(e);if(n)return n.slice(0,t).every((function(t){return t}))}));if(e)return C=e,"break"},L=p?3:1;L>0&&"break"!==M(L);L--);e.placement!==C&&(e.modifiersData[r]._skip=!0,e.placement=C,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function cn(t,e,n){return void 0===n&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function un(t){return[zt,qt,Wt,Kt].some((function(e){return t[e]>=0}))}const ln={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,o=e.modifiersData.preventOverflow,s=on(e,{elementContext:"reference"}),a=on(e,{altBoundary:!0}),c=cn(s,r),u=cn(a,i,o),l=un(c),h=un(u);e.modifiersData[n]={referenceClippingOffsets:c,popperEscapeOffsets:u,isReferenceHidden:l,hasPopperEscaped:h},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":l,"data-popper-escaped":h})}},hn={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(t){var e=t.state,n=t.options,r=t.name,i=n.offset,o=void 0===i?[0,0]:i,s=re.reduce((function(t,n){return t[n]=function(t,e,n){var r=we(t),i=[Kt,zt].indexOf(r)>=0?-1:1,o="function"==typeof n?n(Object.assign({},e,{placement:t})):n,s=o[0],a=o[1];return s=s||0,a=(a||0)*i,[Kt,qt].indexOf(r)>=0?{x:a,y:s}:{x:s,y:a}}(n,e.rects,o),t}),{}),a=s[e.placement],c=a.x,u=a.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=c,e.modifiersData.popperOffsets.y+=u),e.modifiersData[r]=s}},dn={name:"popperOffsets",enabled:!0,phase:"read",fn:function(t){var e=t.state,n=t.name;e.modifiersData[n]=rn({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})},data:{}},fn={name:"preventOverflow",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,o=void 0===i||i,s=n.altAxis,a=void 0!==s&&s,c=n.boundary,u=n.rootBoundary,l=n.altBoundary,h=n.padding,d=n.tether,f=void 0===d||d,p=n.tetherOffset,m=void 0===p?0:p,g=on(e,{boundary:c,rootBoundary:u,padding:h,altBoundary:l}),y=we(e.placement),v=Ve(e.placement),_=!v,w=Me(y),b="x"===w?"y":"x",E=e.modifiersData.popperOffsets,T=e.rects.reference,C=e.rects.popper,S="function"==typeof m?m(Object.assign({},e.rects,{placement:e.placement})):m,I="number"==typeof S?{mainAxis:S,altAxis:S}:Object.assign({mainAxis:0,altAxis:0},S),k=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,x={x:0,y:0};if(E){if(o){var D,A="y"===w?zt:Kt,N="y"===w?Wt:qt,O="y"===w?"height":"width",P=E[w],R=P+g[A],M=P-g[N],L=f?-C[O]/2:0,F=v===Qt?T[O]:C[O],j=v===Qt?-C[O]:-T[O],U=e.elements.arrow,V=f&&U?ke(U):{width:0,height:0},$=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},H=$[A],B=$[N],z=Le(0,T[O],V[O]),W=_?T[O]/2-L-z-H-I.mainAxis:F-z-H-I.mainAxis,q=_?-T[O]/2+L+z+B+I.mainAxis:j+z+B+I.mainAxis,K=e.elements.arrow&&Re(e.elements.arrow),G=K?"y"===w?K.clientTop||0:K.clientLeft||0:0,Y=null!=(D=null==k?void 0:k[w])?D:0,Q=P+q-Y,X=Le(f?Ee(R,P+W-Y-G):R,P,f?be(M,Q):M);E[w]=X,x[w]=X-P}if(a){var J,Z="x"===w?zt:Kt,tt="x"===w?Wt:qt,et=E[b],nt="y"===b?"height":"width",rt=et+g[Z],it=et-g[tt],ot=-1!==[zt,Kt].indexOf(y),st=null!=(J=null==k?void 0:k[b])?J:0,at=ot?rt:et-T[nt]-C[nt]-st+I.altAxis,ct=ot?et+T[nt]+C[nt]-st-I.altAxis:it,ut=f&&ot?function(t,e,n){var r=Le(t,e,n);return r>n?n:r}(at,et,ct):Le(f?at:rt,et,f?ct:it);E[b]=ut,x[b]=ut-et}e.modifiersData[r]=x}},requiresIfExists:["offset"]};function pn(t,e,n){void 0===n&&(n=!1);var r,i,o=ye(e),s=ye(e)&&function(t){var e=t.getBoundingClientRect(),n=Te(e.width)/t.offsetWidth||1,r=Te(e.height)/t.offsetHeight||1;return 1!==n||1!==r}(e),a=Ne(e),c=Ie(t,s,n),u={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(o||!o&&!n)&&(("body"!==pe(e)||Je(a))&&(u=(r=e)!==me(r)&&ye(r)?{scrollLeft:(i=r).scrollLeft,scrollTop:i.scrollTop}:Qe(r)),ye(e)?((l=Ie(e,!0)).x+=e.clientLeft,l.y+=e.clientTop):a&&(l.x=Xe(a))),{x:c.left+u.scrollLeft-l.x,y:c.top+u.scrollTop-l.y,width:c.width,height:c.height}}function mn(t){var e=new Map,n=new Set,r=[];function i(t){n.add(t.name),[].concat(t.requires||[],t.requiresIfExists||[]).forEach((function(t){if(!n.has(t)){var r=e.get(t);r&&i(r)}})),r.push(t)}return t.forEach((function(t){e.set(t.name,t)})),t.forEach((function(t){n.has(t.name)||i(t)})),r}var gn={placement:"bottom",modifiers:[],strategy:"absolute"};function yn(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some((function(t){return!(t&&"function"==typeof t.getBoundingClientRect)}))}function vn(t){void 0===t&&(t={});var e=t,n=e.defaultModifiers,r=void 0===n?[]:n,i=e.defaultOptions,o=void 0===i?gn:i;return function(t,e,n){void 0===n&&(n=o);var i,s,a={placement:"bottom",orderedModifiers:[],options:Object.assign({},gn,o),modifiersData:{},elements:{reference:t,popper:e},attributes:{},styles:{}},c=[],u=!1,l={state:a,setOptions:function(n){var i="function"==typeof n?n(a.options):n;h(),a.options=Object.assign({},o,a.options,i),a.scrollParents={reference:ge(t)?tn(t):t.contextElement?tn(t.contextElement):[],popper:tn(e)};var s,u,d=function(t){var e=mn(t);return fe.reduce((function(t,n){return t.concat(e.filter((function(t){return t.phase===n})))}),[])}((s=[].concat(r,a.options.modifiers),u=s.reduce((function(t,e){var n=t[e.name];return t[e.name]=n?Object.assign({},n,e,{options:Object.assign({},n.options,e.options),data:Object.assign({},n.data,e.data)}):e,t}),{}),Object.keys(u).map((function(t){return u[t]}))));return a.orderedModifiers=d.filter((function(t){return t.enabled})),a.orderedModifiers.forEach((function(t){var e=t.name,n=t.options,r=void 0===n?{}:n,i=t.effect;if("function"==typeof i){var o=i({state:a,name:e,instance:l,options:r});c.push(o||function(){})}})),l.update()},forceUpdate:function(){if(!u){var t=a.elements,e=t.reference,n=t.popper;if(yn(e,n)){a.rects={reference:pn(e,Re(n),"fixed"===a.options.strategy),popper:ke(n)},a.reset=!1,a.placement=a.options.placement,a.orderedModifiers.forEach((function(t){return a.modifiersData[t.name]=Object.assign({},t.data)}));for(var r=0;r<a.orderedModifiers.length;r++)if(!0!==a.reset){var i=a.orderedModifiers[r],o=i.fn,s=i.options,c=void 0===s?{}:s,h=i.name;"function"==typeof o&&(a=o({state:a,options:c,name:h,instance:l})||a)}else a.reset=!1,r=-1}}},update:(i=function(){return new Promise((function(t){l.forceUpdate(),t(a)}))},function(){return s||(s=new Promise((function(t){Promise.resolve().then((function(){s=void 0,t(i())}))}))),s}),destroy:function(){h(),u=!0}};if(!yn(t,e))return l;function h(){c.forEach((function(t){return t()})),c=[]}return l.setOptions(n).then((function(t){!u&&n.onFirstUpdate&&n.onFirstUpdate(t)})),l}}var _n=vn(),wn=vn({defaultModifiers:[We,dn,Be,_e]}),bn=vn({defaultModifiers:[We,dn,Be,_e,hn,an,fn,Ue,ln]});const En=Object.freeze(Object.defineProperty({__proto__:null,afterMain:ue,afterRead:se,afterWrite:de,applyStyles:_e,arrow:Ue,auto:Gt,basePlacements:Yt,beforeMain:ae,beforeRead:ie,beforeWrite:le,bottom:Wt,clippingParents:Jt,computeStyles:Be,createPopper:bn,createPopperBase:_n,createPopperLite:wn,detectOverflow:on,end:Xt,eventListeners:We,flip:an,hide:ln,left:Kt,main:ce,modifierPhases:fe,offset:hn,placements:re,popper:te,popperGenerator:vn,popperOffsets:dn,preventOverflow:fn,read:oe,reference:ee,right:qt,start:Qt,top:zt,variationPlacements:ne,viewport:Zt,write:he},Symbol.toStringTag,{value:"Module"})),Tn="dropdown",Cn=".bs.dropdown",Sn=".data-api",In="ArrowUp",kn="ArrowDown",xn=`hide${Cn}`,Dn=`hidden${Cn}`,An=`show${Cn}`,Nn=`shown${Cn}`,On=`click${Cn}${Sn}`,Pn=`keydown${Cn}${Sn}`,Rn=`keyup${Cn}${Sn}`,Mn="show",Ln='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Fn=`${Ln}.${Mn}`,jn=".dropdown-menu",Un=p()?"top-end":"top-start",Vn=p()?"top-start":"top-end",$n=p()?"bottom-end":"bottom-start",Hn=p()?"bottom-start":"bottom-end",Bn=p()?"left-start":"right-start",zn=p()?"right-start":"left-start",Wn={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},qn={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Kn extends V{constructor(t,e){super(t,e),this._popper=null,this._parent=this._element.parentNode,this._menu=H.next(this._element,jn)[0]||H.prev(this._element,jn)[0]||H.findOne(jn,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Wn}static get DefaultType(){return qn}static get NAME(){return Tn}toggle(){return this._isShown()?this.hide():this.show()}show(){if(c(this._element)||this._isShown())return;const t={relatedTarget:this._element};if(!R.trigger(this._element,An,t).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const t of[].concat(...document.body.children))R.on(t,"mouseover",l);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Mn),this._element.classList.add(Mn),R.trigger(this._element,Nn,t)}}hide(){if(c(this._element)||!this._isShown())return;const t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){if(!R.trigger(this._element,xn,t).defaultPrevented){if("ontouchstart"in document.documentElement)for(const t of[].concat(...document.body.children))R.off(t,"mouseover",l);this._popper&&this._popper.destroy(),this._menu.classList.remove(Mn),this._element.classList.remove(Mn),this._element.setAttribute("aria-expanded","false"),j.removeDataAttribute(this._menu,"popper"),R.trigger(this._element,Dn,t)}}_getConfig(t){if("object"==typeof(t=super._getConfig(t)).reference&&!o(t.reference)&&"function"!=typeof t.reference.getBoundingClientRect)throw new TypeError(`${Tn.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(){if(void 0===En)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let t=this._element;"parent"===this._config.reference?t=this._parent:o(this._config.reference)?t=s(this._config.reference):"object"==typeof this._config.reference&&(t=this._config.reference);const e=this._getPopperConfig();this._popper=bn(t,this._menu,e)}_isShown(){return this._menu.classList.contains(Mn)}_getPlacement(){const t=this._parent;if(t.classList.contains("dropend"))return Bn;if(t.classList.contains("dropstart"))return zn;if(t.classList.contains("dropup-center"))return"top";if(t.classList.contains("dropdown-center"))return"bottom";const e="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return t.classList.contains("dropup")?e?Vn:Un:e?Hn:$n}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const{offset:t}=this._config;return"string"==typeof t?t.split(",").map((t=>Number.parseInt(t,10))):"function"==typeof t?e=>t(e,this._element):t}_getPopperConfig(){const t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(j.setDataAttribute(this._menu,"popper","static"),t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,...g(this._config.popperConfig,[void 0,t])}}_selectMenuItem({key:t,target:e}){const n=H.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter((t=>a(t)));n.length&&v(n,e,t===kn,!n.includes(e)).focus()}static jQueryInterface(t){return this.each((function(){const e=Kn.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}static clearMenus(t){if(2===t.button||"keyup"===t.type&&"Tab"!==t.key)return;const e=H.find(Fn);for(const n of e){const e=Kn.getInstance(n);if(!e||!1===e._config.autoClose)continue;const r=t.composedPath(),i=r.includes(e._menu);if(r.includes(e._element)||"inside"===e._config.autoClose&&!i||"outside"===e._config.autoClose&&i)continue;if(e._menu.contains(t.target)&&("keyup"===t.type&&"Tab"===t.key||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;const o={relatedTarget:e._element};"click"===t.type&&(o.clickEvent=t),e._completeHide(o)}}static dataApiKeydownHandler(t){const e=/input|textarea/i.test(t.target.tagName),n="Escape"===t.key,r=[In,kn].includes(t.key);if(!r&&!n)return;if(e&&!n)return;t.preventDefault();const i=this.matches(Ln)?this:H.prev(this,Ln)[0]||H.next(this,Ln)[0]||H.findOne(Ln,t.delegateTarget.parentNode),o=Kn.getOrCreateInstance(i);if(r)return t.stopPropagation(),o.show(),void o._selectMenuItem(t);o._isShown()&&(t.stopPropagation(),o.hide(),i.focus())}}R.on(document,Pn,Ln,Kn.dataApiKeydownHandler),R.on(document,Pn,jn,Kn.dataApiKeydownHandler),R.on(document,On,Kn.clearMenus),R.on(document,Rn,Kn.clearMenus),R.on(document,On,Ln,(function(t){t.preventDefault(),Kn.getOrCreateInstance(this).toggle()})),m(Kn);const Gn="backdrop",Yn="show",Qn=`mousedown.bs.${Gn}`,Xn={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Jn={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Zn extends U{constructor(t){super(),this._config=this._getConfig(t),this._isAppended=!1,this._element=null}static get Default(){return Xn}static get DefaultType(){return Jn}static get NAME(){return Gn}show(t){if(!this._config.isVisible)return void g(t);this._append();const e=this._getElement();this._config.isAnimated&&h(e),e.classList.add(Yn),this._emulateAnimation((()=>{g(t)}))}hide(t){this._config.isVisible?(this._getElement().classList.remove(Yn),this._emulateAnimation((()=>{this.dispose(),g(t)}))):g(t)}dispose(){this._isAppended&&(R.off(this._element,Qn),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add("fade"),this._element=t}return this._element}_configAfterMerge(t){return t.rootElement=s(t.rootElement),t}_append(){if(this._isAppended)return;const t=this._getElement();this._config.rootElement.append(t),R.on(t,Qn,(()=>{g(this._config.clickCallback)})),this._isAppended=!0}_emulateAnimation(t){y(t,this._getElement(),this._config.isAnimated)}}const tr=".bs.focustrap",er=`focusin${tr}`,nr=`keydown.tab${tr}`,rr="backward",ir={autofocus:!0,trapElement:null},or={autofocus:"boolean",trapElement:"element"};class sr extends U{constructor(t){super(),this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return ir}static get DefaultType(){return or}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),R.off(document,tr),R.on(document,er,(t=>this._handleFocusin(t))),R.on(document,nr,(t=>this._handleKeydown(t))),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,R.off(document,tr))}_handleFocusin(t){const{trapElement:e}=this._config;if(t.target===document||t.target===e||e.contains(t.target))return;const n=H.focusableChildren(e);0===n.length?e.focus():this._lastTabNavDirection===rr?n[n.length-1].focus():n[0].focus()}_handleKeydown(t){"Tab"===t.key&&(this._lastTabNavDirection=t.shiftKey?rr:"forward")}}const ar=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",cr=".sticky-top",ur="padding-right",lr="margin-right";class hr{constructor(){this._element=document.body}getWidth(){const t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,ur,(e=>e+t)),this._setElementAttributes(ar,ur,(e=>e+t)),this._setElementAttributes(cr,lr,(e=>e-t))}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,ur),this._resetElementAttributes(ar,ur),this._resetElementAttributes(cr,lr)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,e,n){const r=this.getWidth();this._applyManipulationCallback(t,(t=>{if(t!==this._element&&window.innerWidth>t.clientWidth+r)return;this._saveInitialAttribute(t,e);const i=window.getComputedStyle(t).getPropertyValue(e);t.style.setProperty(e,`${n(Number.parseFloat(i))}px`)}))}_saveInitialAttribute(t,e){const n=t.style.getPropertyValue(e);n&&j.setDataAttribute(t,e,n)}_resetElementAttributes(t,e){this._applyManipulationCallback(t,(t=>{const n=j.getDataAttribute(t,e);null!==n?(j.removeDataAttribute(t,e),t.style.setProperty(e,n)):t.style.removeProperty(e)}))}_applyManipulationCallback(t,e){if(o(t))e(t);else for(const n of H.find(t,this._element))e(n)}}const dr=".bs.modal",fr=`hide${dr}`,pr=`hidePrevented${dr}`,mr=`hidden${dr}`,gr=`show${dr}`,yr=`shown${dr}`,vr=`resize${dr}`,_r=`click.dismiss${dr}`,wr=`mousedown.dismiss${dr}`,br=`keydown.dismiss${dr}`,Er=`click${dr}.data-api`,Tr="modal-open",Cr="show",Sr="modal-static",Ir={backdrop:!0,focus:!0,keyboard:!0},kr={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class xr extends V{constructor(t,e){super(t,e),this._dialog=H.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new hr,this._addEventListeners()}static get Default(){return Ir}static get DefaultType(){return kr}static get NAME(){return"modal"}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||this._isTransitioning||R.trigger(this._element,gr,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Tr),this._adjustDialog(),this._backdrop.show((()=>this._showElement(t))))}hide(){this._isShown&&!this._isTransitioning&&(R.trigger(this._element,fr).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Cr),this._queueCallback((()=>this._hideModal()),this._element,this._isAnimated())))}dispose(){R.off(window,dr),R.off(this._dialog,dr),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Zn({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new sr({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const e=H.findOne(".modal-body",this._dialog);e&&(e.scrollTop=0),h(this._element),this._element.classList.add(Cr),this._queueCallback((()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,R.trigger(this._element,yr,{relatedTarget:t})}),this._dialog,this._isAnimated())}_addEventListeners(){R.on(this._element,br,(t=>{"Escape"===t.key&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())})),R.on(window,vr,(()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()})),R.on(this._element,wr,(t=>{R.one(this._element,_r,(e=>{this._element===t.target&&this._element===e.target&&("static"!==this._config.backdrop?this._config.backdrop&&this.hide():this._triggerBackdropTransition())}))}))}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide((()=>{document.body.classList.remove(Tr),this._resetAdjustments(),this._scrollBar.reset(),R.trigger(this._element,mr)}))}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(R.trigger(this._element,pr).defaultPrevented)return;const t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._element.style.overflowY;"hidden"===e||this._element.classList.contains(Sr)||(t||(this._element.style.overflowY="hidden"),this._element.classList.add(Sr),this._queueCallback((()=>{this._element.classList.remove(Sr),this._queueCallback((()=>{this._element.style.overflowY=e}),this._dialog)}),this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._scrollBar.getWidth(),n=e>0;if(n&&!t){const t=p()?"paddingLeft":"paddingRight";this._element.style[t]=`${e}px`}if(!n&&t){const t=p()?"paddingRight":"paddingLeft";this._element.style[t]=`${e}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,e){return this.each((function(){const n=xr.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===n[t])throw new TypeError(`No method named "${t}"`);n[t](e)}}))}}R.on(document,Er,'[data-bs-toggle="modal"]',(function(t){const e=H.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&t.preventDefault(),R.one(e,gr,(t=>{t.defaultPrevented||R.one(e,mr,(()=>{a(this)&&this.focus()}))}));const n=H.findOne(".modal.show");n&&xr.getInstance(n).hide(),xr.getOrCreateInstance(e).toggle(this)})),B(xr),m(xr);const Dr=".bs.offcanvas",Ar=".data-api",Nr=`load${Dr}${Ar}`,Or="show",Pr="showing",Rr="hiding",Mr=".offcanvas.show",Lr=`show${Dr}`,Fr=`shown${Dr}`,jr=`hide${Dr}`,Ur=`hidePrevented${Dr}`,Vr=`hidden${Dr}`,$r=`resize${Dr}`,Hr=`click${Dr}${Ar}`,Br=`keydown.dismiss${Dr}`,zr={backdrop:!0,keyboard:!0,scroll:!1},Wr={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class qr extends V{constructor(t,e){super(t,e),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return zr}static get DefaultType(){return Wr}static get NAME(){return"offcanvas"}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||R.trigger(this._element,Lr,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||(new hr).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Pr),this._queueCallback((()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(Or),this._element.classList.remove(Pr),R.trigger(this._element,Fr,{relatedTarget:t})}),this._element,!0))}hide(){this._isShown&&(R.trigger(this._element,jr).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Rr),this._backdrop.hide(),this._queueCallback((()=>{this._element.classList.remove(Or,Rr),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||(new hr).reset(),R.trigger(this._element,Vr)}),this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const t=Boolean(this._config.backdrop);return new Zn({className:"offcanvas-backdrop",isVisible:t,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:t?()=>{"static"!==this._config.backdrop?this.hide():R.trigger(this._element,Ur)}:null})}_initializeFocusTrap(){return new sr({trapElement:this._element})}_addEventListeners(){R.on(this._element,Br,(t=>{"Escape"===t.key&&(this._config.keyboard?this.hide():R.trigger(this._element,Ur))}))}static jQueryInterface(t){return this.each((function(){const e=qr.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}R.on(document,Hr,'[data-bs-toggle="offcanvas"]',(function(t){const e=H.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&t.preventDefault(),c(this))return;R.one(e,Vr,(()=>{a(this)&&this.focus()}));const n=H.findOne(Mr);n&&n!==e&&qr.getInstance(n).hide(),qr.getOrCreateInstance(e).toggle(this)})),R.on(window,Nr,(()=>{for(const t of H.find(Mr))qr.getOrCreateInstance(t).show()})),R.on(window,$r,(()=>{for(const t of H.find("[aria-modal][class*=show][class*=offcanvas-]"))"fixed"!==getComputedStyle(t).position&&qr.getOrCreateInstance(t).hide()})),B(qr),m(qr);const Kr={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Gr=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Yr=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Qr=(t,e)=>{const n=t.nodeName.toLowerCase();return e.includes(n)?!Gr.has(n)||Boolean(Yr.test(t.nodeValue)):e.filter((t=>t instanceof RegExp)).some((t=>t.test(n)))},Xr={allowList:Kr,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Jr={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Zr={entry:"(string|element|function|null)",selector:"(string|element)"};class ti extends U{constructor(t){super(),this._config=this._getConfig(t)}static get Default(){return Xr}static get DefaultType(){return Jr}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map((t=>this._resolvePossibleFunction(t))).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(t){return this._checkContent(t),this._config.content={...this._config.content,...t},this}toHtml(){const t=document.createElement("div");t.innerHTML=this._maybeSanitize(this._config.template);for(const[r,i]of Object.entries(this._config.content))this._setContent(t,i,r);const e=t.children[0],n=this._resolvePossibleFunction(this._config.extraClass);return n&&e.classList.add(...n.split(" ")),e}_typeCheckConfig(t){super._typeCheckConfig(t),this._checkContent(t.content)}_checkContent(t){for(const[e,n]of Object.entries(t))super._typeCheckConfig({selector:e,entry:n},Zr)}_setContent(t,e,n){const r=H.findOne(n,t);r&&((e=this._resolvePossibleFunction(e))?o(e)?this._putElementInTemplate(s(e),r):this._config.html?r.innerHTML=this._maybeSanitize(e):r.textContent=e:r.remove())}_maybeSanitize(t){return this._config.sanitize?function(t,e,n){if(!t.length)return t;if(n&&"function"==typeof n)return n(t);const r=(new window.DOMParser).parseFromString(t,"text/html"),i=[].concat(...r.body.querySelectorAll("*"));for(const o of i){const t=o.nodeName.toLowerCase();if(!Object.keys(e).includes(t)){o.remove();continue}const n=[].concat(...o.attributes),r=[].concat(e["*"]||[],e[t]||[]);for(const e of n)Qr(e,r)||o.removeAttribute(e.nodeName)}return r.body.innerHTML}(t,this._config.allowList,this._config.sanitizeFn):t}_resolvePossibleFunction(t){return g(t,[void 0,this])}_putElementInTemplate(t,e){if(this._config.html)return e.innerHTML="",void e.append(t);e.textContent=t.textContent}}const ei=new Set(["sanitize","allowList","sanitizeFn"]),ni="fade",ri="show",ii=".tooltip-inner",oi=".modal",si="hide.bs.modal",ai="hover",ci="focus",ui={AUTO:"auto",TOP:"top",RIGHT:p()?"left":"right",BOTTOM:"bottom",LEFT:p()?"right":"left"},li={allowList:Kr,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},hi={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class di extends V{constructor(t,e){if(void 0===En)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(t,e),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return li}static get DefaultType(){return hi}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),R.off(this._element.closest(oi),si,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const t=R.trigger(this._element,this.constructor.eventName("show")),e=(u(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(t.defaultPrevented||!e)return;this._disposePopper();const n=this._getTipElement();this._element.setAttribute("aria-describedby",n.getAttribute("id"));const{container:r}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(r.append(n),R.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(n),n.classList.add(ri),"ontouchstart"in document.documentElement)for(const i of[].concat(...document.body.children))R.on(i,"mouseover",l);this._queueCallback((()=>{R.trigger(this._element,this.constructor.eventName("shown")),!1===this._isHovered&&this._leave(),this._isHovered=!1}),this.tip,this._isAnimated())}hide(){if(this._isShown()&&!R.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(ri),"ontouchstart"in document.documentElement)for(const t of[].concat(...document.body.children))R.off(t,"mouseover",l);this._activeTrigger.click=!1,this._activeTrigger[ci]=!1,this._activeTrigger[ai]=!1,this._isHovered=null,this._queueCallback((()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),R.trigger(this._element,this.constructor.eventName("hidden")))}),this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(t){const e=this._getTemplateFactory(t).toHtml();if(!e)return null;e.classList.remove(ni,ri),e.classList.add(`bs-${this.constructor.NAME}-auto`);const n=(t=>{do{t+=Math.floor(1e6*Math.random())}while(document.getElementById(t));return t})(this.constructor.NAME).toString();return e.setAttribute("id",n),this._isAnimated()&&e.classList.add(ni),e}setContent(t){this._newContent=t,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(t){return this._templateFactory?this._templateFactory.changeContent(t):this._templateFactory=new ti({...this._config,content:t,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[ii]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(t){return this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(ni)}_isShown(){return this.tip&&this.tip.classList.contains(ri)}_createPopper(t){const e=g(this._config.placement,[this,t,this._element]),n=ui[e.toUpperCase()];return bn(this._element,t,this._getPopperConfig(n))}_getOffset(){const{offset:t}=this._config;return"string"==typeof t?t.split(",").map((t=>Number.parseInt(t,10))):"function"==typeof t?e=>t(e,this._element):t}_resolvePossibleFunction(t){return g(t,[this._element,this._element])}_getPopperConfig(t){const e={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:t=>{this._getTipElement().setAttribute("data-popper-placement",t.state.placement)}}]};return{...e,...g(this._config.popperConfig,[void 0,e])}}_setListeners(){const t=this._config.trigger.split(" ");for(const e of t)if("click"===e)R.on(this._element,this.constructor.eventName("click"),this._config.selector,(t=>{this._initializeOnDelegatedTarget(t).toggle()}));else if("manual"!==e){const t=e===ai?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),n=e===ai?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");R.on(this._element,t,this._config.selector,(t=>{const e=this._initializeOnDelegatedTarget(t);e._activeTrigger["focusin"===t.type?ci:ai]=!0,e._enter()})),R.on(this._element,n,this._config.selector,(t=>{const e=this._initializeOnDelegatedTarget(t);e._activeTrigger["focusout"===t.type?ci:ai]=e._element.contains(t.relatedTarget),e._leave()}))}this._hideModalHandler=()=>{this._element&&this.hide()},R.on(this._element.closest(oi),si,this._hideModalHandler)}_fixTitle(){const t=this._element.getAttribute("title");t&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",t),this._element.setAttribute("data-bs-original-title",t),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout((()=>{this._isHovered&&this.show()}),this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout((()=>{this._isHovered||this.hide()}),this._config.delay.hide))}_setTimeout(t,e){clearTimeout(this._timeout),this._timeout=setTimeout(t,e)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(t){const e=j.getDataAttributes(this._element);for(const n of Object.keys(e))ei.has(n)&&delete e[n];return t={...e,..."object"==typeof t&&t?t:{}},t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t.container=!1===t.container?document.body:s(t.container),"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),"number"==typeof t.title&&(t.title=t.title.toString()),"number"==typeof t.content&&(t.content=t.content.toString()),t}_getDelegateConfig(){const t={};for(const[e,n]of Object.entries(this._config))this.constructor.Default[e]!==n&&(t[e]=n);return t.selector=!1,t.trigger="manual",t}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(t){return this.each((function(){const e=di.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}}m(di);const fi=".popover-header",pi=".popover-body",mi={...di.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},gi={...di.DefaultType,content:"(null|string|element|function)"};class yi extends di{static get Default(){return mi}static get DefaultType(){return gi}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[fi]:this._getTitle(),[pi]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(t){return this.each((function(){const e=yi.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}}m(yi);const vi=".bs.scrollspy",_i=`activate${vi}`,wi=`click${vi}`,bi=`load${vi}.data-api`,Ei="active",Ti="[href]",Ci=".nav-link",Si=`${Ci}, .nav-item > ${Ci}, .list-group-item`,Ii={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},ki={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class xi extends V{constructor(t,e){super(t,e),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement="visible"===getComputedStyle(this._element).overflowY?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return Ii}static get DefaultType(){return ki}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const t of this._observableSections.values())this._observer.observe(t)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(t){return t.target=s(t.target)||document.body,t.rootMargin=t.offset?`${t.offset}px 0px -30%`:t.rootMargin,"string"==typeof t.threshold&&(t.threshold=t.threshold.split(",").map((t=>Number.parseFloat(t)))),t}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(R.off(this._config.target,wi),R.on(this._config.target,wi,Ti,(t=>{const e=this._observableSections.get(t.target.hash);if(e){t.preventDefault();const n=this._rootElement||window,r=e.offsetTop-this._element.offsetTop;if(n.scrollTo)return void n.scrollTo({top:r,behavior:"smooth"});n.scrollTop=r}})))}_getNewObserver(){const t={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver((t=>this._observerCallback(t)),t)}_observerCallback(t){const e=t=>this._targetLinks.get(`#${t.target.id}`),n=t=>{this._previousScrollData.visibleEntryTop=t.target.offsetTop,this._process(e(t))},r=(this._rootElement||document.documentElement).scrollTop,i=r>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=r;for(const o of t){if(!o.isIntersecting){this._activeTarget=null,this._clearActiveClass(e(o));continue}const t=o.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(i&&t){if(n(o),!r)return}else i||t||n(o)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const t=H.find(Ti,this._config.target);for(const e of t){if(!e.hash||c(e))continue;const t=H.findOne(decodeURI(e.hash),this._element);a(t)&&(this._targetLinks.set(decodeURI(e.hash),e),this._observableSections.set(e.hash,t))}}_process(t){this._activeTarget!==t&&(this._clearActiveClass(this._config.target),this._activeTarget=t,t.classList.add(Ei),this._activateParents(t),R.trigger(this._element,_i,{relatedTarget:t}))}_activateParents(t){if(t.classList.contains("dropdown-item"))H.findOne(".dropdown-toggle",t.closest(".dropdown")).classList.add(Ei);else for(const e of H.parents(t,".nav, .list-group"))for(const t of H.prev(e,Si))t.classList.add(Ei)}_clearActiveClass(t){t.classList.remove(Ei);const e=H.find(`${Ti}.${Ei}`,t);for(const n of e)n.classList.remove(Ei)}static jQueryInterface(t){return this.each((function(){const e=xi.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t]()}}))}}R.on(window,bi,(()=>{for(const t of H.find('[data-bs-spy="scroll"]'))xi.getOrCreateInstance(t)})),m(xi);const Di=".bs.tab",Ai=`hide${Di}`,Ni=`hidden${Di}`,Oi=`show${Di}`,Pi=`shown${Di}`,Ri=`click${Di}`,Mi=`keydown${Di}`,Li=`load${Di}`,Fi="ArrowLeft",ji="ArrowRight",Ui="ArrowUp",Vi="ArrowDown",$i="Home",Hi="End",Bi="active",zi="fade",Wi="show",qi=".dropdown-toggle",Ki=`:not(${qi})`,Gi='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Yi=`.nav-link${Ki}, .list-group-item${Ki}, [role="tab"]${Ki}, ${Gi}`,Qi=`.${Bi}[data-bs-toggle="tab"], .${Bi}[data-bs-toggle="pill"], .${Bi}[data-bs-toggle="list"]`;class Xi extends V{constructor(t){super(t),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),R.on(this._element,Mi,(t=>this._keydown(t))))}static get NAME(){return"tab"}show(){const t=this._element;if(this._elemIsActive(t))return;const e=this._getActiveElem(),n=e?R.trigger(e,Ai,{relatedTarget:t}):null;R.trigger(t,Oi,{relatedTarget:e}).defaultPrevented||n&&n.defaultPrevented||(this._deactivate(e,t),this._activate(t,e))}_activate(t,e){t&&(t.classList.add(Bi),this._activate(H.getElementFromSelector(t)),this._queueCallback((()=>{"tab"===t.getAttribute("role")?(t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),this._toggleDropDown(t,!0),R.trigger(t,Pi,{relatedTarget:e})):t.classList.add(Wi)}),t,t.classList.contains(zi)))}_deactivate(t,e){t&&(t.classList.remove(Bi),t.blur(),this._deactivate(H.getElementFromSelector(t)),this._queueCallback((()=>{"tab"===t.getAttribute("role")?(t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),this._toggleDropDown(t,!1),R.trigger(t,Ni,{relatedTarget:e})):t.classList.remove(Wi)}),t,t.classList.contains(zi)))}_keydown(t){if(![Fi,ji,Ui,Vi,$i,Hi].includes(t.key))return;t.stopPropagation(),t.preventDefault();const e=this._getChildren().filter((t=>!c(t)));let n;if([$i,Hi].includes(t.key))n=e[t.key===$i?0:e.length-1];else{const r=[ji,Vi].includes(t.key);n=v(e,t.target,r,!0)}n&&(n.focus({preventScroll:!0}),Xi.getOrCreateInstance(n).show())}_getChildren(){return H.find(Yi,this._parent)}_getActiveElem(){return this._getChildren().find((t=>this._elemIsActive(t)))||null}_setInitialAttributes(t,e){this._setAttributeIfNotExists(t,"role","tablist");for(const n of e)this._setInitialAttributesOnChild(n)}_setInitialAttributesOnChild(t){t=this._getInnerElement(t);const e=this._elemIsActive(t),n=this._getOuterElement(t);t.setAttribute("aria-selected",e),n!==t&&this._setAttributeIfNotExists(n,"role","presentation"),e||t.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(t,"role","tab"),this._setInitialAttributesOnTargetPanel(t)}_setInitialAttributesOnTargetPanel(t){const e=H.getElementFromSelector(t);e&&(this._setAttributeIfNotExists(e,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(e,"aria-labelledby",`${t.id}`))}_toggleDropDown(t,e){const n=this._getOuterElement(t);if(!n.classList.contains("dropdown"))return;const r=(t,r)=>{const i=H.findOne(t,n);i&&i.classList.toggle(r,e)};r(qi,Bi),r(".dropdown-menu",Wi),n.setAttribute("aria-expanded",e)}_setAttributeIfNotExists(t,e,n){t.hasAttribute(e)||t.setAttribute(e,n)}_elemIsActive(t){return t.classList.contains(Bi)}_getInnerElement(t){return t.matches(Yi)?t:H.findOne(Yi,t)}_getOuterElement(t){return t.closest(".nav-item, .list-group-item")||t}static jQueryInterface(t){return this.each((function(){const e=Xi.getOrCreateInstance(this);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t]()}}))}}R.on(document,Ri,Gi,(function(t){["A","AREA"].includes(this.tagName)&&t.preventDefault(),c(this)||Xi.getOrCreateInstance(this).show()})),R.on(window,Li,(()=>{for(const t of H.find(Qi))Xi.getOrCreateInstance(t)})),m(Xi);const Ji=".bs.toast",Zi=`mouseover${Ji}`,to=`mouseout${Ji}`,eo=`focusin${Ji}`,no=`focusout${Ji}`,ro=`hide${Ji}`,io=`hidden${Ji}`,oo=`show${Ji}`,so=`shown${Ji}`,ao="hide",co="show",uo="showing",lo={animation:"boolean",autohide:"boolean",delay:"number"},ho={animation:!0,autohide:!0,delay:5e3};class fo extends V{constructor(t,e){super(t,e),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return ho}static get DefaultType(){return lo}static get NAME(){return"toast"}show(){R.trigger(this._element,oo).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(ao),h(this._element),this._element.classList.add(co,uo),this._queueCallback((()=>{this._element.classList.remove(uo),R.trigger(this._element,so),this._maybeScheduleHide()}),this._element,this._config.animation))}hide(){this.isShown()&&(R.trigger(this._element,ro).defaultPrevented||(this._element.classList.add(uo),this._queueCallback((()=>{this._element.classList.add(ao),this._element.classList.remove(uo,co),R.trigger(this._element,io)}),this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(co),super.dispose()}isShown(){return this._element.classList.contains(co)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout((()=>{this.hide()}),this._config.delay)))}_onInteraction(t,e){switch(t.type){case"mouseover":case"mouseout":this._hasMouseInteraction=e;break;case"focusin":case"focusout":this._hasKeyboardInteraction=e}if(e)return void this._clearTimeout();const n=t.relatedTarget;this._element===n||this._element.contains(n)||this._maybeScheduleHide()}_setListeners(){R.on(this._element,Zi,(t=>this._onInteraction(t,!0))),R.on(this._element,to,(t=>this._onInteraction(t,!1))),R.on(this._element,eo,(t=>this._onInteraction(t,!0))),R.on(this._element,no,(t=>this._onInteraction(t,!1)))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each((function(){const e=fo.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}return B(fo),m(fo),{Alert:K,Button:Y,Carousel:Dt,Collapse:Bt,Dropdown:Kn,Modal:xr,Offcanvas:qr,Popover:yi,ScrollSpy:xi,Tab:Xi,Toast:fo,Tooltip:di}}))},350:function(t,e,n){"use strict";var r=n(3724),i=n(9297),o=Function.prototype,s=r&&Object.getOwnPropertyDescriptor,a=i(o,"name"),c=a&&"something"===function(){}.name,u=a&&(!r||r&&s(o,"name").configurable);t.exports={EXISTS:a,PROPER:c,CONFIGURABLE:u}},397:function(t,e,n){"use strict";var r=n(7751);t.exports=r("document","documentElement")},421:function(t){"use strict";t.exports={}},507:function(t,e,n){"use strict";var r=n(9565);t.exports=function(t,e,n){var i,o,s=n?t:t.iterator,a=t.next;while(!(i=r(a,s)).done)if(o=e(i.value),void 0!==o)return o}},531:function(t,e,n){"use strict";var r=n(6518),i=n(9565),o=n(9306),s=n(8551),a=n(1767),c=n(8646),u=n(9462),l=n(9539),h=n(6395),d=n(4549),f=!h&&d("flatMap",TypeError),p=u((function(){var t,e,n=this.iterator,r=this.mapper;while(1){if(e=this.inner)try{if(t=s(i(e.next,e.iterator)),!t.done)return t.value;this.inner=null}catch(o){l(n,"throw",o)}if(t=s(i(this.next,n)),this.done=!!t.done)return;try{this.inner=c(r(t.value,this.counter++),!1)}catch(o){l(n,"throw",o)}}}));r({target:"Iterator",proto:!0,real:!0,forced:h||f},{flatMap:function(t){s(this);try{o(t)}catch(e){l(this,"throw",e)}return f?i(f,this,t):new p(a(this),{mapper:t,inner:null})}})},565:function(t,e,n){n(4114),n(8111),n(2489),n(7588),n(1701),n(8237),n(3579),n(4979),function(e,n){t.exports=n()}(0,(function(){return function(){"use strict";var t={34:function(t,e,n){var r=n(4901);t.exports=function(t){return"object"==typeof t?null!==t:r(t)}},81:function(t,e,n){var r=n(9565),i=n(9306),o=n(8551),s=n(6823),a=n(851),c=TypeError;t.exports=function(t,e){var n=arguments.length<2?a(t):e;if(i(n))return o(r(n,t));throw new c(s(t)+" is not iterable")}},235:function(t,e,n){var r=n(9213).forEach,i=n(4598)("forEach");t.exports=i?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},283:function(t,e,n){var r=n(9504),i=n(9039),o=n(4901),s=n(9297),a=n(3724),c=n(350).CONFIGURABLE,u=n(3706),l=n(1181),h=l.enforce,d=l.get,f=String,p=Object.defineProperty,m=r("".slice),g=r("".replace),y=r([].join),v=a&&!i((function(){return 8!==p((function(){}),"length",{value:8}).length})),_=String(String).split("String"),w=t.exports=function(t,e,n){"Symbol("===m(f(e),0,7)&&(e="["+g(f(e),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),n&&n.getter&&(e="get "+e),n&&n.setter&&(e="set "+e),(!s(t,"name")||c&&t.name!==e)&&(a?p(t,"name",{value:e,configurable:!0}):t.name=e),v&&n&&s(n,"arity")&&t.length!==n.arity&&p(t,"length",{value:n.arity});try{n&&s(n,"constructor")&&n.constructor?a&&p(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var r=h(t);return s(r,"source")||(r.source=y(_,"string"==typeof e?e:"")),t};Function.prototype.toString=w((function(){return o(this)&&d(this).source||u(this)}),"toString")},298:function(t,e,n){var r=n(2195),i=n(5397),o=n(8480).f,s=n(7680),a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return a&&"Window"===r(t)?function(t){try{return o(t)}catch(t){return s(a)}}(t):o(i(t))}},350:function(t,e,n){var r=n(3724),i=n(9297),o=Function.prototype,s=r&&Object.getOwnPropertyDescriptor,a=i(o,"name"),c=a&&"something"===function(){}.name,u=a&&(!r||r&&s(o,"name").configurable);t.exports={EXISTS:a,PROPER:c,CONFIGURABLE:u}},397:function(t,e,n){var r=n(7751);t.exports=r("document","documentElement")},421:function(t){t.exports={}},511:function(t,e,n){var r=n(9167),i=n(9297),o=n(1951),s=n(4913).f;t.exports=function(t){var e=r.Symbol||(r.Symbol={});i(e,t)||s(e,t,{value:o.f(t)})}},566:function(t,e,n){var r=n(9504),i=n(9306),o=n(34),s=n(9297),a=n(7680),c=n(616),u=Function,l=r([].concat),h=r([].join),d={};t.exports=c?u.bind:function(t){var e=i(this),n=e.prototype,r=a(arguments,1),c=function(){var n=l(r,a(arguments));return this instanceof c?function(t,e,n){if(!s(d,e)){for(var r=[],i=0;i<e;i++)r[i]="a["+i+"]";d[e]=u("C,a","return new C("+h(r,",")+")")}return d[e](t,n)}(e,n.length,n):e.apply(t,n)};return o(n)&&(c.prototype=n),c}},597:function(t,e,n){var r=n(9039),i=n(8227),o=n(9519),s=i("species");t.exports=function(t){return o>=51||!r((function(){var e=[];return(e.constructor={})[s]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},616:function(t,e,n){var r=n(9039);t.exports=!r((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},655:function(t,e,n){var r=n(6955),i=String;t.exports=function(t){if("Symbol"===r(t))throw new TypeError("Cannot convert a Symbol value to a string");return i(t)}},687:function(t,e,n){var r=n(4913).f,i=n(9297),o=n(8227)("toStringTag");t.exports=function(t,e,n){t&&!n&&(t=t.prototype),t&&!i(t,o)&&r(t,o,{configurable:!0,value:e})}},706:function(t,e,n){var r=n(350).PROPER,i=n(9039),o=n(7452);t.exports=function(t){return i((function(){return!!o[t]()||""!==""[t]()||r&&o[t].name!==t}))}},739:function(t,e,n){var r=n(6518),i=n(9039),o=n(8981),s=n(2777);r({target:"Date",proto:!0,arity:1,forced:i((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}))},{toJSON:function(t){var e=o(this),n=s(e,"number");return"number"!=typeof n||isFinite(n)?e.toISOString():null}})},741:function(t){var e=Math.ceil,n=Math.floor;t.exports=Math.trunc||function(t){var r=+t;return(r>0?n:e)(r)}},744:function(t,e,n){var r=n(9565),i=n(9504),o=n(9228),s=n(8551),a=n(34),c=n(7750),u=n(2293),l=n(7829),h=n(8014),d=n(655),f=n(5966),p=n(6682),m=n(8429),g=n(9039),y=m.UNSUPPORTED_Y,v=Math.min,_=i([].push),w=i("".slice),b=!g((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),E="c"==="abbc".split(/(b)*/)[1]||4!=="test".split(/(?:)/,-1).length||2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length;o("split",(function(t,e,n){var i="0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:r(e,this,t,n)}:e;return[function(e,n){var o=c(this),s=a(e)?f(e,t):void 0;return s?r(s,e,o,n):r(i,d(o),e,n)},function(t,r){var o=s(this),a=d(t);if(!E){var c=n(i,o,a,r,i!==e);if(c.done)return c.value}var f=u(o,RegExp),m=o.unicode,g=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(y?"g":"y"),b=new f(y?"^(?:"+o.source+")":o,g),T=void 0===r?4294967295:r>>>0;if(0===T)return[];if(0===a.length)return null===p(b,a)?[a]:[];for(var C=0,S=0,I=[];S<a.length;){b.lastIndex=y?0:S;var k,x=p(b,y?w(a,S):a);if(null===x||(k=v(h(b.lastIndex+(y?S:0)),a.length))===C)S=l(a,S,m);else{if(_(I,w(a,C,S)),I.length===T)return I;for(var D=1;D<=x.length-1;D++)if(_(I,x[D]),I.length===T)return I;S=C=k}}return _(I,w(a,C)),I}]}),E||!b,y)},757:function(t,e,n){var r=n(7751),i=n(4901),o=n(1625),s=n(7040),a=Object;t.exports=s?function(t){return"symbol"==typeof t}:function(t){var e=r("Symbol");return i(e)&&o(e.prototype,a(t))}},788:function(t,e,n){var r=n(34),i=n(2195),o=n(8227)("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[o])?!!e:"RegExp"===i(t))}},825:function(t,e,n){var r=n(6518),i=n(7751),o=n(8745),s=n(566),a=n(5548),c=n(8551),u=n(34),l=n(2360),h=n(9039),d=i("Reflect","construct"),f=Object.prototype,p=[].push,m=h((function(){function t(){}return!(d((function(){}),[],t)instanceof t)})),g=!h((function(){d((function(){}))})),y=m||g;r({target:"Reflect",stat:!0,forced:y,sham:y},{construct:function(t,e){a(t),c(e);var n=arguments.length<3?t:a(arguments[2]);if(g&&!m)return d(t,e,n);if(t===n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return o(p,r,e),new(o(s,t,r))}var i=n.prototype,h=l(u(i)?i:f),y=o(t,h,e);return u(y)?y:h}})},851:function(t,e,n){var r=n(6955),i=n(5966),o=n(4117),s=n(6269),a=n(8227)("iterator");t.exports=function(t){if(!o(t))return i(t,a)||i(t,"@@iterator")||s[r(t)]}},926:function(t,e,n){var r=n(9306),i=n(8981),o=n(7055),s=n(6198),a=TypeError,c="Reduce of empty array with no initial value",u=function(t){return function(e,n,u,l){var h=i(e),d=o(h),f=s(h);if(r(n),0===f&&u<2)throw new a(c);var p=t?f-1:0,m=t?-1:1;if(u<2)for(;;){if(p in d){l=d[p],p+=m;break}if(p+=m,t?p<0:f<=p)throw new a(c)}for(;t?p>=0:f>p;p+=m)p in d&&(l=n(l,d[p],p,h));return l}};t.exports={left:u(!1),right:u(!0)}},1034:function(t,e,n){var r=n(9565),i=n(9297),o=n(1625),s=n(5213),a=n(7979),c=RegExp.prototype;t.exports=s.correct?function(t){return t.flags}:function(t){return s.correct||!o(c,t)||i(t,"flags")?t.flags:r(a,t)}},1056:function(t,e,n){var r=n(4913).f;t.exports=function(t,e,n){n in t||r(t,n,{configurable:!0,get:function(){return e[n]},set:function(t){e[n]=t}})}},1072:function(t,e,n){var r=n(1828),i=n(8727);t.exports=Object.keys||function(t){return r(t,i)}},1088:function(t,e,n){var r=n(6518),i=n(9565),o=n(6395),s=n(350),a=n(4901),c=n(3994),u=n(2787),l=n(2967),h=n(687),d=n(6699),f=n(6840),p=n(8227),m=n(6269),g=n(7657),y=s.PROPER,v=s.CONFIGURABLE,_=g.IteratorPrototype,w=g.BUGGY_SAFARI_ITERATORS,b=p("iterator"),E="keys",T="values",C="entries",S=function(){return this};t.exports=function(t,e,n,s,p,g,I){c(n,e,s);var k,x,D,A=function(t){if(t===p&&M)return M;if(!w&&t&&t in P)return P[t];switch(t){case E:case T:case C:return function(){return new n(this,t)}}return function(){return new n(this)}},N=e+" Iterator",O=!1,P=t.prototype,R=P[b]||P["@@iterator"]||p&&P[p],M=!w&&R||A(p),L="Array"===e&&P.entries||R;if(L&&(k=u(L.call(new t)))!==Object.prototype&&k.next&&(o||u(k)===_||(l?l(k,_):a(k[b])||f(k,b,S)),h(k,N,!0,!0),o&&(m[N]=S)),y&&p===T&&R&&R.name!==T&&(!o&&v?d(P,"name",T):(O=!0,M=function(){return i(R,this)})),p)if(x={values:A(T),keys:g?M:A(E),entries:A(C)},I)for(D in x)(w||O||!(D in P))&&f(P,D,x[D]);else r({target:e,proto:!0,forced:w||O},x);return o&&!I||P[b]===M||f(P,b,M,{name:p}),m[e]=M,x}},1181:function(t,e,n){var r,i,o,s=n(8622),a=n(4576),c=n(34),u=n(6699),l=n(9297),h=n(7629),d=n(6119),f=n(421),p="Object already initialized",m=a.TypeError,g=a.WeakMap;if(s||h.state){var y=h.state||(h.state=new g);y.get=y.get,y.has=y.has,y.set=y.set,r=function(t,e){if(y.has(t))throw new m(p);return e.facade=t,y.set(t,e),e},i=function(t){return y.get(t)||{}},o=function(t){return y.has(t)}}else{var v=d("state");f[v]=!0,r=function(t,e){if(l(t,v))throw new m(p);return e.facade=t,u(t,v,e),e},i=function(t){return l(t,v)?t[v]:{}},o=function(t){return l(t,v)}}t.exports={set:r,get:i,has:o,enforce:function(t){return o(t)?i(t):r(t,{})},getterFor:function(t){return function(e){var n;if(!c(e)||(n=i(e)).type!==t)throw new m("Incompatible receiver, "+t+" required");return n}}}},1240:function(t,e,n){var r=n(9504);t.exports=r(1.1.valueOf)},1278:function(t,e,n){var r=n(6518),i=n(3724),o=n(5031),s=n(5397),a=n(7347),c=n(4659);r({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(t){for(var e,n,r=s(t),i=a.f,u=o(r),l={},h=0;u.length>h;)void 0!==(n=i(r,e=u[h++]))&&c(l,e,n);return l}})},1291:function(t,e,n){var r=n(741);t.exports=function(t){var e=+t;return e!=e||0===e?0:r(e)}},1296:function(t,e,n){var r=n(4495);t.exports=r&&!!Symbol.for&&!!Symbol.keyFor},1436:function(t,e,n){var r=n(8227)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[r]=!1,"/./"[t](e)}catch(t){}}return!1}},1469:function(t,e,n){var r=n(7433);t.exports=function(t,e){return new(r(t))(0===e?0:e)}},1480:function(t,e,n){var r=n(6518),i=n(9039),o=n(298).f;r({target:"Object",stat:!0,forced:i((function(){return!Object.getOwnPropertyNames(1)}))},{getOwnPropertyNames:o})},1510:function(t,e,n){var r=n(6518),i=n(7751),o=n(9297),s=n(655),a=n(5745),c=n(1296),u=a("string-to-symbol-registry"),l=a("symbol-to-string-registry");r({target:"Symbol",stat:!0,forced:!c},{for:function(t){var e=s(t);if(o(u,e))return u[e];var n=i("Symbol")(e);return u[e]=n,l[n]=e,n}})},1625:function(t,e,n){var r=n(9504);t.exports=r({}.isPrototypeOf)},1699:function(t,e,n){var r=n(6518),i=n(9504),o=n(5749),s=n(7750),a=n(655),c=n(1436),u=i("".indexOf);r({target:"String",proto:!0,forced:!c("includes")},{includes:function(t){return!!~u(a(s(this)),a(o(t)),arguments.length>1?arguments[1]:void 0)}})},1761:function(t,e,n){var r=n(9565),i=n(9504),o=n(9228),s=n(8551),a=n(34),c=n(8014),u=n(655),l=n(7750),h=n(5966),d=n(7829),f=n(1034),p=n(6682),m=i("".indexOf);o("match",(function(t,e,n){return[function(e){var n=l(this),i=a(e)?h(e,t):void 0;return i?r(i,e,n):new RegExp(e)[t](u(n))},function(t){var r=s(this),i=u(t),o=n(e,r,i);if(o.done)return o.value;var a=u(f(r));if(-1===m(a,"g"))return p(r,i);var l=-1!==m(a,"u");r.lastIndex=0;for(var h,g=[],y=0;null!==(h=p(r,i));){var v=u(h[0]);g[y]=v,""===v&&(r.lastIndex=d(i,c(r.lastIndex),l)),y++}return 0===y?null:g}]}))},1828:function(t,e,n){var r=n(9504),i=n(9297),o=n(5397),s=n(9617).indexOf,a=n(421),c=r([].push);t.exports=function(t,e){var n,r=o(t),u=0,l=[];for(n in r)!i(a,n)&&i(r,n)&&c(l,n);for(;e.length>u;)i(r,n=e[u++])&&(~s(l,n)||c(l,n));return l}},1951:function(t,e,n){var r=n(8227);e.f=r},2008:function(t,e,n){var r=n(6518),i=n(9213).filter;r({target:"Array",proto:!0,forced:!n(597)("filter")},{filter:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},2010:function(t,e,n){var r=n(3724),i=n(350).EXISTS,o=n(9504),s=n(2106),a=Function.prototype,c=o(a.toString),u=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,l=o(u.exec);r&&!i&&s(a,"name",{configurable:!0,get:function(){try{return l(u,c(this))[1]}catch(t){return""}}})},2062:function(t,e,n){var r=n(6518),i=n(9213).map;r({target:"Array",proto:!0,forced:!n(597)("map")},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},2087:function(t,e,n){var r=n(34),i=Math.floor;t.exports=Number.isInteger||function(t){return!r(t)&&isFinite(t)&&i(t)===t}},2106:function(t,e,n){var r=n(283),i=n(4913);t.exports=function(t,e,n){return n.get&&r(n.get,e,{getter:!0}),n.set&&r(n.set,e,{setter:!0}),i.f(t,e,n)}},2140:function(t,e,n){var r={};r[n(8227)("toStringTag")]="z",t.exports="[object z]"===String(r)},2195:function(t,e,n){var r=n(9504),i=r({}.toString),o=r("".slice);t.exports=function(t){return o(i(t),8,-1)}},2211:function(t,e,n){var r=n(9039);t.exports=!r((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},2259:function(t,e,n){n(511)("iterator")},2293:function(t,e,n){var r=n(8551),i=n(5548),o=n(4117),s=n(8227)("species");t.exports=function(t,e){var n,a=r(t).constructor;return void 0===a||o(n=r(a)[s])?e:i(n)}},2360:function(t,e,n){var r,i=n(8551),o=n(6801),s=n(8727),a=n(421),c=n(397),u=n(4055),l=n(6119),h="prototype",d="script",f=l("IE_PROTO"),p=function(){},m=function(t){return"<"+d+">"+t+"</"+d+">"},g=function(t){t.write(m("")),t.close();var e=t.parentWindow.Object;return t=null,e},y=function(){try{r=new ActiveXObject("htmlfile")}catch(t){}var t,e,n;y="undefined"!=typeof document?document.domain&&r?g(r):(e=u("iframe"),n="java"+d+":",e.style.display="none",c.appendChild(e),e.src=String(n),(t=e.contentWindow.document).open(),t.write(m("document.F=Object")),t.close(),t.F):g(r);for(var i=s.length;i--;)delete y[h][s[i]];return y()};a[f]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(p[h]=i(t),n=new p,p[h]=null,n[f]=t):n=y(),void 0===e?n:o.f(n,e)}},2478:function(t,e,n){var r=n(9504),i=n(8981),o=Math.floor,s=r("".charAt),a=r("".replace),c=r("".slice),u=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,l=/\$([$&'`]|\d{1,2})/g;t.exports=function(t,e,n,r,h,d){var f=n+t.length,p=r.length,m=l;return void 0!==h&&(h=i(h),m=u),a(d,m,(function(i,a){var u;switch(s(a,0)){case"$":return"$";case"&":return t;case"`":return c(e,0,n);case"'":return c(e,f);case"<":u=h[c(a,1,-1)];break;default:var l=+a;if(0===l)return i;if(l>p){var d=o(l/10);return 0===d?i:d<=p?void 0===r[d-1]?s(a,1):r[d-1]+s(a,1):i}u=r[l-1]}return void 0===u?"":u}))}},2529:function(t){t.exports=function(t,e){return{value:t,done:e}}},2551:function(t,e,n){var r=n(6395),i=n(4576),o=n(9039),s=n(3607);t.exports=r||!o((function(){if(!(s&&s<535)){var t=Math.random();__defineSetter__.call(null,t,(function(){})),delete i[t]}}))},2637:function(t,e,n){n(6518)({target:"Number",stat:!0},{isInteger:n(2087)})},2675:function(t,e,n){n(6761),n(1510),n(7812),n(3110),n(9773)},2712:function(t,e,n){var r=n(6518),i=n(926).left,o=n(4598),s=n(9519);r({target:"Array",proto:!0,forced:!n(6193)&&s>79&&s<83||!o("reduce")},{reduce:function(t){var e=arguments.length;return i(this,t,e,e>1?arguments[1]:void 0)}})},2762:function(t,e,n){var r=n(6518),i=n(3802).trim;r({target:"String",proto:!0,forced:n(706)("trim")},{trim:function(){return i(this)}})},2777:function(t,e,n){var r=n(9565),i=n(34),o=n(757),s=n(5966),a=n(4270),c=n(8227),u=TypeError,l=c("toPrimitive");t.exports=function(t,e){if(!i(t)||o(t))return t;var n,c=s(t,l);if(c){if(void 0===e&&(e="default"),n=r(c,t,e),!i(n)||o(n))return n;throw new u("Can't convert object to primitive value")}return void 0===e&&(e="number"),a(t,e)}},2787:function(t,e,n){var r=n(9297),i=n(4901),o=n(8981),s=n(6119),a=n(2211),c=s("IE_PROTO"),u=Object,l=u.prototype;t.exports=a?u.getPrototypeOf:function(t){var e=o(t);if(r(e,c))return e[c];var n=e.constructor;return i(n)&&e instanceof n?n.prototype:e instanceof u?l:null}},2796:function(t,e,n){var r=n(9039),i=n(4901),o=/#|\.prototype\./,s=function(t,e){var n=c[a(t)];return n===l||n!==u&&(i(e)?r(e):!!e)},a=s.normalize=function(t){return String(t).replace(o,".").toLowerCase()},c=s.data={},u=s.NATIVE="N",l=s.POLYFILL="P";t.exports=s},2839:function(t,e,n){var r=n(4576).navigator,i=r&&r.userAgent;t.exports=i?String(i):""},2892:function(t,e,n){var r=n(6518),i=n(6395),o=n(3724),s=n(4576),a=n(9167),c=n(9504),u=n(2796),l=n(9297),h=n(3167),d=n(1625),f=n(757),p=n(2777),m=n(9039),g=n(8480).f,y=n(7347).f,v=n(4913).f,_=n(1240),w=n(3802).trim,b="Number",E=s[b],T=a[b],C=E.prototype,S=s.TypeError,I=c("".slice),k=c("".charCodeAt),x=function(t){var e,n,r,i,o,s,a,c,u=p(t,"number");if(f(u))throw new S("Cannot convert a Symbol value to a number");if("string"==typeof u&&u.length>2)if(u=w(u),43===(e=k(u,0))||45===e){if(88===(n=k(u,2))||120===n)return NaN}else if(48===e){switch(k(u,1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+u}for(s=(o=I(u,2)).length,a=0;a<s;a++)if((c=k(o,a))<48||c>i)return NaN;return parseInt(o,r)}return+u},D=u(b,!E(" 0o1")||!E("0b1")||E("+0x1")),A=function(t){var e,n=arguments.length<1?0:E(function(t){var e=p(t,"number");return"bigint"==typeof e?e:x(e)}(t));return d(C,e=this)&&m((function(){_(e)}))?h(Object(n),this,A):n};A.prototype=C,D&&!i&&(C.constructor=A),r({global:!0,constructor:!0,wrap:!0,forced:D},{Number:A});var N=function(t,e){for(var n,r=o?g(e):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),i=0;r.length>i;i++)l(e,n=r[i])&&!l(t,n)&&v(t,n,y(e,n))};i&&T&&N(a[b],T),(D||i)&&N(a[b],E)},2953:function(t,e,n){var r=n(4576),i=n(7400),o=n(9296),s=n(3792),a=n(6699),c=n(687),u=n(8227)("iterator"),l=s.values,h=function(t,e){if(t){if(t[u]!==l)try{a(t,u,l)}catch(e){t[u]=l}if(c(t,e,!0),i[e])for(var n in s)if(t[n]!==s[n])try{a(t,n,s[n])}catch(e){t[n]=s[n]}}};for(var d in i)h(r[d]&&r[d].prototype,d);h(o,"DOMTokenList")},2967:function(t,e,n){var r=n(6706),i=n(34),o=n(7750),s=n(3506);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=r(Object.prototype,"__proto__","set"))(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return o(n),s(r),i(n)?(e?t(n,r):n.__proto__=r,n):n}}():void 0)},3110:function(t,e,n){var r=n(6518),i=n(7751),o=n(8745),s=n(9565),a=n(9504),c=n(9039),u=n(4901),l=n(757),h=n(7680),d=n(6933),f=n(4495),p=String,m=i("JSON","stringify"),g=a(/./.exec),y=a("".charAt),v=a("".charCodeAt),_=a("".replace),w=a(1.1.toString),b=/[\uD800-\uDFFF]/g,E=/^[\uD800-\uDBFF]$/,T=/^[\uDC00-\uDFFF]$/,C=!f||c((function(){var t=i("Symbol")("stringify detection");return"[null]"!==m([t])||"{}"!==m({a:t})||"{}"!==m(Object(t))})),S=c((function(){return'"\\udf06\\ud834"'!==m("\udf06\ud834")||'"\\udead"'!==m("\udead")})),I=function(t,e){var n=h(arguments),r=d(e);if(u(r)||void 0!==t&&!l(t))return n[1]=function(t,e){if(u(r)&&(e=s(r,this,p(t),e)),!l(e))return e},o(m,null,n)},k=function(t,e,n){var r=y(n,e-1),i=y(n,e+1);return g(E,t)&&!g(T,i)||g(T,t)&&!g(E,r)?"\\u"+w(v(t,0),16):t};m&&r({target:"JSON",stat:!0,arity:3,forced:C||S},{stringify:function(t,e,n){var r=h(arguments),i=o(C?I:m,null,r);return S&&"string"==typeof i?_(i,b,k):i}})},3167:function(t,e,n){var r=n(4901),i=n(34),o=n(2967);t.exports=function(t,e,n){var s,a;return o&&r(s=e.constructor)&&s!==n&&i(a=s.prototype)&&a!==n.prototype&&o(t,a),t}},3179:function(t,e,n){var r=n(2140),i=n(6955);t.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},3392:function(t,e,n){var r=n(9504),i=0,o=Math.random(),s=r(1.1.toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+s(++i+o,36)}},3418:function(t,e,n){var r=n(6518),i=n(7916);r({target:"Array",stat:!0,forced:!n(4428)((function(t){Array.from(t)}))},{from:i})},3500:function(t,e,n){var r=n(4576),i=n(7400),o=n(9296),s=n(235),a=n(6699),c=function(t){if(t&&t.forEach!==s)try{a(t,"forEach",s)}catch(e){t.forEach=s}};for(var u in i)i[u]&&c(r[u]&&r[u].prototype);c(o)},3506:function(t,e,n){var r=n(3925),i=String,o=TypeError;t.exports=function(t){if(r(t))return t;throw new o("Can't set "+i(t)+" as a prototype")}},3517:function(t,e,n){var r=n(9504),i=n(9039),o=n(4901),s=n(6955),a=n(7751),c=n(3706),u=function(){},l=a("Reflect","construct"),h=/^\s*(?:class|function)\b/,d=r(h.exec),f=!h.test(u),p=function(t){if(!o(t))return!1;try{return l(u,[],t),!0}catch(t){return!1}},m=function(t){if(!o(t))return!1;switch(s(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return f||!!d(h,c(t))}catch(t){return!0}};m.sham=!0,t.exports=!l||i((function(){var t;return p(p.call)||!p(Object)||!p((function(){t=!0}))||t}))?m:p},3607:function(t,e,n){var r=n(2839).match(/AppleWebKit\/(\d+)\./);t.exports=!!r&&+r[1]},3635:function(t,e,n){var r=n(9039),i=n(4576).RegExp;t.exports=r((function(){var t=i(".","s");return!(t.dotAll&&t.test("\n")&&"s"===t.flags)}))},3640:function(t,e,n){var r=n(8551),i=n(4270),o=TypeError;t.exports=function(t){if(r(this),"string"===t||"default"===t)t="string";else if("number"!==t)throw new o("Incorrect hint");return i(this,t)}},3706:function(t,e,n){var r=n(9504),i=n(4901),o=n(7629),s=r(Function.toString);i(o.inspectSource)||(o.inspectSource=function(t){return s(t)}),t.exports=o.inspectSource},3709:function(t,e,n){var r=n(2839).match(/firefox\/(\d+)/i);t.exports=!!r&&+r[1]},3717:function(t,e){e.f=Object.getOwnPropertySymbols},3724:function(t,e,n){var r=n(9039);t.exports=!r((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},3763:function(t,e,n){var r=n(2839);t.exports=/MSIE|Trident/.test(r)},3792:function(t,e,n){var r=n(5397),i=n(6469),o=n(6269),s=n(1181),a=n(4913).f,c=n(1088),u=n(2529),l=n(6395),h=n(3724),d="Array Iterator",f=s.set,p=s.getterFor(d);t.exports=c(Array,"Array",(function(t,e){f(this,{type:d,target:r(t),index:0,kind:e})}),(function(){var t=p(this),e=t.target,n=t.index++;if(!e||n>=e.length)return t.target=null,u(void 0,!0);switch(t.kind){case"keys":return u(n,!1);case"values":return u(e[n],!1)}return u([n,e[n]],!1)}),"values");var m=o.Arguments=o.Array;if(i("keys"),i("values"),i("entries"),!l&&h&&"values"!==m.name)try{a(m,"name",{value:"values"})}catch(t){}},3802:function(t,e,n){var r=n(9504),i=n(7750),o=n(655),s=n(7452),a=r("".replace),c=RegExp("^["+s+"]+"),u=RegExp("(^|[^"+s+"])["+s+"]+$"),l=function(t){return function(e){var n=o(i(e));return 1&t&&(n=a(n,c,"")),2&t&&(n=a(n,u,"$1")),n}};t.exports={start:l(1),end:l(2),trim:l(3)}},3851:function(t,e,n){var r=n(6518),i=n(9039),o=n(5397),s=n(7347).f,a=n(3724);r({target:"Object",stat:!0,forced:!a||i((function(){s(1)})),sham:!a},{getOwnPropertyDescriptor:function(t,e){return s(o(t),e)}})},3925:function(t,e,n){var r=n(34);t.exports=function(t){return r(t)||null===t}},3994:function(t,e,n){var r=n(7657).IteratorPrototype,i=n(2360),o=n(6980),s=n(687),a=n(6269),c=function(){return this};t.exports=function(t,e,n,u){var l=e+" Iterator";return t.prototype=i(r,{next:o(+!u,n)}),s(t,l,!1,!0),a[l]=c,t}},4055:function(t,e,n){var r=n(4576),i=n(34),o=r.document,s=i(o)&&i(o.createElement);t.exports=function(t){return s?o.createElement(t):{}}},4117:function(t){t.exports=function(t){return null==t}},4209:function(t,e,n){var r=n(8227),i=n(6269),o=r("iterator"),s=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||s[o]===t)}},4213:function(t,e,n){var r=n(3724),i=n(9504),o=n(9565),s=n(9039),a=n(1072),c=n(3717),u=n(8773),l=n(8981),h=n(7055),d=Object.assign,f=Object.defineProperty,p=i([].concat);t.exports=!d||s((function(){if(r&&1!==d({b:1},d(f({},"a",{enumerable:!0,get:function(){f(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol("assign detection"),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach((function(t){e[t]=t})),7!==d({},t)[n]||a(d({},e)).join("")!==i}))?function(t,e){for(var n=l(t),i=arguments.length,s=1,d=c.f,f=u.f;i>s;)for(var m,g=h(arguments[s++]),y=d?p(a(g),d(g)):a(g),v=y.length,_=0;v>_;)m=y[_++],r&&!o(f,g,m)||(n[m]=g[m]);return n}:d},4215:function(t,e,n){var r=n(4576),i=n(2839),o=n(2195),s=function(t){return i.slice(0,t.length)===t};t.exports=s("Bun/")?"BUN":s("Cloudflare-Workers")?"CLOUDFLARE":s("Deno/")?"DENO":s("Node.js/")?"NODE":r.Bun&&"string"==typeof Bun.version?"BUN":r.Deno&&"object"==typeof Deno.version?"DENO":"process"===o(r.process)?"NODE":r.window&&r.document?"BROWSER":"REST"},4270:function(t,e,n){var r=n(9565),i=n(4901),o=n(34),s=TypeError;t.exports=function(t,e){var n,a;if("string"===e&&i(n=t.toString)&&!o(a=r(n,t)))return a;if(i(n=t.valueOf)&&!o(a=r(n,t)))return a;if("string"!==e&&i(n=t.toString)&&!o(a=r(n,t)))return a;throw new s("Can't convert object to primitive value")}},4376:function(t,e,n){var r=n(2195);t.exports=Array.isArray||function(t){return"Array"===r(t)}},4423:function(t,e,n){var r=n(6518),i=n(9617).includes,o=n(9039),s=n(6469);r({target:"Array",proto:!0,forced:o((function(){return!Array(1).includes()}))},{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),s("includes")},4428:function(t,e,n){var r=n(8227)("iterator"),i=!1;try{var o=0,s={next:function(){return{done:!!o++}},return:function(){i=!0}};s[r]=function(){return this},Array.from(s,(function(){throw 2}))}catch(t){}t.exports=function(t,e){try{if(!e&&!i)return!1}catch(t){return!1}var n=!1;try{var o={};o[r]=function(){return{next:function(){return{done:n=!0}}}},t(o)}catch(t){}return n}},4488:function(t,e,n){var r=n(7680),i=Math.floor,o=function(t,e){var n=t.length;if(n<8)for(var s,a,c=1;c<n;){for(a=c,s=t[c];a&&e(t[a-1],s)>0;)t[a]=t[--a];a!==c++&&(t[a]=s)}else for(var u=i(n/2),l=o(r(t,0,u),e),h=o(r(t,u),e),d=l.length,f=h.length,p=0,m=0;p<d||m<f;)t[p+m]=p<d&&m<f?e(l[p],h[m])<=0?l[p++]:h[m++]:p<d?l[p++]:h[m++];return t};t.exports=o},4495:function(t,e,n){var r=n(9519),i=n(9039),o=n(4576).String;t.exports=!!Object.getOwnPropertySymbols&&!i((function(){var t=Symbol("symbol detection");return!o(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},4527:function(t,e,n){var r=n(3724),i=n(4376),o=TypeError,s=Object.getOwnPropertyDescriptor,a=r&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();t.exports=a?function(t,e){if(i(t)&&!s(t,"length").writable)throw new o("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e}},4554:function(t,e,n){var r=n(6518),i=n(8981),o=n(5610),s=n(1291),a=n(6198),c=n(4527),u=n(6837),l=n(1469),h=n(4659),d=n(4606),f=n(597)("splice"),p=Math.max,m=Math.min;r({target:"Array",proto:!0,forced:!f},{splice:function(t,e){var n,r,f,g,y,v,_=i(this),w=a(_),b=o(t,w),E=arguments.length;for(0===E?n=r=0:1===E?(n=0,r=w-b):(n=E-2,r=m(p(s(e),0),w-b)),u(w+n-r),f=l(_,r),g=0;g<r;g++)(y=b+g)in _&&h(f,g,_[y]);if(f.length=r,n<r){for(g=b;g<w-r;g++)v=g+n,(y=g+r)in _?_[v]=_[y]:d(_,v);for(g=w;g>w-r+n;g--)d(_,g-1)}else if(n>r)for(g=w-r;g>b;g--)v=g+n-1,(y=g+r-1)in _?_[v]=_[y]:d(_,v);for(g=0;g<n;g++)_[g+b]=arguments[g+2];return c(_,w-r+n),f}})},4576:function(t,e,n){var r=function(t){return t&&t.Math===Math&&t};t.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n.g&&n.g)||r("object"==typeof this&&this)||function(){return this}()||Function("return this")()},4598:function(t,e,n){var r=n(9039);t.exports=function(t,e){var n=[][t];return!!n&&r((function(){n.call(null,e||function(){return 1},1)}))}},4606:function(t,e,n){var r=n(6823),i=TypeError;t.exports=function(t,e){if(!delete t[e])throw new i("Cannot delete property "+r(e)+" of "+r(t))}},4659:function(t,e,n){var r=n(3724),i=n(4913),o=n(6980);t.exports=function(t,e,n){r?i.f(t,e,o(0,n)):t[e]=n}},4782:function(t,e,n){var r=n(6518),i=n(4376),o=n(3517),s=n(34),a=n(5610),c=n(6198),u=n(5397),l=n(4659),h=n(8227),d=n(597),f=n(7680),p=d("slice"),m=h("species"),g=Array,y=Math.max;r({target:"Array",proto:!0,forced:!p},{slice:function(t,e){var n,r,h,d=u(this),p=c(d),v=a(t,p),_=a(void 0===e?p:e,p);if(i(d)&&(n=d.constructor,(o(n)&&(n===g||i(n.prototype))||s(n)&&null===(n=n[m]))&&(n=void 0),n===g||void 0===n))return f(d,v,_);for(r=new(void 0===n?g:n)(y(_-v,0)),h=0;v<_;v++,h++)v in d&&l(r,h,d[v]);return r.length=h,r}})},4864:function(t,e,n){var r=n(3724),i=n(4576),o=n(9504),s=n(2796),a=n(3167),c=n(6699),u=n(2360),l=n(8480).f,h=n(1625),d=n(788),f=n(655),p=n(1034),m=n(8429),g=n(1056),y=n(6840),v=n(9039),_=n(9297),w=n(1181).enforce,b=n(7633),E=n(8227),T=n(3635),C=n(8814),S=E("match"),I=i.RegExp,k=I.prototype,x=i.SyntaxError,D=o(k.exec),A=o("".charAt),N=o("".replace),O=o("".indexOf),P=o("".slice),R=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,M=/a/g,L=/a/g,F=new I(M)!==M,j=m.MISSED_STICKY,U=m.UNSUPPORTED_Y,V=r&&(!F||j||T||C||v((function(){return L[S]=!1,I(M)!==M||I(L)===L||"/a/i"!==String(I(M,"i"))})));if(s("RegExp",V)){for(var $=function(t,e){var n,r,i,o,s,l,m=h(k,this),g=d(t),y=void 0===e,v=[],b=t;if(!m&&g&&y&&t.constructor===$)return t;if((g||h(k,t))&&(t=t.source,y&&(e=p(b))),t=void 0===t?"":f(t),e=void 0===e?"":f(e),b=t,T&&"dotAll"in M&&(r=!!e&&O(e,"s")>-1)&&(e=N(e,/s/g,"")),n=e,j&&"sticky"in M&&(i=!!e&&O(e,"y")>-1)&&U&&(e=N(e,/y/g,"")),C&&(o=function(t){for(var e,n=t.length,r=0,i="",o=[],s=u(null),a=!1,c=!1,l=0,h="";r<=n;r++){if("\\"===(e=A(t,r)))e+=A(t,++r);else if("]"===e)a=!1;else if(!a)switch(!0){case"["===e:a=!0;break;case"("===e:if(i+=e,"?:"===P(t,r+1,r+3))continue;D(R,P(t,r+1))&&(r+=2,c=!0),l++;continue;case">"===e&&c:if(""===h||_(s,h))throw new x("Invalid capture group name");s[h]=!0,o[o.length]=[h,l],c=!1,h="";continue}c?h+=e:i+=e}return[i,o]}(t),t=o[0],v=o[1]),s=a(I(t,e),m?this:k,$),(r||i||v.length)&&(l=w(s),r&&(l.dotAll=!0,l.raw=$(function(t){for(var e,n=t.length,r=0,i="",o=!1;r<=n;r++)"\\"!==(e=A(t,r))?o||"."!==e?("["===e?o=!0:"]"===e&&(o=!1),i+=e):i+="[\\s\\S]":i+=e+A(t,++r);return i}(t),n)),i&&(l.sticky=!0),v.length&&(l.groups=v)),t!==b)try{c(s,"source",""===b?"(?:)":b)}catch(t){}return s},H=l(I),B=0;H.length>B;)g($,I,H[B++]);k.constructor=$,$.prototype=k,y(i,"RegExp",$,{constructor:!0})}b("RegExp")},4901:function(t){var e="object"==typeof document&&document.all;t.exports=void 0===e&&void 0!==e?function(t){return"function"==typeof t||t===e}:function(t){return"function"==typeof t}},4913:function(t,e,n){var r=n(3724),i=n(5917),o=n(8686),s=n(8551),a=n(6969),c=TypeError,u=Object.defineProperty,l=Object.getOwnPropertyDescriptor,h="enumerable",d="configurable",f="writable";e.f=r?o?function(t,e,n){if(s(t),e=a(e),s(n),"function"==typeof t&&"prototype"===e&&"value"in n&&f in n&&!n[f]){var r=l(t,e);r&&r[f]&&(t[e]=n.value,n={configurable:d in n?n[d]:r[d],enumerable:h in n?n[h]:r[h],writable:!1})}return u(t,e,n)}:u:function(t,e,n){if(s(t),e=a(e),s(n),i)try{return u(t,e,n)}catch(t){}if("get"in n||"set"in n)throw new c("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},5031:function(t,e,n){var r=n(7751),i=n(9504),o=n(8480),s=n(3717),a=n(8551),c=i([].concat);t.exports=r("Reflect","ownKeys")||function(t){var e=o.f(a(t)),n=s.f;return n?c(e,n(t)):e}},5213:function(t,e,n){var r=n(4576),i=n(9039),o=r.RegExp,s=!i((function(){var t=!0;try{o(".","d")}catch(e){t=!1}var e={},n="",r=t?"dgimsy":"gimsy",i=function(t,r){Object.defineProperty(e,t,{get:function(){return n+=r,!0}})},s={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};for(var a in t&&(s.hasIndices="d"),s)i(a,s[a]);return Object.getOwnPropertyDescriptor(o.prototype,"flags").get.call(e)!==r||n!==r}));t.exports={correct:s}},5276:function(t,e,n){var r=n(6518),i=n(7476),o=n(9617).indexOf,s=n(4598),a=i([].indexOf),c=!!a&&1/a([1],1,-0)<0;r({target:"Array",proto:!0,forced:c||!s("indexOf")},{indexOf:function(t){var e=arguments.length>1?arguments[1]:void 0;return c?a(this,t,e)||0:o(this,t,e)}})},5397:function(t,e,n){var r=n(7055),i=n(7750);t.exports=function(t){return r(i(t))}},5440:function(t,e,n){var r=n(8745),i=n(9565),o=n(9504),s=n(9228),a=n(9039),c=n(8551),u=n(4901),l=n(34),h=n(1291),d=n(8014),f=n(655),p=n(7750),m=n(7829),g=n(5966),y=n(2478),v=n(1034),_=n(6682),w=n(8227)("replace"),b=Math.max,E=Math.min,T=o([].concat),C=o([].push),S=o("".indexOf),I=o("".slice),k="$0"==="a".replace(/./,"$0"),x=!!/./[w]&&""===/./[w]("a","$0");s("replace",(function(t,e,n){var o=x?"$":"$0";return[function(t,n){var r=p(this),o=l(t)?g(t,w):void 0;return o?i(o,t,r,n):i(e,f(r),t,n)},function(t,i){var s=c(this),a=f(t);if("string"==typeof i&&-1===S(i,o)&&-1===S(i,"$<")){var l=n(e,s,a,i);if(l.done)return l.value}var p=u(i);p||(i=f(i));var g,w=f(v(s)),k=-1!==S(w,"g");k&&(g=-1!==S(w,"u"),s.lastIndex=0);for(var x,D=[];null!==(x=_(s,a))&&(C(D,x),k);)""===f(x[0])&&(s.lastIndex=m(a,d(s.lastIndex),g));for(var A,N="",O=0,P=0;P<D.length;P++){for(var R,M=f((x=D[P])[0]),L=b(E(h(x.index),a.length),0),F=[],j=1;j<x.length;j++)C(F,void 0===(A=x[j])?A:String(A));var U=x.groups;if(p){var V=T([M],F,L,a);void 0!==U&&C(V,U),R=f(r(i,void 0,V))}else R=y(M,a,L,F,U,i);L>=O&&(N+=I(a,O,L)+R,O=L+M.length)}return N+I(a,O)}]}),!!a((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}))||!k||x)},5548:function(t,e,n){var r=n(3517),i=n(6823),o=TypeError;t.exports=function(t){if(r(t))return t;throw new o(i(t)+" is not a constructor")}},5610:function(t,e,n){var r=n(1291),i=Math.max,o=Math.min;t.exports=function(t,e){var n=r(t);return n<0?i(n+e,0):o(n,e)}},5700:function(t,e,n){var r=n(511),i=n(8242);r("toPrimitive"),i()},5745:function(t,e,n){var r=n(7629);t.exports=function(t,e){return r[t]||(r[t]=e||{})}},5749:function(t,e,n){var r=n(788),i=TypeError;t.exports=function(t){if(r(t))throw new i("The method doesn't accept regular expressions");return t}},5917:function(t,e,n){var r=n(3724),i=n(9039),o=n(4055);t.exports=!r&&!i((function(){return 7!==Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},5966:function(t,e,n){var r=n(9306),i=n(4117);t.exports=function(t,e){var n=t[e];return i(n)?void 0:r(n)}},6080:function(t,e,n){var r=n(7476),i=n(9306),o=n(616),s=r(r.bind);t.exports=function(t,e){return i(t),void 0===e?t:o?s(t,e):function(){return t.apply(e,arguments)}}},6099:function(t,e,n){var r=n(2140),i=n(6840),o=n(3179);r||i(Object.prototype,"toString",o,{unsafe:!0})},6119:function(t,e,n){var r=n(5745),i=n(3392),o=r("keys");t.exports=function(t){return o[t]||(o[t]=i(t))}},6193:function(t,e,n){var r=n(4215);t.exports="NODE"===r},6198:function(t,e,n){var r=n(8014);t.exports=function(t){return r(t.length)}},6269:function(t){t.exports={}},6319:function(t,e,n){var r=n(8551),i=n(9539);t.exports=function(t,e,n,o){try{return o?e(r(n)[0],n[1]):e(n)}catch(e){i(t,"throw",e)}}},6395:function(t){t.exports=!1},6469:function(t,e,n){var r=n(8227),i=n(2360),o=n(4913).f,s=r("unscopables"),a=Array.prototype;void 0===a[s]&&o(a,s,{configurable:!0,value:i(null)}),t.exports=function(t){a[s][t]=!0}},6518:function(t,e,n){var r=n(4576),i=n(7347).f,o=n(6699),s=n(6840),a=n(9433),c=n(7740),u=n(2796);t.exports=function(t,e){var n,l,h,d,f,p=t.target,m=t.global,g=t.stat;if(n=m?r:g?r[p]||a(p,{}):r[p]&&r[p].prototype)for(l in e){if(d=e[l],h=t.dontCallGetSet?(f=i(n,l))&&f.value:n[l],!u(m?l:p+(g?".":"#")+l,t.forced)&&void 0!==h){if(typeof d==typeof h)continue;c(d,h)}(t.sham||h&&h.sham)&&o(d,"sham",!0),s(n,l,d,t)}}},6682:function(t,e,n){var r=n(9565),i=n(8551),o=n(4901),s=n(2195),a=n(7323),c=TypeError;t.exports=function(t,e){var n=t.exec;if(o(n)){var u=r(n,t,e);return null!==u&&i(u),u}if("RegExp"===s(t))return r(a,t,e);throw new c("RegExp#exec called on incompatible receiver")}},6699:function(t,e,n){var r=n(3724),i=n(4913),o=n(6980);t.exports=r?function(t,e,n){return i.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},6706:function(t,e,n){var r=n(9504),i=n(9306);t.exports=function(t,e,n){try{return r(i(Object.getOwnPropertyDescriptor(t,e)[n]))}catch(t){}}},6761:function(t,e,n){var r=n(6518),i=n(4576),o=n(9565),s=n(9504),a=n(6395),c=n(3724),u=n(4495),l=n(9039),h=n(9297),d=n(1625),f=n(8551),p=n(5397),m=n(6969),g=n(655),y=n(6980),v=n(2360),_=n(1072),w=n(8480),b=n(298),E=n(3717),T=n(7347),C=n(4913),S=n(6801),I=n(8773),k=n(6840),x=n(2106),D=n(5745),A=n(6119),N=n(421),O=n(3392),P=n(8227),R=n(1951),M=n(511),L=n(8242),F=n(687),j=n(1181),U=n(9213).forEach,V=A("hidden"),$="Symbol",H="prototype",B=j.set,z=j.getterFor($),W=Object[H],q=i.Symbol,K=q&&q[H],G=i.RangeError,Y=i.TypeError,Q=i.QObject,X=T.f,J=C.f,Z=b.f,tt=I.f,et=s([].push),nt=D("symbols"),rt=D("op-symbols"),it=D("wks"),ot=!Q||!Q[H]||!Q[H].findChild,st=function(t,e,n){var r=X(W,e);r&&delete W[e],J(t,e,n),r&&t!==W&&J(W,e,r)},at=c&&l((function(){return 7!==v(J({},"a",{get:function(){return J(this,"a",{value:7}).a}})).a}))?st:J,ct=function(t,e){var n=nt[t]=v(K);return B(n,{type:$,tag:t,description:e}),c||(n.description=e),n},ut=function(t,e,n){t===W&&ut(rt,e,n),f(t);var r=m(e);return f(n),h(nt,r)?(n.enumerable?(h(t,V)&&t[V][r]&&(t[V][r]=!1),n=v(n,{enumerable:y(0,!1)})):(h(t,V)||J(t,V,y(1,v(null))),t[V][r]=!0),at(t,r,n)):J(t,r,n)},lt=function(t,e){f(t);var n=p(e),r=_(n).concat(pt(n));return U(r,(function(e){c&&!o(ht,n,e)||ut(t,e,n[e])})),t},ht=function(t){var e=m(t),n=o(tt,this,e);return!(this===W&&h(nt,e)&&!h(rt,e))&&(!(n||!h(this,e)||!h(nt,e)||h(this,V)&&this[V][e])||n)},dt=function(t,e){var n=p(t),r=m(e);if(n!==W||!h(nt,r)||h(rt,r)){var i=X(n,r);return!i||!h(nt,r)||h(n,V)&&n[V][r]||(i.enumerable=!0),i}},ft=function(t){var e=Z(p(t)),n=[];return U(e,(function(t){h(nt,t)||h(N,t)||et(n,t)})),n},pt=function(t){var e=t===W,n=Z(e?rt:p(t)),r=[];return U(n,(function(t){!h(nt,t)||e&&!h(W,t)||et(r,nt[t])})),r};u||(q=function(){if(d(K,this))throw new Y("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?g(arguments[0]):void 0,e=O(t),n=function(t){var r=void 0===this?i:this;r===W&&o(n,rt,t),h(r,V)&&h(r[V],e)&&(r[V][e]=!1);var s=y(1,t);try{at(r,e,s)}catch(t){if(!(t instanceof G))throw t;st(r,e,s)}};return c&&ot&&at(W,e,{configurable:!0,set:n}),ct(e,t)},k(K=q[H],"toString",(function(){return z(this).tag})),k(q,"withoutSetter",(function(t){return ct(O(t),t)})),I.f=ht,C.f=ut,S.f=lt,T.f=dt,w.f=b.f=ft,E.f=pt,R.f=function(t){return ct(P(t),t)},c&&(x(K,"description",{configurable:!0,get:function(){return z(this).description}}),a||k(W,"propertyIsEnumerable",ht,{unsafe:!0}))),r({global:!0,constructor:!0,wrap:!0,forced:!u,sham:!u},{Symbol:q}),U(_(it),(function(t){M(t)})),r({target:$,stat:!0,forced:!u},{useSetter:function(){ot=!0},useSimple:function(){ot=!1}}),r({target:"Object",stat:!0,forced:!u,sham:!c},{create:function(t,e){return void 0===e?v(t):lt(v(t),e)},defineProperty:ut,defineProperties:lt,getOwnPropertyDescriptor:dt}),r({target:"Object",stat:!0,forced:!u},{getOwnPropertyNames:ft}),L(),F(q,$),N[V]=!0},6801:function(t,e,n){var r=n(3724),i=n(8686),o=n(4913),s=n(8551),a=n(5397),c=n(1072);e.f=r&&!i?Object.defineProperties:function(t,e){s(t);for(var n,r=a(e),i=c(e),u=i.length,l=0;u>l;)o.f(t,n=i[l++],r[n]);return t}},6823:function(t){var e=String;t.exports=function(t){try{return e(t)}catch(t){return"Object"}}},6837:function(t){var e=TypeError;t.exports=function(t){if(t>9007199254740991)throw e("Maximum allowed index exceeded");return t}},6840:function(t,e,n){var r=n(4901),i=n(4913),o=n(283),s=n(9433);t.exports=function(t,e,n,a){a||(a={});var c=a.enumerable,u=void 0!==a.name?a.name:e;if(r(n)&&o(n,u,a),a.global)c?t[e]=n:s(e,n);else{try{a.unsafe?t[e]&&(c=!0):delete t[e]}catch(t){}c?t[e]=n:i.f(t,e,{value:n,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return t}},6910:function(t,e,n){var r=n(6518),i=n(9504),o=n(9306),s=n(8981),a=n(6198),c=n(4606),u=n(655),l=n(9039),h=n(4488),d=n(4598),f=n(3709),p=n(3763),m=n(9519),g=n(3607),y=[],v=i(y.sort),_=i(y.push),w=l((function(){y.sort(void 0)})),b=l((function(){y.sort(null)})),E=d("sort"),T=!l((function(){if(m)return m<70;if(!(f&&f>3)){if(p)return!0;if(g)return g<603;var t,e,n,r,i="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)y.push({k:e+r,v:n})}for(y.sort((function(t,e){return e.v-t.v})),r=0;r<y.length;r++)e=y[r].k.charAt(0),i.charAt(i.length-1)!==e&&(i+=e);return"DGBEFHACIJK"!==i}}));r({target:"Array",proto:!0,forced:w||!b||!E||!T},{sort:function(t){void 0!==t&&o(t);var e=s(this);if(T)return void 0===t?v(e):v(e,t);var n,r,i=[],l=a(e);for(r=0;r<l;r++)r in e&&_(i,e[r]);for(h(i,function(t){return function(e,n){return void 0===n?-1:void 0===e?1:void 0!==t?+t(e,n)||0:u(e)>u(n)?1:-1}}(t)),n=a(i),r=0;r<n;)e[r]=i[r++];for(;r<l;)c(e,r++);return e}})},6933:function(t,e,n){var r=n(9504),i=n(4376),o=n(4901),s=n(2195),a=n(655),c=r([].push);t.exports=function(t){if(o(t))return t;if(i(t)){for(var e=t.length,n=[],r=0;r<e;r++){var u=t[r];"string"==typeof u?c(n,u):"number"!=typeof u&&"Number"!==s(u)&&"String"!==s(u)||c(n,a(u))}var l=n.length,h=!0;return function(t,e){if(h)return h=!1,e;if(i(this))return e;for(var r=0;r<l;r++)if(n[r]===t)return e}}}},6955:function(t,e,n){var r=n(2140),i=n(4901),o=n(2195),s=n(8227)("toStringTag"),a=Object,c="Arguments"===o(function(){return arguments}());t.exports=r?o:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=a(t),s))?n:c?o(e):"Object"===(r=o(e))&&i(e.callee)?"Arguments":r}},6969:function(t,e,n){var r=n(2777),i=n(757);t.exports=function(t){var e=r(t,"string");return i(e)?e:e+""}},6980:function(t){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},7040:function(t,e,n){var r=n(4495);t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},7055:function(t,e,n){var r=n(9504),i=n(9039),o=n(2195),s=Object,a=r("".split);t.exports=i((function(){return!s("z").propertyIsEnumerable(0)}))?function(t){return"String"===o(t)?a(t,""):s(t)}:s},7323:function(t,e,n){var r,i,o=n(9565),s=n(9504),a=n(655),c=n(7979),u=n(8429),l=n(5745),h=n(2360),d=n(1181).get,f=n(3635),p=n(8814),m=l("native-string-replace",String.prototype.replace),g=RegExp.prototype.exec,y=g,v=s("".charAt),_=s("".indexOf),w=s("".replace),b=s("".slice),E=(i=/b*/g,o(g,r=/a/,"a"),o(g,i,"a"),0!==r.lastIndex||0!==i.lastIndex),T=u.BROKEN_CARET,C=void 0!==/()??/.exec("")[1];(E||C||T||f||p)&&(y=function(t){var e,n,r,i,s,u,l,f=this,p=d(f),S=a(t),I=p.raw;if(I)return I.lastIndex=f.lastIndex,e=o(y,I,S),f.lastIndex=I.lastIndex,e;var k=p.groups,x=T&&f.sticky,D=o(c,f),A=f.source,N=0,O=S;if(x&&(D=w(D,"y",""),-1===_(D,"g")&&(D+="g"),O=b(S,f.lastIndex),f.lastIndex>0&&(!f.multiline||f.multiline&&"\n"!==v(S,f.lastIndex-1))&&(A="(?: "+A+")",O=" "+O,N++),n=new RegExp("^(?:"+A+")",D)),C&&(n=new RegExp("^"+A+"$(?!\\s)",D)),E&&(r=f.lastIndex),i=o(g,x?n:f,O),x?i?(i.input=b(i.input,N),i[0]=b(i[0],N),i.index=f.lastIndex,f.lastIndex+=i[0].length):f.lastIndex=0:E&&i&&(f.lastIndex=f.global?i.index+i[0].length:r),C&&i&&i.length>1&&o(m,i[0],n,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(i[s]=void 0)})),i&&k)for(i.groups=u=h(null),s=0;s<k.length;s++)u[(l=k[s])[0]]=i[l[1]];return i}),t.exports=y},7347:function(t,e,n){var r=n(3724),i=n(9565),o=n(8773),s=n(6980),a=n(5397),c=n(6969),u=n(9297),l=n(5917),h=Object.getOwnPropertyDescriptor;e.f=r?h:function(t,e){if(t=a(t),e=c(e),l)try{return h(t,e)}catch(t){}if(u(t,e))return s(!i(o.f,t,e),t[e])}},7400:function(t){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},7427:function(t,e,n){var r=n(6518),i=n(3724),o=n(2551),s=n(9306),a=n(8981),c=n(4913);i&&r({target:"Object",proto:!0,forced:o},{__defineGetter__:function(t,e){c.f(a(this),t,{get:s(e),enumerable:!0,configurable:!0})}})},7433:function(t,e,n){var r=n(4376),i=n(3517),o=n(34),s=n(8227)("species"),a=Array;t.exports=function(t){var e;return r(t)&&(e=t.constructor,(i(e)&&(e===a||r(e.prototype))||o(e)&&null===(e=e[s]))&&(e=void 0)),void 0===e?a:e}},7452:function(t){t.exports="\t\n\v\f\r \u2028\u2029\ufeff"},7476:function(t,e,n){var r=n(2195),i=n(9504);t.exports=function(t){if("Function"===r(t))return i(t)}},7495:function(t,e,n){var r=n(6518),i=n(7323);r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},7629:function(t,e,n){var r=n(6395),i=n(4576),o=n(9433),s="__core-js_shared__",a=t.exports=i[s]||o(s,{});(a.versions||(a.versions=[])).push({version:"3.45.1",mode:r?"pure":"global",copyright:" 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.45.1/LICENSE",source:"https://github.com/zloirock/core-js"})},7633:function(t,e,n){var r=n(7751),i=n(2106),o=n(8227),s=n(3724),a=o("species");t.exports=function(t){var e=r(t);s&&e&&!e[a]&&i(e,a,{configurable:!0,get:function(){return this}})}},7657:function(t,e,n){var r,i,o,s=n(9039),a=n(4901),c=n(34),u=n(2360),l=n(2787),h=n(6840),d=n(8227),f=n(6395),p=d("iterator"),m=!1;[].keys&&("next"in(o=[].keys())?(i=l(l(o)))!==Object.prototype&&(r=i):m=!0),!c(r)||s((function(){var t={};return r[p].call(t)!==t}))?r={}:f&&(r=u(r)),a(r[p])||h(r,p,(function(){return this})),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:m}},7680:function(t,e,n){var r=n(9504);t.exports=r([].slice)},7740:function(t,e,n){var r=n(9297),i=n(5031),o=n(7347),s=n(4913);t.exports=function(t,e,n){for(var a=i(e),c=s.f,u=o.f,l=0;l<a.length;l++){var h=a[l];r(t,h)||n&&r(n,h)||c(t,h,u(e,h))}}},7750:function(t,e,n){var r=n(4117),i=TypeError;t.exports=function(t){if(r(t))throw new i("Can't call method on "+t);return t}},7751:function(t,e,n){var r=n(4576),i=n(4901);t.exports=function(t,e){return arguments.length<2?(n=r[t],i(n)?n:void 0):r[t]&&r[t][e];var n}},7764:function(t,e,n){var r=n(8183).charAt,i=n(655),o=n(1181),s=n(1088),a=n(2529),c="String Iterator",u=o.set,l=o.getterFor(c);s(String,"String",(function(t){u(this,{type:c,string:i(t),index:0})}),(function(){var t,e=l(this),n=e.string,i=e.index;return i>=n.length?a(void 0,!0):(t=r(n,i),e.index+=t.length,a(t,!1))}))},7812:function(t,e,n){var r=n(6518),i=n(9297),o=n(757),s=n(6823),a=n(5745),c=n(1296),u=a("symbol-to-string-registry");r({target:"Symbol",stat:!0,forced:!c},{keyFor:function(t){if(!o(t))throw new TypeError(s(t)+" is not a symbol");if(i(u,t))return u[t]}})},7829:function(t,e,n){var r=n(8183).charAt;t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},7916:function(t,e,n){var r=n(6080),i=n(9565),o=n(8981),s=n(6319),a=n(4209),c=n(3517),u=n(6198),l=n(4659),h=n(81),d=n(851),f=Array;t.exports=function(t){var e=o(t),n=c(this),p=arguments.length,m=p>1?arguments[1]:void 0,g=void 0!==m;g&&(m=r(m,p>2?arguments[2]:void 0));var y,v,_,w,b,E,T=d(e),C=0;if(!T||this===f&&a(T))for(y=u(e),v=n?new this(y):f(y);y>C;C++)E=g?m(e[C],C):e[C],l(v,C,E);else for(v=n?new this:[],b=(w=h(e,T)).next;!(_=i(b,w)).done;C++)E=g?s(w,m,[_.value,C],!0):_.value,l(v,C,E);return v.length=C,v}},7979:function(t,e,n){var r=n(8551);t.exports=function(){var t=r(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e}},8014:function(t,e,n){var r=n(1291),i=Math.min;t.exports=function(t){var e=r(t);return e>0?i(e,9007199254740991):0}},8183:function(t,e,n){var r=n(9504),i=n(1291),o=n(655),s=n(7750),a=r("".charAt),c=r("".charCodeAt),u=r("".slice),l=function(t){return function(e,n){var r,l,h=o(s(e)),d=i(n),f=h.length;return d<0||d>=f?t?"":void 0:(r=c(h,d))<55296||r>56319||d+1===f||(l=c(h,d+1))<56320||l>57343?t?a(h,d):r:t?u(h,d,d+2):l-56320+(r-55296<<10)+65536}};t.exports={codeAt:l(!1),charAt:l(!0)}},8227:function(t,e,n){var r=n(4576),i=n(5745),o=n(9297),s=n(3392),a=n(4495),c=n(7040),u=r.Symbol,l=i("wks"),h=c?u.for||u:u&&u.withoutSetter||s;t.exports=function(t){return o(l,t)||(l[t]=a&&o(u,t)?u[t]:h("Symbol."+t)),l[t]}},8242:function(t,e,n){var r=n(9565),i=n(7751),o=n(8227),s=n(6840);t.exports=function(){var t=i("Symbol"),e=t&&t.prototype,n=e&&e.valueOf,a=o("toPrimitive");e&&!e[a]&&s(e,a,(function(t){return r(n,this)}),{arity:1})}},8344:function(t,e,n){n(8543)},8429:function(t,e,n){var r=n(9039),i=n(4576).RegExp,o=r((function(){var t=i("a","y");return t.lastIndex=2,null!==t.exec("abcd")})),s=o||r((function(){return!i("a","y").sticky})),a=o||r((function(){var t=i("^r","gy");return t.lastIndex=2,null!==t.exec("str")}));t.exports={BROKEN_CARET:a,MISSED_STICKY:s,UNSUPPORTED_Y:o}},8480:function(t,e,n){var r=n(1828),i=n(8727).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},8543:function(t,e,n){var r=n(6518),i=n(9565),o=n(7476),s=n(3994),a=n(2529),c=n(7750),u=n(8014),l=n(655),h=n(8551),d=n(34),f=n(2195),p=n(788),m=n(1034),g=n(5966),y=n(6840),v=n(9039),_=n(8227),w=n(2293),b=n(7829),E=n(6682),T=n(1181),C=n(6395),S=_("matchAll"),I="RegExp String",k=I+" Iterator",x=T.set,D=T.getterFor(k),A=RegExp.prototype,N=TypeError,O=o("".indexOf),P=o("".matchAll),R=!!P&&!v((function(){P("a",/./)})),M=s((function(t,e,n,r){x(this,{type:k,regexp:t,string:e,global:n,unicode:r,done:!1})}),I,(function(){var t=D(this);if(t.done)return a(void 0,!0);var e=t.regexp,n=t.string,r=E(e,n);return null===r?(t.done=!0,a(void 0,!0)):t.global?(""===l(r[0])&&(e.lastIndex=b(n,u(e.lastIndex),t.unicode)),a(r,!1)):(t.done=!0,a(r,!1))})),L=function(t){var e,n,r,i=h(this),o=l(t),s=w(i,RegExp),a=l(m(i));return e=new s(s===RegExp?i.source:i,a),n=!!~O(a,"g"),r=!!~O(a,"u"),e.lastIndex=u(i.lastIndex),new M(e,o,n,r)};r({target:"String",proto:!0,forced:R},{matchAll:function(t){var e,n,r,o,s=c(this);if(d(t)){if(p(t)&&(e=l(c(m(t))),!~O(e,"g")))throw new N("`.matchAll` does not allow non-global regexes");if(R)return P(s,t);if(void 0===(r=g(t,S))&&C&&"RegExp"===f(t)&&(r=L),r)return i(r,t,s)}else if(R)return P(s,t);return n=l(s),o=new RegExp(t,"g"),C?i(L,o,n):o[S](n)}}),C||S in A||y(A,S,L)},8551:function(t,e,n){var r=n(34),i=String,o=TypeError;t.exports=function(t){if(r(t))return t;throw new o(i(t)+" is not an object")}},8598:function(t,e,n){var r=n(6518),i=n(9504),o=n(7055),s=n(5397),a=n(4598),c=i([].join);r({target:"Array",proto:!0,forced:o!==Object||!a("join",",")},{join:function(t){return c(s(this),void 0===t?",":t)}})},8622:function(t,e,n){var r=n(4576),i=n(4901),o=r.WeakMap;t.exports=i(o)&&/native code/.test(String(o))},8686:function(t,e,n){var r=n(3724),i=n(9039);t.exports=r&&i((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},8706:function(t,e,n){var r=n(6518),i=n(9039),o=n(4376),s=n(34),a=n(8981),c=n(6198),u=n(6837),l=n(4659),h=n(1469),d=n(597),f=n(8227),p=n(9519),m=f("isConcatSpreadable"),g=p>=51||!i((function(){var t=[];return t[m]=!1,t.concat()[0]!==t})),y=function(t){if(!s(t))return!1;var e=t[m];return void 0!==e?!!e:o(t)};r({target:"Array",proto:!0,arity:1,forced:!g||!d("concat")},{concat:function(t){var e,n,r,i,o,s=a(this),d=h(s,0),f=0;for(e=-1,r=arguments.length;e<r;e++)if(y(o=-1===e?s:arguments[e]))for(i=c(o),u(f+i),n=0;n<i;n++,f++)n in o&&l(d,f,o[n]);else u(f+1),l(d,f++,o);return d.length=f,d}})},8727:function(t){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},8745:function(t,e,n){var r=n(616),i=Function.prototype,o=i.apply,s=i.call;t.exports="object"==typeof Reflect&&Reflect.apply||(r?s.bind(o):function(){return s.apply(o,arguments)})},8773:function(t,e){var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,i=r&&!n.call({1:2},1);e.f=i?function(t){var e=r(this,t);return!!e&&e.enumerable}:n},8781:function(t,e,n){var r=n(350).PROPER,i=n(6840),o=n(8551),s=n(655),a=n(9039),c=n(1034),u="toString",l=RegExp.prototype,h=l[u],d=a((function(){return"/a/b"!==h.call({source:"a",flags:"b"})})),f=r&&h.name!==u;(d||f)&&i(l,u,(function(){var t=o(this);return"/"+s(t.source)+"/"+s(c(t))}),{unsafe:!0})},8814:function(t,e,n){var r=n(9039),i=n(4576).RegExp;t.exports=r((function(){var t=i("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")}))},8981:function(t,e,n){var r=n(7750),i=Object;t.exports=function(t){return i(r(t))}},9039:function(t){t.exports=function(t){try{return!!t()}catch(t){return!0}}},9085:function(t,e,n){var r=n(6518),i=n(4213);r({target:"Object",stat:!0,arity:2,forced:Object.assign!==i},{assign:i})},9167:function(t,e,n){var r=n(4576);t.exports=r},9213:function(t,e,n){var r=n(6080),i=n(9504),o=n(7055),s=n(8981),a=n(6198),c=n(1469),u=i([].push),l=function(t){var e=1===t,n=2===t,i=3===t,l=4===t,h=6===t,d=7===t,f=5===t||h;return function(p,m,g,y){for(var v,_,w=s(p),b=o(w),E=a(b),T=r(m,g),C=0,S=y||c,I=e?S(p,E):n||d?S(p,0):void 0;E>C;C++)if((f||C in b)&&(_=T(v=b[C],C,w),t))if(e)I[C]=_;else if(_)switch(t){case 3:return!0;case 5:return v;case 6:return C;case 2:u(I,v)}else switch(t){case 4:return!1;case 7:u(I,v)}return h?-1:i||l?l:I}};t.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterReject:l(7)}},9228:function(t,e,n){n(7495);var r=n(9565),i=n(6840),o=n(7323),s=n(9039),a=n(8227),c=n(6699),u=a("species"),l=RegExp.prototype;t.exports=function(t,e,n,h){var d=a(t),f=!s((function(){var e={};return e[d]=function(){return 7},7!==""[t](e)})),p=f&&!s((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[u]=function(){return n},n.flags="",n[d]=/./[d]),n.exec=function(){return e=!0,null},n[d](""),!e}));if(!f||!p||n){var m=/./[d],g=e(d,""[t],(function(t,e,n,i,s){var a=e.exec;return a===o||a===l.exec?f&&!s?{done:!0,value:r(m,e,n,i)}:{done:!0,value:r(t,n,e,i)}:{done:!1}}));i(String.prototype,t,g[0]),i(l,d,g[1])}h&&c(l[d],"sham",!0)}},9296:function(t,e,n){var r=n(4055)("span").classList,i=r&&r.constructor&&r.constructor.prototype;t.exports=i===Object.prototype?void 0:i},9297:function(t,e,n){var r=n(9504),i=n(8981),o=r({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return o(i(t),e)}},9306:function(t,e,n){var r=n(4901),i=n(6823),o=TypeError;t.exports=function(t){if(r(t))return t;throw new o(i(t)+" is not a function")}},9432:function(t,e,n){var r=n(6518),i=n(8981),o=n(1072);r({target:"Object",stat:!0,forced:n(9039)((function(){o(1)}))},{keys:function(t){return o(i(t))}})},9433:function(t,e,n){var r=n(4576),i=Object.defineProperty;t.exports=function(t,e){try{i(r,t,{value:e,configurable:!0,writable:!0})}catch(n){r[t]=e}return e}},9463:function(t,e,n){var r=n(6518),i=n(3724),o=n(4576),s=n(9504),a=n(9297),c=n(4901),u=n(1625),l=n(655),h=n(2106),d=n(7740),f=o.Symbol,p=f&&f.prototype;if(i&&c(f)&&(!("description"in p)||void 0!==f().description)){var m={},g=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:l(arguments[0]),e=u(p,this)?new f(t):void 0===t?f():f(t);return""===t&&(m[e]=!0),e};d(g,f),g.prototype=p,p.constructor=g;var y="Symbol(description detection)"===String(f("description detection")),v=s(p.valueOf),_=s(p.toString),w=/^Symbol\((.*)\)[^)]+$/,b=s("".replace),E=s("".slice);h(p,"description",{configurable:!0,get:function(){var t=v(this);if(a(m,t))return"";var e=_(t),n=y?E(e,7,-1):b(e,w,"$1");return""===n?void 0:n}}),r({global:!0,constructor:!0,forced:!0},{Symbol:g})}},9504:function(t,e,n){var r=n(616),i=Function.prototype,o=i.call,s=r&&i.bind.bind(o,o);t.exports=r?s:function(t){return function(){return o.apply(t,arguments)}}},9519:function(t,e,n){var r,i,o=n(4576),s=n(2839),a=o.process,c=o.Deno,u=a&&a.versions||c&&c.version,l=u&&u.v8;l&&(i=(r=l.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!i&&s&&(!(r=s.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=s.match(/Chrome\/(\d+)/))&&(i=+r[1]),t.exports=i},9539:function(t,e,n){var r=n(9565),i=n(8551),o=n(5966);t.exports=function(t,e,n){var s,a;i(t);try{if(!(s=o(t,"return"))){if("throw"===e)throw n;return n}s=r(s,t)}catch(t){a=!0,s=t}if("throw"===e)throw n;if(a)throw s;return i(s),n}},9565:function(t,e,n){var r=n(616),i=Function.prototype.call;t.exports=r?i.bind(i):function(){return i.apply(i,arguments)}},9572:function(t,e,n){var r=n(9297),i=n(6840),o=n(3640),s=n(8227)("toPrimitive"),a=Date.prototype;r(a,s)||i(a,s,o)},9617:function(t,e,n){var r=n(5397),i=n(5610),o=n(6198),s=function(t){return function(e,n,s){var a=r(e),c=o(a);if(0===c)return!t&&-1;var u,l=i(s,c);if(t&&n!=n){for(;c>l;)if((u=a[l++])!=u)return!0}else for(;c>l;l++)if((t||l in a)&&a[l]===n)return t||l||0;return!t&&-1}};t.exports={includes:s(!0),indexOf:s(!1)}},9773:function(t,e,n){var r=n(6518),i=n(4495),o=n(9039),s=n(3717),a=n(8981);r({target:"Object",stat:!0,forced:!i||o((function(){s.f(1)}))},{getOwnPropertySymbols:function(t){var e=s.f;return e?e(a(t)):[]}})}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={exports:{}};return t[r].call(o.exports,o,o.exports,n),o.exports}n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var r={};function i(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||o(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){if(t){if("string"==typeof t)return s(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,l(r.key),r)}}function u(t,e,n){return(e=l(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t){var e=function(t,e){if("object"!=a(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==a(e)?e:e+""}n.r(r),n.d(r,{SimpleKeyboard:function(){return O},default:function(){return P}}),n(5276),n(8598),n(4782),n(4554),n(2010),n(7427),n(6099),n(7495),n(8781),n(5440),n(744),n(2762),"undefined"==typeof Element||"remove"in Element.prototype||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)}),"undefined"!=typeof self&&"document"in self&&((!("classList"in document.createElement("_"))||document.createElementNS&&!("classList"in document.createElementNS("http://www.w3.org/2000/svg","g")))&&function(t){if("Element"in t){var e="classList",n="prototype",r=t.Element[n],i=Object,o=String[n].trim||function(){return this.replace(/^\s+|\s+$/g,"")},s=Array[n].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},a=function(t,e){this.name=t,this.code=DOMException[t],this.message=e},c=function(t,e){if(""===e)throw new a("SYNTAX_ERR","The token must not be empty.");if(/\s/.test(e))throw new a("INVALID_CHARACTER_ERR","The token must not contain space characters.");return s.call(t,e)},u=function(t){for(var e=o.call(t.getAttribute("class")||""),n=e?e.split(/\s+/):[],r=0,i=n.length;r<i;r++)this.push(n[r]);this._updateClassName=function(){t.setAttribute("class",this.toString())}},l=u[n]=[],h=function(){return new u(this)};if(a[n]=Error[n],l.item=function(t){return this[t]||null},l.contains=function(t){return~c(this,t+"")},l.add=function(){var t,e=arguments,n=0,r=e.length,i=!1;do{~c(this,t=e[n]+"")||(this.push(t),i=!0)}while(++n<r);i&&this._updateClassName()},l.remove=function(){var t,e,n=arguments,r=0,i=n.length,o=!1;do{for(e=c(this,t=n[r]+"");~e;)this.splice(e,1),o=!0,e=c(this,t)}while(++r<i);o&&this._updateClassName()},l.toggle=function(t,e){var n=this.contains(t),r=n?!0!==e&&"remove":!1!==e&&"add";return r&&this[r](t),!0===e||!1===e?e:!n},l.replace=function(t,e){var n=c(t+"");~n&&(this.splice(n,1,e),this._updateClassName())},l.toString=function(){return this.join(" ")},i.defineProperty){var d={get:h,enumerable:!0,configurable:!0};try{i.defineProperty(r,e,d)}catch(t){void 0!==t.number&&-2146823252!==t.number||(d.enumerable=!1,i.defineProperty(r,e,d))}}else i[n].__defineGetter__&&r.__defineGetter__(e,h)}}(self),function(){var t=document.createElement("_");if(t.classList.add("c1","c2"),!t.classList.contains("c2")){var e=function(t){var e=DOMTokenList.prototype[t];DOMTokenList.prototype[t]=function(t){var n,r=arguments.length;for(n=0;n<r;n++)t=arguments[n],e.call(this,t)}};e("add"),e("remove")}if(t.classList.toggle("c3",!1),t.classList.contains("c3")){var n=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(t,e){return 1 in arguments&&!this.contains(t)==!e?e:n.call(this,t)}}"replace"in document.createElement("_").classList||(DOMTokenList.prototype.replace=function(t,e){var n=this.toString().split(" "),r=n.indexOf(t+"");~r&&(n=n.slice(r),this.remove.apply(this,n),this.add(e),this.add.apply(this,n.slice(1)))}),t=null}()),n(2675),n(9463),n(2259),n(5700),n(8706),n(2008),n(3418),n(4423),n(3792),n(2062),n(6910),n(739),n(9572),n(2892),n(9085),n(3851),n(1278),n(9432),n(4864),n(1699),n(7764),n(8344),n(3500),n(2953),n(2712),n(2637),n(1480),n(825),n(1761);var h=function(){return t=function t(e){var n=e.getOptions,r=e.getCaretPosition,i=e.getCaretPositionEnd,o=e.dispatch;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,"getOptions",void 0),u(this,"getCaretPosition",void 0),u(this,"getCaretPositionEnd",void 0),u(this,"dispatch",void 0),u(this,"maxLengthReached",void 0),u(this,"isStandardButton",(function(t){return t&&!("{"===t[0]&&"}"===t[t.length-1])})),this.getOptions=n,this.getCaretPosition=r,this.getCaretPositionEnd=i,this.dispatch=o,t.bindMethods(t,this)},e=[{key:"getButtonType",value:function(t){return t.includes("{")&&t.includes("}")&&"{//}"!==t?"functionBtn":"standardBtn"}},{key:"getButtonClass",value:function(t){var e=this.getButtonType(t),n=t.replace("{","").replace("}",""),r="";return"standardBtn"!==e&&(r=" hg-button-".concat(n)),"hg-".concat(e).concat(r)}},{key:"getDefaultDiplay",value:function(){return{"{bksp}":"backspace","{backspace}":"backspace","{enter}":"< enter","{shift}":"shift","{shiftleft}":"shift","{shiftright}":"shift","{alt}":"alt","{s}":"shift","{tab}":"tab","{lock}":"caps","{capslock}":"caps","{accept}":"Submit","{space}":" ","{//}":" ","{esc}":"esc","{escape}":"esc","{f1}":"f1","{f2}":"f2","{f3}":"f3","{f4}":"f4","{f5}":"f5","{f6}":"f6","{f7}":"f7","{f8}":"f8","{f9}":"f9","{f10}":"f10","{f11}":"f11","{f12}":"f12","{numpaddivide}":"/","{numlock}":"lock","{arrowup}":"","{arrowleft}":"","{arrowdown}":"","{arrowright}":"","{prtscr}":"print","{scrolllock}":"scroll","{pause}":"pause","{insert}":"ins","{home}":"home","{pageup}":"up","{delete}":"del","{forwarddelete}":"del","{end}":"end","{pagedown}":"down","{numpadmultiply}":"*","{numpadsubtract}":"-","{numpadadd}":"+","{numpadenter}":"enter","{period}":".","{numpaddecimal}":".","{numpad0}":"0","{numpad1}":"1","{numpad2}":"2","{numpad3}":"3","{numpad4}":"4","{numpad5}":"5","{numpad6}":"6","{numpad7}":"7","{numpad8}":"8","{numpad9}":"9"}}},{key:"getButtonDisplayName",value:function(t,e){return(e=arguments.length>2&&void 0!==arguments[2]&&arguments[2]?Object.assign({},this.getDefaultDiplay(),e):e||this.getDefaultDiplay())[t]||t}},{key:"getUpdatedInput",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=this.getOptions(),s=[n,r,i],a=e;return("{bksp}"===t||"{backspace}"===t)&&a.length>0?a=this.removeAt.apply(this,[a].concat(s)):("{delete}"===t||"{forwarddelete}"===t)&&a.length>0?a=this.removeForwardsAt.apply(this,[a].concat(s)):"{space}"===t?a=this.addStringAt.apply(this,[a," "].concat(s)):"{tab}"!==t||"boolean"==typeof o.tabCharOnTab&&!1===o.tabCharOnTab?"{enter}"!==t&&"{numpadenter}"!==t||!o.newLineOnEnter?t.includes("numpad")&&Number.isInteger(Number(t[t.length-2]))?a=this.addStringAt.apply(this,[a,t[t.length-2]].concat(s)):"{numpaddivide}"===t?a=this.addStringAt.apply(this,[a,"/"].concat(s)):"{numpadmultiply}"===t?a=this.addStringAt.apply(this,[a,"*"].concat(s)):"{numpadsubtract}"===t?a=this.addStringAt.apply(this,[a,"-"].concat(s)):"{numpadadd}"===t?a=this.addStringAt.apply(this,[a,"+"].concat(s)):"{numpaddecimal}"===t?a=this.addStringAt.apply(this,[a,"."].concat(s)):"{"===t||"}"===t?a=this.addStringAt.apply(this,[a,t].concat(s)):t.includes("{")||t.includes("}")||(a=this.addStringAt.apply(this,[a,t].concat(s))):a=this.addStringAt.apply(this,[a,"\n"].concat(s)):a=this.addStringAt.apply(this,[a,"\t"].concat(s)),o.debug&&console.log("Input will be: "+a),a}},{key:"updateCaretPos",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.updateCaretPosAction(t,e);this.dispatch((function(t){t.setCaretPosition(n)}))}},{key:"updateCaretPosAction",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.getOptions(),r=this.getCaretPosition();return null!=r&&(e?r>0&&(r-=t):r+=t),n.debug&&console.log("Caret at:",r),r}},{key:"addStringAt",value:function(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return r||0===r?(n=[t.slice(0,r),e,t.slice(i)].join(""),this.isMaxLengthReached()||o&&this.updateCaretPos(e.length)):n=t+e,n}},{key:"removeAt",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.length,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(0===n&&0===r)return t;if(n===r){var o=/([\uD800-\uDBFF][\uDC00-\uDFFF])/g;n&&n>=0?t.substring(n-2,n).match(o)?(e=t.substr(0,n-2)+t.substr(n),i&&this.updateCaretPos(2,!0)):(e=t.substr(0,n-1)+t.substr(n),i&&this.updateCaretPos(1,!0)):t.slice(-2).match(o)?(e=t.slice(0,-2),i&&this.updateCaretPos(2,!0)):(e=t.slice(0,-1),i&&this.updateCaretPos(1,!0))}else e=t.slice(0,n)+t.slice(r),i&&this.dispatch((function(t){t.setCaretPosition(n)}));return e}},{key:"removeForwardsAt",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.length,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return null!=t&&t.length&&null!==n?(n===r?e=t.substring(n,n+2).match(/([\uD800-\uDBFF][\uDC00-\uDFFF])/g)?t.substr(0,n)+t.substr(n+2):t.substr(0,n)+t.substr(n+1):(e=t.slice(0,n)+t.slice(r),i&&this.dispatch((function(t){t.setCaretPosition(n)}))),e):t}},{key:"handleMaxLength",value:function(t,e){var n=this.getOptions(),r=n.maxLength,i=t[n.inputName||"default"],o=e.length-1>=r;if(e.length<=i.length)return!1;if(Number.isInteger(r))return n.debug&&console.log("maxLength (num) reached:",o),o?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1);if("object"===a(r)){var s=e.length-1>=r[n.inputName||"default"];return n.debug&&console.log("maxLength (obj) reached:",s),s?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1)}}},{key:"isMaxLengthReached",value:function(){return Boolean(this.maxLengthReached)}},{key:"isTouchDevice",value:function(){return"ontouchstart"in window||navigator.maxTouchPoints}},{key:"pointerEventsSupported",value:function(){return!!window.PointerEvent}},{key:"camelCase",value:function(t){return t?t.toLowerCase().trim().split(/[.\-_\s]/g).reduce((function(t,e){return e.length?t+e[0].toUpperCase()+e.slice(1):t})):""}},{key:"chunkArray",value:function(t,e){return i(Array(Math.ceil(t.length/e))).map((function(n,r){return t.slice(e*r,e+e*r)}))}},{key:"escapeRegex",value:function(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}},{key:"getRtlOffset",value:function(t,e){var n=t,r=e.indexOf("");return r<t&&-1!=r&&n--,e.indexOf("")<t&&-1!=r&&n--,n<0?0:n}},{key:"isConstructor",value:function(t){try{Reflect.construct(String,[],t)}catch(t){return!1}return!0}}],n=[{key:"bindMethods",value:function(t,e){var n,r=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=o(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,s=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw s}}}}(Object.getOwnPropertyNames(t.prototype));try{for(r.s();!(n=r.n()).done;){var i=n.value;"constructor"===i||"bindMethods"===i||(e[i]=e[i].bind(e))}}catch(t){r.e(t)}finally{r.f()}}}],e&&c(t.prototype,e),n&&c(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();u(h,"noop",(function(){}));var d=h;function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,g(r.key),r)}}function m(t,e,n){return(e=g(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function g(t){var e=function(t,e){if("object"!=f(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==f(e)?e:e+""}var y=function(){return t=function t(e){var n=this,r=e.dispatch,i=e.getOptions;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),m(this,"getOptions",void 0),m(this,"dispatch",void 0),m(this,"isModifierKey",(function(t){return t.altKey||t.ctrlKey||t.shiftKey||["Tab","CapsLock","Esc","ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(t.code||t.key||n.keyCodeToKey(null==t?void 0:t.keyCode))})),this.dispatch=r,this.getOptions=i,d.bindMethods(t,this)},e=[{key:"handleHighlightKeyDown",value:function(t){var e=this.getOptions();e.physicalKeyboardHighlightPreventDefault&&this.isModifierKey(t)&&(t.preventDefault(),t.stopImmediatePropagation());var n=this.getSimpleKeyboardLayoutKey(t);this.dispatch((function(r){var i,o,s=r.getButtonElement(n),a=r.getButtonElement("{".concat(n,"}"));if(s)i=s,o=n;else{if(!a)return;i=a,o="{".concat(n,"}")}var c,u,l,h,d=function(t){t.style.background=e.physicalKeyboardHighlightBgColor||"#dadce4",t.style.color=e.physicalKeyboardHighlightTextColor||"black"};if(i)if(Array.isArray(i)){if(i.forEach((function(t){return d(t)})),e.physicalKeyboardHighlightPress)if(e.physicalKeyboardHighlightPressUsePointerEvents)null===(c=i[0])||void 0===c||null===(u=c.onpointerdown)||void 0===u||u.call(c,t);else if(e.physicalKeyboardHighlightPressUseClick){var f;null===(f=i[0])||void 0===f||f.click()}else r.handleButtonClicked(o,t)}else d(i),e.physicalKeyboardHighlightPress&&(e.physicalKeyboardHighlightPressUsePointerEvents?null===(l=i)||void 0===l||null===(h=l.onpointerdown)||void 0===h||h.call(l,t):e.physicalKeyboardHighlightPressUseClick?i.click():r.handleButtonClicked(o,t))}))}},{key:"handleHighlightKeyUp",value:function(t){var e=this.getOptions();e.physicalKeyboardHighlightPreventDefault&&this.isModifierKey(t)&&(t.preventDefault(),t.stopImmediatePropagation());var n=this.getSimpleKeyboardLayoutKey(t);this.dispatch((function(r){var i,o,s,a=r.getButtonElement(n)||r.getButtonElement("{".concat(n,"}")),c=function(t){t.removeAttribute&&t.removeAttribute("style")};a&&(Array.isArray(a)?(a.forEach((function(t){return c(t)})),e.physicalKeyboardHighlightPressUsePointerEvents&&(null===(i=a[0])||void 0===i||null===(o=i.onpointerup)||void 0===o||o.call(i,t))):(c(a),e.physicalKeyboardHighlightPressUsePointerEvents&&(null==a||null===(s=a.onpointerup)||void 0===s||s.call(a,t))))}))}},{key:"getSimpleKeyboardLayoutKey",value:function(t){var e,n="",r=t.code||t.key||this.keyCodeToKey(null==t?void 0:t.keyCode);return(n=null!=r&&r.includes("Numpad")||null!=r&&r.includes("Shift")||null!=r&&r.includes("Space")||null!=r&&r.includes("Backspace")||null!=r&&r.includes("Control")||null!=r&&r.includes("Alt")||null!=r&&r.includes("Meta")?t.code||"":t.key||this.keyCodeToKey(null==t?void 0:t.keyCode)||"").length>1?null===(e=n)||void 0===e?void 0:e.toLowerCase():n}},{key:"keyCodeToKey",value:function(t){return{8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"Meta",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9",106:"NumpadMultiply",107:"NumpadAdd",109:"NumpadSubtract",110:"NumpadDecimal",111:"NumpadDivide",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}[t]||""}}],e&&p(t.prototype,e),n&&p(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function _(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,b(r.key),r)}}function w(t,e,n){return(e=b(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function b(t){var e=function(t,e){if("object"!=v(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==v(e)?e:e+""}var E=function(){return t=function t(e){var n=e.utilities,r=e.options;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),w(this,"utilities",void 0),w(this,"options",void 0),w(this,"candidateBoxElement",void 0),w(this,"pageIndex",0),w(this,"pageSize",void 0),this.utilities=n,this.options=r,d.bindMethods(t,this),this.pageSize=this.utilities.getOptions().layoutCandidatesPageSize||5},e=[{key:"destroy",value:function(){this.candidateBoxElement&&(this.candidateBoxElement.remove(),this.pageIndex=0)}},{key:"show",value:function(t){var e=this,n=t.candidateValue,r=t.targetElement,i=t.onSelect;if(n&&n.length){var o=this.utilities.chunkArray(n.split(" "),this.pageSize);this.renderPage({candidateListPages:o,targetElement:r,pageIndex:this.pageIndex,nbPages:o.length,onItemSelected:function(t,n){i(t,n),e.destroy()}})}}},{key:"renderPage",value:function(t){var e,n=this,r=t.candidateListPages,i=t.targetElement,o=t.pageIndex,s=t.nbPages,a=t.onItemSelected;null===(e=this.candidateBoxElement)||void 0===e||e.remove(),this.candidateBoxElement=document.createElement("div"),this.candidateBoxElement.className="hg-candidate-box";var c=document.createElement("ul");c.className="hg-candidate-box-list",r[o].forEach((function(t){var e,r=document.createElement("li"),i=function(){var t=new(n.options.useTouchEvents?TouchEvent:MouseEvent)("click");return Object.defineProperty(t,"target",{value:r}),t};r.className="hg-candidate-box-list-item",r.innerHTML=(null===(e=n.options.display)||void 0===e?void 0:e[t])||t,n.options.useTouchEvents?r.ontouchstart=function(e){return a(t,e||i())}:r.onclick=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();return a(t,e)},c.appendChild(r)}));var u=o>0,l=document.createElement("div");l.classList.add("hg-candidate-box-prev"),u&&l.classList.add("hg-candidate-box-btn-active");var h=function(){u&&n.renderPage({candidateListPages:r,targetElement:i,pageIndex:o-1,nbPages:s,onItemSelected:a})};this.options.useTouchEvents?l.ontouchstart=h:l.onclick=h,this.candidateBoxElement.appendChild(l),this.candidateBoxElement.appendChild(c);var d=o<s-1,f=document.createElement("div");f.classList.add("hg-candidate-box-next"),d&&f.classList.add("hg-candidate-box-btn-active");var p=function(){d&&n.renderPage({candidateListPages:r,targetElement:i,pageIndex:o+1,nbPages:s,onItemSelected:a})};this.options.useTouchEvents?f.ontouchstart=p:f.onclick=p,this.candidateBoxElement.appendChild(f),i.prepend(this.candidateBoxElement)}}],e&&_(t.prototype,e),n&&_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}(),T=E;function C(t){return function(t){if(Array.isArray(t))return S(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return S(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function I(t){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I(t)}function k(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function x(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,A(r.key),r)}}function D(t,e,n){return(e=A(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function A(t){var e=function(t,e){if("object"!=I(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=I(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==I(e)?e:e+""}var N=function(){return t=function t(e,n){var r=this;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),D(this,"input",void 0),D(this,"options",void 0),D(this,"utilities",void 0),D(this,"caretPosition",void 0),D(this,"caretPositionEnd",void 0),D(this,"keyboardDOM",void 0),D(this,"keyboardPluginClasses",void 0),D(this,"keyboardDOMClass",void 0),D(this,"buttonElements",void 0),D(this,"currentInstanceName",void 0),D(this,"allKeyboardInstances",void 0),D(this,"keyboardInstanceNames",void 0),D(this,"isFirstKeyboardInstance",void 0),D(this,"physicalKeyboard",void 0),D(this,"modules",void 0),D(this,"activeButtonClass",void 0),D(this,"holdInteractionTimeout",void 0),D(this,"holdTimeout",void 0),D(this,"isMouseHold",void 0),D(this,"initialized",void 0),D(this,"candidateBox",void 0),D(this,"keyboardRowsDOM",void 0),D(this,"defaultName","default"),D(this,"activeInputElement",null),D(this,"handleParams",(function(t,e){var n,r,i;if("string"==typeof t)n=t.split(".").join(""),r=document.querySelector(".".concat(n)),i=e;else if(t instanceof HTMLDivElement){if(!t.className)throw console.warn("Any DOM element passed as parameter must have a class."),new Error("KEYBOARD_DOM_CLASS_ERROR");n=t.className.split(" ")[0],r=t,i=e}else n="simple-keyboard",r=document.querySelector(".".concat(n)),i=t;return{keyboardDOMClass:n,keyboardDOM:r,options:i}})),D(this,"getOptions",(function(){return r.options})),D(this,"getCaretPosition",(function(){return r.caretPosition})),D(this,"getCaretPositionEnd",(function(){return r.caretPositionEnd})),D(this,"registerModule",(function(t,e){r.modules[t]||(r.modules[t]={}),e(r.modules[t])})),D(this,"getKeyboardClassString",(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return[r.keyboardDOMClass].concat(e).filter((function(t){return!!t})).join(" ")})),"undefined"!=typeof window){var i=this.handleParams(e,n),o=i.keyboardDOMClass,s=i.keyboardDOM,a=i.options,c=void 0===a?{}:a;this.utilities=new d({getOptions:this.getOptions,getCaretPosition:this.getCaretPosition,getCaretPositionEnd:this.getCaretPositionEnd,dispatch:this.dispatch}),this.caretPosition=null,this.caretPositionEnd=null,this.keyboardDOM=s,this.options=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?k(Object(n),!0).forEach((function(e){D(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({layoutName:"default",theme:"hg-theme-default",inputName:"default",preventMouseDownDefault:!1,enableLayoutCandidates:!0,excludeFromLayout:{}},c),this.keyboardPluginClasses="",d.bindMethods(t,this);var u=this.options.inputName,l=void 0===u?this.defaultName:u;if(this.input={},this.input[l]="",this.keyboardDOMClass=o,this.buttonElements={},window.SimpleKeyboardInstances||(window.SimpleKeyboardInstances={}),this.currentInstanceName=this.utilities.camelCase(this.keyboardDOMClass),window.SimpleKeyboardInstances[this.currentInstanceName]=this,this.allKeyboardInstances=window.SimpleKeyboardInstances,this.keyboardInstanceNames=Object.keys(window.SimpleKeyboardInstances),this.isFirstKeyboardInstance=this.keyboardInstanceNames[0]===this.currentInstanceName,this.physicalKeyboard=new y({dispatch:this.dispatch,getOptions:this.getOptions}),this.candidateBox=this.options.enableLayoutCandidates?new T({utilities:this.utilities,options:this.options}):null,!this.keyboardDOM)throw console.warn('".'.concat(o,'" was not found in the DOM.')),new Error("KEYBOARD_DOM_ERROR");this.render(),this.modules={},this.loadModules()}},e=[{key:"setCaretPosition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;this.caretPosition=t,this.caretPositionEnd=e}},{key:"getInputCandidates",value:function(t){var e=this,n=this.options,r=n.layoutCandidates,i=n.layoutCandidatesCaseSensitiveMatch;if(!r||"object"!==I(r))return{};var o=Object.keys(r).filter((function(n){var r=t.substring(0,e.getCaretPositionEnd()||0)||t,o=new RegExp("".concat(e.utilities.escapeRegex(n),"$"),i?"g":"gi");return!!C(r.matchAll(o)).length}));if(o.length>1){var s=o.sort((function(t,e){return e.length-t.length}))[0];return{candidateKey:s,candidateValue:r[s]}}if(o.length){var a=o[0];return{candidateKey:a,candidateValue:r[a]}}return{}}},{key:"showCandidatesBox",value:function(t,e,n){var r=this;this.candidateBox&&this.candidateBox.show({candidateValue:e,targetElement:n,onSelect:function(e,n){var i=r.options,o=i.layoutCandidatesCaseSensitiveMatch,s=i.disableCandidateNormalization,a=i.enableLayoutCandidatesKeyPress,c=e;s||(c=e.normalize("NFD")),"function"==typeof r.options.beforeInputUpdate&&r.options.beforeInputUpdate(r);var u=r.getInput(r.options.inputName,!0),l=r.getCaretPositionEnd()||0,h=u.substring(0,l||0)||u,d=new RegExp("".concat(r.utilities.escapeRegex(t),"$"),o?"g":"gi"),f=h.replace(d,c),p=u.replace(h,f),m=f.length-h.length,g=(l||u.length)+m;g<0&&(g=0),r.setInput(p,r.options.inputName,!0),r.setCaretPosition(g),a&&"function"==typeof r.options.onKeyPress&&r.options.onKeyPress(e,n),"function"==typeof r.options.onChange&&r.options.onChange(r.getInput(r.options.inputName,!0),n),"function"==typeof r.options.onChangeAll&&r.options.onChangeAll(r.getAllInputs(),n)}})}},{key:"handleButtonClicked",value:function(t,e){var n=this.options,r=n.inputName,i=void 0===r?this.defaultName:r,o=n.debug;if("{//}"!==t){this.input[i]||(this.input[i]=""),"function"==typeof this.options.beforeInputUpdate&&this.options.beforeInputUpdate(this);var s=this.utilities.getUpdatedInput(t,this.input[i],this.caretPosition,this.caretPositionEnd);if(this.utilities.isStandardButton(t)&&this.activeInputElement&&this.input[i]&&this.input[i]===s&&0===this.caretPosition&&this.caretPositionEnd===s.length)return this.setInput("",this.options.inputName,!0),this.setCaretPosition(0),this.activeInputElement.value="",this.activeInputElement.setSelectionRange(0,0),void this.handleButtonClicked(t,e);if("function"==typeof this.options.onKeyPress&&this.options.onKeyPress(t,e),this.input[i]!==s&&(!this.options.inputPattern||this.options.inputPattern&&this.inputPatternIsValid(s))){if(this.options.maxLength&&this.utilities.handleMaxLength(this.input,s))return;var a=this.utilities.getUpdatedInput(t,this.input[i],this.caretPosition,this.caretPositionEnd,!0);if(this.setInput(a,this.options.inputName,!0),o&&console.log("Input changed:",this.getAllInputs()),this.options.debug&&console.log("Caret at: ",this.getCaretPosition(),this.getCaretPositionEnd(),"(".concat(this.keyboardDOMClass,")"),null==e?void 0:e.type),this.options.syncInstanceInputs&&this.syncInstanceInputs(),"function"==typeof this.options.onChange&&this.options.onChange(this.getInput(this.options.inputName,!0),e),"function"==typeof this.options.onChangeAll&&this.options.onChangeAll(this.getAllInputs(),e),null!=e&&e.target&&this.options.enableLayoutCandidates){var c,u=this.getInputCandidates(s),l=u.candidateKey,h=u.candidateValue;l&&h?this.showCandidatesBox(l,h,this.keyboardDOM):null===(c=this.candidateBox)||void 0===c||c.destroy()}}this.caretPositionEnd&&this.caretPosition!==this.caretPositionEnd&&(this.setCaretPosition(this.caretPositionEnd,this.caretPositionEnd),this.activeInputElement&&this.activeInputElement.setSelectionRange(this.caretPositionEnd,this.caretPositionEnd),this.options.debug&&console.log("Caret position aligned",this.caretPosition)),o&&console.log("Key pressed:",t)}}},{key:"getMouseHold",value:function(){return this.isMouseHold}},{key:"setMouseHold",value:function(t){this.options.syncInstanceInputs?this.dispatch((function(e){e.isMouseHold=t})):this.isMouseHold=t}},{key:"handleButtonMouseDown",value:function(t,e){var n=this;e&&(this.options.preventMouseDownDefault&&e.preventDefault(),this.options.stopMouseDownPropagation&&e.stopPropagation(),e.target.classList.add(this.activeButtonClass)),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdTimeout&&clearTimeout(this.holdTimeout),this.setMouseHold(!0),this.options.disableButtonHold||(this.holdTimeout=window.setTimeout((function(){(n.getMouseHold()&&(!t.includes("{")&&!t.includes("}")||"{delete}"===t||"{backspace}"===t||"{bksp}"===t||"{space}"===t||"{tab}"===t)||"{arrowright}"===t||"{arrowleft}"===t||"{arrowup}"===t||"{arrowdown}"===t)&&(n.options.debug&&console.log("Button held:",t),n.handleButtonHold(t)),clearTimeout(n.holdTimeout)}),500))}},{key:"handleButtonMouseUp",value:function(t,e){var n=this;e&&(this.options.preventMouseUpDefault&&e.preventDefault&&e.preventDefault(),this.options.stopMouseUpPropagation&&e.stopPropagation&&e.stopPropagation(),!(e.target===this.keyboardDOM||e.target&&this.keyboardDOM.contains(e.target)||this.candidateBox&&this.candidateBox.candidateBoxElement&&(e.target===this.candidateBox.candidateBoxElement||e.target&&this.candidateBox.candidateBoxElement.contains(e.target)))&&this.candidateBox&&this.candidateBox.destroy()),this.recurseButtons((function(t){t.classList.remove(n.activeButtonClass)})),this.setMouseHold(!1),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),t&&"function"==typeof this.options.onKeyReleased&&this.options.onKeyReleased(t,e)}},{key:"handleKeyboardContainerMouseDown",value:function(t){this.options.preventMouseDownDefault&&t.preventDefault()}},{key:"handleButtonHold",value:function(t){var e=this;this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdInteractionTimeout=window.setTimeout((function(){e.getMouseHold()?(e.handleButtonClicked(t),e.handleButtonHold(t)):clearTimeout(e.holdInteractionTimeout)}),100)}},{key:"syncInstanceInputs",value:function(){var t=this;this.dispatch((function(e){e.replaceInput(t.input),e.setCaretPosition(t.caretPosition,t.caretPositionEnd)}))}},{key:"clearInput",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.inputName||this.defaultName;this.input[t]="",this.setCaretPosition(0),this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"getInput",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.inputName||this.defaultName,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.options.syncInstanceInputs&&!e&&this.syncInstanceInputs(),this.options.rtl?""+this.input[t].replace("","").replace("","")+"":this.input[t]}},{key:"getAllInputs",value:function(){var t=this,e={};return Object.keys(this.input).forEach((function(n){e[n]=t.getInput(n,!0)})),e}},{key:"setInput",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options.inputName||this.defaultName,n=arguments.length>2?arguments[2]:void 0;this.input[e]=t,!n&&this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"replaceInput",value:function(t){this.input=t}},{key:"setOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.changedOptions(t);this.options=Object.assign(this.options,t),e.length&&(this.options.debug&&console.log("changedOptions",e),this.onSetOptions(e),this.render())}},{key:"changedOptions",value:function(t){var e=this;return Object.keys(t).filter((function(n){return JSON.stringify(t[n])!==JSON.stringify(e.options[n])}))}},{key:"onSetOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.includes("layoutName")&&this.candidateBox&&this.candidateBox.destroy(),(t.includes("layoutCandidatesPageSize")||t.includes("layoutCandidates"))&&this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=new T({utilities:this.utilities,options:this.options}))}},{key:"resetRows",value:function(){this.keyboardRowsDOM&&this.keyboardRowsDOM.remove(),this.keyboardDOM.className=this.keyboardDOMClass,this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.buttonElements={}}},{key:"dispatch",value:function(t){if(!window.SimpleKeyboardInstances)throw console.warn("SimpleKeyboardInstances is not defined. Dispatch cannot be called."),new Error("INSTANCES_VAR_ERROR");return Object.keys(window.SimpleKeyboardInstances).forEach((function(e){t(window.SimpleKeyboardInstances[e],e)}))}},{key:"addButtonTheme",value:function(t,e){var n=this;e&&t&&(t.split(" ").forEach((function(r){e.split(" ").forEach((function(e){n.options.buttonTheme||(n.options.buttonTheme=[]);var i=!1;n.options.buttonTheme.map((function(t){if(null!=t&&t.class.split(" ").includes(e)){i=!0;var n=t.buttons.split(" ");n.includes(r)||(i=!0,n.push(r),t.buttons=n.join(" "))}return t})),i||n.options.buttonTheme.push({class:e,buttons:t})}))})),this.render())}},{key:"removeButtonTheme",value:function(t,e){var n=this;if(!t&&!e)return this.options.buttonTheme=[],void this.render();t&&Array.isArray(this.options.buttonTheme)&&this.options.buttonTheme.length&&(t.split(" ").forEach((function(t){var r;null===(r=n.options)||void 0===r||null===(r=r.buttonTheme)||void 0===r||r.map((function(r,i){if(r&&e&&e.includes(r.class)||!e){var o,s,a=null===(o=r)||void 0===o?void 0:o.buttons.split(" ").filter((function(e){return e!==t}));r&&null!=a&&a.length?r.buttons=a.join(" "):(null===(s=n.options.buttonTheme)||void 0===s||s.splice(i,1),r=null)}return r}))})),this.render())}},{key:"getButtonElement",value:function(t){var e,n=this.buttonElements[t];return n&&(e=n.length>1?n:n[0]),e}},{key:"inputPatternIsValid",value:function(t){var e,n=this.options.inputPattern;if((e=n instanceof RegExp?n:n[this.options.inputName||this.defaultName])&&t){var r=e.test(t);return this.options.debug&&console.log('inputPattern ("'.concat(e,'"): ').concat(r?"passed":"did not pass!")),r}return!0}},{key:"setEventListeners",value:function(){if(this.isFirstKeyboardInstance||!this.allKeyboardInstances){this.options.debug&&console.log("Caret handling started (".concat(this.keyboardDOMClass,")"));var t=this.options.physicalKeyboardHighlightPreventDefault,e=void 0!==t&&t;document.addEventListener("keyup",this.handleKeyUp,e),document.addEventListener("keydown",this.handleKeyDown,e),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("touchend",this.handleTouchEnd),this.options.updateCaretOnSelectionChange&&document.addEventListener("selectionchange",this.handleSelectionChange),document.addEventListener("select",this.handleSelect)}}},{key:"handleKeyUp",value:function(t){this.caretEventHandler(t),this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyUp(t)}},{key:"handleKeyDown",value:function(t){this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyDown(t)}},{key:"handleMouseUp",value:function(t){this.caretEventHandler(t)}},{key:"handleTouchEnd",value:function(t){this.caretEventHandler(t)}},{key:"handleSelect",value:function(t){this.caretEventHandler(t)}},{key:"handleSelectionChange",value:function(t){navigator.userAgent.includes("Firefox")||this.caretEventHandler(t)}},{key:"caretEventHandler",value:function(t){var e,n=this;t.target.tagName&&(e=t.target.tagName.toLowerCase()),this.dispatch((function(r){var i=t.target===r.keyboardDOM||t.target&&r.keyboardDOM.contains(t.target);if(n.options.syncInstanceInputs&&Array.isArray(t.path)&&(i=t.path.some((function(t){var e;return null==t||null===(e=t.hasAttribute)||void 0===e?void 0:e.call(t,"data-skInstance")}))),("textarea"===e||"input"===e&&["text","search","url","tel","password"].includes(t.target.type))&&!r.options.disableCaretPositioning){var o=t.target.selectionStart,s=t.target.selectionEnd;r.options.rtl&&(o=r.utilities.getRtlOffset(o,r.getInput()),s=r.utilities.getRtlOffset(s,r.getInput())),r.setCaretPosition(o,s),r.activeInputElement=t.target,r.options.debug&&console.log("Caret at: ",r.getCaretPosition(),r.getCaretPositionEnd(),t&&t.target.tagName.toLowerCase(),"(".concat(r.keyboardDOMClass,")"),null==t?void 0:t.type)}else!r.options.disableCaretPositioning&&i||"selectionchange"===(null==t?void 0:t.type)||(r.setCaretPosition(null),r.activeInputElement=null,r.options.debug&&console.log('Caret position reset due to "'.concat(null==t?void 0:t.type,'" event'),t))}))}},{key:"recurseButtons",value:function(t){var e=this;t&&Object.keys(this.buttonElements).forEach((function(n){return e.buttonElements[n].forEach(t)}))}},{key:"destroy",value:function(){this.options.debug&&console.log("Destroying simple-keyboard instance: ".concat(this.currentInstanceName));var t=this.options.physicalKeyboardHighlightPreventDefault,e=void 0!==t&&t;document.removeEventListener("keyup",this.handleKeyUp,e),document.removeEventListener("keydown",this.handleKeyDown,e),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("touchend",this.handleTouchEnd),document.removeEventListener("select",this.handleSelect),this.options.updateCaretOnSelectionChange&&document.removeEventListener("selectionchange",this.handleSelectionChange),document.onpointerup=null,document.ontouchend=null,document.ontouchcancel=null,document.onmouseup=null,this.recurseButtons((function(t){t&&(t.onpointerdown=null,t.onpointerup=null,t.onpointercancel=null,t.ontouchstart=null,t.ontouchend=null,t.ontouchcancel=null,t.onclick=null,t.onmousedown=null,t.onmouseup=null,t.remove(),t=null)})),this.keyboardDOM.onpointerdown=null,this.keyboardDOM.ontouchstart=null,this.keyboardDOM.onmousedown=null,this.resetRows(),this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=null),this.activeInputElement=null,this.keyboardDOM.removeAttribute("data-skInstance"),this.keyboardDOM.innerHTML="",window.SimpleKeyboardInstances[this.currentInstanceName]=null,delete window.SimpleKeyboardInstances[this.currentInstanceName],this.initialized=!1}},{key:"getButtonThemeClasses",value:function(t){var e=this.options.buttonTheme,n=[];return Array.isArray(e)&&e.forEach((function(e){if(e&&e.class&&"string"==typeof e.class&&e.buttons&&"string"==typeof e.buttons){var r=e.class.split(" ");e.buttons.split(" ").includes(t)&&(n=[].concat(C(n),C(r)))}else console.warn('Incorrect "buttonTheme". Please check the documentation.',e)})),n}},{key:"setDOMButtonAttributes",value:function(t,e){var n=this.options.buttonAttributes;Array.isArray(n)&&n.forEach((function(n){n.attribute&&"string"==typeof n.attribute&&n.value&&"string"==typeof n.value?n.buttons&&"string"==typeof n.buttons?n.buttons.split(" ").includes(t)&&e(n.attribute,n.value):e(n.attribute,n.value):console.warn('Incorrect "buttonAttributes". Please check the documentation.',n)}))}},{key:"onTouchDeviceDetected",value:function(){this.processAutoTouchEvents(),this.disableContextualWindow()}},{key:"disableContextualWindow",value:function(){window.oncontextmenu=function(t){var e;if(null!==(e=t.target.classList)&&void 0!==e&&e.contains("hg-button"))return t.preventDefault(),t.stopPropagation(),!1}}},{key:"processAutoTouchEvents",value:function(){this.options.autoUseTouchEvents&&(this.options.useTouchEvents=!0,this.options.debug&&console.log("autoUseTouchEvents: Touch device detected, useTouchEvents enabled."))}},{key:"onInit",value:function(){this.options.debug&&console.log("".concat(this.keyboardDOMClass," Initialized")),this.setEventListeners(),"function"==typeof this.options.onInit&&this.options.onInit(this)}},{key:"beforeFirstRender",value:function(){this.utilities.isTouchDevice()&&this.onTouchDeviceDetected(),"function"==typeof this.options.beforeFirstRender&&this.options.beforeFirstRender(this),this.isFirstKeyboardInstance&&this.utilities.pointerEventsSupported()&&!this.options.useTouchEvents&&!this.options.useMouseEvents&&this.options.debug&&console.log("Using PointerEvents as it is supported by this browser"),this.options.useTouchEvents&&this.options.debug&&console.log("useTouchEvents has been enabled. Only touch events will be used.")}},{key:"beforeRender",value:function(){"function"==typeof this.options.beforeRender&&this.options.beforeRender(this)}},{key:"onRender",value:function(){"function"==typeof this.options.onRender&&this.options.onRender(this)}},{key:"onModulesLoaded",value:function(){"function"==typeof this.options.onModulesLoaded&&this.options.onModulesLoaded(this)}},{key:"loadModules",value:function(){var t=this;Array.isArray(this.options.modules)&&(this.options.modules.forEach((function(e){var n=t.utilities.isConstructor(e)?new e(t):e(t);n.init&&n.init(t)})),this.keyboardPluginClasses="modules-loaded",this.render(),this.onModulesLoaded())}},{key:"getModuleProp",value:function(t,e){return!!this.modules[t]&&this.modules[t][e]}},{key:"getModulesList",value:function(){return Object.keys(this.modules)}},{key:"parseRowDOMContainers",value:function(t,e,n,r){var i=this,o=Array.from(t.children),s=0;return o.length&&n.forEach((function(n,a){var c=r[a];if(!(c&&c>n))return!1;var u=n-s,l=c-s,h=document.createElement("div");h.className+="hg-button-container";var d="".concat(i.options.layoutName,"-r").concat(e,"c").concat(a);h.setAttribute("data-skUID",d);var f=o.splice(u,l-u+1);s+=l-u,f.forEach((function(t){return h.appendChild(t)})),o.splice(u,0,h),t.innerHTML="",o.forEach((function(e){return t.appendChild(e)})),i.options.debug&&console.log("rowDOMContainer",f,u,l,s+1)})),t}},{key:"render",value:function(){var t=this;this.resetRows(),this.initialized||this.beforeFirstRender(),this.beforeRender();var e="hg-layout-".concat(this.options.layoutName),n=this.options.layout||{default:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}",".com @ {space}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}",".com @ {space}"]},r=this.options.useTouchEvents||!1,i=r?"hg-touch-events":"",o=this.options.useMouseEvents||!1,s=this.options.disableRowButtonContainers;this.keyboardDOM.className=this.getKeyboardClassString(this.options.theme,e,this.keyboardPluginClasses,i),this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.keyboardRowsDOM=document.createElement("div"),this.keyboardRowsDOM.className="hg-rows",n[this.options.layoutName||this.defaultName].forEach((function(e,n){var i=e.split(" ");t.options.excludeFromLayout&&t.options.excludeFromLayout[t.options.layoutName||t.defaultName]&&(i=i.filter((function(e){return t.options.excludeFromLayout&&!t.options.excludeFromLayout[t.options.layoutName||t.defaultName].includes(e)})));var a=document.createElement("div");a.className+="hg-row";var c=[],u=[];i.forEach((function(e,i){var l,h=!s&&"string"==typeof e&&e.length>1&&0===e.indexOf("["),d=!s&&"string"==typeof e&&e.length>1&&e.indexOf("]")===e.length-1;h&&(c.push(i),e=e.replace(/\[/g,"")),d&&(u.push(i),e=e.replace(/\]/g,""));var f=t.utilities.getButtonClass(e),p=t.utilities.getButtonDisplayName(e,t.options.display,t.options.mergeDisplay),m=t.options.useButtonTag?"button":"div",g=document.createElement(m);g.className+="hg-button ".concat(f),(l=g.classList).add.apply(l,C(t.getButtonThemeClasses(e))),t.setDOMButtonAttributes(e,(function(t,e){g.setAttribute(t,e)})),t.activeButtonClass="hg-activeButton",!t.utilities.pointerEventsSupported()||r||o?r?(g.ontouchstart=function(n){t.handleButtonClicked(e,n),t.handleButtonMouseDown(e,n)},g.ontouchend=function(n){t.handleButtonMouseUp(e,n)},g.ontouchcancel=function(n){t.handleButtonMouseUp(e,n)}):(g.onclick=function(n){t.setMouseHold(!1),"function"==typeof t.options.onKeyReleased||t.options.useMouseEvents&&t.options.clickOnMouseDown||t.handleButtonClicked(e,n)},g.onmousedown=function(n){("function"==typeof t.options.onKeyReleased||t.options.useMouseEvents&&t.options.clickOnMouseDown)&&!t.isMouseHold&&t.handleButtonClicked(e,n),t.handleButtonMouseDown(e,n)},g.onmouseup=function(n){t.handleButtonMouseUp(e,n)}):(g.onpointerdown=function(n){t.handleButtonClicked(e,n),t.handleButtonMouseDown(e,n)},g.onpointerup=function(n){t.handleButtonMouseUp(e,n)},g.onpointercancel=function(n){t.handleButtonMouseUp(e,n)}),g.setAttribute("data-skBtn",e);var y="".concat(t.options.layoutName,"-r").concat(n,"b").concat(i);g.setAttribute("data-skBtnUID",y);var v=document.createElement("span");v.innerHTML=p,g.appendChild(v),t.buttonElements[e]||(t.buttonElements[e]=[]),t.buttonElements[e].push(g),a.appendChild(g)})),a=t.parseRowDOMContainers(a,n,c,u),t.keyboardRowsDOM.appendChild(a)})),this.keyboardDOM.appendChild(this.keyboardRowsDOM),this.onRender(),this.initialized||(this.initialized=!0,!this.utilities.pointerEventsSupported()||r||o?r?(document.ontouchend=function(e){return t.handleButtonMouseUp(void 0,e)},document.ontouchcancel=function(e){return t.handleButtonMouseUp(void 0,e)},this.keyboardDOM.ontouchstart=function(e){return t.handleKeyboardContainerMouseDown(e)}):r||(document.onmouseup=function(e){return t.handleButtonMouseUp(void 0,e)},this.keyboardDOM.onmousedown=function(e){return t.handleKeyboardContainerMouseDown(e)}):(document.onpointerup=function(e){return t.handleButtonMouseUp(void 0,e)},this.keyboardDOM.onpointerdown=function(e){return t.handleKeyboardContainerMouseDown(e)}),this.onInit())}}],e&&x(t.prototype,e),n&&x(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}(),O=N,P=O;return r}()}))},616:function(t,e,n){"use strict";var r=n(9039);t.exports=!r((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},655:function(t,e,n){"use strict";var r=n(6955),i=String;t.exports=function(t){if("Symbol"===r(t))throw new TypeError("Cannot convert a Symbol value to a string");return i(t)}},679:function(t,e,n){"use strict";var r=n(1625),i=TypeError;t.exports=function(t,e){if(r(e,t))return t;throw new i("Incorrect invocation")}},741:function(t){"use strict";var e=Math.ceil,n=Math.floor;t.exports=Math.trunc||function(t){var r=+t;return(r>0?n:e)(r)}},757:function(t,e,n){"use strict";var r=n(7751),i=n(4901),o=n(1625),s=n(7040),a=Object;t.exports=s?function(t){return"symbol"==typeof t}:function(t){var e=r("Symbol");return i(e)&&o(e.prototype,a(t))}},798:function(t,e,n){"use strict";n.d(e,{h1:function(){return u},uA:function(){return i}});n(8111),n(2489),n(1701),n(7642),n(8004),n(3853),n(5876),n(2475),n(5024),n(1698);var r=n(2455);class i{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o="[DEFAULT]";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const t=new r.cY;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(n){}}return this.instancesDeferred.get(e).promise}getImmediate(t){const e=this.normalizeInstanceIdentifier(t?.identifier),n=t?.optional??!1;if(!this.isInitialized(e)&&!this.shouldAutoInitialize()){if(n)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:e})}catch(r){if(n)return null;throw r}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if(c(t))try{this.getOrInitializeService({instanceIdentifier:o})}catch(e){}for(const[t,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:r});n.resolve(t)}catch(e){}}}}clearInstance(t=o){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter((t=>"INTERNAL"in t)).map((t=>t.INTERNAL.delete())),...t.filter((t=>"_delete"in t)).map((t=>t._delete()))])}isComponentSet(){return null!=this.component}isInitialized(t=o){return this.instances.has(t)}getOptions(t=o){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[i,o]of this.instancesDeferred.entries()){const t=this.normalizeInstanceIdentifier(i);n===t&&o.resolve(r)}return r}onInit(t,e){const n=this.normalizeInstanceIdentifier(e),r=this.onInitCallbacks.get(n)??new Set;r.add(t),this.onInitCallbacks.set(n,r);const i=this.instances.get(n);return i&&t(i,n),()=>{r.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const r of n)try{r(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:a(t),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch{}return n||null}normalizeInstanceIdentifier(t=o){return this.component?this.component.multipleInstances?t:o:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}function a(t){return t===o?void 0:t}function c(t){return"EAGER"===t.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){const e=this.getProvider(t.name);e.isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new s(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}},851:function(t,e,n){"use strict";var r=n(6955),i=n(5966),o=n(4117),s=n(6269),a=n(8227),c=a("iterator");t.exports=function(t){if(!o(t))return i(t,c)||i(t,"@@iterator")||s[r(t)]}},1072:function(t,e,n){"use strict";var r=n(1828),i=n(8727);t.exports=Object.keys||function(t){return r(t,i)}},1148:function(t,e,n){"use strict";var r=n(6518),i=n(9565),o=n(2652),s=n(9306),a=n(8551),c=n(1767),u=n(9539),l=n(4549),h=l("every",TypeError);r({target:"Iterator",proto:!0,real:!0,forced:h},{every:function(t){a(this);try{s(t)}catch(r){u(this,"throw",r)}if(h)return i(h,this,t);var e=c(this),n=0;return!o(e,(function(e,r){if(!t(e,n++))return r()}),{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},1181:function(t,e,n){"use strict";var r,i,o,s=n(8622),a=n(4576),c=n(34),u=n(6699),l=n(9297),h=n(7629),d=n(6119),f=n(421),p="Object already initialized",m=a.TypeError,g=a.WeakMap,y=function(t){return o(t)?i(t):r(t,{})},v=function(t){return function(e){var n;if(!c(e)||(n=i(e)).type!==t)throw new m("Incompatible receiver, "+t+" required");return n}};if(s||h.state){var _=h.state||(h.state=new g);_.get=_.get,_.has=_.has,_.set=_.set,r=function(t,e){if(_.has(t))throw new m(p);return e.facade=t,_.set(t,e),e},i=function(t){return _.get(t)||{}},o=function(t){return _.has(t)}}else{var w=d("state");f[w]=!0,r=function(t,e){if(l(t,w))throw new m(p);return e.facade=t,u(t,w,e),e},i=function(t){return l(t,w)?t[w]:{}},o=function(t){return l(t,w)}}t.exports={set:r,get:i,has:o,enforce:y,getterFor:v}},1241:function(t,e){"use strict";e.A=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n}},1291:function(t,e,n){"use strict";var r=n(741);t.exports=function(t){var e=+t;return e!==e||0===e?0:r(e)}},1387:function(t,e,n){"use strict";n.d(e,{LA:function(){return ct},aE:function(){return ie}});n(4114),n(8111),n(1148),n(2489),n(116),n(7588),n(1701),n(8237),n(3579),n(7642),n(8004),n(3853),n(5876),n(2475),n(5024),n(1698);var r=n(6768),i=n(144);
/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */
const o="undefined"!==typeof document;function s(t){return"object"===typeof t||"displayName"in t||"props"in t||"__vccOpts"in t}function a(t){return t.__esModule||"Module"===t[Symbol.toStringTag]||t.default&&s(t.default)}const c=Object.assign;function u(t,e){const n={};for(const r in e){const i=e[r];n[r]=h(i)?i.map(t):t(i)}return n}const l=()=>{},h=Array.isArray;const d=/#/g,f=/&/g,p=/\//g,m=/=/g,g=/\?/g,y=/\+/g,v=/%5B/g,_=/%5D/g,w=/%5E/g,b=/%60/g,E=/%7B/g,T=/%7C/g,C=/%7D/g,S=/%20/g;function I(t){return encodeURI(""+t).replace(T,"|").replace(v,"[").replace(_,"]")}function k(t){return I(t).replace(E,"{").replace(C,"}").replace(w,"^")}function x(t){return I(t).replace(y,"%2B").replace(S,"+").replace(d,"%23").replace(f,"%26").replace(b,"`").replace(E,"{").replace(C,"}").replace(w,"^")}function D(t){return x(t).replace(m,"%3D")}function A(t){return I(t).replace(d,"%23").replace(g,"%3F")}function N(t){return null==t?"":A(t).replace(p,"%2F")}function O(t){try{return decodeURIComponent(""+t)}catch(e){}return""+t}const P=/\/$/,R=t=>t.replace(P,"");function M(t,e,n="/"){let r,i={},o="",s="";const a=e.indexOf("#");let c=e.indexOf("?");return a<c&&a>=0&&(c=-1),c>-1&&(r=e.slice(0,c),o=e.slice(c+1,a>-1?a:e.length),i=t(o)),a>-1&&(r=r||e.slice(0,a),s=e.slice(a,e.length)),r=B(null!=r?r:e,n),{fullPath:r+(o&&"?")+o+s,path:r,query:i,hash:O(s)}}function L(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function F(t,e){return e&&t.toLowerCase().startsWith(e.toLowerCase())?t.slice(e.length)||"/":t}function j(t,e,n){const r=e.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&U(e.matched[r],n.matched[i])&&V(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function U(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function V(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!$(t[n],e[n]))return!1;return!0}function $(t,e){return h(t)?H(t,e):h(e)?H(e,t):t===e}function H(t,e){return h(e)?t.length===e.length&&t.every(((t,n)=>t===e[n])):1===t.length&&t[0]===e}function B(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),i=r[r.length-1];".."!==i&&"."!==i||r.push("");let o,s,a=n.length-1;for(o=0;o<r.length;o++)if(s=r[o],"."!==s){if(".."!==s)break;a>1&&a--}return n.slice(0,a).join("/")+"/"+r.slice(o).join("/")}const z={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var W,q;(function(t){t["pop"]="pop",t["push"]="push"})(W||(W={})),function(t){t["back"]="back",t["forward"]="forward",t["unknown"]=""}(q||(q={}));function K(t){if(!t)if(o){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return"/"!==t[0]&&"#"!==t[0]&&(t="/"+t),R(t)}const G=/^[^#]+#/;function Y(t,e){return t.replace(G,"#")+e}function Q(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const X=()=>({left:window.scrollX,top:window.scrollY});function J(t){let e;if("el"in t){const n=t.el,r="string"===typeof n&&n.startsWith("#");0;const i="string"===typeof n?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=Q(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(null!=e.left?e.left:window.scrollX,null!=e.top?e.top:window.scrollY)}function Z(t,e){const n=history.state?history.state.position-e:-1;return n+t}const tt=new Map;function et(t,e){tt.set(t,e)}function nt(t){const e=tt.get(t);return tt.delete(t),e}let rt=()=>location.protocol+"//"+location.host;function it(t,e){const{pathname:n,search:r,hash:i}=e,o=t.indexOf("#");if(o>-1){let e=i.includes(t.slice(o))?t.slice(o).length:1,n=i.slice(e);return"/"!==n[0]&&(n="/"+n),F(n,"")}const s=F(n,t);return s+r+i}function ot(t,e,n,r){let i=[],o=[],s=null;const a=({state:o})=>{const a=it(t,location),c=n.value,u=e.value;let l=0;if(o){if(n.value=a,e.value=o,s&&s===c)return void(s=null);l=u?o.position-u.position:0}else r(a);i.forEach((t=>{t(n.value,c,{delta:l,type:W.pop,direction:l?l>0?q.forward:q.back:q.unknown})}))};function u(){s=n.value}function l(t){i.push(t);const e=()=>{const e=i.indexOf(t);e>-1&&i.splice(e,1)};return o.push(e),e}function h(){const{history:t}=window;t.state&&t.replaceState(c({},t.state,{scroll:X()}),"")}function d(){for(const t of o)t();o=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",h,{passive:!0}),{pauseListeners:u,listen:l,destroy:d}}function st(t,e,n,r=!1,i=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:i?X():null}}function at(t){const{history:e,location:n}=window,r={value:it(t,n)},i={value:e.state};function o(r,o,s){const a=t.indexOf("#"),c=a>-1?(n.host&&document.querySelector("base")?t:t.slice(a))+r:rt()+t+r;try{e[s?"replaceState":"pushState"](o,"",c),i.value=o}catch(u){console.error(u),n[s?"replace":"assign"](c)}}function s(t,n){const s=c({},e.state,st(i.value.back,t,i.value.forward,!0),n,{position:i.value.position});o(t,s,!0),r.value=t}function a(t,n){const s=c({},i.value,e.state,{forward:t,scroll:X()});o(s.current,s,!0);const a=c({},st(r.value,t,null),{position:s.position+1},n);o(t,a,!1),r.value=t}return i.value||o(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0),{location:r,state:i,push:a,replace:s}}function ct(t){t=K(t);const e=at(t),n=ot(t,e.state,e.location,e.replace);function r(t,e=!0){e||n.pauseListeners(),history.go(t)}const i=c({location:"",base:t,go:r,createHref:Y.bind(null,t)},e,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function ut(t){return"string"===typeof t||t&&"object"===typeof t}function lt(t){return"string"===typeof t||"symbol"===typeof t}const ht=Symbol("");var dt;(function(t){t[t["aborted"]=4]="aborted",t[t["cancelled"]=8]="cancelled",t[t["duplicated"]=16]="duplicated"})(dt||(dt={}));function ft(t,e){return c(new Error,{type:t,[ht]:!0},e)}function pt(t,e){return t instanceof Error&&ht in t&&(null==e||!!(t.type&e))}const mt="[^/]+?",gt={sensitive:!1,strict:!1,start:!0,end:!0},yt=/[.+*?^${}()[\]/\\]/g;function vt(t,e){const n=c({},gt,e),r=[];let i=n.start?"^":"";const o=[];for(const c of t){const t=c.length?[]:[90];n.strict&&!c.length&&(i+="/");for(let e=0;e<c.length;e++){const r=c[e];let s=40+(n.sensitive?.25:0);if(0===r.type)e||(i+="/"),i+=r.value.replace(yt,"\\$&"),s+=40;else if(1===r.type){const{value:t,repeatable:n,optional:a,regexp:u}=r;o.push({name:t,repeatable:n,optional:a});const h=u||mt;if(h!==mt){s+=10;try{new RegExp(`(${h})`)}catch(l){throw new Error(`Invalid custom RegExp for param "${t}" (${h}): `+l.message)}}let d=n?`((?:${h})(?:/(?:${h}))*)`:`(${h})`;e||(d=a&&c.length<2?`(?:/${d})`:"/"+d),a&&(d+="?"),i+=d,s+=20,a&&(s+=-8),n&&(s+=-20),".*"===h&&(s+=-50)}t.push(s)}r.push(t)}if(n.strict&&n.end){const t=r.length-1;r[t][r[t].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const s=new RegExp(i,n.sensitive?"":"i");function a(t){const e=t.match(s),n={};if(!e)return null;for(let r=1;r<e.length;r++){const t=e[r]||"",i=o[r-1];n[i.name]=t&&i.repeatable?t.split("/"):t}return n}function u(e){let n="",r=!1;for(const i of t){r&&n.endsWith("/")||(n+="/"),r=!1;for(const t of i)if(0===t.type)n+=t.value;else if(1===t.type){const{value:o,repeatable:s,optional:a}=t,c=o in e?e[o]:"";if(h(c)&&!s)throw new Error(`Provided param "${o}" is an array but it is not repeatable (* or + modifiers)`);const u=h(c)?c.join("/"):c;if(!u){if(!a)throw new Error(`Missing required param "${o}"`);i.length<2&&(n.endsWith("/")?n=n.slice(0,-1):r=!0)}n+=u}}return n||"/"}return{re:s,score:r,keys:o,parse:a,stringify:u}}function _t(t,e){let n=0;while(n<t.length&&n<e.length){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?1===t.length&&80===t[0]?-1:1:t.length>e.length?1===e.length&&80===e[0]?1:-1:0}function wt(t,e){let n=0;const r=t.score,i=e.score;while(n<r.length&&n<i.length){const t=_t(r[n],i[n]);if(t)return t;n++}if(1===Math.abs(i.length-r.length)){if(bt(r))return 1;if(bt(i))return-1}return i.length-r.length}function bt(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const Et={type:0,value:""},Tt=/[a-zA-Z0-9_]/;function Ct(t){if(!t)return[[]];if("/"===t)return[[Et]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(t){throw new Error(`ERR (${n})/"${u}": ${t}`)}let n=0,r=n;const i=[];let o;function s(){o&&i.push(o),o=[]}let a,c=0,u="",l="";function h(){u&&(0===n?o.push({type:0,value:u}):1===n||2===n||3===n?(o.length>1&&("*"===a||"+"===a)&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:u,regexp:l,repeatable:"*"===a||"+"===a,optional:"*"===a||"?"===a})):e("Invalid state to consume buffer"),u="")}function d(){u+=a}while(c<t.length)if(a=t[c++],"\\"!==a||2===n)switch(n){case 0:"/"===a?(u&&h(),s()):":"===a?(h(),n=1):d();break;case 4:d(),n=r;break;case 1:"("===a?n=2:Tt.test(a)?d():(h(),n=0,"*"!==a&&"?"!==a&&"+"!==a&&c--);break;case 2:")"===a?"\\"==l[l.length-1]?l=l.slice(0,-1)+a:n=3:l+=a;break;case 3:h(),n=0,"*"!==a&&"?"!==a&&"+"!==a&&c--,l="";break;default:e("Unknown state");break}else r=n,n=4;return 2===n&&e(`Unfinished custom RegExp for param "${u}"`),h(),s(),i}function St(t,e,n){const r=vt(Ct(t.path),n);const i=c(r,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf===!e.record.aliasOf&&e.children.push(i),i}function It(t,e){const n=[],r=new Map;function i(t){return r.get(t)}function o(t,n,r){const i=!r,a=xt(t);a.aliasOf=r&&r.record;const h=Ot(e,t),d=[a];if("alias"in t){const e="string"===typeof t.alias?[t.alias]:t.alias;for(const t of e)d.push(xt(c({},a,{components:r?r.record.components:a.components,path:t,aliasOf:r?r.record:a})))}let f,p;for(const e of d){const{path:c}=e;if(n&&"/"!==c[0]){const t=n.record.path,r="/"===t[t.length-1]?"":"/";e.path=n.record.path+(c&&r+c)}if(f=St(e,n,h),r?r.alias.push(f):(p=p||f,p!==f&&p.alias.push(f),i&&t.name&&!At(f)&&s(t.name)),Mt(f)&&u(f),a.children){const t=a.children;for(let e=0;e<t.length;e++)o(t[e],f,r&&r.children[e])}r=r||f}return p?()=>{s(p)}:l}function s(t){if(lt(t)){const e=r.get(t);e&&(r.delete(t),n.splice(n.indexOf(e),1),e.children.forEach(s),e.alias.forEach(s))}else{const e=n.indexOf(t);e>-1&&(n.splice(e,1),t.record.name&&r.delete(t.record.name),t.children.forEach(s),t.alias.forEach(s))}}function a(){return n}function u(t){const e=Pt(t,n);n.splice(e,0,t),t.record.name&&!At(t)&&r.set(t.record.name,t)}function h(t,e){let i,o,s,a={};if("name"in t&&t.name){if(i=r.get(t.name),!i)throw ft(1,{location:t});0,s=i.record.name,a=c(kt(e.params,i.keys.filter((t=>!t.optional)).concat(i.parent?i.parent.keys.filter((t=>t.optional)):[]).map((t=>t.name))),t.params&&kt(t.params,i.keys.map((t=>t.name)))),o=i.stringify(a)}else if(null!=t.path)o=t.path,i=n.find((t=>t.re.test(o))),i&&(a=i.parse(o),s=i.record.name);else{if(i=e.name?r.get(e.name):n.find((t=>t.re.test(e.path))),!i)throw ft(1,{location:t,currentLocation:e});s=i.record.name,a=c({},e.params,t.params),o=i.stringify(a)}const u=[];let l=i;while(l)u.unshift(l.record),l=l.parent;return{name:s,path:o,params:a,matched:u,meta:Nt(u)}}function d(){n.length=0,r.clear()}return e=Ot({strict:!1,end:!0,sensitive:!1},e),t.forEach((t=>o(t))),{addRoute:o,resolve:h,removeRoute:s,clearRoutes:d,getRoutes:a,getRecordMatcher:i}}function kt(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function xt(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:Dt(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function Dt(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]="object"===typeof n?n[r]:n;return e}function At(t){while(t){if(t.record.aliasOf)return!0;t=t.parent}return!1}function Nt(t){return t.reduce(((t,e)=>c(t,e.meta)),{})}function Ot(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function Pt(t,e){let n=0,r=e.length;while(n!==r){const i=n+r>>1,o=wt(t,e[i]);o<0?r=i:n=i+1}const i=Rt(t);return i&&(r=e.lastIndexOf(i,r-1)),r}function Rt(t){let e=t;while(e=e.parent)if(Mt(e)&&0===wt(t,e))return e}function Mt({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function Lt(t){const e={};if(""===t||"?"===t)return e;const n="?"===t[0],r=(n?t.slice(1):t).split("&");for(let i=0;i<r.length;++i){const t=r[i].replace(y," "),n=t.indexOf("="),o=O(n<0?t:t.slice(0,n)),s=n<0?null:O(t.slice(n+1));if(o in e){let t=e[o];h(t)||(t=e[o]=[t]),t.push(s)}else e[o]=s}return e}function Ft(t){let e="";for(let n in t){const r=t[n];if(n=D(n),null==r){void 0!==r&&(e+=(e.length?"&":"")+n);continue}const i=h(r)?r.map((t=>t&&x(t))):[r&&x(r)];i.forEach((t=>{void 0!==t&&(e+=(e.length?"&":"")+n,null!=t&&(e+="="+t))}))}return e}function jt(t){const e={};for(const n in t){const r=t[n];void 0!==r&&(e[n]=h(r)?r.map((t=>null==t?null:""+t)):null==r?r:""+r)}return e}const Ut=Symbol(""),Vt=Symbol(""),$t=Symbol(""),Ht=Symbol(""),Bt=Symbol("");function zt(){let t=[];function e(e){return t.push(e),()=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Wt(t,e,n,r,i,o=t=>t()){const s=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise(((a,c)=>{const u=t=>{!1===t?c(ft(4,{from:n,to:e})):t instanceof Error?c(t):ut(t)?c(ft(2,{from:e,to:t})):(s&&r.enterCallbacks[i]===s&&"function"===typeof t&&s.push(t),a())},l=o((()=>t.call(r&&r.instances[i],e,n,u)));let h=Promise.resolve(l);t.length<3&&(h=h.then(u)),h.catch((t=>c(t)))}))}function qt(t,e,n,r,i=t=>t()){const o=[];for(const c of t){0;for(const t in c.components){let u=c.components[t];if("beforeRouteEnter"===e||c.instances[t])if(s(u)){const s=u.__vccOpts||u,a=s[e];a&&o.push(Wt(a,n,r,c,t,i))}else{let s=u();0,o.push((()=>s.then((o=>{if(!o)throw new Error(`Couldn't resolve component "${t}" at "${c.path}"`);const s=a(o)?o.default:o;c.mods[t]=o,c.components[t]=s;const u=s.__vccOpts||s,l=u[e];return l&&Wt(l,n,r,c,t,i)()}))))}}}return o}function Kt(t){const e=(0,r.WQ)($t),n=(0,r.WQ)(Ht);const o=(0,r.EW)((()=>{const n=(0,i.R1)(t.to);return e.resolve(n)})),s=(0,r.EW)((()=>{const{matched:t}=o.value,{length:e}=t,r=t[e-1],i=n.matched;if(!r||!i.length)return-1;const s=i.findIndex(U.bind(null,r));if(s>-1)return s;const a=Zt(t[e-2]);return e>1&&Zt(r)===a&&i[i.length-1].path!==a?i.findIndex(U.bind(null,t[e-2])):s})),a=(0,r.EW)((()=>s.value>-1&&Jt(n.params,o.value.params))),c=(0,r.EW)((()=>s.value>-1&&s.value===n.matched.length-1&&V(n.params,o.value.params)));function u(n={}){if(Xt(n)){const n=e[(0,i.R1)(t.replace)?"replace":"push"]((0,i.R1)(t.to)).catch(l);return t.viewTransition&&"undefined"!==typeof document&&"startViewTransition"in document&&document.startViewTransition((()=>n)),n}return Promise.resolve()}return{route:o,href:(0,r.EW)((()=>o.value.href)),isActive:a,isExactActive:c,navigate:u}}function Gt(t){return 1===t.length?t[0]:t}const Yt=(0,r.pM)({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Kt,setup(t,{slots:e}){const n=(0,i.Kh)(Kt(t)),{options:o}=(0,r.WQ)($t),s=(0,r.EW)((()=>({[te(t.activeClass,o.linkActiveClass,"router-link-active")]:n.isActive,[te(t.exactActiveClass,o.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive})));return()=>{const i=e.default&&Gt(e.default(n));return t.custom?i:(0,r.h)("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),Qt=Yt;function Xt(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&(void 0===t.button||0===t.button)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function Jt(t,e){for(const n in e){const r=e[n],i=t[n];if("string"===typeof r){if(r!==i)return!1}else if(!h(i)||i.length!==r.length||r.some(((t,e)=>t!==i[e])))return!1}return!0}function Zt(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const te=(t,e,n)=>null!=t?t:null!=e?e:n,ee=(0,r.pM)({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const o=(0,r.WQ)(Bt),s=(0,r.EW)((()=>t.route||o.value)),a=(0,r.WQ)(Vt,0),u=(0,r.EW)((()=>{let t=(0,i.R1)(a);const{matched:e}=s.value;let n;while((n=e[t])&&!n.components)t++;return t})),l=(0,r.EW)((()=>s.value.matched[u.value]));(0,r.Gt)(Vt,(0,r.EW)((()=>u.value+1))),(0,r.Gt)(Ut,l),(0,r.Gt)(Bt,s);const h=(0,i.KR)();return(0,r.wB)((()=>[h.value,l.value,t.name]),(([t,e,n],[r,i,o])=>{e&&(e.instances[n]=t,i&&i!==e&&t&&t===r&&(e.leaveGuards.size||(e.leaveGuards=i.leaveGuards),e.updateGuards.size||(e.updateGuards=i.updateGuards))),!t||!e||i&&U(e,i)&&r||(e.enterCallbacks[n]||[]).forEach((e=>e(t)))}),{flush:"post"}),()=>{const i=s.value,o=t.name,a=l.value,u=a&&a.components[o];if(!u)return ne(n.default,{Component:u,route:i});const d=a.props[o],f=d?!0===d?i.params:"function"===typeof d?d(i):d:null,p=t=>{t.component.isUnmounted&&(a.instances[o]=null)},m=(0,r.h)(u,c({},f,e,{onVnodeUnmounted:p,ref:h}));return ne(n.default,{Component:m,route:i})||m}}});function ne(t,e){if(!t)return null;const n=t(e);return 1===n.length?n[0]:n}const re=ee;function ie(t){const e=It(t.routes,t),n=t.parseQuery||Lt,s=t.stringifyQuery||Ft,a=t.history;const d=zt(),f=zt(),p=zt(),m=(0,i.IJ)(z);let g=z;o&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const y=u.bind(null,(t=>""+t)),v=u.bind(null,N),_=u.bind(null,O);function w(t,n){let r,i;return lt(t)?(r=e.getRecordMatcher(t),i=n):i=t,e.addRoute(i,r)}function b(t){const n=e.getRecordMatcher(t);n&&e.removeRoute(n)}function E(){return e.getRoutes().map((t=>t.record))}function T(t){return!!e.getRecordMatcher(t)}function C(t,r){if(r=c({},r||m.value),"string"===typeof t){const i=M(n,t,r.path),o=e.resolve({path:i.path},r),s=a.createHref(i.fullPath);return c(i,o,{params:_(o.params),hash:O(i.hash),redirectedFrom:void 0,href:s})}let i;if(null!=t.path)i=c({},t,{path:M(n,t.path,r.path).path});else{const e=c({},t.params);for(const t in e)null==e[t]&&delete e[t];i=c({},t,{params:v(e)}),r.params=v(r.params)}const o=e.resolve(i,r),u=t.hash||"";o.params=y(_(o.params));const l=L(s,c({},t,{hash:k(u),path:o.path})),h=a.createHref(l);return c({fullPath:l,hash:u,query:s===Ft?jt(t.query):t.query||{}},o,{redirectedFrom:void 0,href:h})}function S(t){return"string"===typeof t?M(n,t,m.value.path):c({},t)}function I(t,e){if(g!==t)return ft(8,{from:e,to:t})}function x(t){return P(t)}function D(t){return x(c(S(t),{replace:!0}))}function A(t){const e=t.matched[t.matched.length-1];if(e&&e.redirect){const{redirect:n}=e;let r="function"===typeof n?n(t):n;return"string"===typeof r&&(r=r.includes("?")||r.includes("#")?r=S(r):{path:r},r.params={}),c({query:t.query,hash:t.hash,params:null!=r.path?{}:t.params},r)}}function P(t,e){const n=g=C(t),r=m.value,i=t.state,o=t.force,a=!0===t.replace,u=A(n);if(u)return P(c(S(u),{state:"object"===typeof u?c({},i,u.state):i,force:o,replace:a}),e||n);const l=n;let h;return l.redirectedFrom=e,!o&&j(s,r,n)&&(h=ft(16,{to:l,from:r}),rt(r,r,!0,!1)),(h?Promise.resolve(h):U(l,r)).catch((t=>pt(t)?pt(t,2)?t:tt(t):Y(t,l,r))).then((t=>{if(t){if(pt(t,2))return P(c({replace:a},S(t.to),{state:"object"===typeof t.to?c({},i,t.to.state):i,force:o}),e||l)}else t=$(l,r,!0,a,i);return V(l,r,t),t}))}function R(t,e){const n=I(t,e);return n?Promise.reject(n):Promise.resolve()}function F(t){const e=st.values().next().value;return e&&"function"===typeof e.runWithContext?e.runWithContext(t):t()}function U(t,e){let n;const[r,i,o]=oe(t,e);n=qt(r.reverse(),"beforeRouteLeave",t,e);for(const a of r)a.leaveGuards.forEach((r=>{n.push(Wt(r,t,e))}));const s=R.bind(null,t,e);return n.push(s),ct(n).then((()=>{n=[];for(const r of d.list())n.push(Wt(r,t,e));return n.push(s),ct(n)})).then((()=>{n=qt(i,"beforeRouteUpdate",t,e);for(const r of i)r.updateGuards.forEach((r=>{n.push(Wt(r,t,e))}));return n.push(s),ct(n)})).then((()=>{n=[];for(const r of o)if(r.beforeEnter)if(h(r.beforeEnter))for(const i of r.beforeEnter)n.push(Wt(i,t,e));else n.push(Wt(r.beforeEnter,t,e));return n.push(s),ct(n)})).then((()=>(t.matched.forEach((t=>t.enterCallbacks={})),n=qt(o,"beforeRouteEnter",t,e,F),n.push(s),ct(n)))).then((()=>{n=[];for(const r of f.list())n.push(Wt(r,t,e));return n.push(s),ct(n)})).catch((t=>pt(t,8)?t:Promise.reject(t)))}function V(t,e,n){p.list().forEach((r=>F((()=>r(t,e,n)))))}function $(t,e,n,r,i){const s=I(t,e);if(s)return s;const u=e===z,l=o?history.state:{};n&&(r||u?a.replace(t.fullPath,c({scroll:u&&l&&l.scroll},i)):a.push(t.fullPath,i)),m.value=t,rt(t,e,n,u),tt()}let H;function B(){H||(H=a.listen(((t,e,n)=>{if(!at.listening)return;const r=C(t),i=A(r);if(i)return void P(c(i,{replace:!0,force:!0}),r).catch(l);g=r;const s=m.value;o&&et(Z(s.fullPath,n.delta),X()),U(r,s).catch((t=>pt(t,12)?t:pt(t,2)?(P(c(S(t.to),{force:!0}),r).then((t=>{pt(t,20)&&!n.delta&&n.type===W.pop&&a.go(-1,!1)})).catch(l),Promise.reject()):(n.delta&&a.go(-n.delta,!1),Y(t,r,s)))).then((t=>{t=t||$(r,s,!1),t&&(n.delta&&!pt(t,8)?a.go(-n.delta,!1):n.type===W.pop&&pt(t,20)&&a.go(-1,!1)),V(r,s,t)})).catch(l)})))}let q,K=zt(),G=zt();function Y(t,e,n){tt(t);const r=G.list();return r.length?r.forEach((r=>r(t,e,n))):console.error(t),Promise.reject(t)}function Q(){return q&&m.value!==z?Promise.resolve():new Promise(((t,e)=>{K.add([t,e])}))}function tt(t){return q||(q=!t,B(),K.list().forEach((([e,n])=>t?n(t):e())),K.reset()),t}function rt(e,n,i,s){const{scrollBehavior:a}=t;if(!o||!a)return Promise.resolve();const c=!i&&nt(Z(e.fullPath,0))||(s||!i)&&history.state&&history.state.scroll||null;return(0,r.dY)().then((()=>a(e,n,c))).then((t=>t&&J(t))).catch((t=>Y(t,e,n)))}const it=t=>a.go(t);let ot;const st=new Set,at={currentRoute:m,listening:!0,addRoute:w,removeRoute:b,clearRoutes:e.clearRoutes,hasRoute:T,getRoutes:E,resolve:C,options:t,push:x,replace:D,go:it,back:()=>it(-1),forward:()=>it(1),beforeEach:d.add,beforeResolve:f.add,afterEach:p.add,onError:G.add,isReady:Q,install(t){const e=this;t.component("RouterLink",Qt),t.component("RouterView",re),t.config.globalProperties.$router=e,Object.defineProperty(t.config.globalProperties,"$route",{enumerable:!0,get:()=>(0,i.R1)(m)}),o&&!ot&&m.value===z&&(ot=!0,x(a.location).catch((t=>{0})));const n={};for(const i in z)Object.defineProperty(n,i,{get:()=>m.value[i],enumerable:!0});t.provide($t,e),t.provide(Ht,(0,i.Gc)(n)),t.provide(Bt,m);const r=t.unmount;st.add(t),t.unmount=function(){st.delete(t),st.size<1&&(g=z,H&&H(),H=null,m.value=z,ot=!1,q=!1),r()}}};function ct(t){return t.reduce(((t,e)=>t.then((()=>F(e)))),Promise.resolve())}return at}function oe(t,e){const n=[],r=[],i=[],o=Math.max(e.matched.length,t.matched.length);for(let s=0;s<o;s++){const o=e.matched[s];o&&(t.matched.find((t=>U(t,o)))?r.push(o):n.push(o));const a=t.matched[s];a&&(e.matched.find((t=>U(t,a)))||i.push(a))}return[n,r,i]}},1625:function(t,e,n){"use strict";var r=n(9504);t.exports=r({}.isPrototypeOf)},1698:function(t,e,n){"use strict";var r=n(6518),i=n(4204),o=n(4916);r({target:"Set",proto:!0,real:!0,forced:!o("union")},{union:i})},1701:function(t,e,n){"use strict";var r=n(6518),i=n(9565),o=n(9306),s=n(8551),a=n(1767),c=n(9462),u=n(6319),l=n(9539),h=n(4549),d=n(6395),f=!d&&h("map",TypeError),p=c((function(){var t=this.iterator,e=s(i(this.next,t)),n=this.done=!!e.done;if(!n)return u(t,this.mapper,[e.value,this.counter++],!0)}));r({target:"Iterator",proto:!0,real:!0,forced:d||f},{map:function(t){s(this);try{o(t)}catch(e){l(this,"throw",e)}return f?i(f,this,t):new p(a(this),{mapper:t})}})},1767:function(t){"use strict";t.exports=function(t){return{iterator:t,next:t.next,done:!1}}},1806:function(t,e,n){"use strict";var r=n(6518),i=n(8551),o=n(2652),s=n(1767),a=[].push;r({target:"Iterator",proto:!0,real:!0},{toArray:function(){var t=[];return o(s(i(this)),a,{that:t,IS_RECORD:!0}),t}})},1828:function(t,e,n){"use strict";var r=n(9504),i=n(9297),o=n(5397),s=n(9617).indexOf,a=n(421),c=r([].push);t.exports=function(t,e){var n,r=o(t),u=0,l=[];for(n in r)!i(a,n)&&i(r,n)&&c(l,n);while(e.length>u)i(r,n=e[u++])&&(~s(l,n)||c(l,n));return l}},2026:function(){},2106:function(t,e,n){"use strict";var r=n(283),i=n(4913);t.exports=function(t,e,n){return n.get&&r(n.get,e,{getter:!0}),n.set&&r(n.set,e,{setter:!0}),i.f(t,e,n)}},2140:function(t,e,n){"use strict";var r=n(8227),i=r("toStringTag"),o={};o[i]="z",t.exports="[object z]"===String(o)},2195:function(t,e,n){"use strict";var r=n(9504),i=r({}.toString),o=r("".slice);t.exports=function(t){return o(i(t),8,-1)}},2211:function(t,e,n){"use strict";var r=n(9039);t.exports=!r((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},2215:function(t,e,n){"use strict";n.d(e,{P5:function(){return we}});n(4114),n(8111),n(116),n(7588),n(1701);var r=n(6086),i=n(6189),o=n(2455),s=n(798),a=(n(7642),n(8004),n(3853),n(5876),n(2475),n(5024),n(1698),n(4979),n(8071));const c="@firebase/installations",u="0.6.19",l=1e4,h=`w:${u}`,d="FIS_v2",f="https://firebaseinstallations.googleapis.com/v1",p=36e5,m="installations",g="Installations",y={["missing-app-config-values"]:'Missing App configuration value: "{$valueName}"',["not-registered"]:"Firebase Installation is not registered.",["installation-not-found"]:"Firebase Installation not found.",["request-failed"]:'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',["app-offline"]:"Could not process request. Application offline.",["delete-pending-registration"]:"Can't delete installation while there is a pending registration request."},v=new o.FA(m,g,y);function _(t){return t instanceof o.g&&t.code.includes("request-failed")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w({projectId:t}){return`${f}/projects/${t}/installations`}function b(t){return{token:t.token,requestStatus:2,expiresIn:I(t.expiresIn),creationTime:Date.now()}}async function E(t,e){const n=await e.json(),r=n.error;return v.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function T({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function C(t,{refreshToken:e}){const n=T(t);return n.append("Authorization",k(e)),n}async function S(t){const e=await t();return e.status>=500&&e.status<600?t():e}function I(t){return Number(t.replace("s","000"))}function k(t){return`${d} ${t}`}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=w(t),i=T(t),o=e.getImmediate({optional:!0});if(o){const t=await o.getHeartbeatsHeader();t&&i.append("x-firebase-client",t)}const s={fid:n,authVersion:d,appId:t.appId,sdkVersion:h},a={method:"POST",headers:i,body:JSON.stringify(s)},c=await S((()=>fetch(r,a)));if(c.ok){const t=await c.json(),e={fid:t.fid||n,registrationStatus:2,refreshToken:t.refreshToken,authToken:b(t.authToken)};return e}throw await E("Create Installation",c)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D(t){return new Promise((e=>{setTimeout(e,t)}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A(t){const e=btoa(String.fromCharCode(...t));return e.replace(/\+/g,"-").replace(/\//g,"_")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N=/^[cdef][\w-]{21}$/,O="";function P(){try{const t=new Uint8Array(17),e=self.crypto||self.msCrypto;e.getRandomValues(t),t[0]=112+t[0]%16;const n=R(t);return N.test(n)?n:O}catch{return O}}function R(t){const e=A(t);return e.substr(0,22)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M(t){return`${t.appName}!${t.appId}`}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L=new Map;function F(t,e){const n=M(t);j(n,e),U(n,e)}function j(t,e){const n=L.get(t);if(n)for(const r of n)r(e)}function U(t,e){const n=$();n&&n.postMessage({key:t,fid:e}),H()}let V=null;function $(){return!V&&"BroadcastChannel"in self&&(V=new BroadcastChannel("[Firebase] FID Change"),V.onmessage=t=>{j(t.data.key,t.data.fid)}),V}function H(){0===L.size&&V&&(V.close(),V=null)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B="firebase-installations-database",z=1,W="firebase-installations-store";let q=null;function K(){return q||(q=(0,a.P2)(B,z,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(W)}}})),q}async function G(t,e){const n=M(t),r=await K(),i=r.transaction(W,"readwrite"),o=i.objectStore(W),s=await o.get(n);return await o.put(e,n),await i.done,s&&s.fid===e.fid||F(t,e.fid),e}async function Y(t){const e=M(t),n=await K(),r=n.transaction(W,"readwrite");await r.objectStore(W).delete(e),await r.done}async function Q(t,e){const n=M(t),r=await K(),i=r.transaction(W,"readwrite"),o=i.objectStore(W),s=await o.get(n),a=e(s);return void 0===a?await o.delete(n):await o.put(a,n),await i.done,!a||s&&s.fid===a.fid||F(t,a.fid),a}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X(t){let e;const n=await Q(t.appConfig,(n=>{const r=J(n),i=Z(t,r);return e=i.registrationPromise,i.installationEntry}));return n.fid===O?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function J(t){const e=t||{fid:P(),registrationStatus:0};return rt(e)}function Z(t,e){if(0===e.registrationStatus){if(!navigator.onLine){const t=Promise.reject(v.create("app-offline"));return{installationEntry:e,registrationPromise:t}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=tt(t,n);return{installationEntry:n,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:et(t)}:{installationEntry:e}}async function tt(t,e){try{const n=await x(t,e);return G(t.appConfig,n)}catch(n){throw _(n)&&409===n.customData.serverCode?await Y(t.appConfig):await G(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function et(t){let e=await nt(t.appConfig);while(1===e.registrationStatus)await D(100),e=await nt(t.appConfig);if(0===e.registrationStatus){const{installationEntry:e,registrationPromise:n}=await X(t);return n||e}return e}function nt(t){return Q(t,(t=>{if(!t)throw v.create("installation-not-found");return rt(t)}))}function rt(t){return it(t)?{fid:t.fid,registrationStatus:0}:t}function it(t){return 1===t.registrationStatus&&t.registrationTime+l<Date.now()}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ot({appConfig:t,heartbeatServiceProvider:e},n){const r=st(t,n),i=C(t,n),o=e.getImmediate({optional:!0});if(o){const t=await o.getHeartbeatsHeader();t&&i.append("x-firebase-client",t)}const s={installation:{sdkVersion:h,appId:t.appId}},a={method:"POST",headers:i,body:JSON.stringify(s)},c=await S((()=>fetch(r,a)));if(c.ok){const t=await c.json(),e=b(t);return e}throw await E("Generate Auth Token",c)}function st(t,{fid:e}){return`${w(t)}/${e}/authTokens:generate`}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function at(t,e=!1){let n;const r=await Q(t.appConfig,(r=>{if(!ht(r))throw v.create("not-registered");const i=r.authToken;if(!e&&dt(i))return r;if(1===i.requestStatus)return n=ct(t,e),r;{if(!navigator.onLine)throw v.create("app-offline");const e=pt(r);return n=lt(t,e),e}})),i=n?await n:r.authToken;return i}async function ct(t,e){let n=await ut(t.appConfig);while(1===n.authToken.requestStatus)await D(100),n=await ut(t.appConfig);const r=n.authToken;return 0===r.requestStatus?at(t,e):r}function ut(t){return Q(t,(t=>{if(!ht(t))throw v.create("not-registered");const e=t.authToken;return mt(e)?{...t,authToken:{requestStatus:0}}:t}))}async function lt(t,e){try{const n=await ot(t,e),r={...e,authToken:n};return await G(t.appConfig,r),n}catch(n){if(!_(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n={...e,authToken:{requestStatus:0}};await G(t.appConfig,n)}else await Y(t.appConfig);throw n}}function ht(t){return void 0!==t&&2===t.registrationStatus}function dt(t){return 2===t.requestStatus&&!ft(t)}function ft(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+p}function pt(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function mt(t){return 1===t.requestStatus&&t.requestTime+l<Date.now()}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gt(t){const e=t,{installationEntry:n,registrationPromise:r}=await X(e);return r?r.catch(console.error):at(e).catch(console.error),n.fid}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yt(t,e=!1){const n=t;await vt(n);const r=await at(n,e);return r.token}async function vt(t){const{registrationPromise:e}=await X(t);e&&await e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function _t(t){if(!t||!t.options)throw wt("App Configuration");if(!t.name)throw wt("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw wt(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function wt(t){return v.create("missing-app-config-values",{valueName:t})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bt="installations",Et="installations-internal",Tt=t=>{const e=t.getProvider("app").getImmediate(),n=_t(e),i=(0,r.j6)(e,"heartbeat"),o={app:e,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()};return o},Ct=t=>{const e=t.getProvider("app").getImmediate(),n=(0,r.j6)(e,bt).getImmediate(),i={getId:()=>gt(n),getToken:t=>yt(n,t)};return i};function St(){(0,r.om)(new s.uA(bt,Tt,"PUBLIC")),(0,r.om)(new s.uA(Et,Ct,"PRIVATE"))}St(),(0,r.KO)(c,u),(0,r.KO)(c,u,"esm2020");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const It="analytics",kt="firebase_id",xt="origin",Dt=6e4,At="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Nt="https://www.googletagmanager.com/gtag/js",Ot=new i.Vy("@firebase/analytics"),Pt={["already-exists"]:"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",["already-initialized"]:"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.",["already-initialized-settings"]:"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",["interop-component-reg-failed"]:"Firebase Analytics Interop Component failed to instantiate: {$reason}",["invalid-analytics-context"]:"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",["indexeddb-unavailable"]:"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",["fetch-throttle"]:"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",["config-fetch-failed"]:"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",["no-api-key"]:'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',["no-app-id"]:'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',["no-client-id"]:'The "client_id" field is empty.',["invalid-gtag-resource"]:"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Rt=new o.FA("analytics","Analytics",Pt);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Mt(t){if(!t.startsWith(Nt)){const e=Rt.create("invalid-gtag-resource",{gtagURL:t});return Ot.warn(e.message),""}return t}function Lt(t){return Promise.all(t.map((t=>t.catch((t=>t)))))}function Ft(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function jt(t,e){const n=Ft("firebase-js-sdk-policy",{createScriptURL:Mt}),r=document.createElement("script"),i=`${Nt}?l=${t}&id=${e}`;r.src=n?n?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function Ut(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function Vt(t,e,n,r,i,o){const s=r[i];try{if(s)await e[s];else{const t=await Lt(n),r=t.find((t=>t.measurementId===i));r&&await e[r.appId]}}catch(a){Ot.error(a)}t("config",i,o)}async function $t(t,e,n,r,i){try{let o=[];if(i&&i["send_to"]){let t=i["send_to"];Array.isArray(t)||(t=[t]);const r=await Lt(n);for(const n of t){const t=r.find((t=>t.measurementId===n)),i=t&&e[t.appId];if(!i){o=[];break}o.push(i)}}0===o.length&&(o=Object.values(e)),await Promise.all(o),t("event",r,i||{})}catch(o){Ot.error(o)}}function Ht(t,e,n,r){async function i(i,...o){try{if("event"===i){const[r,i]=o;await $t(t,e,n,r,i)}else if("config"===i){const[i,s]=o;await Vt(t,e,n,r,i,s)}else if("consent"===i){const[e,n]=o;t("consent",e,n)}else if("get"===i){const[e,n,r]=o;t("get",e,n,r)}else if("set"===i){const[e]=o;t("set",e)}else t(i,...o)}catch(s){Ot.error(s)}}return i}function Bt(t,e,n,r,i){let o=function(...t){window[r].push(arguments)};return window[i]&&"function"===typeof window[i]&&(o=window[i]),window[i]=Ht(o,t,e,n),{gtagCore:o,wrappedGtag:window[i]}}function zt(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Nt)&&n.src.includes(t))return n;return null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wt=30,qt=1e3;class Kt{constructor(t={},e=qt){this.throttleMetadata=t,this.intervalMillis=e}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,e){this.throttleMetadata[t]=e}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}}const Gt=new Kt;function Yt(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function Qt(t){const{appId:e,apiKey:n}=t,r={method:"GET",headers:Yt(n)},i=At.replace("{app-id}",e),o=await fetch(i,r);if(200!==o.status&&304!==o.status){let t="";try{const e=await o.json();e.error?.message&&(t=e.error.message)}catch(s){}throw Rt.create("config-fetch-failed",{httpStatus:o.status,responseMessage:t})}return o.json()}async function Xt(t,e=Gt,n){const{appId:r,apiKey:i,measurementId:o}=t.options;if(!r)throw Rt.create("no-app-id");if(!i){if(o)return{measurementId:o,appId:r};throw Rt.create("no-api-key")}const s=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new ee;return setTimeout((async()=>{a.abort()}),void 0!==n?n:Dt),Jt({appId:r,apiKey:i,measurementId:o},s,a,e)}async function Jt(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=Gt){const{appId:s,measurementId:a}=t;try{await Zt(r,e)}catch(c){if(a)return Ot.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c?.message}]`),{appId:s,measurementId:a};throw c}try{const e=await Qt(t);return i.deleteThrottleMetadata(s),e}catch(c){const e=c;if(!te(e)){if(i.deleteThrottleMetadata(s),a)return Ot.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${e?.message}]`),{appId:s,measurementId:a};throw c}const u=503===Number(e?.customData?.httpStatus)?(0,o.p9)(n,i.intervalMillis,Wt):(0,o.p9)(n,i.intervalMillis),l={throttleEndTimeMillis:Date.now()+u,backoffCount:n+1};return i.setThrottleMetadata(s,l),Ot.debug(`Calling attemptFetch again in ${u} millis`),Jt(t,l,r,i)}}function Zt(t,e){return new Promise(((n,r)=>{const i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener((()=>{clearTimeout(o),r(Rt.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}function te(t){if(!(t instanceof o.g)||!t.customData)return!1;const e=Number(t.customData["httpStatus"]);return 429===e||500===e||503===e||504===e}class ee{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach((t=>t()))}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ne,re;async function ie(t,e,n,r,i){if(i&&i.global)t("event",n,r);else{const i=await e,o={...r,send_to:i};t("event",n,o)}}function oe(t){re=t}function se(t){ne=t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ae(){if(!(0,o.zW)())return Ot.warn(Rt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await(0,o.eX)()}catch(t){return Ot.warn(Rt.create("indexeddb-unavailable",{errorInfo:t?.toString()}).message),!1}return!0}async function ce(t,e,n,r,i,o,s){const a=Xt(t);a.then((e=>{n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&Ot.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${e.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)})).catch((t=>Ot.error(t))),e.push(a);const c=ae().then((t=>t?r.getId():void 0)),[u,l]=await Promise.all([a,c]);zt(o)||jt(o,u.measurementId),re&&(i("consent","default",re),oe(void 0)),i("js",new Date);const h=s?.config??{};return h[xt]="firebase",h.update=!0,null!=l&&(h[kt]=l),i("config",u.measurementId,h),ne&&(i("set",ne),se(void 0)),u.measurementId}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(t){this.app=t}_delete(){return delete le[this.app.options.appId],Promise.resolve()}}let le={},he=[];const de={};let fe,pe,me="dataLayer",ge="gtag",ye=!1;function ve(){const t=[];if((0,o.sr)()&&t.push("This is a browser extension environment."),(0,o.dM)()||t.push("Cookies are not available."),t.length>0){const e=t.map(((t,e)=>`(${e+1}) ${t}`)).join(" "),n=Rt.create("invalid-analytics-context",{errorInfo:e});Ot.warn(n.message)}}function _e(t,e,n){ve();const r=t.options.appId;if(!r)throw Rt.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw Rt.create("no-api-key");Ot.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=le[r])throw Rt.create("already-exists",{id:r});if(!ye){Ut(me);const{wrappedGtag:t,gtagCore:e}=Bt(le,he,de,me,ge);pe=t,fe=e,ye=!0}le[r]=ce(t,he,de,e,fe,me,n);const i=new ue(t);return i}function we(t=(0,r.Sx)()){t=(0,o.Ku)(t);const e=(0,r.j6)(t,It);return e.isInitialized()?e.getImmediate():be(t)}function be(t,e={}){const n=(0,r.j6)(t,It);if(n.isInitialized()){const t=n.getImmediate();if((0,o.bD)(e,n.getOptions()))return t;throw Rt.create("already-initialized")}const i=n.initialize({options:e});return i}function Ee(t,e,n,r){t=(0,o.Ku)(t),ie(pe,le[t.app.options.appId],e,n,r).catch((t=>Ot.error(t)))}const Te="@firebase/analytics",Ce="0.10.18";function Se(){function t(t){try{const e=t.getProvider(It).getImmediate();return{logEvent:(t,n,r)=>Ee(e,t,n,r)}}catch(e){throw Rt.create("interop-component-reg-failed",{reason:e})}}(0,r.om)(new s.uA(It,((t,{options:e})=>{const n=t.getProvider("app").getImmediate(),r=t.getProvider("installations-internal").getImmediate();return _e(n,r,e)}),"PUBLIC")),(0,r.om)(new s.uA("analytics-internal",t,"PRIVATE")),(0,r.KO)(Te,Ce),(0,r.KO)(Te,Ce,"esm2020")}Se()},2360:function(t,e,n){"use strict";var r,i=n(8551),o=n(6801),s=n(8727),a=n(421),c=n(397),u=n(4055),l=n(6119),h=">",d="<",f="prototype",p="script",m=l("IE_PROTO"),g=function(){},y=function(t){return d+p+h+t+d+"/"+p+h},v=function(t){t.write(y("")),t.close();var e=t.parentWindow.Object;return t=null,e},_=function(){var t,e=u("iframe"),n="java"+p+":";return e.style.display="none",c.appendChild(e),e.src=String(n),t=e.contentWindow.document,t.open(),t.write(y("document.F=Object")),t.close(),t.F},w=function(){try{r=new ActiveXObject("htmlfile")}catch(e){}w="undefined"!=typeof document?document.domain&&r?v(r):_():v(r);var t=s.length;while(t--)delete w[f][s[t]];return w()};a[m]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(g[f]=i(t),n=new g,g[f]=null,n[m]=t):n=w(),void 0===e?n:o.f(n,e)}},2455:function(t,e,n){"use strict";n.d(e,{cY:function(){return I},FA:function(){return Q},g:function(){return Y},gz:function(){return ft},dM:function(){return K},vA:function(){return o},Hk:function(){return s},K3:function(){return u},u:function(){return f},KA:function(){return h},Uj:function(){return d},p9:function(){return St},gR:function(){return it},Fy:function(){return D},tD:function(){return pt},A4:function(){return p},bD:function(){return ct},dI:function(){return vt},hp:function(){return dt},T9:function(){return C},Tj:function(){return E},yU:function(){return T},XA:function(){return S},mS:function(){return y},Ku:function(){return It},ZQ:function(){return M},qc:function(){return rt},sr:function(){return U},zJ:function(){return k},c1:function(){return j},Im:function(){return st},lT:function(){return $},zW:function(){return W},jZ:function(){return L},$g:function(){return H},lV:function(){return V},nr:function(){return B},Ov:function(){return z},Cv:function(){return nt},$L:function(){return Z},kH:function(){return at},gE:function(){return x},Am:function(){return lt},I9:function(){return ht},yw:function(){return ot},OE:function(){return wt},kj:function(){return _t},As:function(){return tt},P1:function(){return R},eX:function(){return q}});n(4114),n(8111),n(7588),n(4979);const r=()=>{},i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(t,e){if(!t)throw s(e)},s=function(t){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},a=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296===(64512&i)&&r+1<t.length&&56320===(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},c=function(t){const e=[];let n=0,r=0;while(n<t.length){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const o=t[n++],s=t[n++],a=t[n++],c=((7&i)<<18|(63&o)<<12|(63&s)<<6|63&a)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(1023&c))}else{const o=t[n++],s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const e=t[i],o=i+1<t.length,s=o?t[i+1]:0,a=i+2<t.length,c=a?t[i+2]:0,u=e>>2,l=(3&e)<<4|s>>4;let h=(15&s)<<2|c>>6,d=63&c;a||(d=64,o||(h=64)),r.push(n[u],n[l],n[h],n[d])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(a(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):c(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const e=n[t.charAt(i++)],o=i<t.length,s=o?n[t.charAt(i)]:0;++i;const a=i<t.length,c=a?n[t.charAt(i)]:64;++i;const u=i<t.length,h=u?n[t.charAt(i)]:64;if(++i,null==e||null==s||null==c||null==h)throw new l;const d=e<<2|s>>4;if(r.push(d),64!==c){const t=s<<4&240|c>>2;if(r.push(t),64!==h){const t=c<<6&192|h;r.push(t)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class l extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const h=function(t){const e=a(t);return u.encodeByteArray(e,!0)},d=function(t){return h(t).replace(/\./g,"")},f=function(t){try{return u.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function p(t){return m(void 0,t)}function m(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)e.hasOwnProperty(n)&&g(n)&&(t[n]=m(t[n],e[n]));return t}function g(t){return"__proto__"!==t}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v=()=>y().__FIREBASE_DEFAULTS__,_=()=>{if("undefined"===typeof process)return;const t={NODE_ENV:"production",BASE_URL:"/"}.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0},w=()=>{if("undefined"===typeof document)return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const e=t&&f(t[1]);return e&&JSON.parse(e)},b=()=>{try{return r()||v()||_()||w()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},E=t=>b()?.emulatorHosts?.[t],T=t=>{const e=E(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),r]:[e.substring(0,n),r]},C=()=>b()?.config,S=t=>b()?.[`_${t}`]
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class I{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"===typeof t&&(this.promise.catch((()=>{})),1===t.length?t(e):t(e,n))}}}
/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k(t){try{const e=t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t;return e.endsWith(".cloudworkstations.dev")}catch{return!1}}async function x(t){const e=await fetch(t,{credentials:"include"});return e.ok}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t},a="";return[d(JSON.stringify(n)),d(JSON.stringify(s)),a].join(".")}const A={};function N(){const t={prod:[],emulator:[]};for(const e of Object.keys(A))A[e]?t.emulator.push(e):t.prod.push(e);return t}function O(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let P=!1;function R(t,e){if("undefined"===typeof window||"undefined"===typeof document||!k(window.location.host)||A[t]===e||A[t]||P)return;function n(t){return`__firebase__banner__${t}`}A[t]=e;const r="__firebase__banner",i=N(),o=i.prod.length>0;function s(){const t=document.getElementById(r);t&&t.remove()}function a(t){t.style.display="flex",t.style.background="#7faaf0",t.style.position="fixed",t.style.bottom="5px",t.style.left="5px",t.style.padding=".5em",t.style.borderRadius="5px",t.style.alignItems="center"}function c(t,e){t.setAttribute("width","24"),t.setAttribute("id",e),t.setAttribute("height","24"),t.setAttribute("viewBox","0 0 24 24"),t.setAttribute("fill","none"),t.style.marginLeft="-6px"}function u(){const t=document.createElement("span");return t.style.cursor="pointer",t.style.marginLeft="16px",t.style.fontSize="24px",t.innerHTML=" &times;",t.onclick=()=>{P=!0,s()},t}function l(t,e){t.setAttribute("id",e),t.innerText="Learn more",t.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",t.setAttribute("target","__blank"),t.style.paddingLeft="5px",t.style.textDecoration="underline"}function h(){const t=O(r),e=n("text"),i=document.getElementById(e)||document.createElement("span"),s=n("learnmore"),h=document.getElementById(s)||document.createElement("a"),d=n("preprendIcon"),f=document.getElementById(d)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(t.created){const e=t.element;a(e),l(h,s);const n=u();c(f,d),e.append(f,i,h,n),document.body.appendChild(e)}o?(i.innerText="Preview backend disconnected.",f.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(f.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',i.innerText="Preview backend running in this workspace."),i.setAttribute("id",e)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",h):h()}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M(){return"undefined"!==typeof navigator&&"string"===typeof navigator["userAgent"]?navigator["userAgent"]:""}function L(){return"undefined"!==typeof window&&!!(window["cordova"]||window["phonegap"]||window["PhoneGap"])&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(M())}function F(){const t=b()?.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function j(){return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent}function U(){const t="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof t&&void 0!==t.id}function V(){return"object"===typeof navigator&&"ReactNative"===navigator["product"]}function $(){const t=M();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function H(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN}function B(){return!F()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function z(){return!F()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function W(){try{return"object"===typeof indexedDB}catch(t){return!1}}function q(){return new Promise(((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(n){e(n)}}))}function K(){return!("undefined"===typeof navigator||!navigator.cookieEnabled)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G="FirebaseError";class Y extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name=G,Object.setPrototypeOf(this,Y.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Q.prototype.create)}}class Q{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},r=`${this.service}/${t}`,i=this.errors[t],o=i?X(i,n):"Error",s=`${this.serviceName}: ${o} (${r}).`,a=new Y(r,s,n);return a}}function X(t,e){return t.replace(J,((t,n)=>{const r=e[n];return null!=r?String(r):`<${n}?>`}))}const J=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(t){return JSON.parse(t)}function tt(t){return JSON.stringify(t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const et=function(t){let e={},n={},r={},i="";try{const o=t.split(".");e=Z(f(o[0])||""),n=Z(f(o[1])||""),i=o[2],r=n["d"]||{},delete n["d"]}catch(o){}return{header:e,claims:n,data:r,signature:i}},nt=function(t){const e=et(t),n=e.claims;return!!n&&"object"===typeof n&&n.hasOwnProperty("iat")},rt=function(t){const e=et(t).claims;return"object"===typeof e&&!0===e["admin"]};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function it(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ot(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function st(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function at(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function ct(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const n=t[i],o=e[i];if(ut(n)&&ut(o)){if(!ct(n,o))return!1}else if(n!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function ut(t){return null!==t&&"object"===typeof t}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function lt(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach((t=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(t))})):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ht(t){const e={},n=t.replace(/^\?/,"").split("&");return n.forEach((t=>{if(t){const[n,r]=t.split("=");e[decodeURIComponent(n)]=decodeURIComponent(r)}})),e}function dt(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,e){e||(e=0);const n=this.W_;if("string"===typeof t)for(let l=0;l<16;l++)n[l]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(let l=0;l<16;l++)n[l]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(let l=16;l<80;l++){const t=n[l-3]^n[l-8]^n[l-14]^n[l-16];n[l]=4294967295&(t<<1|t>>>31)}let r,i,o=this.chain_[0],s=this.chain_[1],a=this.chain_[2],c=this.chain_[3],u=this.chain_[4];for(let l=0;l<80;l++){l<40?l<20?(r=c^s&(a^c),i=1518500249):(r=s^a^c,i=1859775393):l<60?(r=s&a|c&(s|a),i=2400959708):(r=s^a^c,i=3395469782);const t=(o<<5|o>>>27)+r+u+i+n[l]&4294967295;u=c,c=a,a=4294967295&(s<<30|s>>>2),s=o,o=t}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(t,e){if(null==t)return;void 0===e&&(e=t.length);const n=e-this.blockSize;let r=0;const i=this.buf_;let o=this.inbuf_;while(r<e){if(0===o)while(r<=n)this.compress_(t,r),r+=this.blockSize;if("string"===typeof t){while(r<e)if(i[o]=t.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}else while(r<e)if(i[o]=t[r],++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}digest(){const t=[];let e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&e,e/=256;this.compress_(this.buf_);let n=0;for(let r=0;r<5;r++)for(let e=24;e>=0;e-=8)t[n]=this.chain_[r]>>e&255,++n;return t}}function pt(t,e){const n=new mt(t,e);return n.subscribe.bind(n)}class mt{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((()=>{t(this)})).catch((t=>{this.error(t)}))}next(t){this.forEachObserver((e=>{e.next(t)}))}error(t){this.forEachObserver((e=>{e.error(t)})),this.close(t)}complete(){this.forEachObserver((t=>{t.complete()})),this.close()}subscribe(t,e,n){let r;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");r=gt(t,["next","error","complete"])?t:{next:t,error:e,complete:n},void 0===r.next&&(r.next=yt),void 0===r.error&&(r.error=yt),void 0===r.complete&&(r.complete=yt);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(t){}})),this.observers.push(r),i}unsubscribeOne(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[t])try{e(this.observers[t])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(t){this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function gt(t,e){if("object"!==typeof t||null===t)return!1;for(const n of e)if(n in t&&"function"===typeof t[n])return!0;return!1}function yt(){}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(t,e){return`${t} failed: ${e} argument `}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const _t=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const e=i-55296;r++,o(r<t.length,"Surrogate pair missing trail surrogate.");const n=t.charCodeAt(r)-56320;i=65536+(e<<10)+n}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},wt=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},bt=1e3,Et=2,Tt=144e5,Ct=.5;function St(t,e=bt,n=Et){const r=e*Math.pow(n,t),i=Math.round(Ct*r*(Math.random()-.5)*2);return Math.min(Tt,r+i)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function It(t){return t&&t._delegate?t._delegate:t}},2475:function(t,e,n){"use strict";var r=n(6518),i=n(8527),o=n(4916),s=!o("isSupersetOf",(function(t){return!t}));r({target:"Set",proto:!0,real:!0,forced:s},{isSupersetOf:i})},2489:function(t,e,n){"use strict";var r=n(6518),i=n(9565),o=n(9306),s=n(8551),a=n(1767),c=n(9462),u=n(6319),l=n(6395),h=n(9539),d=n(4549),f=!l&&d("filter",TypeError),p=c((function(){var t,e,n,r=this.iterator,o=this.predicate,a=this.next;while(1){if(t=s(i(a,r)),e=this.done=!!t.done,e)return;if(n=t.value,u(r,o,[n,this.counter++],!0))return n}}));r({target:"Iterator",proto:!0,real:!0,forced:l||f},{filter:function(t){s(this);try{o(t)}catch(e){h(this,"throw",e)}return f?i(f,this,t):new p(a(this),{predicate:t})}})},2529:function(t){"use strict";t.exports=function(t,e){return{value:t,done:e}}},2603:function(t,e,n){"use strict";var r=n(655);t.exports=function(t,e){return void 0===t?arguments.length<2?"":e:r(t)}},2652:function(t,e,n){"use strict";var r=n(6080),i=n(9565),o=n(8551),s=n(6823),a=n(4209),c=n(6198),u=n(1625),l=n(81),h=n(851),d=n(9539),f=TypeError,p=function(t,e){this.stopped=t,this.result=e},m=p.prototype;t.exports=function(t,e,n){var g,y,v,_,w,b,E,T=n&&n.that,C=!(!n||!n.AS_ENTRIES),S=!(!n||!n.IS_RECORD),I=!(!n||!n.IS_ITERATOR),k=!(!n||!n.INTERRUPTED),x=r(e,T),D=function(t){return g&&d(g,"normal",t),new p(!0,t)},A=function(t){return C?(o(t),k?x(t[0],t[1],D):x(t[0],t[1])):k?x(t,D):x(t)};if(S)g=t.iterator;else if(I)g=t;else{if(y=h(t),!y)throw new f(s(t)+" is not iterable");if(a(y)){for(v=0,_=c(t);_>v;v++)if(w=A(t[v]),w&&u(m,w))return w;return new p(!1)}g=l(t,y)}b=S?t.next:g.next;while(!(E=i(b,g)).done){try{w=A(E.value)}catch(N){d(g,"throw",N)}if("object"==typeof w&&w&&u(m,w))return w}return new p(!1)}},2777:function(t,e,n){"use strict";var r=n(9565),i=n(34),o=n(757),s=n(5966),a=n(4270),c=n(8227),u=TypeError,l=c("toPrimitive");t.exports=function(t,e){if(!i(t)||o(t))return t;var n,c=s(t,l);if(c){if(void 0===e&&(e="default"),n=r(c,t,e),!i(n)||o(n))return n;throw new u("Can't convert object to primitive value")}return void 0===e&&(e="number"),a(t,e)}},2787:function(t,e,n){"use strict";var r=n(9297),i=n(4901),o=n(8981),s=n(6119),a=n(2211),c=s("IE_PROTO"),u=Object,l=u.prototype;t.exports=a?u.getPrototypeOf:function(t){var e=o(t);if(r(e,c))return e[c];var n=e.constructor;return i(n)&&e instanceof n?n.prototype:e instanceof u?l:null}},2796:function(t,e,n){"use strict";var r=n(9039),i=n(4901),o=/#|\.prototype\./,s=function(t,e){var n=c[a(t)];return n===l||n!==u&&(i(e)?r(e):!!e)},a=s.normalize=function(t){return String(t).replace(o,".").toLowerCase()},c=s.data={},u=s.NATIVE="N",l=s.POLYFILL="P";t.exports=s},2832:function(t,e,n){"use strict";n.d(e,{Ci:function(){return _c},Dc:function(){return yt},gS:function(){return ru},rJ:function(){return sc},kd:function(){return nu},H9:function(){return ac},x7:function(){return Jc},GG:function(){return tu},aU:function(){return fc},aQ:function(){return iu},mZ:function(){return eu}});n(4114),n(8111),n(1148),n(2489),n(116),n(7588),n(1701),n(8237),n(3579),n(1806),n(7642),n(8004),n(3853),n(5876),n(2475),n(5024),n(1698),n(4979);var r,i,o=n(6086),s=n(798),a=n(6189),c=n(2455),u="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},l={};(function(){var t;
/** @license
         Copyright The Closure Library Authors.
         SPDX-License-Identifier: Apache-2.0
         */function e(t,e){function n(){}n.prototype=e.prototype,t.D=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.C=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function n(){this.blockSize=-1}function o(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function s(t,e,n){n||(n=0);var r=Array(16);if("string"===typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var o=t.g[3],s=e+(o^n&(i^o))+r[0]+3614090360&4294967295;e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[1]+3905402710&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[2]+606105819&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[3]+3250441966&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(o^n&(i^o))+r[4]+4118548399&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[5]+1200080426&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[6]+2821735955&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[7]+4249261313&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(o^n&(i^o))+r[8]+1770035416&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[9]+2336552879&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[10]+4294925233&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[11]+2304563134&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(o^n&(i^o))+r[12]+1804603682&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[13]+4254626195&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[14]+2792965006&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[15]+1236535329&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(i^o&(n^i))+r[1]+4129170786&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[6]+3225465664&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[11]+643717713&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[0]+3921069994&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(n^i))+r[5]+3593408605&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[10]+38016083&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[15]+3634488961&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[4]+3889429448&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(n^i))+r[9]+568446438&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[14]+3275163606&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[3]+4107603335&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[8]+1163531501&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(n^i))+r[13]+2850285829&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[2]+4243563512&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[7]+1735328473&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[12]+2368359562&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(n^i^o)+r[5]+4294588738&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[8]+2272392833&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[11]+1839030562&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[14]+4259657740&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(n^i^o)+r[1]+2763975236&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[4]+1272893353&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[7]+4139469664&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[10]+3200236656&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(n^i^o)+r[13]+681279174&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[0]+3936430074&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[3]+3572445317&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[6]+76029189&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(n^i^o)+r[9]+3654602809&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[12]+3873151461&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[15]+530742520&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[2]+3299628645&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(i^(n|~o))+r[0]+4096336452&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[7]+1126891415&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[14]+2878612391&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[5]+4237533241&4294967295,n=i+(s<<21&4294967295|s>>>11),s=e+(i^(n|~o))+r[12]+1700485571&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[3]+2399980690&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[10]+4293915773&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[1]+2240044497&4294967295,n=i+(s<<21&4294967295|s>>>11),s=e+(i^(n|~o))+r[8]+1873313359&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[15]+4264355552&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[6]+2734768916&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[13]+1309151649&4294967295,n=i+(s<<21&4294967295|s>>>11),s=e+(i^(n|~o))+r[4]+4149444226&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[11]+3174756917&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[2]+718787259&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+o&4294967295}function a(t,e){var n=u;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}function c(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var o=0|t[i];r&&o==e||(n[i]=o,r=!1)}this.g=n}e(o,n),o.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},o.prototype.u=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=this.B,i=this.h,o=0;o<e;){if(0==i)for(;o<=n;)s(this,t,o),o+=this.blockSize;if("string"===typeof t){for(;o<e;)if(r[i++]=t.charCodeAt(o++),i==this.blockSize){s(this,r),i=0;break}}else for(;o<e;)if(r[i++]=t[o++],i==this.blockSize){s(this,r),i=0;break}}this.h=i,this.o+=e},o.prototype.v=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.o;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.u(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};var u={};function h(t){return-128<=t&&128>t?a(t,(function(t){return new c([0|t],0>t?-1:0)})):new c([0|t],0>t?-1:0)}function d(t){if(isNaN(t)||!isFinite(t))return p;if(0>t)return _(d(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=4294967296;return new c(e,0)}function f(t,e){if(0==t.length)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if("-"==t.charAt(0))return _(f(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=d(Math.pow(e,8)),r=p,i=0;i<t.length;i+=8){var o=Math.min(8,t.length-i),s=parseInt(t.substring(i,i+o),e);8>o?(o=d(Math.pow(e,o)),r=r.j(o).add(d(s))):(r=r.j(n),r=r.add(d(s)))}return r}var p=h(0),m=h(1),g=h(16777216);function y(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function v(t){return-1==t.h}function _(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new c(n,~t.h).add(m)}function w(t,e){return t.add(_(e))}function b(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function E(t,e){this.g=t,this.h=e}function T(t,e){if(y(e))throw Error("division by zero");if(y(t))return new E(p,p);if(v(t))return e=T(_(t),e),new E(_(e.g),_(e.h));if(v(e))return e=T(t,_(e)),new E(_(e.g),e.h);if(30<t.g.length){if(v(t)||v(e))throw Error("slowDivide_ only works with positive integers.");for(var n=m,r=e;0>=r.l(t);)n=C(n),r=C(r);var i=S(n,1),o=S(r,1);for(r=S(r,2),n=S(n,2);!y(r);){var s=o.add(r);0>=s.l(t)&&(i=i.add(n),o=s),r=S(r,1),n=S(n,1)}return e=w(t,i.j(e)),new E(i,e)}for(i=p;0<=t.l(e);){for(n=Math.max(1,Math.floor(t.m()/e.m())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),o=d(n),s=o.j(e);v(s)||0<s.l(t);)n-=r,o=d(n),s=o.j(e);y(o)&&(o=m),i=i.add(o),t=w(t,s)}return new E(i,t)}function C(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.i(r)<<1|t.i(r-1)>>>31;return new c(n,t.h)}function S(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],o=0;o<r;o++)i[o]=0<e?t.i(o+n)>>>e|t.i(o+n+1)<<32-e:t.i(o+n);return new c(i,t.h)}t=c.prototype,t.m=function(){if(v(this))return-_(this).m();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.i(n);t+=(0<=r?r:4294967296+r)*e,e*=4294967296}return t},t.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(y(this))return"0";if(v(this))return"-"+_(this).toString(t);for(var e=d(Math.pow(t,6)),n=this,r="";;){var i=T(n,e).g;n=w(n,i.j(e));var o=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,y(n))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},t.i=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},t.l=function(t){return t=w(this,t),v(t)?-1:y(t)?0:1},t.abs=function(){return v(this)?_(this):this},t.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var o=r+(65535&this.i(i))+(65535&t.i(i)),s=(o>>>16)+(this.i(i)>>>16)+(t.i(i)>>>16);r=s>>>16,o&=65535,s&=65535,n[i]=s<<16|o}return new c(n,-2147483648&n[n.length-1]?-1:0)},t.j=function(t){if(y(this)||y(t))return p;if(v(this))return v(t)?_(this).j(_(t)):_(_(this).j(t));if(v(t))return _(this.j(_(t)));if(0>this.l(g)&&0>t.l(g))return d(this.m()*t.m());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var o=this.i(r)>>>16,s=65535&this.i(r),a=t.i(i)>>>16,u=65535&t.i(i);n[2*r+2*i]+=s*u,b(n,2*r+2*i),n[2*r+2*i+1]+=o*u,b(n,2*r+2*i+1),n[2*r+2*i+1]+=s*a,b(n,2*r+2*i+1),n[2*r+2*i+2]+=o*a,b(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new c(n,0)},t.A=function(t){return T(this,t).h},t.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.i(r)&t.i(r);return new c(n,this.h&t.h)},t.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.i(r)|t.i(r);return new c(n,this.h|t.h)},t.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.i(r)^t.i(r);return new c(n,this.h^t.h)},o.prototype.digest=o.prototype.v,o.prototype.reset=o.prototype.s,o.prototype.update=o.prototype.u,i=l.Md5=o,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=d,c.fromString=f,r=l.Integer=c}).apply("undefined"!==typeof u?u:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var h,d,f,p,m,g,y,v,_="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},w={};(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){return t==Array.prototype||t==Object.prototype||(t[e]=n.value),t};function n(t){t=["object"==typeof globalThis&&globalThis,t,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof _&&_];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}var r=n(this);function i(t,n){if(n)t:{var i=r;t=t.split(".");for(var o=0;o<t.length-1;o++){var s=t[o];if(!(s in i))break t;i=i[s]}t=t[t.length-1],o=i[t],n=n(o),n!=o&&null!=n&&e(i,t,{configurable:!0,writable:!0,value:n})}}function o(t,e){t instanceof String&&(t+="");var n=0,r=!1,i={next:function(){if(!r&&n<t.length){var i=n++;return{value:e(i,t[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}i("Array.prototype.values",(function(t){return t||function(){return o(this,(function(t,e){return e}))}}));
/** @license
      Copyright The Closure Library Authors.
      SPDX-License-Identifier: Apache-2.0
      */
var s=s||{},a=this||self;function c(t){var e=typeof t;return e="object"!=e?e:t?Array.isArray(t)?"array":e:"null","array"==e||"object"==e&&"number"==typeof t.length}function u(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function l(t,e,n){return t.call.apply(t.bind,arguments)}function b(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function E(t,e,n){return E=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?l:b,E.apply(null,arguments)}function T(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function C(t,e){function n(){}n.prototype=e.prototype,t.aa=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Qb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function S(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function I(t,e){for(let n=1;n<arguments.length;n++){const e=arguments[n];if(c(e)){const n=t.length||0,r=e.length||0;t.length=n+r;for(let i=0;i<r;i++)t[n+i]=e[i]}else t.push(e)}}class k{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}function x(t){return/^[\s\xa0]*$/.test(t)}function D(){var t=a.navigator;return t&&(t=t.userAgent)?t:""}function A(t){return A[" "](t),t}A[" "]=function(){};var N=-1!=D().indexOf("Gecko")&&!(-1!=D().toLowerCase().indexOf("webkit")&&-1==D().indexOf("Edge"))&&!(-1!=D().indexOf("Trident")||-1!=D().indexOf("MSIE"))&&-1==D().indexOf("Edge");function O(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function P(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function R(t){const e={};for(const n in t)e[n]=t[n];return e}const M="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(t,e){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(let e=0;e<M.length;e++)n=M[e],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function F(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function j(t){a.setTimeout((()=>{throw t}),0)}function U(){var t=W;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class V{constructor(){this.h=this.g=null}add(t,e){const n=$.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}}var $=new k((()=>new H),(t=>t.reset()));class H{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}let B,z=!1,W=new V,q=()=>{const t=a.Promise.resolve(void 0);B=()=>{t.then(K)}};var K=()=>{for(var t;t=U();){try{t.h.call(t.g)}catch(n){j(n)}var e=$;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}z=!1};function G(){this.s=this.s,this.C=this.C}function Y(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}G.prototype.s=!1,G.prototype.ma=function(){this.s||(this.s=!0,this.N())},G.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},Y.prototype.h=function(){this.defaultPrevented=!0};var Q=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const t=()=>{};a.addEventListener("test",t,e),a.removeEventListener("test",t,e)}catch(n){}return t}();function X(t,e){if(Y.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(N){t:{try{A(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"===typeof t.pointerType?t.pointerType:J[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&X.aa.h.call(this)}}C(X,Y);var J={2:"touch",3:"pen",4:"mouse"};X.prototype.h=function(){X.aa.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Z="closure_listenable_"+(1e6*Math.random()|0),tt=0;function et(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ha=i,this.key=++tt,this.da=this.fa=!1}function nt(t){t.da=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function rt(t){this.src=t,this.g={},this.h=0}function it(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],o=Array.prototype.indexOf.call(i,e,void 0);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(nt(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function ot(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.da&&o.listener==e&&o.capture==!!n&&o.ha==r)return i}return-1}rt.prototype.add=function(t,e,n,r,i){var o=t.toString();t=this.g[o],t||(t=this.g[o]=[],this.h++);var s=ot(t,e,r,i);return-1<s?(e=t[s],n||(e.fa=!1)):(e=new et(e,this.src,o,!!r,i),e.fa=n,t.push(e)),e};var st="closure_lm_"+(1e6*Math.random()|0),at={};function ct(t,e,n,r,i){if(r&&r.once)return ht(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)ct(t,e[o],n,r,i);return null}return n=vt(n),t&&t[Z]?t.K(e,n,u(r)?!!r.capture:!!r,i):ut(t,e,n,!1,r,i)}function ut(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=u(i)?!!i.capture:!!i,a=gt(t);if(a||(t[st]=a=new rt(t)),n=a.add(e,n,r,s,o),n.proxy)return n;if(r=lt(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Q||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(pt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function lt(){function t(n){return e.call(t.src,t.listener,n)}const e=mt;return t}function ht(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)ht(t,e[o],n,r,i);return null}return n=vt(n),t&&t[Z]?t.L(e,n,u(r)?!!r.capture:!!r,i):ut(t,e,n,!0,r,i)}function dt(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)dt(t,e[o],n,r,i);else r=u(r)?!!r.capture:!!r,n=vt(n),t&&t[Z]?(t=t.i,e=String(e).toString(),e in t.g&&(o=t.g[e],n=ot(o,n,r,i),-1<n&&(nt(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.g[e],t.h--)))):t&&(t=gt(t))&&(e=t.g[e.toString()],t=-1,e&&(t=ot(e,n,r,i)),(n=-1<t?e[t]:null)&&ft(n))}function ft(t){if("number"!==typeof t&&t&&!t.da){var e=t.src;if(e&&e[Z])it(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(pt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=gt(e))?(it(n,t),0==n.h&&(n.src=null,e[st]=null)):nt(t)}}}function pt(t){return t in at?at[t]:at[t]="on"+t}function mt(t,e){if(t.da)t=!0;else{e=new X(e,this);var n=t.listener,r=t.ha||t.src;t.fa&&ft(t),t=n.call(r,e)}return t}function gt(t){return t=t[st],t instanceof rt?t:null}var yt="__closure_events_fn_"+(1e9*Math.random()>>>0);function vt(t){return"function"===typeof t?t:(t[yt]||(t[yt]=function(e){return t.handleEvent(e)}),t[yt])}function _t(){G.call(this),this.i=new rt(this),this.M=this,this.F=null}function wt(t,e){var n,r=t.F;if(r)for(n=[];r;r=r.F)n.push(r);if(t=t.M,r=e.type||e,"string"===typeof e)e=new Y(e,t);else if(e instanceof Y)e.target=e.target||t;else{var i=e;e=new Y(r,t),L(e,i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=bt(s,r,!0,e)&&i}if(s=e.g=t,i=bt(s,r,!0,e)&&i,i=bt(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)s=e.g=n[o],i=bt(s,r,!1,e)&&i}function bt(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.da&&s.capture==n){var a=s.listener,c=s.ha||s.src;s.fa&&it(t.i,s),i=!1!==a.call(c,r)&&i}}return i&&!r.defaultPrevented}function Et(t,e,n){if("function"===typeof t)n&&(t=E(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=E(t.handleEvent,t)}return 2147483647<Number(e)?-1:a.setTimeout(t,e||0)}function Tt(t){t.g=Et((()=>{t.g=null,t.i&&(t.i=!1,Tt(t))}),t.l);const e=t.h;t.h=null,t.m.apply(null,e)}C(_t,G),_t.prototype[Z]=!0,_t.prototype.removeEventListener=function(t,e,n,r){dt(this,t,e,n,r)},_t.prototype.N=function(){if(_t.aa.N.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)nt(n[r]);delete e.g[t],e.h--}}this.F=null},_t.prototype.K=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},_t.prototype.L=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};class Ct extends G{constructor(t,e){super(),this.m=t,this.l=e,this.h=null,this.i=!1,this.g=null}j(t){this.h=arguments,this.g?this.i=!0:Tt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function St(t){G.call(this),this.h=t,this.g={}}C(St,G);var It=[];function kt(t){O(t.g,(function(t,e){this.g.hasOwnProperty(e)&&ft(t)}),t),t.g={}}St.prototype.N=function(){St.aa.N.call(this),kt(this)},St.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xt=a.JSON.stringify,Dt=a.JSON.parse,At=class{stringify(t){return a.JSON.stringify(t,void 0)}parse(t){return a.JSON.parse(t,void 0)}};function Nt(){}function Ot(t){return t.h||(t.h=t.i())}function Pt(){}Nt.prototype.h=null;var Rt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Mt(){Y.call(this,"d")}function Lt(){Y.call(this,"c")}C(Mt,Y),C(Lt,Y);var Ft={},jt=null;function Ut(){return jt=jt||new _t}function Vt(t){Y.call(this,Ft.La,t)}function $t(t){const e=Ut();wt(e,new Vt(e))}function Ht(t,e){Y.call(this,Ft.STAT_EVENT,t),this.stat=e}function Bt(t){const e=Ut();wt(e,new Ht(e,t))}function zt(t,e){Y.call(this,Ft.Ma,t),this.size=e}function Wt(t,e){if("function"!==typeof t)throw Error("Fn must not be null and must be a function");return a.setTimeout((function(){t()}),e)}function qt(){this.g=!0}function Kt(t,e,n,r,i,o){t.info((function(){if(t.g)if(o)for(var s="",a=o.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var l=u[0];u=u[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+u+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}function Gt(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}function Yt(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+Xt(t,n)+(r?" "+r:"")}))}function Qt(t,e){t.info((function(){return"TIMEOUT: "+e}))}function Xt(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return xt(n)}catch(a){return e}}Ft.La="serverreachability",C(Vt,Y),Ft.STAT_EVENT="statevent",C(Ht,Y),Ft.Ma="timingevent",C(zt,Y),qt.prototype.xa=function(){this.g=!1},qt.prototype.info=function(){};var Jt,Zt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},te={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function ee(){}function ne(t,e,n,r){this.j=t,this.i=e,this.l=n,this.R=r||1,this.U=new St(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new re}function re(){this.i=null,this.g="",this.h=!1}C(ee,Nt),ee.prototype.g=function(){return new XMLHttpRequest},ee.prototype.i=function(){return{}},Jt=new ee;var ie={},oe={};function se(t,e,n){t.L=1,t.v=Me(Ae(e)),t.m=n,t.P=!0,ae(t,null)}function ae(t,e){t.F=Date.now(),le(t),t.A=Ae(t.v);var n=t.A,r=t.R;Array.isArray(r)||(r=[String(r)]),Ge(n.i,"t",r),t.C=0,n=t.j.J,t.h=new re,t.g=$n(t.j,n?e:null,!t.m),0<t.O&&(t.M=new Ct(E(t.Y,t,t.g),t.O)),e=t.U,n=t.g,r=t.ca;var i="readystatechange";Array.isArray(i)||(i&&(It[0]=i.toString()),i=It);for(var o=0;o<i.length;o++){var s=ct(n,i[o],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}e=t.H?R(t.H):{},t.m?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.m,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),$t(),Kt(t.i,t.u,t.A,t.l,t.R,t.m)}function ce(t){return!!t.g&&("GET"==t.u&&2!=t.L&&t.j.Ca)}function ue(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?oe:(n=Number(e.substring(n,r)),isNaN(n)?ie:(r+=1,r+n>e.length?oe:(e=e.slice(r,r+n),t.C=r+n,e)))}function le(t){t.S=Date.now()+t.I,he(t,t.I)}function he(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=Wt(E(t.ba,t),e)}function de(t){t.B&&(a.clearTimeout(t.B),t.B=null)}function fe(t){0==t.j.G||t.J||Ln(t.j,t)}function pe(t){de(t);var e=t.M;e&&"function"==typeof e.ma&&e.ma(),t.M=null,kt(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.ma())}function me(t,e){try{var n=t.j;if(0!=n.G&&(n.g==t||we(n.h,t)))if(!t.K&&we(n.h,t)&&3==n.G){try{var r=n.Da.g.parse(e)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;Mn(n),Cn(n)}On(n),Bt(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Wt(E(n.Za,n),6e3));if(1>=_e(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else jn(n,11)}else if((t.K||n.g==t)&&Mn(n),!x(e))for(i=n.Da.g.parse(e),e=0;e<i.length;e++){let u=i[e];if(n.T=u[0],u=u[1],2==n.G)if("c"==u[0]){n.K=u[1],n.ia=u[2];const e=u[3];null!=e&&(n.la=e,n.j.info("VER="+n.la));const i=u[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const l=u[5];null!=l&&"number"===typeof l&&0<l&&(r=1.5*l,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=t.g;if(h){const t=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var o=r.h;o.g||-1==t.indexOf("spdy")&&-1==t.indexOf("quic")&&-1==t.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(be(o,o.h),o.h=null))}if(r.D){const t=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(r.ya=t,Re(r.I,r.D,t))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-t.F,n.j.info("Handshake RTT: "+n.R+"ms")),r=n;var s=t;if(r.qa=Vn(r,r.J?r.ia:null,r.W),s.K){Ee(r.h,s);var a=s,c=r.L;c&&(a.I=c),a.B&&(de(a),le(a)),r.g=s}else Nn(r);0<n.i.length&&In(n)}else"stop"!=u[0]&&"close"!=u[0]||jn(n,7);else 3==n.G&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?jn(n,7):Tn(n):"noop"!=u[0]&&n.l&&n.l.ta(u),n.v=0)}$t(4)}catch(u){}}ne.prototype.ca=function(t){t=t.target;const e=this.M;e&&3==vn(t)?e.j():this.Y(t)},ne.prototype.Y=function(t){try{if(t==this.g)t:{const d=vn(this.g);var e=this.g.Ba();const f=this.g.Z();if(!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||_n(this.g)))){this.J||4!=d||7==e||$t(8==e||0>=f?3:2),de(this);var n=this.g.Z();this.X=n;e:if(ce(this)){var r=_n(this.g);t="";var i=r.length,o=4==vn(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){pe(this),fe(this);var s="";break e}this.h.i=new a.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:!(o&&e==i-1)});r.length=0,this.h.g+=t,this.C=0,s=this.h.g}else s=this.g.oa();if(this.o=200==n,Gt(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){e:{if(this.g){var c,u=this.g;if((c=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(c)){var l=c;break e}}l=null}if(!(n=l)){this.o=!1,this.s=3,Bt(12),pe(this),fe(this);break t}Yt(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,me(this,n)}if(this.P){let t;for(n=!0;!this.J&&this.C<s.length;){if(t=ue(this,s),t==oe){4==d&&(this.s=4,Bt(14),n=!1),Yt(this.i,this.l,null,"[Incomplete Response]");break}if(t==ie){this.s=4,Bt(15),Yt(this.i,this.l,s,"[Invalid Chunk]"),n=!1;break}Yt(this.i,this.l,t,null),me(this,t)}if(ce(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=s.length||this.h.h||(this.s=1,Bt(16),n=!1),this.o=this.o&&n,n){if(0<s.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+s.length),Pn(h),h.M=!0,Bt(11))}}else Yt(this.i,this.l,s,"[Invalid Chunked Response]"),pe(this),fe(this)}else Yt(this.i,this.l,s,null),me(this,s);4==d&&pe(this),this.o&&!this.J&&(4==d?Ln(this.j,this):(this.o=!1,le(this)))}else wn(this.g),400==n&&0<s.indexOf("Unknown SID")?(this.s=3,Bt(12)):(this.s=0,Bt(13)),pe(this),fe(this)}}}catch(d){}},ne.prototype.cancel=function(){this.J=!0,pe(this)},ne.prototype.ba=function(){this.B=null;const t=Date.now();0<=t-this.S?(Qt(this.i,this.A),2!=this.L&&($t(),Bt(17)),pe(this),this.s=2,fe(this)):he(this,this.S-t)};var ge=class{constructor(t,e){this.g=t,this.map=e}};function ye(t){this.l=t||10,a.PerformanceNavigationTiming?(t=a.performance.getEntriesByType("navigation"),t=0<t.length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol)):t=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ve(t){return!!t.h||!!t.g&&t.g.size>=t.j}function _e(t){return t.h?1:t.g?t.g.size:0}function we(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function be(t,e){t.g?t.g.add(e):t.h=e}function Ee(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function Te(t){if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return S(t.i)}function Ce(t){if(t.V&&"function"==typeof t.V)return t.V();if("undefined"!==typeof Map&&t instanceof Map||"undefined"!==typeof Set&&t instanceof Set)return Array.from(t.values());if("string"===typeof t)return t.split("");if(c(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function Se(t){if(t.na&&"function"==typeof t.na)return t.na();if(!t.V||"function"!=typeof t.V){if("undefined"!==typeof Map&&t instanceof Map)return Array.from(t.keys());if(!("undefined"!==typeof Set&&t instanceof Set)){if(c(t)||"string"===typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function Ie(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(c(t)||"string"===typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=Se(t),r=Ce(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}ye.prototype.cancel=function(){if(this.i=Te(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var ke=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function xe(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function De(t){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,t instanceof De){this.h=t.h,Ne(this,t.j),this.o=t.o,this.g=t.g,Oe(this,t.s),this.l=t.l;var e=t.i,n=new ze;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Pe(this,n),this.m=t.m}else t&&(e=String(t).match(ke))?(this.h=!1,Ne(this,e[1]||"",!0),this.o=Le(e[2]||""),this.g=Le(e[3]||"",!0),Oe(this,e[4]),this.l=Le(e[5]||"",!0),Pe(this,e[6]||"",!0),this.m=Le(e[7]||"")):(this.h=!1,this.i=new ze(null,this.h))}function Ae(t){return new De(t)}function Ne(t,e,n){t.j=n?Le(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Oe(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.s=e}else t.s=null}function Pe(t,e,n){e instanceof ze?(t.i=e,Qe(t.i,t.h)):(n||(e=Fe(e,He)),t.i=new ze(e,t.h))}function Re(t,e,n){t.i.set(e,n)}function Me(t){return Re(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Le(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Fe(t,e,n){return"string"===typeof t?(t=encodeURI(t).replace(e,je),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function je(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(15&t).toString(16)}De.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Fe(e,Ue,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.o)&&t.push(Fe(e,Ue,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.s,null!=n&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(Fe(n,"/"==n.charAt(0)?$e:Ve,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.m)&&t.push("#",Fe(n,Be)),t.join("")};var Ue=/[#\/\?@]/g,Ve=/[#\?:]/g,$e=/[#\?]/g,He=/[#\?@]/g,Be=/#/g;function ze(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function We(t){t.g||(t.g=new Map,t.h=0,t.i&&xe(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function qe(t,e){We(t),e=Ye(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function Ke(t,e){return We(t),e=Ye(t,e),t.g.has(e)}function Ge(t,e,n){qe(t,e),0<n.length&&(t.i=null,t.g.set(Ye(t,e),S(n)),t.h+=n.length)}function Ye(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function Qe(t,e){e&&!t.j&&(We(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(qe(this,e),Ge(this,n,t))}),t)),t.j=e}function Xe(t,e){const n=new qt;if(a.Image){const r=new Image;r.onload=T(Ze,n,"TestLoadImage: loaded",!0,e,r),r.onerror=T(Ze,n,"TestLoadImage: error",!1,e,r),r.onabort=T(Ze,n,"TestLoadImage: abort",!1,e,r),r.ontimeout=T(Ze,n,"TestLoadImage: timeout",!1,e,r),a.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}function Je(t,e){const n=new qt,r=new AbortController,i=setTimeout((()=>{r.abort(),Ze(n,"TestPingServer: timeout",!1,e)}),1e4);fetch(t,{signal:r.signal}).then((t=>{clearTimeout(i),t.ok?Ze(n,"TestPingServer: ok",!0,e):Ze(n,"TestPingServer: server error",!1,e)})).catch((()=>{clearTimeout(i),Ze(n,"TestPingServer: error",!1,e)}))}function Ze(t,e,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(o){}}function tn(){this.g=new At}function en(t,e,n){const r=n||"";try{Ie(t,(function(t,n){let i=t;u(t)&&(i=xt(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function nn(t){this.l=t.Ub||null,this.j=t.eb||!1}function rn(t,e){_t.call(this),this.D=t,this.o=e,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function on(t){t.j.read().then(t.Pa.bind(t)).catch(t.ga.bind(t))}function sn(t){t.readyState=4,t.l=null,t.j=null,t.v=null,an(t)}function an(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function cn(t){let e="";return O(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}function un(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=cn(n),"string"===typeof t?null!=n&&encodeURIComponent(String(n)):Re(t,e,n))}function ln(t){_t.call(this),this.headers=new Map,this.o=t||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}t=ze.prototype,t.add=function(t,e){We(this),this.i=null,t=Ye(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},t.forEach=function(t,e){We(this),this.g.forEach((function(n,r){n.forEach((function(n){t.call(e,n,r,this)}),this)}),this)},t.na=function(){We(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let t=0;t<i.length;t++)n.push(e[r])}return n},t.V=function(t){We(this);let e=[];if("string"===typeof t)Ke(this,t)&&(e=e.concat(this.g.get(Ye(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},t.set=function(t,e){return We(this),this.i=null,t=Ye(this,t),Ke(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},t.get=function(t,e){return t?(t=this.V(t),0<t.length?String(t[0]):e):e},t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const o=encodeURIComponent(String(r)),s=this.V(r);for(r=0;r<s.length;r++){var i=o;""!==s[r]&&(i+="="+encodeURIComponent(String(s[r]))),t.push(i)}}return this.i=t.join("&")},C(nn,Nt),nn.prototype.g=function(){return new rn(this.l,this.j)},nn.prototype.i=function(t){return function(){return t}}({}),C(rn,_t),t=rn.prototype,t.open=function(t,e){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=t,this.A=e,this.readyState=1,an(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.u,method:this.B,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||a).fetch(new Request(this.A,e)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,sn(this)),this.readyState=0},t.Sa=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,an(this)),this.g&&(this.readyState=3,an(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof a.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;on(this)}else t.text().then(this.Ra.bind(this),this.ga.bind(this))},t.Pa=function(t){if(this.g){if(this.o&&t.value)this.response.push(t.value);else if(!this.o){var e=t.value?t.value:new Uint8Array(0);(e=this.v.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?sn(this):an(this),3==this.readyState&&on(this)}},t.Ra=function(t){this.g&&(this.response=this.responseText=t,sn(this))},t.Qa=function(t){this.g&&(this.response=t,sn(this))},t.ga=function(){this.g&&sn(this)},t.setRequestHeader=function(t,e){this.u.append(t,e)},t.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(rn.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}}),C(ln,_t);var hn=/^https?$/i,dn=["POST","PUT"];function fn(t,e){t.h=!1,t.g&&(t.j=!0,t.g.abort(),t.j=!1),t.l=e,t.m=5,pn(t),gn(t)}function pn(t){t.A||(t.A=!0,wt(t,"complete"),wt(t,"error"))}function mn(t){if(t.h&&"undefined"!=typeof s&&(!t.v[1]||4!=vn(t)||2!=t.Z()))if(t.u&&4==vn(t))Et(t.Ea,0,t);else if(wt(t,"readystatechange"),4==vn(t)){t.h=!1;try{const s=t.Z();t:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var n;if(!(n=e)){var r;if(r=0===s){var i=String(t.D).match(ke)[1]||null;!i&&a.self&&a.self.location&&(i=a.self.location.protocol.slice(0,-1)),r=!hn.test(i?i.toLowerCase():"")}n=r}if(n)wt(t,"complete"),wt(t,"success");else{t.m=6;try{var o=2<vn(t)?t.g.statusText:""}catch(c){o=""}t.l=o+" ["+t.Z()+"]",pn(t)}}finally{gn(t)}}}function gn(t,e){if(t.g){yn(t);const r=t.g,i=t.v[0]?()=>{}:null;t.g=null,t.v=null,e||wt(t,"ready");try{r.onreadystatechange=i}catch(n){}}}function yn(t){t.I&&(a.clearTimeout(t.I),t.I=null)}function vn(t){return t.g?t.g.readyState:0}function _n(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.H){case"":case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(e){return null}}function wn(t){const e={};t=(t.g&&2<=vn(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<t.length;r++){if(x(t[r]))continue;var n=F(t[r]);const i=n[0];if(n=n[1],"string"!==typeof n)continue;n=n.trim();const o=e[i]||[];e[i]=o,o.push(n)}P(e,(function(t){return t.join(", ")}))}function bn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function En(t){this.Aa=0,this.i=[],this.j=new qt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=bn("failFast",!1,t),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=bn("baseRetryDelayMs",5e3,t),this.cb=bn("retryDelaySeedMs",1e4,t),this.Wa=bn("forwardChannelMaxRetries",2,t),this.wa=bn("forwardChannelRequestTimeoutMs",2e4,t),this.pa=t&&t.xmlHttpFactory||void 0,this.Xa=t&&t.Tb||void 0,this.Ca=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.h=new ye(t&&t.concurrentRequestLimit),this.Da=new tn,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=t&&t.Rb||!1,t&&t.xa&&this.j.xa(),t&&t.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&t&&t.detectBufferingProxy||!1,this.ja=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.ja=t.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Tn(t){if(Sn(t),3==t.G){var e=t.U++,n=Ae(t.I);if(Re(n,"SID",t.K),Re(n,"RID",e),Re(n,"TYPE","terminate"),Dn(t,n),e=new ne(t,t.j,e),e.L=2,e.v=Me(Ae(n)),n=!1,a.navigator&&a.navigator.sendBeacon)try{n=a.navigator.sendBeacon(e.v.toString(),"")}catch(r){}!n&&a.Image&&((new Image).src=e.v,n=!0),n||(e.g=$n(e.j,null),e.g.ea(e.v)),e.F=Date.now(),le(e)}Un(t)}function Cn(t){t.g&&(Pn(t),t.g.cancel(),t.g=null)}function Sn(t){Cn(t),t.u&&(a.clearTimeout(t.u),t.u=null),Mn(t),t.h.cancel(),t.s&&("number"===typeof t.s&&a.clearTimeout(t.s),t.s=null)}function In(t){if(!ve(t.h)&&!t.s){t.s=!0;var e=t.Ga;B||q(),z||(B(),z=!0),W.add(e,t),t.B=0}}function kn(t,e){return!(_e(t.h)>=t.h.j-(t.s?1:0))&&(t.s?(t.i=e.D.concat(t.i),!0):!(1==t.G||2==t.G||t.B>=(t.Va?0:t.Wa))&&(t.s=Wt(E(t.Ga,t,e),Fn(t,t.B)),t.B++,!0))}function xn(t,e){var n;n=e?e.l:t.U++;const r=Ae(t.I);Re(r,"SID",t.K),Re(r,"RID",n),Re(r,"AID",t.T),Dn(t,r),t.m&&t.o&&un(r,t.m,t.o),n=new ne(t,t.j,n,t.B+1),null===t.m&&(n.H=t.o),e&&(t.i=e.D.concat(t.i)),e=An(t,n,1e3),n.I=Math.round(.5*t.wa)+Math.round(.5*t.wa*Math.random()),be(t.h,n),se(n,r,e)}function Dn(t,e){t.H&&O(t.H,(function(t,n){Re(e,n,t)})),t.l&&Ie({},(function(t,n){Re(e,n,t)}))}function An(t,e,n){n=Math.min(t.i.length,n);var r=t.l?E(t.l.Na,t.l,t):null;t:{var i=t.i;let e=-1;for(;;){const t=["count="+n];-1==e?0<n?(e=i[0].g,t.push("ofs="+e)):e=0:t.push("ofs="+e);let s=!0;for(let a=0;a<n;a++){let n=i[a].g;const c=i[a].map;if(n-=e,0>n)e=Math.max(0,i[a].g-100),s=!1;else try{en(c,t,"req"+n+"_")}catch(o){r&&r(c)}}if(s){r=t.join("&");break t}}}return t=t.i.splice(0,n),e.D=t,r}function Nn(t){if(!t.g&&!t.u){t.Y=1;var e=t.Fa;B||q(),z||(B(),z=!0),W.add(e,t),t.v=0}}function On(t){return!(t.g||t.u||3<=t.v)&&(t.Y++,t.u=Wt(E(t.Fa,t),Fn(t,t.v)),t.v++,!0)}function Pn(t){null!=t.A&&(a.clearTimeout(t.A),t.A=null)}function Rn(t){t.g=new ne(t,t.j,"rpc",t.Y),null===t.m&&(t.g.H=t.o),t.g.O=0;var e=Ae(t.qa);Re(e,"RID","rpc"),Re(e,"SID",t.K),Re(e,"AID",t.T),Re(e,"CI",t.F?"0":"1"),!t.F&&t.ja&&Re(e,"TO",t.ja),Re(e,"TYPE","xmlhttp"),Dn(t,e),t.m&&t.o&&un(e,t.m,t.o),t.L&&(t.g.I=t.L);var n=t.g;t=t.ia,n.L=1,n.v=Me(Ae(e)),n.m=null,n.P=!0,ae(n,t)}function Mn(t){null!=t.C&&(a.clearTimeout(t.C),t.C=null)}function Ln(t,e){var n=null;if(t.g==e){Mn(t),Pn(t),t.g=null;var r=2}else{if(!we(t.h,e))return;n=e.D,Ee(t.h,e),r=1}if(0!=t.G)if(e.o)if(1==r){n=e.m?e.m.length:0,e=Date.now()-e.F;var i=t.B;r=Ut(),wt(r,new zt(r,n)),In(t)}else Nn(t);else if(i=e.s,3==i||0==i&&0<e.X||!(1==r&&kn(t,e)||2==r&&On(t)))switch(n&&0<n.length&&(e=t.h,e.i=e.i.concat(n)),i){case 1:jn(t,5);break;case 4:jn(t,10);break;case 3:jn(t,6);break;default:jn(t,2)}}function Fn(t,e){let n=t.Ta+Math.floor(Math.random()*t.cb);return t.isActive()||(n*=2),n*e}function jn(t,e){if(t.j.info("Error code "+e),2==e){var n=E(t.fb,t),r=t.Xa;const e=!r;r=new De(r||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||Ne(r,"https"),Me(r),e?Xe(r.toString(),n):Je(r.toString(),n)}else Bt(2);t.G=0,t.l&&t.l.sa(e),Un(t),Sn(t)}function Un(t){if(t.G=0,t.ka=[],t.l){const e=Te(t.h);0==e.length&&0==t.i.length||(I(t.ka,e),I(t.ka,t.i),t.h.i.length=0,S(t.i),t.i.length=0),t.l.ra()}}function Vn(t,e,n){var r=n instanceof De?Ae(n):new De(n);if(""!=r.g)e&&(r.g=e+"."+r.g),Oe(r,r.s);else{var i=a.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var o=new De(null);r&&Ne(o,r),e&&(o.g=e),i&&Oe(o,i),n&&(o.l=n),r=o}return n=t.D,e=t.ya,n&&e&&Re(r,n,e),Re(r,"VER",t.la),Dn(t,r),r}function $n(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ca&&!t.pa?new ln(new nn({eb:n})):new ln(t.pa),e.Ha(t.J),e}function Hn(){}function Bn(){}function zn(t,e){_t.call(this),this.g=new En(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.o=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.va&&(t?t["X-WebChannel-Client-Profile"]=e.va:t={"X-WebChannel-Client-Profile":e.va}),this.g.S=t,(t=e&&e.Sb)&&!x(t)&&(this.g.m=t),this.v=e&&e.supportsCrossDomainXhr||!1,this.u=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!x(e)&&(this.g.D=e,t=this.h,null!==t&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Kn(this)}function Wn(t){Mt.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){t:{for(const n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function qn(){Lt.call(this),this.status=1}function Kn(t){this.g=t}t=ln.prototype,t.Ha=function(t){this.J=t},t.ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+t);e=e?e.toUpperCase():"GET",this.D=t,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Jt.g(),this.v=this.o?Ot(this.o):Ot(Jt),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(e,String(t),!0),this.B=!1}catch(o){return void fn(this,o)}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const t of r.keys())n.set(t,r.get(t))}r=Array.from(n.keys()).find((t=>"content-type"==t.toLowerCase())),i=a.FormData&&t instanceof a.FormData,!(0<=Array.prototype.indexOf.call(dn,e,void 0))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,a]of n)this.g.setRequestHeader(s,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{yn(this),this.u=!0,this.g.send(t),this.u=!1}catch(o){fn(this,o)}},t.abort=function(t){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=t||7,wt(this,"complete"),wt(this,"abort"),gn(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),gn(this,!0)),ln.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?mn(this):this.bb())},t.bb=function(){mn(this)},t.isActive=function(){return!!this.g},t.Z=function(){try{return 2<vn(this)?this.g.status:-1}catch(t){return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},t.Oa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Dt(e)}},t.Ba=function(){return this.m},t.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},t=En.prototype,t.la=8,t.G=1,t.connect=function(t,e,n,r){Bt(0),this.W=t,this.H=e||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=Vn(this,null,this.W),In(this)},t.Ga=function(t){if(this.s)if(this.s=null,1==this.G){if(!t){this.U=Math.floor(1e5*Math.random()),t=this.U++;const i=new ne(this,this.j,t);let o=this.o;if(this.S&&(o?(o=R(o),L(o,this.S)):o=this.S),null!==this.m||this.O||(i.H=o,o=null),this.P)t:{for(var e=0,n=0;n<this.i.length;n++){var r=this.i[n];if(r="__data__"in r.map&&(r=r.map.__data__,"string"===typeof r)?r.length:void 0,void 0===r)break;if(e+=r,4096<e){e=n;break t}if(4096===e||n===this.i.length-1){e=n+1;break t}}e=1e3}else e=1e3;e=An(this,i,e),n=Ae(this.I),Re(n,"RID",t),Re(n,"CVER",22),this.D&&Re(n,"X-HTTP-Session-Id",this.D),Dn(this,n),o&&(this.O?e="headers="+encodeURIComponent(String(cn(o)))+"&"+e:this.m&&un(n,this.m,o)),be(this.h,i),this.Ua&&Re(n,"TYPE","init"),this.P?(Re(n,"$req",e),Re(n,"SID","null"),i.T=!0,se(i,n,null)):se(i,n,e),this.G=2}}else 3==this.G&&(t?xn(this,t):0==this.i.length||ve(this.h)||xn(this))},t.Fa=function(){if(this.u=null,Rn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var t=2*this.R;this.j.info("BP detection timer enabled: "+t),this.A=Wt(E(this.ab,this),t)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Bt(10),Cn(this),Rn(this))},t.Za=function(){null!=this.C&&(this.C=null,Cn(this),On(this),Bt(19))},t.fb=function(t){t?(this.j.info("Successfully pinged google.com"),Bt(2)):(this.j.info("Failed to ping google.com"),Bt(1))},t.isActive=function(){return!!this.l&&this.l.isActive(this)},t=Hn.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){},Bn.prototype.g=function(t,e){return new zn(t,e)},C(zn,_t),zn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},zn.prototype.close=function(){Tn(this.g)},zn.prototype.o=function(t){var e=this.g;if("string"===typeof t){var n={};n.__data__=t,t=n}else this.u&&(n={},n.__data__=xt(t),t=n);e.i.push(new ge(e.Ya++,t)),3==e.G&&In(e)},zn.prototype.N=function(){this.g.l=null,delete this.j,Tn(this.g),delete this.g,zn.aa.N.call(this)},C(Wn,Mt),C(qn,Lt),C(Kn,Hn),Kn.prototype.ua=function(){wt(this.g,"a")},Kn.prototype.ta=function(t){wt(this.g,new Wn(t))},Kn.prototype.sa=function(t){wt(this.g,new qn)},Kn.prototype.ra=function(){wt(this.g,"b")},Bn.prototype.createWebChannel=Bn.prototype.g,zn.prototype.send=zn.prototype.o,zn.prototype.open=zn.prototype.m,zn.prototype.close=zn.prototype.close,v=w.createWebChannelTransport=function(){return new Bn},y=w.getStatEventTarget=function(){return Ut()},g=w.Event=Ft,m=w.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Zt.NO_ERROR=0,Zt.TIMEOUT=8,Zt.HTTP_ERROR=6,p=w.ErrorCode=Zt,te.COMPLETE="complete",f=w.EventType=te,Pt.EventType=Rt,Rt.OPEN="a",Rt.CLOSE="b",Rt.ERROR="c",Rt.MESSAGE="d",_t.prototype.listen=_t.prototype.K,d=w.WebChannel=Pt,w.FetchXmlHttpFactory=nn,ln.prototype.listenOnce=ln.prototype.L,ln.prototype.getLastError=ln.prototype.Ka,ln.prototype.getLastErrorCode=ln.prototype.Ba,ln.prototype.getStatus=ln.prototype.Z,ln.prototype.getResponseJson=ln.prototype.Oa,ln.prototype.getResponseText=ln.prototype.oa,ln.prototype.send=ln.prototype.ea,ln.prototype.setWithCredentials=ln.prototype.Ha,h=w.XhrIo=ln}).apply("undefined"!==typeof _?_:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const b="@firebase/firestore",E="4.9.0";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}T.UNAUTHENTICATED=new T(null),T.GOOGLE_CREDENTIALS=new T("google-credentials-uid"),T.FIRST_PARTY=new T("first-party-uid"),T.MOCK_USER=new T("mock-user");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let C="12.0.0";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S=new a.Vy("@firebase/firestore");function I(){return S.logLevel}function k(t,...e){if(S.logLevel<=a.$b.DEBUG){const n=e.map(A);S.debug(`Firestore (${C}): ${t}`,...n)}}function x(t,...e){if(S.logLevel<=a.$b.ERROR){const n=e.map(A);S.error(`Firestore (${C}): ${t}`,...n)}}function D(t,...e){if(S.logLevel<=a.$b.WARN){const n=e.map(A);S.warn(`Firestore (${C}): ${t}`,...n)}}function A(t){if("string"==typeof t)return t;try{
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */return function(t){return JSON.stringify(t)}(t)}catch(e){return t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N(t,e,n){let r="Unexpected state";"string"==typeof e?r=e:n=e,O(t,r,n)}function O(t,e,n){let r=`FIRESTORE (${C}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(t){r+=" CONTEXT: "+n}throw x(r),new Error(r)}function P(t,e,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,t||O(e,i,r)}function R(t,e){return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class L extends c.g{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class U{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(T.UNAUTHENTICATED)))}shutdown(){}}class V{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class ${constructor(t){this.t=t,this.currentUser=T.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){P(void 0===this.o,42304);let n=this.i;const r=t=>this.i!==n?(n=this.i,e(t)):Promise.resolve();let i=new F;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new F,t.enqueueRetryable((()=>r(this.currentUser)))};const o=()=>{const e=i;t.enqueueRetryable((async()=>{await e.promise,await r(this.currentUser)}))},s=t=>{k("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=t,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((t=>s(t))),setTimeout((()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?s(t):(k("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new F)}}),0),o()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((e=>this.i!==t?(k("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?(P("string"==typeof e.accessToken,31837,{l:e}),new j(e.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return P(null===t||"string"==typeof t,2055,{h:t}),new T(t)}}class H{constructor(t,e,n){this.P=t,this.T=e,this.I=n,this.type="FirstParty",this.user=T.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class B{constructor(t,e,n){this.P=t,this.T=e,this.I=n}getToken(){return Promise.resolve(new H(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable((()=>e(T.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class z{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class W{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,(0,o.xZ)(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){P(void 0===this.o,3512);const n=t=>{null!=t.error&&k("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${t.error.message}`);const n=t.token!==this.m;return this.m=t.token,k("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?e(t.token):Promise.resolve()};this.o=e=>{t.enqueueRetryable((()=>n(e)))};const r=t=>{k("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=t,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((t=>r(t))),setTimeout((()=>{if(!this.appCheck){const t=this.V.getImmediate({optional:!0});t?r(t):k("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new z(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((t=>t?(P("string"==typeof t.token,44558,{tokenResult:t}),this.m=t.token,new z(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function q(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=q(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%62))}return n}}function G(t,e){return t<e?-1:t>e?1:0}function Y(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const n=t.charAt(r),i=e.charAt(r);if(n!==i)return J(n)===J(i)?G(n,i):J(n)?1:-1}return G(t.length,e.length)}const Q=55296,X=57343;function J(t){const e=t.charCodeAt(0);return e>=Q&&e<=X}function Z(t,e,n){return t.length===e.length&&t.every(((t,r)=>n(t,e[r])))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const tt="__name__";class et{constructor(t,e,n){void 0===e?e=0:e>t.length&&N(637,{offset:e,range:t.length}),void 0===n?n=t.length-e:n>t.length-e&&N(1746,{length:n,range:t.length-e}),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===et.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof et?t.forEach((t=>{e.push(t)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const n=et.compareSegments(t.get(r),e.get(r));if(0!==n)return n}return G(t.length,e.length)}static compareSegments(t,e){const n=et.isNumericId(t),r=et.isNumericId(e);return n&&!r?-1:!n&&r?1:n&&r?et.extractNumericId(t).compare(et.extractNumericId(e)):Y(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return r.fromString(t.substring(4,t.length-2))}}class nt extends et{construct(t,e,n){return new nt(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new L(M.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter((t=>t.length>0)))}return new nt(e)}static emptyPath(){return new nt([])}}const rt=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class it extends et{construct(t,e,n){return new it(t,e,n)}static isValidIdentifier(t){return rt.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),it.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===tt}static keyField(){return new it([tt])}static fromServerFormat(t){const e=[];let n="",r=0;const i=()=>{if(0===n.length)throw new L(M.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let o=!1;for(;r<t.length;){const e=t[r];if("\\"===e){if(r+1===t.length)throw new L(M.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[r+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new L(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=e,r+=2}else"`"===e?(o=!o,r++):"."!==e||o?(n+=e,r++):(i(),r++)}if(i(),o)throw new L(M.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new it(e)}static emptyPath(){return new it([])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(t){this.path=t}static fromPath(t){return new ot(nt.fromString(t))}static fromName(t){return new ot(nt.fromString(t).popFirst(5))}static empty(){return new ot(nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===nt.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return nt.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ot(new nt(t.slice()))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function st(t,e,n){if(!n)throw new L(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function at(t,e,n,r){if(!0===e&&!0===r)throw new L(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ct(t){if(!ot.isDocumentKey(t))throw new L(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function ut(t){if(ot.isDocumentKey(t))throw new L(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function lt(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function ht(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=function(t){return t.constructor?t.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return"function"==typeof t?"a function":N(12329,{type:typeof t})}function dt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new L(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ht(t);throw new L(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}
/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function ft(t,e){const n={typeString:t};return e&&(n.value=e),n}function pt(t,e){if(!lt(t))throw new L(M.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(void 0!==o&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new L(M.INVALID_ARGUMENT,n);return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mt=-62135596800,gt=1e6;class yt{static now(){return yt.fromMillis(Date.now())}static fromDate(t){return yt.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor((t-1e3*e)*gt);return new yt(e,n)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new L(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new L(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<mt)throw new L(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new L(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/gt}_compareTo(t){return this.seconds===t.seconds?G(this.nanoseconds,t.nanoseconds):G(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:yt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(pt(t,yt._jsonSchema))return new yt(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-mt;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}yt._jsonSchemaVersion="firestore/timestamp/1.0",yt._jsonSchema={type:ft("string",yt._jsonSchemaVersion),seconds:ft("number"),nanoseconds:ft("number")};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class vt{static fromTimestamp(t){return new vt(t)}static min(){return new vt(new yt(0,0))}static max(){return new vt(new yt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _t=-1;class wt{constructor(t,e,n,r){this.indexId=t,this.collectionGroup=e,this.fields=n,this.indexState=r}}wt.UNKNOWN_ID=-1;function bt(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=vt.fromTimestamp(1e9===r?new yt(n+1,0):new yt(n,r));return new Tt(i,ot.empty(),e)}function Et(t){return new Tt(t.readTime,t.key,_t)}class Tt{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new Tt(vt.min(),ot.empty(),_t)}static max(){return new Tt(vt.max(),ot.empty(),_t)}}function Ct(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=ot.comparator(t.documentKey,e.documentKey),0!==n?n:G(t.largestBatchId,e.largestBatchId)
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)}const St="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class It{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kt(t){if(t.code!==M.FAILED_PRECONDITION||t.message!==St)throw t;k("LocalStore","Unexpectedly lost primary lease")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&N(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new xt(((n,r)=>{this.nextCallback=e=>{this.wrapSuccess(t,e).next(n,r)},this.catchCallback=t=>{this.wrapFailure(e,t).next(n,r)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof xt?e:xt.resolve(e)}catch(t){return xt.reject(t)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):xt.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):xt.reject(e)}static resolve(t){return new xt(((e,n)=>{e(t)}))}static reject(t){return new xt(((e,n)=>{n(t)}))}static waitFor(t){return new xt(((e,n)=>{let r=0,i=0,o=!1;t.forEach((t=>{++r,t.next((()=>{++i,o&&i===r&&e()}),(t=>n(t)))})),o=!0,i===r&&e()}))}static or(t){let e=xt.resolve(!1);for(const n of t)e=e.next((t=>t?xt.resolve(t):n()));return e}static forEach(t,e){const n=[];return t.forEach(((t,r)=>{n.push(e.call(this,t,r))})),this.waitFor(n)}static mapArray(t,e){return new xt(((n,r)=>{const i=t.length,o=new Array(i);let s=0;for(let a=0;a<i;a++){const c=a;e(t[c]).next((t=>{o[c]=t,++s,s===i&&n(o)}),(t=>r(t)))}}))}static doWhile(t,e){return new xt(((n,r)=>{const i=()=>{!0===t()?e().next((()=>{i()}),r):n()};i()}))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function At(t){return"IndexedDbTransactionError"===t.name}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Nt{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=t=>this.ae(t),this.ue=t=>e.writeSequenceNumber(t))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Nt.ce=-1;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ot=-1;function Pt(t){return null==t}function Rt(t){return 0===t&&1/t==-1/0}function Mt(t){return"number"==typeof t&&Number.isInteger(t)&&!Rt(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lt="";function Ft(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Ut(e)),e=jt(t.get(n),e);return Ut(e)}function jt(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const e=t.charAt(i);switch(e){case"\0":n+="";break;case Lt:n+="";break;default:n+=e}}return n}function Ut(t){return t+Lt+""}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Vt="remoteDocuments",$t="owner",Ht="mutationQueues",Bt="mutations";
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zt="documentMutations",Wt="remoteDocumentsV14",qt="remoteDocumentGlobal",Kt="targets",Gt="targetDocuments",Yt="targetGlobal",Qt="collectionParents",Xt="clientMetadata",Jt="bundles",Zt="namedQueries",te="indexConfiguration",ee="indexState",ne="indexEntries",re="documentOverlays",ie="globals",oe=[Ht,Bt,zt,Vt,Kt,$t,Yt,Gt,Xt,qt,Qt,Jt,Zt],se=[Ht,Bt,zt,Wt,Kt,$t,Yt,Gt,Xt,qt,Qt,Jt,Zt,re],ae=se,ce=[...ae,te,ee,ne];
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function ue(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function le(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function he(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(t,e){this.comparator=t,this.root=e||pe.EMPTY}insert(t,e){return new de(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,pe.BLACK,null,null))}remove(t){return new de(this.comparator,this.root.remove(t,this.comparator).copy(null,null,pe.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,n)=>(t(e,n),!1)))}toString(){const t=[];return this.inorderTraversal(((e,n)=>(t.push(`${e}:${n}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new fe(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new fe(this.root,t,this.comparator,!1)}getReverseIterator(){return new fe(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new fe(this.root,t,this.comparator,!0)}}class fe{constructor(t,e,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=e?n(t.key,e):1,e&&r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class pe{constructor(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:pe.RED,this.left=null!=r?r:pe.EMPTY,this.right=null!=i?i:pe.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,r,i){return new pe(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let r=this;const i=n(t,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return pe.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===e(t,r.key)){if(r.right.isEmpty())return pe.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,pe.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,pe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw N(43730,{key:this.key,value:this.value});if(this.right.isRed())throw N(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw N(27949);return t+(this.isRed()?0:1)}}pe.EMPTY=null,pe.RED=!0,pe.BLACK=!1,pe.EMPTY=new class{constructor(){this.size=0}get key(){throw N(57766)}get value(){throw N(16141)}get color(){throw N(16727)}get left(){throw N(29726)}get right(){throw N(36894)}copy(t,e,n,r,i){return this}insert(t,e,n){return new pe(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class me{constructor(t){this.comparator=t,this.data=new de(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,n)=>(t(e),!1)))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new ge(this.data.getIterator())}getIteratorFrom(t){return new ge(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((t=>{e=e.add(t)})),e}isEqual(t){if(!(t instanceof me))return!1;if(this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,r=n.getNext().key;if(0!==this.comparator(t,r))return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new me(this.comparator);return e.data=t,e}}class ge{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class ye{constructor(t){this.fields=t,t.sort(it.comparator)}static empty(){return new ye([])}unionWith(t){let e=new me(it.comparator);for(const n of this.fields)e=e.add(n);for(const n of t)e=e.add(n);return new ye(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Z(this.fields,t.fields,((t,e)=>t.isEqual(e)))}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class _e{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(t){try{return atob(t)}catch(t){throw"undefined"!=typeof DOMException&&t instanceof DOMException?new ve("Invalid base64 string: "+t):t}}(t);return new _e(e)}static fromUint8Array(t){const e=function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t);return new _e(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return G(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}_e.EMPTY_BYTE_STRING=new _e("");const we=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function be(t){if(P(!!t,39018),"string"==typeof t){let e=0;const n=we.exec(t);if(P(!!n,46558,{timestamp:t}),n[1]){let t=n[1];t=(t+"000000000").substr(0,9),e=Number(t)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ee(t.seconds),nanos:Ee(t.nanos)}}function Ee(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Te(t){return"string"==typeof t?_e.fromBase64String(t):_e.fromUint8Array(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ce="server_timestamp",Se="__type__",Ie="__previous_value__",ke="__local_write_time__";function xe(t){const e=(t?.mapValue?.fields||{})[Se]?.stringValue;return e===Ce}function De(t){const e=t.mapValue.fields[Ie];return xe(e)?De(e):e}function Ae(t){const e=be(t.mapValue.fields[ke].timestampValue);return new yt(e.seconds,e.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(t,e,n,r,i,o,s,a,c,u){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=a,this.useFetchStreams=c,this.isUsingEmulator=u}}const Oe="(default)";class Pe{constructor(t,e){this.projectId=t,this.database=e||Oe}static empty(){return new Pe("","")}get isDefaultDatabase(){return this.database===Oe}isEqual(t){return t instanceof Pe&&t.projectId===this.projectId&&t.database===this.database}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Re="__type__",Me="__max__",Le={mapValue:{fields:{__type__:{stringValue:Me}}}},Fe="__vector__",je="value";function Ue(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?xe(t)?4:en(t)?9007199254740991:Ze(t)?10:11:N(28295,{value:t})}function Ve(t,e){if(t===e)return!0;const n=Ue(t);if(n!==Ue(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ae(t).isEqual(Ae(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;const n=be(t.timestampValue),r=be(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Te(t.bytesValue).isEqual(Te(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Ee(t.geoPointValue.latitude)===Ee(e.geoPointValue.latitude)&&Ee(t.geoPointValue.longitude)===Ee(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Ee(t.integerValue)===Ee(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){const n=Ee(t.doubleValue),r=Ee(e.doubleValue);return n===r?Rt(n)===Rt(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Z(t.arrayValue.values||[],e.arrayValue.values||[],Ve);case 10:case 11:return function(t,e){const n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(ue(n)!==ue(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Ve(n[i],r[i])))return!1;return!0}(t,e);default:return N(52216,{left:t})}}function $e(t,e){return void 0!==(t.values||[]).find((t=>Ve(t,e)))}function He(t,e){if(t===e)return 0;const n=Ue(t),r=Ue(e);if(n!==r)return G(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return G(t.booleanValue,e.booleanValue);case 2:return function(t,e){const n=Ee(t.integerValue||t.doubleValue),r=Ee(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Be(t.timestampValue,e.timestampValue);case 4:return Be(Ae(t),Ae(e));case 5:return Y(t.stringValue,e.stringValue);case 6:return function(t,e){const n=Te(t),r=Te(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){const n=t.split("/"),r=e.split("/");for(let i=0;i<n.length&&i<r.length;i++){const t=G(n[i],r[i]);if(0!==t)return t}return G(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){const n=G(Ee(t.latitude),Ee(e.latitude));return 0!==n?n:G(Ee(t.longitude),Ee(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return ze(t.arrayValue,e.arrayValue);case 10:return function(t,e){const n=t.fields||{},r=e.fields||{},i=n[je]?.arrayValue,o=r[je]?.arrayValue,s=G(i?.values?.length||0,o?.values?.length||0);return 0!==s?s:ze(i,o)}(t.mapValue,e.mapValue);case 11:return function(t,e){if(t===Le.mapValue&&e===Le.mapValue)return 0;if(t===Le.mapValue)return 1;if(e===Le.mapValue)return-1;const n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(let s=0;s<r.length&&s<o.length;++s){const t=Y(r[s],o[s]);if(0!==t)return t;const e=He(n[r[s]],i[o[s]]);if(0!==e)return e}return G(r.length,o.length)}(t.mapValue,e.mapValue);default:throw N(23264,{he:n})}}function Be(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return G(t,e);const n=be(t),r=be(e),i=G(n.seconds,r.seconds);return 0!==i?i:G(n.nanos,r.nanos)}function ze(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const t=He(n[i],r[i]);if(t)return t}return G(n.length,r.length)}function We(t){return qe(t)}function qe(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){const e=be(t);return`time(${e.seconds},${e.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(t){return Te(t).toBase64()}(t.bytesValue):"referenceValue"in t?function(t){return ot.fromName(t).toString()}(t.referenceValue):"geoPointValue"in t?function(t){return`geo(${t.latitude},${t.longitude})`}(t.geoPointValue):"arrayValue"in t?function(t){let e="[",n=!0;for(const r of t.values||[])n?n=!1:e+=",",e+=qe(r);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){const e=Object.keys(t.fields||{}).sort();let n="{",r=!0;for(const i of e)r?r=!1:n+=",",n+=`${i}:${qe(t.fields[i])}`;return n+"}"}(t.mapValue):N(61005,{value:t})}function Ke(t){switch(Ue(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=De(t);return e?16+Ke(e):16;case 5:return 2*t.stringValue.length;case 6:return Te(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(t){return(t.values||[]).reduce(((t,e)=>t+Ke(e)),0)}(t.arrayValue);case 10:case 11:return function(t){let e=0;return le(t.fields,((t,n)=>{e+=t.length+Ke(n)})),e}(t.mapValue);default:throw N(13486,{value:t})}}function Ge(t){return!!t&&"integerValue"in t}function Ye(t){return!!t&&"arrayValue"in t}function Qe(t){return!!t&&"nullValue"in t}function Xe(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Je(t){return!!t&&"mapValue"in t}function Ze(t){const e=(t?.mapValue?.fields||{})[Re]?.stringValue;return e===Fe}function tn(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return le(t.mapValue.fields,((t,n)=>e.mapValue.fields[t]=tn(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=tn(t.arrayValue.values[n]);return e}return{...t}}function en(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Me}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class nn{constructor(t){this.value=t}static empty(){return new nn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!Je(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=tn(e)}setAll(t){let e=it.emptyPath(),n={},r=[];t.forEach(((t,i)=>{if(!e.isImmediateParentOf(i)){const t=this.getFieldsMap(e);this.applyChanges(t,n,r),n={},r=[],e=i.popLast()}t?n[i.lastSegment()]=tn(t):r.push(i.lastSegment())}));const i=this.getFieldsMap(e);this.applyChanges(i,n,r)}delete(t){const e=this.field(t.popLast());Je(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Ve(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let r=e.mapValue.fields[t.get(n)];Je(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,n){le(e,((e,n)=>t[e]=n));for(const r of n)delete t[r]}clone(){return new nn(tn(this.value))}}function rn(t){const e=[];return le(t.fields,((t,n)=>{const r=new it([t]);if(Je(n)){const t=rn(n.mapValue).fields;if(0===t.length)e.push(r);else for(const n of t)e.push(r.child(n))}else e.push(r)})),new ye(e)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class on{constructor(t,e,n,r,i,o,s){this.key=t,this.documentType=e,this.version=n,this.readTime=r,this.createTime=i,this.data=o,this.documentState=s}static newInvalidDocument(t){return new on(t,0,vt.min(),vt.min(),vt.min(),nn.empty(),0)}static newFoundDocument(t,e,n,r){return new on(t,1,e,vt.min(),n,r,0)}static newNoDocument(t,e){return new on(t,2,e,vt.min(),vt.min(),nn.empty(),0)}static newUnknownDocument(t,e){return new on(t,3,e,vt.min(),vt.min(),nn.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(vt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=nn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=vt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof on&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new on(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(t,e){this.position=t,this.inclusive=e}}function an(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(r=o.field.isKeyField()?ot.comparator(ot.fromName(s.referenceValue),n.key):He(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function cn(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ve(t.position[n],e.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(t,e="asc"){this.field=t,this.dir=e}}function ln(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{}class dn extends hn{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(t,e,n):new wn(t,e,n):"array-contains"===e?new Cn(t,n):"in"===e?new Sn(t,n):"not-in"===e?new In(t,n):"array-contains-any"===e?new kn(t,n):new dn(t,e,n)}static createKeyFieldInFilter(t,e,n){return"in"===e?new bn(t,n):new En(t,n)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&void 0===e.nullValue&&this.matchesComparison(He(e,this.value)):null!==e&&Ue(this.value)===Ue(e)&&this.matchesComparison(He(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return N(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fn extends hn{constructor(t,e){super(),this.filters=t,this.op=e,this.Pe=null}static create(t,e){return new fn(t,e)}matches(t){return pn(this)?void 0===this.filters.find((e=>!e.matches(t))):void 0!==this.filters.find((e=>e.matches(t)))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function pn(t){return"and"===t.op}function mn(t){return gn(t)&&pn(t)}function gn(t){for(const e of t.filters)if(e instanceof fn)return!1;return!0}function yn(t){if(t instanceof dn)return t.field.canonicalString()+t.op.toString()+We(t.value);if(mn(t))return t.filters.map((t=>yn(t))).join(",");{const e=t.filters.map((t=>yn(t))).join(",");return`${t.op}(${e})`}}function vn(t,e){return t instanceof dn?function(t,e){return e instanceof dn&&t.op===e.op&&t.field.isEqual(e.field)&&Ve(t.value,e.value)}(t,e):t instanceof fn?function(t,e){return e instanceof fn&&t.op===e.op&&t.filters.length===e.filters.length&&t.filters.reduce(((t,n,r)=>t&&vn(n,e.filters[r])),!0)}(t,e):void N(19439)}function _n(t){return t instanceof dn?function(t){return`${t.field.canonicalString()} ${t.op} ${We(t.value)}`}(t):t instanceof fn?function(t){return t.op.toString()+" {"+t.getFilters().map(_n).join(" ,")+"}"}(t):"Filter"}class wn extends dn{constructor(t,e,n){super(t,e,n),this.key=ot.fromName(n.referenceValue)}matches(t){const e=ot.comparator(t.key,this.key);return this.matchesComparison(e)}}class bn extends dn{constructor(t,e){super(t,"in",e),this.keys=Tn("in",e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class En extends dn{constructor(t,e){super(t,"not-in",e),this.keys=Tn("not-in",e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function Tn(t,e){return(e.arrayValue?.values||[]).map((t=>ot.fromName(t.referenceValue)))}class Cn extends dn{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Ye(e)&&$e(e.arrayValue,this.value)}}class Sn extends dn{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&$e(this.value.arrayValue,e)}}class In extends dn{constructor(t,e){super(t,"not-in",e)}matches(t){if($e(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&void 0===e.nullValue&&!$e(this.value.arrayValue,e)}}class kn extends dn{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Ye(e)||!e.arrayValue.values)&&e.arrayValue.values.some((t=>$e(this.value.arrayValue,t)))}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(t,e=null,n=[],r=[],i=null,o=null,s=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.Te=null}}function Dn(t,e=null,n=[],r=[],i=null,o=null,s=null){return new xn(t,e,n,r,i,o,s)}function An(t){const e=R(t);if(null===e.Te){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((t=>yn(t))).join(","),t+="|ob:",t+=e.orderBy.map((t=>function(t){return t.field.canonicalString()+t.dir}(t))).join(","),Pt(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((t=>We(t))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((t=>We(t))).join(",")),e.Te=t}return e.Te}function Nn(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!ln(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!vn(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!cn(t.startAt,e.startAt)&&cn(t.endAt,e.endAt)}function On(t){return ot.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Pn{constructor(t,e=null,n=[],r=[],i=null,o="F",s=null,a=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Rn(t,e,n,r,i,o,s,a){return new Pn(t,e,n,r,i,o,s,a)}function Mn(t){return new Pn(t)}function Ln(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function Fn(t){return null!==t.collectionGroup}function jn(t){const e=R(t);if(null===e.Ie){e.Ie=[];const t=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),t.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc",r=function(t){let e=new me(it.comparator);return t.filters.forEach((t=>{t.getFlattenedFilters().forEach((t=>{t.isInequality()&&(e=e.add(t.field))}))})),e}(e);r.forEach((r=>{t.has(r.canonicalString())||r.isKeyField()||e.Ie.push(new un(r,n))})),t.has(it.keyField().canonicalString())||e.Ie.push(new un(it.keyField(),n))}return e.Ie}function Un(t){const e=R(t);return e.Ee||(e.Ee=Vn(e,jn(t))),e.Ee}function Vn(t,e){if("F"===t.limitType)return Dn(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((t=>{const e="desc"===t.dir?"asc":"desc";return new un(t.field,e)}));const n=t.endAt?new sn(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new sn(t.startAt.position,t.startAt.inclusive):null;return Dn(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function $n(t,e,n){return new Pn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Hn(t,e){return Nn(Un(t),Un(e))&&t.limitType===e.limitType}function Bn(t){return`${An(Un(t))}|lt:${t.limitType}`}function zn(t){return`Query(target=${function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map((t=>_n(t))).join(", ")}]`),Pt(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map((t=>function(t){return`${t.field.canonicalString()} (${t.dir})`}(t))).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((t=>We(t))).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((t=>We(t))).join(",")),`Target(${e})`}(Un(t))}; limitType=${t.limitType})`}function Wn(t,e){return e.isFoundDocument()&&function(t,e){const n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):ot.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(const n of jn(t))if(!n.field.isKeyField()&&null===e.data.field(n.field))return!1;return!0}(t,e)&&function(t,e){for(const n of t.filters)if(!n.matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!function(t,e,n){const r=an(t,e,n);return t.inclusive?r<=0:r<0}(t.startAt,jn(t),e))&&!(t.endAt&&!function(t,e,n){const r=an(t,e,n);return t.inclusive?r>=0:r>0}(t.endAt,jn(t),e))}(t,e)}function qn(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Kn(t){return(e,n)=>{let r=!1;for(const i of jn(t)){const t=Gn(i,e,n);if(0!==t)return t;r=r||i.field.isKeyField()}return 0}}function Gn(t,e,n){const r=t.field.isKeyField()?ot.comparator(e.key,n.key):function(t,e,n){const r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?He(r,i):N(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return N(19790,{direction:t.dir})}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,t))return i}has(t){return void 0!==this.get(t)}set(t,e){const n=this.mapKeyFn(t),r=this.inner[n];if(void 0===r)return this.inner[n]=[[t,e]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(t){le(this.inner,((e,n)=>{for(const[r,i]of n)t(r,i)}))}isEmpty(){return he(this.inner)}size(){return this.innerSize}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qn=new de(ot.comparator);function Xn(){return Qn}const Jn=new de(ot.comparator);function Zn(...t){let e=Jn;for(const n of t)e=e.insert(n.key,n);return e}function tr(t){let e=Jn;return t.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function er(){return rr()}function nr(){return rr()}function rr(){return new Yn((t=>t.toString()),((t,e)=>t.isEqual(e)))}const ir=new de(ot.comparator),or=new me(ot.comparator);function sr(...t){let e=or;for(const n of t)e=e.add(n);return e}const ar=new me(G);function cr(){return ar}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ur(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rt(e)?"-0":e}}function lr(t){return{integerValue:""+t}}function hr(t,e){return Mt(e)?lr(e):ur(t,e)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(){this._=void 0}}function fr(t,e,n){return t instanceof gr?function(t,e){const n={fields:{[Se]:{stringValue:Ce},[ke]:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&xe(e)&&(e=De(e)),e&&(n.fields[Ie]=e),{mapValue:n}}(n,e):t instanceof yr?vr(t,e):t instanceof _r?wr(t,e):function(t,e){const n=mr(t,e),r=Er(n)+Er(t.Ae);return Ge(n)&&Ge(t.Ae)?lr(r):ur(t.serializer,r)}(t,e)}function pr(t,e,n){return t instanceof yr?vr(t,e):t instanceof _r?wr(t,e):n}function mr(t,e){return t instanceof br?function(t){return Ge(t)||function(t){return!!t&&"doubleValue"in t}(t)}(e)?e:{integerValue:0}:null}class gr extends dr{}class yr extends dr{constructor(t){super(),this.elements=t}}function vr(t,e){const n=Tr(e);for(const r of t.elements)n.some((t=>Ve(t,r)))||n.push(r);return{arrayValue:{values:n}}}class _r extends dr{constructor(t){super(),this.elements=t}}function wr(t,e){let n=Tr(e);for(const r of t.elements)n=n.filter((t=>!Ve(t,r)));return{arrayValue:{values:n}}}class br extends dr{constructor(t,e){super(),this.serializer=t,this.Ae=e}}function Er(t){return Ee(t.integerValue||t.doubleValue)}function Tr(t){return Ye(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cr(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof yr&&e instanceof yr||t instanceof _r&&e instanceof _r?Z(t.elements,e.elements,Ve):t instanceof br&&e instanceof br?Ve(t.Ae,e.Ae):t instanceof gr&&e instanceof gr}(t.transform,e.transform)}class Sr{constructor(t,e){this.version=t,this.transformResults=e}}class Ir{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Ir}static exists(t){return new Ir(void 0,t)}static updateTime(t){return new Ir(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function kr(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class xr{}function Dr(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new Ur(t.key,Ir.none()):new Rr(t.key,t.data,Ir.none());{const n=t.data,r=nn.empty();let i=new me(it.comparator);for(let t of e.fields)if(!i.has(t)){let e=n.field(t);null===e&&t.length>1&&(t=t.popLast(),e=n.field(t)),null===e?r.delete(t):r.set(t,e),i=i.add(t)}return new Mr(t.key,r,new ye(i.toArray()),Ir.none())}}function Ar(t,e,n){t instanceof Rr?function(t,e,n){const r=t.value.clone(),i=Fr(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof Mr?function(t,e,n){if(!kr(t.precondition,e))return void e.convertToUnknownDocument(n.version);const r=Fr(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(Lr(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Nr(t,e,n,r){return t instanceof Rr?function(t,e,n,r){if(!kr(t.precondition,e))return n;const i=t.value.clone(),o=jr(t.fieldTransforms,r,e);return i.setAll(o),e.convertToFoundDocument(e.version,i).setHasLocalMutations(),null}(t,e,n,r):t instanceof Mr?function(t,e,n,r){if(!kr(t.precondition,e))return n;const i=jr(t.fieldTransforms,r,e),o=e.data;return o.setAll(Lr(t)),o.setAll(i),e.convertToFoundDocument(e.version,o).setHasLocalMutations(),null===n?null:n.unionWith(t.fieldMask.fields).unionWith(t.fieldTransforms.map((t=>t.field)))}(t,e,n,r):function(t,e,n){return kr(t.precondition,e)?(e.convertToNoDocument(e.version).setHasLocalMutations(),null):n}(t,e,n)}function Or(t,e){let n=null;for(const r of t.fieldTransforms){const t=e.data.field(r.field),i=mr(r.transform,t||null);null!=i&&(null===n&&(n=nn.empty()),n.set(r.field,i))}return n||null}function Pr(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Z(t,e,((t,e)=>Cr(t,e)))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Rr extends xr{constructor(t,e,n,r=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Mr extends xr{constructor(t,e,n,r,i=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Lr(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function Fr(t,e,n){const r=new Map;P(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,pr(s,a,n[i]))}return r}function jr(t,e,n){const r=new Map;for(const i of t){const t=i.transform,o=n.data.field(i.field);r.set(i.field,fr(t,o,e))}return r}class Ur extends xr{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Vr extends xr{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const e=this.mutations[r];e.key.isEqual(t.key)&&Ar(e,t,n[r])}}applyToLocalView(t,e){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(e=Nr(n,t,e,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(e=Nr(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const n=nr();return this.mutations.forEach((r=>{const i=t.get(r.key),o=i.overlayedDocument;let s=this.applyToLocalView(o,i.mutatedFields);s=e.has(r.key)?null:s;const a=Dr(o,s);null!==a&&n.set(r.key,a),o.isValidDocument()||o.convertToNoDocument(vt.min())})),n}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),sr())}isEqual(t){return this.batchId===t.batchId&&Z(this.mutations,t.mutations,((t,e)=>Pr(t,e)))&&Z(this.baseMutations,t.baseMutations,((t,e)=>Pr(t,e)))}}class Hr{constructor(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}static from(t,e,n){P(t.mutations.length===n.length,58842,{me:t.mutations.length,fe:n.length});let r=function(){return ir}();const i=t.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,n[o].version);return new Hr(t,e,n,r)}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class zr{constructor(t,e){this.count=t,this.unchangedNames=e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wr,qr;function Kr(t){switch(t){case M.OK:return N(64938);case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0;default:return N(15467,{code:t})}}function Gr(t){if(void 0===t)return x("GRPC error has no .code"),M.UNKNOWN;switch(t){case Wr.OK:return M.OK;case Wr.CANCELLED:return M.CANCELLED;case Wr.UNKNOWN:return M.UNKNOWN;case Wr.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case Wr.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case Wr.INTERNAL:return M.INTERNAL;case Wr.UNAVAILABLE:return M.UNAVAILABLE;case Wr.UNAUTHENTICATED:return M.UNAUTHENTICATED;case Wr.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case Wr.NOT_FOUND:return M.NOT_FOUND;case Wr.ALREADY_EXISTS:return M.ALREADY_EXISTS;case Wr.PERMISSION_DENIED:return M.PERMISSION_DENIED;case Wr.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case Wr.ABORTED:return M.ABORTED;case Wr.OUT_OF_RANGE:return M.OUT_OF_RANGE;case Wr.UNIMPLEMENTED:return M.UNIMPLEMENTED;case Wr.DATA_LOSS:return M.DATA_LOSS;default:return N(39323,{code:t})}}(qr=Wr||(Wr={}))[qr.OK=0]="OK",qr[qr.CANCELLED=1]="CANCELLED",qr[qr.UNKNOWN=2]="UNKNOWN",qr[qr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qr[qr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qr[qr.NOT_FOUND=5]="NOT_FOUND",qr[qr.ALREADY_EXISTS=6]="ALREADY_EXISTS",qr[qr.PERMISSION_DENIED=7]="PERMISSION_DENIED",qr[qr.UNAUTHENTICATED=16]="UNAUTHENTICATED",qr[qr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qr[qr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qr[qr.ABORTED=10]="ABORTED",qr[qr.OUT_OF_RANGE=11]="OUT_OF_RANGE",qr[qr.UNIMPLEMENTED=12]="UNIMPLEMENTED",qr[qr.INTERNAL=13]="INTERNAL",qr[qr.UNAVAILABLE=14]="UNAVAILABLE",qr[qr.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let Yr=null;
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qr(){return new TextEncoder}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xr=new r([4294967295,4294967295],0);function Jr(t){const e=Qr().encode(t),n=new i;return n.update(e),new Uint8Array(n.digest())}function Zr(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new r([n,i],0),new r([o,s],0)]}class ti{constructor(t,e,n){if(this.bitmap=t,this.padding=e,this.hashCount=n,e<0||e>=8)throw new ei(`Invalid padding: ${e}`);if(n<0)throw new ei(`Invalid hash count: ${n}`);if(t.length>0&&0===this.hashCount)throw new ei(`Invalid hash count: ${n}`);if(0===t.length&&0!==e)throw new ei(`Invalid padding when bitmap length is 0: ${e}`);this.ge=8*t.length-e,this.pe=r.fromNumber(this.ge)}ye(t,e,n){let i=t.add(e.multiply(r.fromNumber(n)));return 1===i.compare(Xr)&&(i=new r([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(0===this.ge)return!1;const e=Jr(t),[n,r]=Zr(e);for(let i=0;i<this.hashCount;i++){const t=this.ye(n,r,i);if(!this.we(t))return!1}return!0}static create(t,e,n){const r=t%8==0?0:8-t%8,i=new Uint8Array(Math.ceil(t/8)),o=new ti(i,r,e);return n.forEach((t=>o.insert(t))),o}insert(t){if(0===this.ge)return;const e=Jr(t),[n,r]=Zr(e);for(let i=0;i<this.hashCount;i++){const t=this.ye(n,r,i);this.Se(t)}}Se(t){const e=Math.floor(t/8),n=t%8;this.bitmap[e]|=1<<n}}class ei extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,e,n){const r=new Map;return r.set(t,ri.createSynthesizedTargetChangeForCurrentChange(t,e,n)),new ni(vt.min(),r,new de(G),Xn(),sr())}}class ri{constructor(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,e,n){return new ri(n,e,sr(),sr(),sr())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(t,e,n,r){this.be=t,this.removedTargetIds=e,this.key=n,this.De=r}}class oi{constructor(t,e){this.targetId=t,this.Ce=e}}class si{constructor(t,e,n=_e.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r}}class ai{constructor(){this.ve=0,this.Fe=li(),this.Me=_e.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return 0!==this.ve}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=sr(),e=sr(),n=sr();return this.Fe.forEach(((r,i)=>{switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:N(38017,{changeType:i})}})),new ri(this.Me,this.xe,t,e,n)}qe(){this.Oe=!1,this.Fe=li()}Qe(t,e){this.Oe=!0,this.Fe=this.Fe.insert(t,e)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,P(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class ci{constructor(t){this.Ge=t,this.ze=new Map,this.je=Xn(),this.Je=ui(),this.He=ui(),this.Ye=new de(G)}Ze(t){for(const e of t.be)t.De&&t.De.isFoundDocument()?this.Xe(e,t.De):this.et(e,t.key,t.De);for(const e of t.removedTargetIds)this.et(e,t.key,t.De)}tt(t){this.forEachTarget(t,(e=>{const n=this.nt(e);switch(t.state){case 0:this.rt(e)&&n.Le(t.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(t.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(e);break;case 3:this.rt(e)&&(n.We(),n.Le(t.resumeToken));break;case 4:this.rt(e)&&(this.it(e),n.Le(t.resumeToken));break;default:N(56790,{state:t.state})}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ze.forEach(((t,n)=>{this.rt(n)&&e(n)}))}st(t){const e=t.targetId,n=t.Ce.count,r=this.ot(e);if(r){const i=r.target;if(On(i))if(0===n){const t=new ot(i.path);this.et(e,t,on.newNoDocument(t,vt.min()))}else P(1===n,20013,{expectedCount:n});else{const r=this._t(e);if(r!==n){const n=this.ut(t),i=n?this.ct(n,t,r):1;if(0!==i){this.it(e);const t=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(e,t)}Yr?.lt(function(t,e,n,r,i){const o={localCacheCount:t,existenceFilterCount:e.count,databaseId:n.database,projectId:n.projectId},s=e.unchangedNames;return s&&(o.bloomFilter={applied:0===i,hashCount:s?.hashCount??0,bitmapLength:s?.bits?.bitmap?.length??0,padding:s?.bits?.padding??0,mightContain:t=>r?.mightContain(t)??!1}),o}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(r,t.Ce,this.Ge.ht(),n,i))}}}}ut(t){const e=t.Ce.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=e;let o,s;try{o=Te(n).toUint8Array()}catch(t){if(t instanceof ve)return D("Decoding the base64 bloom filter in existence filter failed ("+t.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw t}try{s=new ti(o,r,i)}catch(t){return D(t instanceof ei?"BloomFilter error: ":"Applying bloom filter failed: ",t),null}return 0===s.ge?null:s}ct(t,e,n){return e.Ce.count===n-this.Pt(t,e.targetId)?0:2}Pt(t,e){const n=this.Ge.getRemoteKeysForTarget(e);let r=0;return n.forEach((n=>{const i=this.Ge.ht(),o=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;t.mightContain(o)||(this.et(e,n,null),r++)})),r}Tt(t){const e=new Map;this.ze.forEach(((n,r)=>{const i=this.ot(r);if(i){if(n.current&&On(i.target)){const e=new ot(i.target.path);this.It(e).has(r)||this.Et(r,e)||this.et(r,e,on.newNoDocument(e,t))}n.Be&&(e.set(r,n.ke()),n.qe())}}));let n=sr();this.He.forEach(((t,e)=>{let r=!0;e.forEachWhile((t=>{const e=this.ot(t);return!e||"TargetPurposeLimboResolution"===e.purpose||(r=!1,!1)})),r&&(n=n.add(t))})),this.je.forEach(((e,n)=>n.setReadTime(t)));const r=new ni(t,e,this.Ye,this.je,n);return this.je=Xn(),this.Je=ui(),this.He=ui(),this.Ye=new de(G),r}Xe(t,e){if(!this.rt(t))return;const n=this.Et(t,e.key)?2:0;this.nt(t).Qe(e.key,n),this.je=this.je.insert(e.key,e),this.Je=this.Je.insert(e.key,this.It(e.key).add(t)),this.He=this.He.insert(e.key,this.dt(e.key).add(t))}et(t,e,n){if(!this.rt(t))return;const r=this.nt(t);this.Et(t,e)?r.Qe(e,1):r.$e(e),this.He=this.He.insert(e,this.dt(e).delete(t)),this.He=this.He.insert(e,this.dt(e).add(t)),n&&(this.je=this.je.insert(e,n))}removeTarget(t){this.ze.delete(t)}_t(t){const e=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let e=this.ze.get(t);return e||(e=new ai,this.ze.set(t,e)),e}dt(t){let e=this.He.get(t);return e||(e=new me(G),this.He=this.He.insert(t,e)),e}It(t){let e=this.Je.get(t);return e||(e=new me(G),this.Je=this.Je.insert(t,e)),e}rt(t){const e=null!==this.ot(t);return e||k("WatchChangeAggregator","Detected inactive target",t),e}ot(t){const e=this.ze.get(t);return e&&e.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new ai),this.Ge.getRemoteKeysForTarget(t).forEach((e=>{this.et(t,e,null)}))}Et(t,e){return this.Ge.getRemoteKeysForTarget(t).has(e)}}function ui(){return new de(ot.comparator)}function li(){return new de(ot.comparator)}const hi=(()=>{const t={asc:"ASCENDING",desc:"DESCENDING"};return t})(),di=(()=>{const t={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};return t})(),fi=(()=>{const t={and:"AND",or:"OR"};return t})();class pi{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function mi(t,e){return t.useProto3Json||Pt(e)?e:{value:e}}function gi(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function yi(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function vi(t,e){return gi(t,e.toTimestamp())}function _i(t){return P(!!t,49232),vt.fromTimestamp(function(t){const e=be(t);return new yt(e.seconds,e.nanos)}(t))}function wi(t,e){return bi(t,e).canonicalString()}function bi(t,e){const n=function(t){return new nt(["projects",t.projectId,"databases",t.database])}(t).child("documents");return void 0===e?n:n.child(e)}function Ei(t){const e=nt.fromString(t);return P(Wi(e),10190,{key:e.toString()}),e}function Ti(t,e){return wi(t.databaseId,e.path)}function Ci(t,e){const n=Ei(e);if(n.get(1)!==t.databaseId.projectId)throw new L(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new L(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ot(xi(n))}function Si(t,e){return wi(t.databaseId,e)}function Ii(t){const e=Ei(t);return 4===e.length?nt.emptyPath():xi(e)}function ki(t){return new nt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function xi(t){return P(t.length>4&&"documents"===t.get(4),29091,{key:t.toString()}),t.popFirst(5)}function Di(t,e,n){return{name:Ti(t,e),fields:n.value.mapValue.fields}}function Ai(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:N(39313,{state:t})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.useProto3Json?(P(void 0===e||"string"==typeof e,58123),_e.fromBase64String(e||"")):(P(void 0===e||e instanceof Buffer||e instanceof Uint8Array,16193),_e.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(t){const e=void 0===t.code?M.UNKNOWN:Gr(t.code);return new L(e,t.message||"")}(s);n=new si(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Ci(t,r.document.name),o=_i(r.document.updateTime),s=r.document.createTime?_i(r.document.createTime):vt.min(),a=new nn({mapValue:{fields:r.document.fields}}),c=on.newFoundDocument(i,o,s,a),u=r.targetIds||[],l=r.removedTargetIds||[];n=new ii(u,l,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Ci(t,r.document),o=r.readTime?_i(r.readTime):vt.min(),s=on.newNoDocument(i,o),a=r.removedTargetIds||[];n=new ii([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Ci(t,r.document),o=r.removedTargetIds||[];n=new ii([],o,i,null)}else{if(!("filter"in e))return N(11601,{Rt:e});{e.filter;const t=e.filter;t.targetId;const{count:r=0,unchangedNames:i}=t,o=new zr(r,i),s=t.targetId;n=new oi(s,o)}}return n}function Ni(t,e){let n;if(e instanceof Rr)n={update:Di(t,e.key,e.value)};else if(e instanceof Ur)n={delete:Ti(t,e.key)};else if(e instanceof Mr)n={update:Di(t,e.key,e.data),updateMask:zi(e.fieldMask)};else{if(!(e instanceof Vr))return N(16599,{Vt:e.type});n={verify:Ti(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((t=>function(t,e){const n=e.transform;if(n instanceof gr)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof yr)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof _r)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof br)return{fieldPath:e.field.canonicalString(),increment:n.Ae};throw N(20930,{transform:e.transform})}(0,t)))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:vi(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:N(27497)}(t,e.precondition)),n}function Oi(t,e){return t&&t.length>0?(P(void 0!==e,14353),t.map((t=>function(t,e){let n=t.updateTime?_i(t.updateTime):_i(e);return n.isEqual(vt.min())&&(n=_i(e)),new Sr(n,t.transformResults||[])}(t,e)))):[]}function Pi(t,e){return{documents:[Si(t,e.path)]}}function Ri(t,e){const n={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Si(t,i);const o=function(t){if(0!==t.length)return Bi(fn.create(t,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const s=function(t){if(0!==t.length)return t.map((t=>function(t){return{field:$i(t.field),direction:ji(t.dir)}}(t)))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const a=mi(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(t){return{before:t.inclusive,values:t.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(t){return{before:!t.inclusive,values:t.position}}(e.endAt)),{ft:n,parent:i}}function Mi(t){let e=Ii(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){P(1===r,65062);const t=n.from[0];t.allDescendants?i=t.collectionId:e=e.child(t.collectionId)}let o=[];n.where&&(o=function(t){const e=Fi(t);return e instanceof fn&&mn(e)?e.getFilters():[e]}(n.where));let s=[];n.orderBy&&(s=function(t){return t.map((t=>function(t){return new un(Hi(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)))}(n.orderBy));let a=null;n.limit&&(a=function(t){let e;return e="object"==typeof t?t.value:t,Pt(e)?null:e}(n.limit));let c=null;n.startAt&&(c=function(t){const e=!!t.before,n=t.values||[];return new sn(n,e)}(n.startAt));let u=null;return n.endAt&&(u=function(t){const e=!t.before,n=t.values||[];return new sn(n,e)}(n.endAt)),Rn(e,i,s,o,a,"F",c,u)}function Li(t,e){const n=function(t){switch(t){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return N(28987,{purpose:t})}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}function Fi(t){return void 0!==t.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const e=Hi(t.unaryFilter.field);return dn.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=Hi(t.unaryFilter.field);return dn.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Hi(t.unaryFilter.field);return dn.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Hi(t.unaryFilter.field);return dn.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return N(61313);default:return N(60726)}}(t):void 0!==t.fieldFilter?function(t){return dn.create(Hi(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return N(58110);default:return N(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(t):void 0!==t.compositeFilter?function(t){return fn.create(t.compositeFilter.filters.map((t=>Fi(t))),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return N(1026)}}(t.compositeFilter.op))}(t):N(30097,{filter:t})}function ji(t){return hi[t]}function Ui(t){return di[t]}function Vi(t){return fi[t]}function $i(t){return{fieldPath:t.canonicalString()}}function Hi(t){return it.fromServerFormat(t.fieldPath)}function Bi(t){return t instanceof dn?function(t){if("=="===t.op){if(Xe(t.value))return{unaryFilter:{field:$i(t.field),op:"IS_NAN"}};if(Qe(t.value))return{unaryFilter:{field:$i(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Xe(t.value))return{unaryFilter:{field:$i(t.field),op:"IS_NOT_NAN"}};if(Qe(t.value))return{unaryFilter:{field:$i(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$i(t.field),op:Ui(t.op),value:t.value}}}(t):t instanceof fn?function(t){const e=t.getFilters().map((t=>Bi(t)));return 1===e.length?e[0]:{compositeFilter:{op:Vi(t.op),filters:e}}}(t):N(54877,{filter:t})}function zi(t){const e=[];return t.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Wi(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(t,e,n,r,i=vt.min(),o=vt.min(),s=_e.EMPTY_BYTE_STRING,a=null){this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=a}withSequenceNumber(t){return new qi(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new qi(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new qi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new qi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(t){this.yt=t}}function Gi(t){const e=Mi({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?$n(e,e.limit,"L"):e}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(){}Dt(t,e){this.Ct(t,e),e.vt()}Ct(t,e){if("nullValue"in t)this.Ft(e,5);else if("booleanValue"in t)this.Ft(e,10),e.Mt(t.booleanValue?1:0);else if("integerValue"in t)this.Ft(e,15),e.Mt(Ee(t.integerValue));else if("doubleValue"in t){const n=Ee(t.doubleValue);isNaN(n)?this.Ft(e,13):(this.Ft(e,15),Rt(n)?e.Mt(0):e.Mt(n))}else if("timestampValue"in t){let n=t.timestampValue;this.Ft(e,20),"string"==typeof n&&(n=be(n)),e.xt(`${n.seconds||""}`),e.Mt(n.nanos||0)}else if("stringValue"in t)this.Ot(t.stringValue,e),this.Nt(e);else if("bytesValue"in t)this.Ft(e,30),e.Bt(Te(t.bytesValue)),this.Nt(e);else if("referenceValue"in t)this.Lt(t.referenceValue,e);else if("geoPointValue"in t){const n=t.geoPointValue;this.Ft(e,45),e.Mt(n.latitude||0),e.Mt(n.longitude||0)}else"mapValue"in t?en(t)?this.Ft(e,Number.MAX_SAFE_INTEGER):Ze(t)?this.kt(t.mapValue,e):(this.qt(t.mapValue,e),this.Nt(e)):"arrayValue"in t?(this.Qt(t.arrayValue,e),this.Nt(e)):N(19022,{$t:t})}Ot(t,e){this.Ft(e,25),this.Ut(t,e)}Ut(t,e){e.xt(t)}qt(t,e){const n=t.fields||{};this.Ft(e,55);for(const r of Object.keys(n))this.Ot(r,e),this.Ct(n[r],e)}kt(t,e){const n=t.fields||{};this.Ft(e,53);const r=je,i=n[r].arrayValue?.values?.length||0;this.Ft(e,15),e.Mt(Ee(i)),this.Ot(r,e),this.Ct(n[r],e)}Qt(t,e){const n=t.values||[];this.Ft(e,50);for(const r of n)this.Ct(r,e)}Lt(t,e){this.Ft(e,37),ot.fromName(t).path.forEach((t=>{this.Ft(e,60),this.Ut(t,e)}))}Ft(t,e){t.Mt(e)}Nt(t){t.Mt(2)}}Yi.Kt=new Yi;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Qi{constructor(){this.Cn=new Xi}addToCollectionParentIndex(t,e){return this.Cn.add(e),xt.resolve()}getCollectionParents(t,e){return xt.resolve(this.Cn.getEntries(e))}addFieldIndex(t,e){return xt.resolve()}deleteFieldIndex(t,e){return xt.resolve()}deleteAllFieldIndexes(t){return xt.resolve()}createTargetIndexes(t,e){return xt.resolve()}getDocumentsMatchingTarget(t,e){return xt.resolve(null)}getIndexType(t,e){return xt.resolve(0)}getFieldIndexes(t,e){return xt.resolve([])}getNextCollectionGroupToUpdate(t){return xt.resolve(null)}getMinOffset(t,e){return xt.resolve(Tt.min())}getMinOffsetFromCollectionGroup(t,e){return xt.resolve(Tt.min())}updateCollectionGroup(t,e,n){return xt.resolve()}updateIndexEntries(t,e){return xt.resolve()}}class Xi{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new me(nt.comparator),i=!r.has(n);return this.index[e]=r.add(n),i}has(t){const e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)}getEntries(t){return(this.index[t]||new me(nt.comparator)).toArray()}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Uint8Array(0);
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Ji={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Zi=41943040;class to{static withCacheSize(t){return new to(t,to.DEFAULT_COLLECTION_PERCENTILE,to.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */to.DEFAULT_COLLECTION_PERCENTILE=10,to.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,to.DEFAULT=new to(Zi,to.DEFAULT_COLLECTION_PERCENTILE,to.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),to.DISABLED=new to(-1,0,0);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class eo{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new eo(0)}static cr(){return new eo(-1)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const no="LruGarbageCollector",ro=1048576;function io([t,e],[n,r]){const i=G(t,n);return 0===i?G(e,r):i}class oo{constructor(t){this.Ir=t,this.buffer=new me(io),this.Er=0}dr(){return++this.Er}Ar(t){const e=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(e);else{const t=this.buffer.last();io(e,t)<0&&(this.buffer=this.buffer.delete(t).add(e))}}get maxValue(){return this.buffer.last()[0]}}class so{constructor(t,e,n){this.garbageCollector=t,this.asyncQueue=e,this.localStore=n,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Vr(t){k(no,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){At(t)?k(no,"Ignoring IndexedDB error during garbage collection: ",t):await kt(t)}await this.Vr(3e5)}))}}class ao{constructor(t,e){this.mr=t,this.params=e}calculateTargetCount(t,e){return this.mr.gr(t).next((t=>Math.floor(e/100*t)))}nthSequenceNumber(t,e){if(0===e)return xt.resolve(Nt.ce);const n=new oo(e);return this.mr.forEachTarget(t,(t=>n.Ar(t.sequenceNumber))).next((()=>this.mr.pr(t,(t=>n.Ar(t))))).next((()=>n.maxValue))}removeTargets(t,e,n){return this.mr.removeTargets(t,e,n)}removeOrphanedDocuments(t,e){return this.mr.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?(k("LruGarbageCollector","Garbage collection skipped; disabled"),xt.resolve(Ji)):this.getCacheSize(t).next((n=>n<this.params.cacheSizeCollectionThreshold?(k("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ji):this.yr(t,e)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,e){let n,r,i,o,s,c,u;const l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((e=>(e>this.params.maximumSequenceNumbersToCollect?(k("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${e}`),r=this.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),this.nthSequenceNumber(t,r)))).next((r=>(n=r,s=Date.now(),this.removeTargets(t,n,e)))).next((e=>(i=e,c=Date.now(),this.removeOrphanedDocuments(t,n)))).next((t=>(u=Date.now(),I()<=a.$b.DEBUG&&k("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-l}ms\n\tDetermined least recently used ${r} in `+(s-o)+"ms\n"+`\tRemoved ${i} targets in `+(c-s)+"ms\n"+`\tRemoved ${t} documents in `+(u-c)+"ms\n"+`Total Duration: ${u-l}ms`),xt.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t}))))}}function co(t,e){return new ao(t,e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class uo{constructor(){this.changes=new Yn((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,on.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return void 0!==n?xt.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class lo{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(t,e,n,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=r}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next((r=>(n=r,this.remoteDocumentCache.getEntry(t,e)))).next((t=>(null!==n&&Nr(n.mutation,t,ye.empty(),yt.now()),t)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.getLocalViewOfDocuments(t,e,sr()).next((()=>e))))}getLocalViewOfDocuments(t,e,n=sr()){const r=er();return this.populateOverlays(t,r,e).next((()=>this.computeViews(t,e,r,n).next((t=>{let e=Zn();return t.forEach(((t,n)=>{e=e.insert(t,n.overlayedDocument)})),e}))))}getOverlayedDocuments(t,e){const n=er();return this.populateOverlays(t,n,e).next((()=>this.computeViews(t,e,n,sr())))}populateOverlays(t,e,n){const r=[];return n.forEach((t=>{e.has(t)||r.push(t)})),this.documentOverlayCache.getOverlays(t,r).next((t=>{t.forEach(((t,n)=>{e.set(t,n)}))}))}computeViews(t,e,n,r){let i=Xn();const o=rr(),s=function(){return rr()}();return e.forEach(((t,e)=>{const s=n.get(e.key);r.has(e.key)&&(void 0===s||s.mutation instanceof Mr)?i=i.insert(e.key,e):void 0!==s?(o.set(e.key,s.mutation.getFieldMask()),Nr(s.mutation,e,s.mutation.getFieldMask(),yt.now())):o.set(e.key,ye.empty())})),this.recalculateAndSaveOverlays(t,i).next((t=>(t.forEach(((t,e)=>o.set(t,e))),e.forEach(((t,e)=>s.set(t,new lo(e,o.get(t)??null)))),s)))}recalculateAndSaveOverlays(t,e){const n=rr();let r=new de(((t,e)=>t-e)),i=sr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((t=>{for(const i of t)i.keys().forEach((t=>{const o=e.get(t);if(null===o)return;let s=n.get(t)||ye.empty();s=i.applyToLocalView(o,s),n.set(t,s);const a=(r.get(i.batchId)||sr()).add(t);r=r.insert(i.batchId,a)}))})).next((()=>{const o=[],s=r.getReverseIterator();for(;s.hasNext();){const r=s.getNext(),a=r.key,c=r.value,u=nr();c.forEach((t=>{if(!i.has(t)){const r=Dr(e.get(t),n.get(t));null!==r&&u.set(t,r),i=i.add(t)}})),o.push(this.documentOverlayCache.saveOverlays(t,a,u))}return xt.waitFor(o)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.recalculateAndSaveOverlays(t,e)))}getDocumentsMatchingQuery(t,e,n,r){return function(t){return ot.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):Fn(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n,r):this.getDocumentsMatchingCollectionQuery(t,e,n,r)}getNextDocuments(t,e,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,r).next((i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,r-i.size):xt.resolve(er());let s=_t,a=i;return o.next((e=>xt.forEach(e,((e,n)=>(s<n.largestBatchId&&(s=n.largestBatchId),i.get(e)?xt.resolve():this.remoteDocumentCache.getEntry(t,e).next((t=>{a=a.insert(e,t)}))))).next((()=>this.populateOverlays(t,e,i))).next((()=>this.computeViews(t,a,e,sr()))).next((t=>({batchId:s,changes:tr(t)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new ot(e)).next((t=>{let e=Zn();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))}getDocumentsMatchingCollectionGroupQuery(t,e,n,r){const i=e.collectionGroup;let o=Zn();return this.indexManager.getCollectionParents(t,i).next((s=>xt.forEach(s,(s=>{const a=function(t,e){return new Pn(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return this.getDocumentsMatchingCollectionQuery(t,a,n,r).next((t=>{t.forEach(((t,e)=>{o=o.insert(t,e)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(t,e,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n,i,r)))).next((t=>{i.forEach(((e,n)=>{const r=n.getKey();null===t.get(r)&&(t=t.insert(r,on.newInvalidDocument(r)))}));let n=Zn();return t.forEach(((t,r)=>{const o=i.get(t);void 0!==o&&Nr(o.mutation,r,ye.empty(),yt.now()),Wn(e,r)&&(n=n.insert(t,r))})),n}))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,e){return xt.resolve(this.Lr.get(e))}saveBundleMetadata(t,e){return this.Lr.set(e.id,function(t){return{id:t.id,version:t.version,createTime:_i(t.createTime)}}(e)),xt.resolve()}getNamedQuery(t,e){return xt.resolve(this.kr.get(e))}saveNamedQuery(t,e){return this.kr.set(e.name,function(t){return{name:t.name,query:Gi(t.bundledQuery),readTime:_i(t.readTime)}}(e)),xt.resolve()}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(){this.overlays=new de(ot.comparator),this.qr=new Map}getOverlay(t,e){return xt.resolve(this.overlays.get(e))}getOverlays(t,e){const n=er();return xt.forEach(e,(e=>this.getOverlay(t,e).next((t=>{null!==t&&n.set(e,t)})))).next((()=>n))}saveOverlays(t,e,n){return n.forEach(((n,r)=>{this.St(t,e,r)})),xt.resolve()}removeOverlaysForBatchId(t,e,n){const r=this.qr.get(n);return void 0!==r&&(r.forEach((t=>this.overlays=this.overlays.remove(t))),this.qr.delete(n)),xt.resolve()}getOverlaysForCollection(t,e,n){const r=er(),i=e.length+1,o=new ot(e.child("")),s=this.overlays.getIteratorFrom(o);for(;s.hasNext();){const t=s.getNext().value,o=t.getKey();if(!e.isPrefixOf(o.path))break;o.path.length===i&&t.largestBatchId>n&&r.set(t.getKey(),t)}return xt.resolve(r)}getOverlaysForCollectionGroup(t,e,n,r){let i=new de(((t,e)=>t-e));const o=this.overlays.getIterator();for(;o.hasNext();){const t=o.getNext().value;if(t.getKey().getCollectionGroup()===e&&t.largestBatchId>n){let e=i.get(t.largestBatchId);null===e&&(e=er(),i=i.insert(t.largestBatchId,e)),e.set(t.getKey(),t)}}const s=er(),a=i.getIterator();for(;a.hasNext();)if(a.getNext().value.forEach(((t,e)=>s.set(t,e))),s.size()>=r)break;return xt.resolve(s)}St(t,e,n){const r=this.overlays.get(n.key);if(null!==r){const t=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,t)}this.overlays=this.overlays.insert(n.key,new Br(e,n));let i=this.qr.get(e);void 0===i&&(i=sr(),this.qr.set(e,i)),this.qr.set(e,i.add(n.key))}}
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(){this.sessionToken=_e.EMPTY_BYTE_STRING}getSessionToken(t){return xt.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,xt.resolve()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(){this.Qr=new me(yo.$r),this.Ur=new me(yo.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,e){const n=new yo(t,e);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(t,e){t.forEach((t=>this.addReference(t,e)))}removeReference(t,e){this.Gr(new yo(t,e))}zr(t,e){t.forEach((t=>this.removeReference(t,e)))}jr(t){const e=new ot(new nt([])),n=new yo(e,t),r=new yo(e,t+1),i=[];return this.Ur.forEachInRange([n,r],(t=>{this.Gr(t),i.push(t.key)})),i}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const e=new ot(new nt([])),n=new yo(e,t),r=new yo(e,t+1);let i=sr();return this.Ur.forEachInRange([n,r],(t=>{i=i.add(t.key)})),i}containsKey(t){const e=new yo(t,0),n=this.Qr.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}class yo{constructor(t,e){this.key=t,this.Yr=e}static $r(t,e){return ot.comparator(t.key,e.key)||G(t.Yr,e.Yr)}static Kr(t,e){return G(t.Yr,e.Yr)||ot.comparator(t.key,e.key)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.tr=1,this.Zr=new me(yo.$r)}checkEmpty(t){return xt.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,n,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new $r(i,e,n,r);this.mutationQueue.push(o);for(const s of r)this.Zr=this.Zr.add(new yo(s.key,i)),this.indexManager.addToCollectionParentIndex(t,s.key.path.popLast());return xt.resolve(o)}lookupMutationBatch(t,e){return xt.resolve(this.Xr(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,r=this.ei(n),i=r<0?0:r;return xt.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return xt.resolve(0===this.mutationQueue.length?Ot:this.tr-1)}getAllMutationBatches(t){return xt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new yo(e,0),r=new yo(e,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([n,r],(t=>{const e=this.Xr(t.Yr);i.push(e)})),xt.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new me(G);return e.forEach((t=>{const e=new yo(t,0),r=new yo(t,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([e,r],(t=>{n=n.add(t.Yr)}))})),xt.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,r=n.length+1;let i=n;ot.isDocumentKey(i)||(i=i.child(""));const o=new yo(new ot(i),0);let s=new me(G);return this.Zr.forEachWhile((t=>{const e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.Yr)),!0)}),o),xt.resolve(this.ti(s))}ti(t){const e=[];return t.forEach((t=>{const n=this.Xr(t);null!==n&&e.push(n)})),e}removeMutationBatch(t,e){P(0===this.ni(e.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Zr;return xt.forEach(e.mutations,(r=>{const i=new yo(r.key,e.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)})).next((()=>{this.Zr=n}))}ir(t){}containsKey(t,e){const n=new yo(e,0),r=this.Zr.firstAfterOrEqual(n);return xt.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,xt.resolve()}ni(t,e){return this.ei(t)}ei(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}Xr(t){const e=this.ei(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(t){this.ri=t,this.docs=function(){return new de(ot.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const n=e.key,r=this.docs.get(n),i=r?r.size:0,o=this.ri(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return xt.resolve(n?n.document.mutableCopy():on.newInvalidDocument(e))}getEntries(t,e){let n=Xn();return e.forEach((t=>{const e=this.docs.get(t);n=n.insert(t,e?e.document.mutableCopy():on.newInvalidDocument(t))})),xt.resolve(n)}getDocumentsMatchingQuery(t,e,n,r){let i=Xn();const o=e.path,s=new ot(o.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(s);for(;a.hasNext();){const{key:t,value:{document:s}}=a.getNext();if(!o.isPrefixOf(t.path))break;t.path.length>o.length+1||Ct(Et(s),n)<=0||(r.has(s.key)||Wn(e,s))&&(i=i.insert(s.key,s.mutableCopy()))}return xt.resolve(i)}getAllFromCollectionGroup(t,e,n,r){N(9500)}ii(t,e){return xt.forEach(this.docs,(t=>e(t)))}newChangeBuffer(t){return new wo(this)}getSize(t){return xt.resolve(this.size)}}class wo extends uo{constructor(t){super(),this.Nr=t}applyChanges(t){const e=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?e.push(this.Nr.addEntry(t,r)):this.Nr.removeEntry(n)})),xt.waitFor(e)}getFromCache(t,e){return this.Nr.getEntry(t,e)}getAllFromCache(t,e){return this.Nr.getEntries(t,e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(t){this.persistence=t,this.si=new Yn((t=>An(t)),Nn),this.lastRemoteSnapshotVersion=vt.min(),this.highestTargetId=0,this.oi=0,this._i=new go,this.targetCount=0,this.ai=eo.ur()}forEachTarget(t,e){return this.si.forEach(((t,n)=>e(n))),xt.resolve()}getLastRemoteSnapshotVersion(t){return xt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return xt.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),xt.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.oi&&(this.oi=e),xt.resolve()}Pr(t){this.si.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.ai=new eo(e),this.highestTargetId=e),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,e){return this.Pr(e),this.targetCount+=1,xt.resolve()}updateTargetData(t,e){return this.Pr(e),xt.resolve()}removeTargetData(t,e){return this.si.delete(e.target),this._i.jr(e.targetId),this.targetCount-=1,xt.resolve()}removeTargets(t,e,n){let r=0;const i=[];return this.si.forEach(((o,s)=>{s.sequenceNumber<=e&&null===n.get(s.targetId)&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(t,s.targetId)),r++)})),xt.waitFor(i).next((()=>r))}getTargetCount(t){return xt.resolve(this.targetCount)}getTargetData(t,e){const n=this.si.get(e)||null;return xt.resolve(n)}addMatchingKeys(t,e,n){return this._i.Wr(e,n),xt.resolve()}removeMatchingKeys(t,e,n){this._i.zr(e,n);const r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((e=>{i.push(r.markPotentiallyOrphaned(t,e))})),xt.waitFor(i)}removeMatchingKeysForTargetId(t,e){return this._i.jr(e),xt.resolve()}getMatchingKeysForTargetId(t,e){const n=this._i.Hr(e);return xt.resolve(n)}containsKey(t,e){return xt.resolve(this._i.containsKey(e))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(t,e){this.ui={},this.overlays={},this.ci=new Nt(0),this.li=!1,this.li=!0,this.hi=new mo,this.referenceDelegate=t(this),this.Pi=new bo(this),this.indexManager=new Qi,this.remoteDocumentCache=function(t){return new _o(t)}((t=>this.referenceDelegate.Ti(t))),this.serializer=new Ki(e),this.Ii=new fo(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new po,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.ui[t.toKey()];return n||(n=new vo(e,this.referenceDelegate),this.ui[t.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,e,n){k("MemoryPersistence","Starting transaction:",t);const r=new To(this.ci.next());return this.referenceDelegate.Ei(),n(r).next((t=>this.referenceDelegate.di(r).next((()=>t)))).toPromise().then((t=>(r.raiseOnCommittedEvent(),t)))}Ai(t,e){return xt.or(Object.values(this.ui).map((n=>()=>n.containsKey(t,e))))}}class To extends It{constructor(t){super(),this.currentSequenceNumber=t}}class Co{constructor(t){this.persistence=t,this.Ri=new go,this.Vi=null}static mi(t){return new Co(t)}get fi(){if(this.Vi)return this.Vi;throw N(60996)}addReference(t,e,n){return this.Ri.addReference(n,e),this.fi.delete(n.toString()),xt.resolve()}removeReference(t,e,n){return this.Ri.removeReference(n,e),this.fi.add(n.toString()),xt.resolve()}markPotentiallyOrphaned(t,e){return this.fi.add(e.toString()),xt.resolve()}removeTarget(t,e){this.Ri.jr(e.targetId).forEach((t=>this.fi.add(t.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next((t=>{t.forEach((t=>this.fi.add(t.toString())))})).next((()=>n.removeTargetData(t,e)))}Ei(){this.Vi=new Set}di(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return xt.forEach(this.fi,(n=>{const r=ot.fromPath(n);return this.gi(t,r).next((t=>{t||e.removeEntry(r,vt.min())}))})).next((()=>(this.Vi=null,e.apply(t))))}updateLimboDocument(t,e){return this.gi(t,e).next((t=>{t?this.fi.delete(e.toString()):this.fi.add(e.toString())}))}Ti(t){return 0}gi(t,e){return xt.or([()=>xt.resolve(this.Ri.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ai(t,e)])}}class So{constructor(t,e){this.persistence=t,this.pi=new Yn((t=>Ft(t.path)),((t,e)=>t.isEqual(e))),this.garbageCollector=co(this,e)}static mi(t,e){return new So(t,e)}Ei(){}di(t){return xt.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}gr(t){const e=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((t=>e.next((e=>t+e))))}wr(t){let e=0;return this.pr(t,(t=>{e++})).next((()=>e))}pr(t,e){return xt.forEach(this.pi,((n,r)=>this.br(t,n,r).next((t=>t?xt.resolve():e(r)))))}removeTargets(t,e,n){return this.persistence.getTargetCache().removeTargets(t,e,n)}removeOrphanedDocuments(t,e){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(t,(r=>this.br(t,r,e).next((t=>{t||(n++,i.removeEntry(r,vt.min()))})))).next((()=>i.apply(t))).next((()=>n))}markPotentiallyOrphaned(t,e){return this.pi.set(e,t.currentSequenceNumber),xt.resolve()}removeTarget(t,e){const n=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,n)}addReference(t,e,n){return this.pi.set(n,t.currentSequenceNumber),xt.resolve()}removeReference(t,e,n){return this.pi.set(n,t.currentSequenceNumber),xt.resolve()}updateLimboDocument(t,e){return this.pi.set(e,t.currentSequenceNumber),xt.resolve()}Ti(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=Ke(t.data.value)),e}br(t,e,n){return xt.or([()=>this.persistence.Ai(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const t=this.pi.get(e);return xt.resolve(void 0!==t&&t>n)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Io{constructor(t,e,n,r){this.targetId=t,this.fromCache=e,this.Es=n,this.ds=r}static As(t,e){let n=sr(),r=sr();for(const i of e.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Io(t,e.fromCache,n,r)}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return(0,c.nr)()?8:Dt((0,c.ZQ)())>0?6:4}()}initialize(t,e){this.ps=t,this.indexManager=e,this.Rs=!0}getDocumentsMatchingQuery(t,e,n,r){const i={result:null};return this.ys(t,e).next((t=>{i.result=t})).next((()=>{if(!i.result)return this.ws(t,e,r,n).next((t=>{i.result=t}))})).next((()=>{if(i.result)return;const n=new ko;return this.Ss(t,e,n).next((r=>{if(i.result=r,this.Vs)return this.bs(t,e,n,r.size)}))})).next((()=>i.result))}bs(t,e,n,r){return n.documentReadCount<this.fs?(I()<=a.$b.DEBUG&&k("QueryEngine","SDK will not create cache indexes for query:",zn(e),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),xt.resolve()):(I()<=a.$b.DEBUG&&k("QueryEngine","Query:",zn(e),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.gs*r?(I()<=a.$b.DEBUG&&k("QueryEngine","The SDK decides to create cache indexes for query:",zn(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Un(e))):xt.resolve())}ys(t,e){if(Ln(e))return xt.resolve(null);let n=Un(e);return this.indexManager.getIndexType(t,n).next((r=>0===r?null:(null!==e.limit&&1===r&&(e=$n(e,null,"F"),n=Un(e)),this.indexManager.getDocumentsMatchingTarget(t,n).next((r=>{const i=sr(...r);return this.ps.getDocuments(t,i).next((r=>this.indexManager.getMinOffset(t,n).next((n=>{const o=this.Ds(e,r);return this.Cs(e,o,i,n.readTime)?this.ys(t,$n(e,null,"F")):this.vs(t,o,e,n)}))))})))))}ws(t,e,n,r){return Ln(e)||r.isEqual(vt.min())?xt.resolve(null):this.ps.getDocuments(t,n).next((i=>{const o=this.Ds(e,i);return this.Cs(e,o,n,r)?xt.resolve(null):(I()<=a.$b.DEBUG&&k("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),zn(e)),this.vs(t,o,e,bt(r,_t)).next((t=>t)))}))}Ds(t,e){let n=new me(Kn(t));return e.forEach(((e,r)=>{Wn(t,r)&&(n=n.add(r))})),n}Cs(t,e,n,r){if(null===t.limit)return!1;if(n.size!==e.size)return!0;const i="F"===t.limitType?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(t,e,n){return I()<=a.$b.DEBUG&&k("QueryEngine","Using full collection scan to execute query:",zn(e)),this.ps.getDocumentsMatchingQuery(t,e,Tt.min(),n)}vs(t,e,n,r){return this.ps.getDocumentsMatchingQuery(t,n,r).next((t=>(e.forEach((e=>{t=t.insert(e.key,e)})),t)))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Do="LocalStore",Ao=3e8;class No{constructor(t,e,n,r){this.persistence=t,this.Fs=e,this.serializer=r,this.Ms=new de(G),this.xs=new Yn((t=>An(t)),Nn),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(n)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new ho(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.Ms)))}}function Oo(t,e,n,r){return new No(t,e,n,r)}async function Po(t,e){const n=R(t);return await n.persistence.runTransaction("Handle user change","readonly",(t=>{let r;return n.mutationQueue.getAllMutationBatches(t).next((i=>(r=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(t)))).next((e=>{const i=[],o=[];let s=sr();for(const t of r){i.push(t.batchId);for(const e of t.mutations)s=s.add(e.key)}for(const t of e){o.push(t.batchId);for(const e of t.mutations)s=s.add(e.key)}return n.localDocuments.getDocuments(t,s).next((t=>({Ls:t,removedBatchIds:i,addedBatchIds:o})))}))}))}function Ro(t,e){const n=R(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(t=>{const r=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){const i=n.batch,o=i.keys();let s=xt.resolve();return o.forEach((t=>{s=s.next((()=>r.getEntry(e,t))).next((e=>{const o=n.docVersions.get(t);P(null!==o,48541),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&(e.setReadTime(n.commitVersion),r.addEntry(e)))}))})),s.next((()=>t.mutationQueue.removeMutationBatch(e,i)))}(n,t,e,i).next((()=>i.apply(t))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,r,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,function(t){let e=sr();for(let n=0;n<t.mutationResults.length;++n)t.mutationResults[n].transformResults.length>0&&(e=e.add(t.batch.mutations[n].key));return e}(e)))).next((()=>n.localDocuments.getDocuments(t,r)))}))}function Mo(t){const e=R(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function Lo(t,e){const n=R(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(t=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const s=[];e.targetChanges.forEach(((o,a)=>{const c=i.get(a);if(!c)return;s.push(n.Pi.removeMatchingKeys(t,o.removedDocuments,a).next((()=>n.Pi.addMatchingKeys(t,o.addedDocuments,a))));let u=c.withSequenceNumber(t.currentSequenceNumber);null!==e.targetMismatches.get(a)?u=u.withResumeToken(_e.EMPTY_BYTE_STRING,vt.min()).withLastLimboFreeSnapshotVersion(vt.min()):o.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(o.resumeToken,r)),i=i.insert(a,u),function(t,e,n){if(0===t.resumeToken.approximateByteSize())return!0;const r=e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds();if(r>=Ao)return!0;const i=n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size;return i>0}(c,u,o)&&s.push(n.Pi.updateTargetData(t,u))}));let a=Xn(),c=sr();if(e.documentUpdates.forEach((r=>{e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),s.push(Fo(t,o,e.documentUpdates).next((t=>{a=t.ks,c=t.qs}))),!r.isEqual(vt.min())){const e=n.Pi.getLastRemoteSnapshotVersion(t).next((e=>n.Pi.setTargetsMetadata(t,t.currentSequenceNumber,r)));s.push(e)}return xt.waitFor(s).next((()=>o.apply(t))).next((()=>n.localDocuments.getLocalViewOfDocuments(t,a,c))).next((()=>a))})).then((t=>(n.Ms=i,t)))}function Fo(t,e,n){let r=sr(),i=sr();return n.forEach((t=>r=r.add(t))),e.getEntries(t,r).next((t=>{let r=Xn();return n.forEach(((n,o)=>{const s=t.get(n);o.isFoundDocument()!==s.isFoundDocument()&&(i=i.add(n)),o.isNoDocument()&&o.version.isEqual(vt.min())?(e.removeEntry(n,o.readTime),r=r.insert(n,o)):!s.isValidDocument()||o.version.compareTo(s.version)>0||0===o.version.compareTo(s.version)&&s.hasPendingWrites?(e.addEntry(o),r=r.insert(n,o)):k(Do,"Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",o.version)})),{ks:r,qs:i}}))}function jo(t,e){const n=R(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(t=>(void 0===e&&(e=Ot),n.mutationQueue.getNextMutationBatchAfterBatchId(t,e))))}function Uo(t,e){const n=R(t);return n.persistence.runTransaction("Allocate target","readwrite",(t=>{let r;return n.Pi.getTargetData(t,e).next((i=>i?(r=i,xt.resolve(r)):n.Pi.allocateTargetId(t).next((i=>(r=new qi(e,i,"TargetPurposeListen",t.currentSequenceNumber),n.Pi.addTargetData(t,r).next((()=>r)))))))})).then((t=>{const r=n.Ms.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(t.targetId,t),n.xs.set(e,t.targetId)),t}))}async function Vo(t,e,n){const r=R(t),i=r.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,(t=>r.persistence.referenceDelegate.removeTarget(t,i)))}catch(t){if(!At(t))throw t;k(Do,`Failed to update sequence numbers for target ${e}: ${t}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function $o(t,e,n){const r=R(t);let i=vt.min(),o=sr();return r.persistence.runTransaction("Execute query","readwrite",(t=>function(t,e,n){const r=R(t),i=r.xs.get(n);return void 0!==i?xt.resolve(r.Ms.get(i)):r.Pi.getTargetData(e,n)}(r,t,Un(e)).next((e=>{if(e)return i=e.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(t,e.targetId).next((t=>{o=t}))})).next((()=>r.Fs.getDocumentsMatchingQuery(t,e,n?i:vt.min(),n?o:sr()))).next((t=>(Ho(r,qn(e),t),{documents:t,Qs:o})))))}function Ho(t,e,n){let r=t.Os.get(e)||vt.min();n.forEach(((t,e)=>{e.readTime.compareTo(r)>0&&(r=e.readTime)})),t.Os.set(e,r)}class Bo{constructor(){this.activeTargetIds=cr()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class zo{constructor(){this.Mo=new Bo,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t,e=!0){return e&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,e,n){this.xo[t]=e}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new Bo,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{Oo(t){}shutdown(){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qo="ConnectivityMonitor";class Ko{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){k(qo,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){k(qo,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Go=null;function Yo(){return null===Go?Go=function(){return 268435456+Math.round(2147483648*Math.random())}():Go++,"0x"+Go.toString(16)
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const Qo="RestConnection",Xo={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Jo{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=e+"://"+t.host,this.Ko=`projects/${n}/databases/${r}`,this.Wo=this.databaseId.database===Oe?`project_id=${n}`:`project_id=${n}&database_id=${r}`}Go(t,e,n,r,i){const o=Yo(),s=this.zo(t,e.toUriEncodedString());k(Qo,`Sending RPC '${t}' ${o}:`,s,n);const a={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(a,r,i);const{host:u}=new URL(s),l=(0,c.zJ)(u);return this.Jo(t,s,a,n,l).then((e=>(k(Qo,`Received RPC '${t}' ${o}: `,e),e)),(e=>{throw D(Qo,`RPC '${t}' ${o} failed with error: `,e,"url: ",s,"request:",n),e}))}Ho(t,e,n,r,i,o){return this.Go(t,e,n,r,i)}jo(t,e,n){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+C}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((e,n)=>t[n]=e)),n&&n.headers.forEach(((e,n)=>t[n]=e))}zo(t,e){const n=Xo[t];return`${this.Uo}/v1/${e}:${n}`}terminate(){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ts="WebChannelConnection";class es extends Jo{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,e,n,r,i){const o=Yo();return new Promise(((i,s)=>{const a=new h;a.setWithCredentials(!0),a.listenOnce(f.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case p.NO_ERROR:const e=a.getResponseJson();k(ts,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(e)),i(e);break;case p.TIMEOUT:k(ts,`RPC '${t}' ${o} timed out`),s(new L(M.DEADLINE_EXCEEDED,"Request time out"));break;case p.HTTP_ERROR:const n=a.getStatus();if(k(ts,`RPC '${t}' ${o} failed with status:`,n,"response text:",a.getResponseText()),n>0){let t=a.getResponseJson();Array.isArray(t)&&(t=t[0]);const e=t?.error;if(e&&e.status&&e.message){const t=function(t){const e=t.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(e)>=0?e:M.UNKNOWN}(e.status);s(new L(t,e.message))}else s(new L(M.UNKNOWN,"Server responded with status "+a.getStatus()))}else s(new L(M.UNAVAILABLE,"Connection failed."));break;default:N(9055,{l_:t,streamId:o,h_:a.getLastErrorCode(),P_:a.getLastError()})}}finally{k(ts,`RPC '${t}' ${o} completed.`)}}));const c=JSON.stringify(r);k(ts,`RPC '${t}' ${o} sending request:`,r),a.send(e,"POST",c,n,15)}))}T_(t,e,n){const r=Yo(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=v(),s=y(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.useFetchStreams=!0),this.jo(a.initMessageHeaders,e,n),a.encodeInitMessageHeaders=!0;const u=i.join("");k(ts,`Creating RPC '${t}' stream ${r}: ${u}`,a);const l=o.createWebChannel(u,a);this.I_(l);let h=!1,f=!1;const p=new Zo({Yo:e=>{f?k(ts,`Not sending because RPC '${t}' stream ${r} is closed:`,e):(h||(k(ts,`Opening RPC '${t}' stream ${r} transport.`),l.open(),h=!0),k(ts,`RPC '${t}' stream ${r} sending:`,e),l.send(e))},Zo:()=>l.close()}),_=(t,e,n)=>{t.listen(e,(t=>{try{n(t)}catch(t){setTimeout((()=>{throw t}),0)}}))};return _(l,d.EventType.OPEN,(()=>{f||(k(ts,`RPC '${t}' stream ${r} transport opened.`),p.o_())})),_(l,d.EventType.CLOSE,(()=>{f||(f=!0,k(ts,`RPC '${t}' stream ${r} transport closed`),p.a_(),this.E_(l))})),_(l,d.EventType.ERROR,(e=>{f||(f=!0,D(ts,`RPC '${t}' stream ${r} transport errored. Name:`,e.name,"Message:",e.message),p.a_(new L(M.UNAVAILABLE,"The operation could not be completed")))})),_(l,d.EventType.MESSAGE,(e=>{if(!f){const n=e.data[0];P(!!n,16349);const i=n,o=i?.error||i[0]?.error;if(o){k(ts,`RPC '${t}' stream ${r} received error:`,o);const e=o.status;let n=function(t){const e=Wr[t];if(void 0!==e)return Gr(e)}(e),i=o.message;void 0===n&&(n=M.INTERNAL,i="Unknown error status: "+e+" with message "+o.message),f=!0,p.a_(new L(n,i)),l.close()}else k(ts,`RPC '${t}' stream ${r} received:`,n),p.u_(n)}})),_(s,g.STAT_EVENT,(e=>{e.stat===m.PROXY?k(ts,`RPC '${t}' stream ${r} detected buffering proxy`):e.stat===m.NOPROXY&&k(ts,`RPC '${t}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{p.__()}),0),p}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((e=>e===t))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ns(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rs(t){return new pi(t,!0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(t,e,n=1e3,r=1.5,i=6e4){this.Mi=t,this.timerId=e,this.d_=n,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const e=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,e-n);r>0&&k("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const os="PersistentStream";class ss{constructor(t,e,n,r,i,o,s,a){this.Mi=t,this.S_=n,this.b_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=a,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new is(t,e)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,4!==t?this.M_.reset():e&&e.code===M.RESOURCE_EXHAUSTED?(x(e.toString()),x("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):e&&e.code===M.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(e)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),e=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([t,n])=>{this.D_===e&&this.G_(t,n)}),(e=>{t((()=>{const t=new L(M.UNKNOWN,"Fetching auth token failed: "+e.message);return this.z_(t)}))}))}G_(t,e){const n=this.W_(this.D_);this.stream=this.j_(t,e),this.stream.Xo((()=>{n((()=>this.listener.Xo()))})),this.stream.t_((()=>{n((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((t=>{n((()=>this.z_(t)))})),this.stream.onMessage((t=>{n((()=>1==++this.F_?this.J_(t):this.onNext(t)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return k(os,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return e=>{this.Mi.enqueueAndForget((()=>this.D_===t?e():(k(os,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class as extends ss{constructor(t,e,n,r,i,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,n,r,o),this.serializer=i}j_(t,e){return this.connection.T_("Listen",t,e)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const e=Ai(this.serializer,t),n=function(t){if(!("targetChange"in t))return vt.min();const e=t.targetChange;return e.targetIds&&e.targetIds.length?vt.min():e.readTime?_i(e.readTime):vt.min()}(t);return this.listener.H_(e,n)}Y_(t){const e={};e.database=ki(this.serializer),e.addTarget=function(t,e){let n;const r=e.target;if(n=On(r)?{documents:Pi(t,r)}:{query:Ri(t,r).ft},n.targetId=e.targetId,e.resumeToken.approximateByteSize()>0){n.resumeToken=yi(t,e.resumeToken);const r=mi(t,e.expectedCount);null!==r&&(n.expectedCount=r)}else if(e.snapshotVersion.compareTo(vt.min())>0){n.readTime=gi(t,e.snapshotVersion.toTimestamp());const r=mi(t,e.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,t);const n=Li(this.serializer,t);n&&(e.labels=n),this.q_(e)}Z_(t){const e={};e.database=ki(this.serializer),e.removeTarget=t,this.q_(e)}}class cs extends ss{constructor(t,e,n,r,i,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,r,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,e){return this.connection.T_("Write",t,e)}J_(t){return P(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,P(!t.writeResults||0===t.writeResults.length,55816),this.listener.ta()}onNext(t){P(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const e=Oi(t.writeResults,t.commitTime),n=_i(t.commitTime);return this.listener.na(n,e)}ra(){const t={};t.database=ki(this.serializer),this.q_(t)}ea(t){const e={streamToken:this.lastStreamToken,writes:t.map((t=>Ni(this.serializer,t)))};this.q_(e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{}class ls extends us{constructor(t,e,n,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new L(M.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,e,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,o])=>this.connection.Go(t,bi(e,n),r,i,o))).catch((t=>{throw"FirebaseError"===t.name?(t.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new L(M.UNKNOWN,t.toString())}))}Ho(t,e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,s])=>this.connection.Ho(t,bi(e,n),r,o,s,i))).catch((t=>{throw"FirebaseError"===t.name?(t.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new L(M.UNKNOWN,t.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class hs{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,"Online"===t&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(x(e),this.aa=!1):k("OnlineStateTracker",e)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds="RemoteStore";class fs{constructor(t,e,n,r,i){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo((t=>{n.enqueueAndForget((async()=>{Es(this)&&(k(ds,"Restarting streams for network reachability change."),await async function(t){const e=R(t);e.Ea.add(4),await ms(e),e.Ra.set("Unknown"),e.Ea.delete(4),await ps(e)}(this))}))})),this.Ra=new hs(n,r)}}async function ps(t){if(Es(t))for(const e of t.da)await e(!0)}async function ms(t){for(const e of t.da)await e(!1)}function gs(t,e){const n=R(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),bs(n)?ws(n):$s(n).O_()&&vs(n,e))}function ys(t,e){const n=R(t),r=$s(n);n.Ia.delete(e),r.O_()&&_s(n,e),0===n.Ia.size&&(r.O_()?r.L_():Es(n)&&n.Ra.set("Unknown"))}function vs(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(vt.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}$s(t).Y_(e)}function _s(t,e){t.Va.Ue(e),$s(t).Z_(e)}function ws(t){t.Va=new ci({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),$s(t).start(),t.Ra.ua()}function bs(t){return Es(t)&&!$s(t).x_()&&t.Ia.size>0}function Es(t){return 0===R(t).Ea.size}function Ts(t){t.Va=void 0}async function Cs(t){t.Ra.set("Online")}async function Ss(t){t.Ia.forEach(((e,n)=>{vs(t,e)}))}async function Is(t,e){Ts(t),bs(t)?(t.Ra.ha(e),ws(t)):t.Ra.set("Unknown")}async function ks(t,e,n){if(t.Ra.set("Online"),e instanceof si&&2===e.state&&e.cause)try{await async function(t,e){const n=e.cause;for(const r of e.targetIds)t.Ia.has(r)&&(await t.remoteSyncer.rejectListen(r,n),t.Ia.delete(r),t.Va.removeTarget(r))}(t,e)}catch(n){k(ds,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await xs(t,n)}else if(e instanceof ii?t.Va.Ze(e):e instanceof oi?t.Va.st(e):t.Va.tt(e),!n.isEqual(vt.min()))try{const e=await Mo(t.localStore);n.compareTo(e)>=0&&await function(t,e){const n=t.Va.Tt(e);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=t.Ia.get(r);i&&t.Ia.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach(((e,n)=>{const r=t.Ia.get(e);if(!r)return;t.Ia.set(e,r.withResumeToken(_e.EMPTY_BYTE_STRING,r.snapshotVersion)),_s(t,e);const i=new qi(r.target,e,n,r.sequenceNumber);vs(t,i)})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)}catch(e){k(ds,"Failed to raise snapshot:",e),await xs(t,e)}}async function xs(t,e,n){if(!At(e))throw e;t.Ea.add(1),await ms(t),t.Ra.set("Offline"),n||(n=()=>Mo(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{k(ds,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await ps(t)}))}function Ds(t,e){return e().catch((n=>xs(t,n,e)))}async function As(t){const e=R(t),n=Hs(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ot;for(;Ns(e);)try{const t=await jo(e.localStore,r);if(null===t){0===e.Ta.length&&n.L_();break}r=t.batchId,Os(e,t)}catch(t){await xs(e,t)}Ps(e)&&Rs(e)}function Ns(t){return Es(t)&&t.Ta.length<10}function Os(t,e){t.Ta.push(e);const n=Hs(t);n.O_()&&n.X_&&n.ea(e.mutations)}function Ps(t){return Es(t)&&!Hs(t).x_()&&t.Ta.length>0}function Rs(t){Hs(t).start()}async function Ms(t){Hs(t).ra()}async function Ls(t){const e=Hs(t);for(const n of t.Ta)e.ea(n.mutations)}async function Fs(t,e,n){const r=t.Ta.shift(),i=Hr.from(r,e,n);await Ds(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await As(t)}async function js(t,e){e&&Hs(t).X_&&await async function(t,e){if(function(t){return Kr(t)&&t!==M.ABORTED}(e.code)){const n=t.Ta.shift();Hs(t).B_(),await Ds(t,(()=>t.remoteSyncer.rejectFailedWrite(n.batchId,e))),await As(t)}}(t,e),Ps(t)&&Rs(t)}async function Us(t,e){const n=R(t);n.asyncQueue.verifyOperationInProgress(),k(ds,"RemoteStore received new credentials");const r=Es(n);n.Ea.add(3),await ms(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await ps(n)}async function Vs(t,e){const n=R(t);e?(n.Ea.delete(2),await ps(n)):e||(n.Ea.add(2),await ms(n),n.Ra.set("Unknown"))}function $s(t){return t.ma||(t.ma=function(t,e,n){const r=R(t);return r.sa(),new as(e,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}(t.datastore,t.asyncQueue,{Xo:Cs.bind(null,t),t_:Ss.bind(null,t),r_:Is.bind(null,t),H_:ks.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),bs(t)?ws(t):t.Ra.set("Unknown")):(await t.ma.stop(),Ts(t))}))),t.ma}function Hs(t){return t.fa||(t.fa=function(t,e,n){const r=R(t);return r.sa(),new cs(e,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:Ms.bind(null,t),r_:js.bind(null,t),ta:Ls.bind(null,t),na:Fs.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await As(t)):(await t.fa.stop(),t.Ta.length>0&&(k(ds,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class Bs{constructor(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new F,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((t=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,n,r,i){const o=Date.now()+n,s=new Bs(t,e,o,r,i);return s.start(n),s}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new L(M.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function zs(t,e){if(x("AsyncQueue",`${e}: ${t}`),At(t))return new L(M.UNAVAILABLE,`${e}: ${t}`);throw t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{static emptySet(t){return new Ws(t.comparator)}constructor(t){this.comparator=t?(e,n)=>t(e,n)||ot.comparator(e.key,n.key):(t,e)=>ot.comparator(t.key,e.key),this.keyedMap=Zn(),this.sortedSet=new de(this.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,n)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Ws))return!1;if(this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){const t=e.getNext().key,r=n.getNext().key;if(!t.isEqual(r))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const n=new Ws;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(){this.ga=new de(ot.comparator)}track(t){const e=t.doc.key,n=this.ga.get(e);n?0!==t.type&&3===n.type?this.ga=this.ga.insert(e,t):3===t.type&&1!==n.type?this.ga=this.ga.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.ga=this.ga.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.ga=this.ga.remove(e):1===t.type&&2===n.type?this.ga=this.ga.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):N(63341,{Rt:t,pa:n}):this.ga=this.ga.insert(e,t)}ya(){const t=[];return this.ga.inorderTraversal(((e,n)=>{t.push(n)})),t}}class Ks{constructor(t,e,n,r,i,o,s,a,c){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(t,e,n,r,i){const o=[];return e.forEach((t=>{o.push({type:0,doc:t})})),new Ks(t,e,Ws.emptySet(e),o,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Hn(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class Ys{constructor(){this.queries=Qs(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(t,e){const n=R(t),r=n.queries;n.queries=Qs(),r.forEach(((t,n)=>{for(const r of n.Sa)r.onError(e)}))}(this,new L(M.ABORTED,"Firestore shutting down"))}}function Qs(){return new Yn((t=>Bn(t)),Hn)}async function Xs(t,e){const n=R(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new Gs,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await n.onListen(i,!0);break;case 1:o.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(t){const n=zs(t,`Initialization of query '${zn(e.query)}' failed`);return void e.onError(n)}n.queries.set(i,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&ea(n)}async function Js(t,e){const n=R(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const t=o.Sa.indexOf(e);t>=0&&(o.Sa.splice(t,1),0===o.Sa.length?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Zs(t,e){const n=R(t);let r=!1;for(const i of e){const t=i.query,e=n.queries.get(t);if(e){for(const t of e.Sa)t.Fa(i)&&(r=!0);e.wa=i}}r&&ea(n)}function ta(t,e,n){const r=R(t),i=r.queries.get(e);if(i)for(const o of i.Sa)o.onError(n);r.queries.delete(e)}function ea(t){t.Ca.forEach((t=>{t.next()}))}var na,ra;(ra=na||(na={})).Ma="default",ra.Cache="cache";class ia{constructor(t,e,n){this.query=t,this.xa=e,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(t){if(!this.options.includeMetadataChanges){const e=[];for(const n of t.docChanges)3!==n.type&&e.push(n);t=new Ks(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),e=!0):this.La(t,this.onlineState)&&(this.ka(t),e=!0),this.Na=t,e}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let e=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),e=!0),e}La(t,e){if(!t.fromCache)return!0;if(!this.Da())return!0;const n="Offline"!==e;return(!this.options.qa||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===e)}Ba(t){if(t.docChanges.length>0)return!0;const e=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges}ka(t){t=Ks.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==na.Cache}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class oa{constructor(t){this.key=t}}class sa{constructor(t){this.key=t}}class aa{constructor(t,e){this.query=t,this.Ya=e,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=sr(),this.mutatedKeys=sr(),this.eu=Kn(t),this.tu=new Ws(this.eu)}get nu(){return this.Ya}ru(t,e){const n=e?e.iu:new qs,r=e?e.tu:this.tu;let i=e?e.mutatedKeys:this.mutatedKeys,o=r,s=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,c="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal(((t,e)=>{const u=r.get(t),l=Wn(this.query,e)?e:null,h=!!u&&this.mutatedKeys.has(u.key),d=!!l&&(l.hasLocalMutations||this.mutatedKeys.has(l.key)&&l.hasCommittedMutations);let f=!1;u&&l?u.data.isEqual(l.data)?h!==d&&(n.track({type:3,doc:l}),f=!0):this.su(u,l)||(n.track({type:2,doc:l}),f=!0,(a&&this.eu(l,a)>0||c&&this.eu(l,c)<0)&&(s=!0)):!u&&l?(n.track({type:0,doc:l}),f=!0):u&&!l&&(n.track({type:1,doc:u}),f=!0,(a||c)&&(s=!0)),f&&(l?(o=o.add(l),i=d?i.add(t):i.delete(t)):(o=o.delete(t),i=i.delete(t)))})),null!==this.query.limit)for(;o.size>this.query.limit;){const t="F"===this.query.limitType?o.last():o.first();o=o.delete(t.key),i=i.delete(t.key),n.track({type:1,doc:t})}return{tu:o,iu:n,Cs:s,mutatedKeys:i}}su(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n,r){const i=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const o=t.iu.ya();o.sort(((t,e)=>function(t,e){const n=t=>{switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return N(20277,{Rt:t})}};return n(t)-n(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t.type,e.type)||this.eu(t.doc,e.doc))),this.ou(n),r=r??!1;const s=e&&!r?this._u():[],a=0===this.Xa.size&&this.current&&!r?1:0,c=a!==this.Za;return this.Za=a,0!==o.length||c?{snapshot:new Ks(this.query,t.tu,i,o,t.mutatedKeys,0===a,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:s}:{au:s}}va(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({tu:this.tu,iu:new qs,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),t.modifiedDocuments.forEach((t=>{})),t.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=sr(),this.tu.forEach((t=>{this.uu(t.key)&&(this.Xa=this.Xa.add(t.key))}));const e=[];return t.forEach((t=>{this.Xa.has(t)||e.push(new sa(t))})),this.Xa.forEach((n=>{t.has(n)||e.push(new oa(n))})),e}cu(t){this.Ya=t.Qs,this.Xa=sr();const e=this.ru(t.documents);return this.applyChanges(e,!0)}lu(){return Ks.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,0===this.Za,this.hasCachedResults)}}const ca="SyncEngine";class ua{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}}class la{constructor(t){this.key=t,this.hu=!1}}class ha{constructor(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Yn((t=>Bn(t)),Hn),this.Iu=new Map,this.Eu=new Set,this.du=new de(ot.comparator),this.Au=new Map,this.Ru=new go,this.Vu={},this.mu=new Map,this.fu=eo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function da(t,e,n=!0){const r=Ra(t);let i;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await pa(r,e,n,!0),i}async function fa(t,e){const n=Ra(t);await pa(n,e,!0,!1)}async function pa(t,e,n,r){const i=await Uo(t.localStore,Un(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n);let a;return r&&(a=await ma(t,e,o,"current"===s,i.resumeToken)),t.isPrimaryClient&&n&&gs(t.remoteStore,i),a}async function ma(t,e,n,r,i){t.pu=(e,n,r)=>async function(t,e,n,r){let i=e.view.ru(n);i.Cs&&(i=await $o(t.localStore,e.query,!1).then((({documents:t})=>e.view.ru(t,i))));const o=r&&r.targetChanges.get(e.targetId),s=r&&null!=r.targetMismatches.get(e.targetId),a=e.view.applyChanges(i,t.isPrimaryClient,o,s);return xa(t,e.targetId,a.au),a.snapshot}(t,e,n,r);const o=await $o(t.localStore,e,!0),s=new aa(e,o.Qs),a=s.ru(o.documents),c=ri.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState,i),u=s.applyChanges(a,t.isPrimaryClient,c);xa(t,n,u.au);const l=new ua(e,n,s);return t.Tu.set(e,l),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function ga(t,e,n){const r=R(t),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter((t=>!Hn(t,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Vo(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&ys(r.remoteStore,i.targetId),Ia(r,i.targetId)})).catch(kt)):(Ia(r,i.targetId),await Vo(r.localStore,i.targetId,!0))}async function ya(t,e){const n=R(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ys(n.remoteStore,r.targetId))}async function va(t,e,n){const r=Ma(t);try{const t=await function(t,e){const n=R(t),r=yt.now(),i=e.reduce(((t,e)=>t.add(e.key)),sr());let o,s;return n.persistence.runTransaction("Locally write mutations","readwrite",(t=>{let a=Xn(),c=sr();return n.Ns.getEntries(t,i).next((t=>{a=t,a.forEach(((t,e)=>{e.isValidDocument()||(c=c.add(t))}))})).next((()=>n.localDocuments.getOverlayedDocuments(t,a))).next((i=>{o=i;const s=[];for(const t of e){const e=Or(t,o.get(t.key).overlayedDocument);null!=e&&s.push(new Mr(t.key,e,rn(e.value.mapValue),Ir.exists(!0)))}return n.mutationQueue.addMutationBatch(t,r,s,e)})).next((e=>{s=e;const r=e.applyToLocalDocumentSet(o,c);return n.documentOverlayCache.saveOverlays(t,e.batchId,r)}))})).then((()=>({batchId:s.batchId,changes:tr(o)})))}(r.localStore,e);r.sharedClientState.addPendingMutation(t.batchId),function(t,e,n){let r=t.Vu[t.currentUser.toKey()];r||(r=new de(G)),r=r.insert(e,n),t.Vu[t.currentUser.toKey()]=r}(r,t.batchId,n),await Na(r,t.changes),await As(r.remoteStore)}catch(t){const e=zs(t,"Failed to persist write");n.reject(e)}}async function _a(t,e){const n=R(t);try{const t=await Lo(n.localStore,e);e.targetChanges.forEach(((t,e)=>{const r=n.Au.get(e);r&&(P(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1,22616),t.addedDocuments.size>0?r.hu=!0:t.modifiedDocuments.size>0?P(r.hu,14607):t.removedDocuments.size>0&&(P(r.hu,42227),r.hu=!1))})),await Na(n,t,e)}catch(t){await kt(t)}}function wa(t,e,n){const r=R(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const t=[];r.Tu.forEach(((n,r)=>{const i=r.view.va(e);i.snapshot&&t.push(i.snapshot)})),function(t,e){const n=R(t);n.onlineState=e;let r=!1;n.queries.forEach(((t,n)=>{for(const i of n.Sa)i.va(e)&&(r=!0)})),r&&ea(n)}(r.eventManager,e),t.length&&r.Pu.H_(t),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function ba(t,e,n){const r=R(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),o=i&&i.key;if(o){let t=new de(ot.comparator);t=t.insert(o,on.newNoDocument(o,vt.min()));const n=sr().add(o),i=new ni(vt.min(),new Map,new de(G),t,n);await _a(r,i),r.du=r.du.remove(o),r.Au.delete(e),Aa(r)}else await Vo(r.localStore,e,!1).then((()=>Ia(r,e,n))).catch(kt)}async function Ea(t,e){const n=R(t),r=e.batch.batchId;try{const t=await Ro(n.localStore,e);Sa(n,r,null),Ca(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Na(n,t)}catch(t){await kt(t)}}async function Ta(t,e,n){const r=R(t);try{const t=await function(t,e){const n=R(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(t=>{let r;return n.mutationQueue.lookupMutationBatch(t,e).next((e=>(P(null!==e,37113),r=e.keys(),n.mutationQueue.removeMutationBatch(t,e)))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,r,e))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,r))).next((()=>n.localDocuments.getDocuments(t,r)))}))}(r.localStore,e);Sa(r,e,n),Ca(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Na(r,t)}catch(n){await kt(n)}}function Ca(t,e){(t.mu.get(e)||[]).forEach((t=>{t.resolve()})),t.mu.delete(e)}function Sa(t,e,n){const r=R(t);let i=r.Vu[r.currentUser.toKey()];if(i){const t=i.get(e);t&&(n?t.reject(n):t.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function Ia(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((e=>{t.Ru.containsKey(e)||ka(t,e)}))}function ka(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);null!==n&&(ys(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Aa(t))}function xa(t,e,n){for(const r of n)r instanceof oa?(t.Ru.addReference(r.key,e),Da(t,r)):r instanceof sa?(k(ca,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||ka(t,r.key)):N(19791,{wu:r})}function Da(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(k(ca,"New document in limbo: "+n),t.Eu.add(r),Aa(t))}function Aa(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ot(nt.fromString(e)),r=t.fu.next();t.Au.set(r,new la(n)),t.du=t.du.insert(n,r),gs(t.remoteStore,new qi(Un(Mn(n.path)),r,"TargetPurposeLimboResolution",Nt.ce))}}async function Na(t,e,n){const r=R(t),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach(((t,a)=>{s.push(r.pu(a,e,n).then((t=>{if((t||n)&&r.isPrimaryClient){const e=t?!t.fromCache:n?.targetChanges.get(a.targetId)?.current;r.sharedClientState.updateQueryState(a.targetId,e?"current":"not-current")}if(t){i.push(t);const e=Io.As(a.targetId,t);o.push(e)}})))})),await Promise.all(s),r.Pu.H_(i),await async function(t,e){const n=R(t);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(t=>xt.forEach(e,(e=>xt.forEach(e.Es,(r=>n.persistence.referenceDelegate.addReference(t,e.targetId,r))).next((()=>xt.forEach(e.ds,(r=>n.persistence.referenceDelegate.removeReference(t,e.targetId,r)))))))))}catch(t){if(!At(t))throw t;k(Do,"Failed to update sequence numbers: "+t)}for(const r of e){const t=r.targetId;if(!r.fromCache){const e=n.Ms.get(t),r=e.snapshotVersion,i=e.withLastLimboFreeSnapshotVersion(r);n.Ms=n.Ms.insert(t,i)}}}(r.localStore,o))}async function Oa(t,e){const n=R(t);if(!n.currentUser.isEqual(e)){k(ca,"User change. New user:",e.toKey());const t=await Po(n.localStore,e);n.currentUser=e,function(t,e){t.mu.forEach((t=>{t.forEach((t=>{t.reject(new L(M.CANCELLED,e))}))})),t.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,t.removedBatchIds,t.addedBatchIds),await Na(n,t.Ls)}}function Pa(t,e){const n=R(t),r=n.Au.get(e);if(r&&r.hu)return sr().add(r.key);{let t=sr();const r=n.Iu.get(e);if(!r)return t;for(const e of r){const r=n.Tu.get(e);t=t.unionWith(r.view.nu)}return t}}function Ra(t){const e=R(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=_a.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Pa.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ba.bind(null,e),e.Pu.H_=Zs.bind(null,e.eventManager),e.Pu.yu=ta.bind(null,e.eventManager),e}function Ma(t){const e=R(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Ea.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Ta.bind(null,e),e}class La{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=rs(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,e){return null}Mu(t,e){return null}vu(t){return Oo(this.persistence,new xo,t.initialUser,this.serializer)}Cu(t){return new Eo(Co.mi,this.serializer)}Du(t){return new zo}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}La.provider={build:()=>new La};class Fa extends La{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,e){P(this.persistence.referenceDelegate instanceof So,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new so(n,t.asyncQueue,e)}Cu(t){const e=void 0!==this.cacheSizeBytes?to.withCacheSize(this.cacheSizeBytes):to.DEFAULT;return new Eo((t=>So.mi(t,e)),this.serializer)}}class ja{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=t=>wa(this.syncEngine,t,1),this.remoteStore.remoteSyncer.handleCredentialChange=Oa.bind(null,this.syncEngine),await Vs(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new Ys}()}createDatastore(t){const e=rs(t.databaseInfo.databaseId),n=function(t){return new es(t)}(t.databaseInfo);return function(t,e,n,r){return new ls(t,e,n,r)}(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return function(t,e,n,r,i){return new fs(t,e,n,r,i)}(this.localStore,this.datastore,t.asyncQueue,(t=>wa(this.syncEngine,t,0)),function(){return Ko.v()?new Ko:new Wo}())}createSyncEngine(t,e){return function(t,e,n,r,i,o,s){const a=new ha(t,e,n,r,i,o);return s&&(a.gu=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){await async function(t){const e=R(t);k(ds,"RemoteStore shutting down."),e.Ea.add(5),await ms(e),e.Aa.shutdown(),e.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}ja.provider={build:()=>new ja};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ua{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):x("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,e){setTimeout((()=>{this.muted||t(e)}),0)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Va="FirestoreClient";class $a{constructor(t,e,n,r,i){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=r,this.user=T.UNAUTHENTICATED,this.clientId=K.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async t=>{k(Va,"Received user=",t.uid),await this.authCredentialListener(t),this.user=t})),this.appCheckCredentials.start(n,(t=>(k(Va,"Received new app check token=",t),this.appCheckCredentialListener(t,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new F;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const n=zs(e,"Failed to shutdown persistence");t.reject(n)}})),t.promise}}async function Ha(t,e){t.asyncQueue.verifyOperationInProgress(),k(Va,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async t=>{r.isEqual(t)||(await Po(e.localStore,t),r=t)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function Ba(t,e){t.asyncQueue.verifyOperationInProgress();const n=await za(t);k(Va,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((t=>Us(e.remoteStore,t))),t.setAppCheckTokenChangeListener(((t,n)=>Us(e.remoteStore,n))),t._onlineComponents=e}async function za(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){k(Va,"Using user provided OfflineComponentProvider");try{await Ha(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(t){return"FirebaseError"===t.name?t.code===M.FAILED_PRECONDITION||t.code===M.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(n))throw n;D("Error using user provided cache. Falling back to memory cache: "+n),await Ha(t,new La)}}else k(Va,"Using default OfflineComponentProvider"),await Ha(t,new Fa(void 0));return t._offlineComponents}async function Wa(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(k(Va,"Using user provided OnlineComponentProvider"),await Ba(t,t._uninitializedComponentsProvider._online)):(k(Va,"Using default OnlineComponentProvider"),await Ba(t,new ja))),t._onlineComponents}function qa(t){return Wa(t).then((t=>t.syncEngine))}async function Ka(t){const e=await Wa(t),n=e.eventManager;return n.onListen=da.bind(null,e.syncEngine),n.onUnlisten=ga.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=fa.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=ya.bind(null,e.syncEngine),n}function Ga(t,e,n={}){const r=new F;return t.asyncQueue.enqueueAndForget((async()=>function(t,e,n,r,i){const o=new Ua({next:a=>{o.Nu(),e.enqueueAndForget((()=>Js(t,s)));const c=a.docs.has(n);!c&&a.fromCache?i.reject(new L(M.UNAVAILABLE,"Failed to get document because the client is offline.")):c&&a.fromCache&&r&&"server"===r.source?i.reject(new L(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:t=>i.reject(t)}),s=new ia(Mn(n.path),o,{includeMetadataChanges:!0,qa:!0});return Xs(t,s)}(await Ka(t),t.asyncQueue,e,n,r))),r.promise}function Ya(t,e,n={}){const r=new F;return t.asyncQueue.enqueueAndForget((async()=>function(t,e,n,r,i){const o=new Ua({next:n=>{o.Nu(),e.enqueueAndForget((()=>Js(t,s))),n.fromCache&&"server"===r.source?i.reject(new L(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:t=>i.reject(t)}),s=new ia(n,o,{includeMetadataChanges:!0,qa:!0});return Xs(t,s)}(await Ka(t),t.asyncQueue,e,n,r))),r.promise}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Qa(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const Xa=new Map,Ja="firestore.googleapis.com",Za=!0;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(t){if(void 0===t.host){if(void 0!==t.ssl)throw new L(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ja,this.ssl=Za}else this.host=t.host,this.ssl=t.ssl??Za;if(this.isUsingEmulator=void 0!==t.emulatorOptions,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=Zi;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<ro)throw new L(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}at("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Qa(t.experimentalLongPollingOptions??{}),function(t){if(void 0!==t.timeoutSeconds){if(isNaN(t.timeoutSeconds))throw new L(M.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (must not be NaN)`);if(t.timeoutSeconds<5)throw new L(M.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (minimum allowed value is 5)`);if(t.timeoutSeconds>30)throw new L(M.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (maximum allowed value is 30)`)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(t,e){return t.timeoutSeconds===e.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class ec{constructor(t,e,n,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new tc({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new L(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new L(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new tc(t),this._emulatorOptions=t.emulatorOptions||{},void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new U;switch(t.type){case"firstParty":return new B(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new L(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=Xa.get(t);e&&(k("ComponentProvider","Removing Datastore"),Xa.delete(t),e.terminate())}(this),Promise.resolve()}}function nc(t,e,n,r={}){t=dt(t,ec);const i=(0,c.zJ)(e),o=t._getSettings(),s={...o,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;i&&((0,c.gE)(`https://${a}`),(0,c.P1)("Firestore",!0)),o.host!==Ja&&o.host!==a&&D("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...o,host:a,ssl:i,emulatorOptions:r};if(!(0,c.bD)(u,s)&&(t._setSettings(u),r.mockUserToken)){let e,n;if("string"==typeof r.mockUserToken)e=r.mockUserToken,n=T.MOCK_USER;else{e=(0,c.Fy)(r.mockUserToken,t._app?.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new L(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new T(i)}t._authCredentials=new V(new j(e,n))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new rc(this.firestore,t,this._query)}}class ic{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new oc(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ic(this.firestore,t,this._key)}toJSON(){return{type:ic._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,n){if(pt(e,ic._jsonSchema))return new ic(t,n||null,new ot(nt.fromString(e.referencePath)))}}ic._jsonSchemaVersion="firestore/documentReference/1.0",ic._jsonSchema={type:ft("string",ic._jsonSchemaVersion),referencePath:ft("string")};class oc extends rc{constructor(t,e,n){super(t,e,Mn(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ic(this.firestore,null,new ot(t))}withConverter(t){return new oc(this.firestore,t,this._path)}}function sc(t,e,...n){if(t=(0,c.Ku)(t),st("collection","path",e),t instanceof ec){const r=nt.fromString(e,...n);return ut(r),new oc(t,null,r)}{if(!(t instanceof ic||t instanceof oc))throw new L(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(nt.fromString(e,...n));return ut(r),new oc(t.firestore,null,r)}}function ac(t,e,...n){if(t=(0,c.Ku)(t),1===arguments.length&&(e=K.newId()),st("doc","path",e),t instanceof ec){const r=nt.fromString(e,...n);return ct(r),new ic(t,null,new ot(r))}{if(!(t instanceof ic||t instanceof oc))throw new L(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(nt.fromString(e,...n));return ct(r),new ic(t.firestore,t instanceof oc?t.converter:null,new ot(r))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const cc="AsyncQueue";class uc{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new is(this,"async_queue_retry"),this._c=()=>{const t=ns();t&&k(cc,"Visibility state changed to "+t.visibilityState),this.M_.w_()},this.ac=t;const e=ns();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const e=ns();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const e=new F;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!At(t))throw t;k(cc,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const e=this.ac.then((()=>(this.rc=!0,t().catch((t=>{throw this.nc=t,this.rc=!1,x("INTERNAL UNHANDLED ERROR: ",lc(t)),t})).then((t=>(this.rc=!1,t))))));return this.ac=e,e}enqueueAfterDelay(t,e,n){this.uc(),this.oc.indexOf(t)>-1&&(e=0);const r=Bs.createAndSchedule(this,t,e,n,(t=>this.hc(t)));return this.tc.push(r),r}uc(){this.nc&&N(47125,{Pc:lc(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do{t=this.ac,await t}while(t!==this.ac)}Ic(t){for(const e of this.tc)if(e.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((t,e)=>t.targetTimeMs-e.targetTimeMs));for(const e of this.tc)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const e=this.tc.indexOf(t);this.tc.splice(e,1)}}function lc(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}function hc(t){return function(t,e){if("object"!=typeof t||null===t)return!1;const n=t;for(const r of e)if(r in n&&"function"==typeof n[r])return!0;return!1}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,["next","error","complete"])}class dc extends ec{constructor(t,e,n,r){super(t,e,n,r),this.type="firestore",this._queue=new uc,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new uc(t),this._firestoreClient=void 0,await t}}}function fc(t,e){const n="object"==typeof t?t:(0,o.Sx)(),r="string"==typeof t?t:e||Oe,i=(0,o.j6)(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const t=(0,c.yU)("firestore");t&&nc(i,...t)}return i}function pc(t){if(t._terminated)throw new L(M.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||mc(t),t._firestoreClient}function mc(t){const e=t._freezeSettings(),n=function(t,e,n,r){return new Ne(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Qa(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new $a(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(t){const e=t?._online.build();return{_offline:t?._offline.build(e),_online:e}}(t._componentsProvider))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class gc{constructor(t){this._byteString=t}static fromBase64String(t){try{return new gc(_e.fromBase64String(t))}catch(t){throw new L(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(t){return new gc(_e.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:gc._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(pt(t,gc._jsonSchema))return gc.fromBase64String(t.bytes)}}gc._jsonSchemaVersion="firestore/bytes/1.0",gc._jsonSchema={type:ft("string",gc._jsonSchemaVersion),bytes:ft("string")};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class yc{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new L(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new it(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class vc{constructor(t){this._methodName=t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new L(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new L(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return G(this._lat,t._lat)||G(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:_c._jsonSchemaVersion}}static fromJSON(t){if(pt(t,_c._jsonSchema))return new _c(t.latitude,t.longitude)}}_c._jsonSchemaVersion="firestore/geoPoint/1.0",_c._jsonSchema={type:ft("string",_c._jsonSchemaVersion),latitude:ft("number"),longitude:ft("number")};
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class wc{constructor(t){this._values=(t||[]).map((t=>t))}toArray(){return this._values.map((t=>t))}isEqual(t){return function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}(this._values,t._values)}toJSON(){return{type:wc._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(pt(t,wc._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((t=>"number"==typeof t)))return new wc(t.vectorValues);throw new L(M.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}wc._jsonSchemaVersion="firestore/vectorValue/1.0",wc._jsonSchema={type:ft("string",wc._jsonSchemaVersion),vectorValues:ft("object")};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const bc=/^__.*__$/;class Ec{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return null!==this.fieldMask?new Mr(t,this.data,this.fieldMask,e,this.fieldTransforms):new Rr(t,this.data,e,this.fieldTransforms)}}class Tc{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return new Mr(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function Cc(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw N(40011,{Ac:t})}}class Sc{constructor(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Sc({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const e=this.path?.child(t),n=this.Vc({path:e,fc:!1});return n.gc(t),n}yc(t){const e=this.path?.child(t),n=this.Vc({path:e,fc:!1});return n.Rc(),n}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return Uc(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return void 0!==this.fieldMask.find((e=>t.isPrefixOf(e)))||void 0!==this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(0===t.length)throw this.Sc("Document fields must not be empty");if(Cc(this.Ac)&&bc.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class Ic{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=n||rs(t)}Cc(t,e,n,r=!1){return new Sc({Ac:t,methodName:e,Dc:n,path:it.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function kc(t){const e=t._freezeSettings(),n=rs(t._databaseId);return new Ic(t._databaseId,!!e.ignoreUndefinedProperties,n)}function xc(t,e,n,r,i,o={}){const s=t.Cc(o.merge||o.mergeFields?2:0,e,n,i);Mc("Data must be an object, but it was:",s,r);const a=Pc(r,s);let c,u;if(o.merge)c=new ye(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){const t=[];for(const r of o.mergeFields){const i=Lc(e,r,n);if(!s.contains(i))throw new L(M.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);Vc(t,i)||t.push(i)}c=new ye(t),u=s.fieldTransforms.filter((t=>c.covers(t.field)))}else c=null,u=s.fieldTransforms;return new Ec(new nn(a),c,u)}class Dc extends vc{_toFieldTransform(t){if(2!==t.Ac)throw 1===t.Ac?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Dc}}function Ac(t,e,n,r){const i=t.Cc(1,e,n);Mc("Data must be an object, but it was:",i,r);const o=[],s=nn.empty();le(r,((t,r)=>{const a=jc(e,t,n);r=(0,c.Ku)(r);const u=i.yc(a);if(r instanceof Dc)o.push(a);else{const t=Oc(r,u);null!=t&&(o.push(a),s.set(a,t))}}));const a=new ye(o);return new Tc(s,a,i.fieldTransforms)}function Nc(t,e,n,r,i,o){const s=t.Cc(1,e,n),a=[Lc(e,r,n)],u=[i];if(o.length%2!=0)throw new L(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let c=0;c<o.length;c+=2)a.push(Lc(e,o[c])),u.push(o[c+1]);const l=[],h=nn.empty();for(let f=a.length-1;f>=0;--f)if(!Vc(l,a[f])){const t=a[f];let e=u[f];e=(0,c.Ku)(e);const n=s.yc(t);if(e instanceof Dc)l.push(t);else{const r=Oc(e,n);null!=r&&(l.push(t),h.set(t,r))}}const d=new ye(l);return new Tc(h,d,s.fieldTransforms)}function Oc(t,e){if(Rc(t=(0,c.Ku)(t)))return Mc("Unsupported field value:",e,t),Pc(t,e);if(t instanceof vc)return function(t,e){if(!Cc(e.Ac))throw e.Sc(`${t._methodName}() can only be used with update() and set()`);if(!e.path)throw e.Sc(`${t._methodName}() is not currently supported inside arrays`);const n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&4!==e.Ac)throw e.Sc("Nested arrays are not supported");return function(t,e){const n=[];let r=0;for(const i of t){let t=Oc(i,e.wc(r));null==t&&(t={nullValue:"NULL_VALUE"}),n.push(t),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=(0,c.Ku)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return hr(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const n=yt.fromDate(t);return{timestampValue:gi(e.serializer,n)}}if(t instanceof yt){const n=new yt(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:gi(e.serializer,n)}}if(t instanceof _c)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof gc)return{bytesValue:yi(e.serializer,t._byteString)};if(t instanceof ic){const n=e.databaseId,r=t.firestore._databaseId;if(!r.isEqual(n))throw e.Sc(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:wi(t.firestore._databaseId||e.databaseId,t._key.path)}}if(t instanceof wc)return function(t,e){const n={fields:{[Re]:{stringValue:Fe},[je]:{arrayValue:{values:t.toArray().map((t=>{if("number"!=typeof t)throw e.Sc("VectorValues must only contain numeric values.");return ur(e.serializer,t)}))}}}};return{mapValue:n}}(t,e);throw e.Sc(`Unsupported field value: ${ht(t)}`)}(t,e)}function Pc(t,e){const n={};return he(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):le(t,((t,r)=>{const i=Oc(r,e.mc(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Rc(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof yt||t instanceof _c||t instanceof gc||t instanceof ic||t instanceof vc||t instanceof wc)}function Mc(t,e,n){if(!Rc(n)||!lt(n)){const r=ht(n);throw"an object"===r?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Lc(t,e,n){if((e=(0,c.Ku)(e))instanceof yc)return e._internalPath;if("string"==typeof e)return jc(t,e);throw Uc("Field path arguments must be of type string or ",t,!1,void 0,n)}const Fc=new RegExp("[~\\*/\\[\\]]");function jc(t,e,n){if(e.search(Fc)>=0)throw Uc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new yc(...e.split("."))._internalPath}catch(r){throw Uc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Uc(t,e,n,r,i){const o=r&&!r.isEmpty(),s=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new L(M.INVALID_ARGUMENT,a+t+c)}function Vc(t,e){return t.some((t=>t.isEqual(e)))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ic(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new Hc(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(Bc("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class Hc extends $c{data(){return super.data()}}function Bc(t,e){return"string"==typeof e?jc(t,e):e instanceof yc?e._internalPath:e._delegate._internalPath}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zc(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new L(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Wc{convertValue(t,e="none"){switch(Ue(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ee(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Te(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw N(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const n={};return le(t,((t,r)=>{n[t]=this.convertValue(r,e)})),n}convertVectorValue(t){const e=t.fields?.[je].arrayValue?.values?.map((t=>Ee(t.doubleValue)));return new wc(e)}convertGeoPoint(t){return new _c(Ee(t.latitude),Ee(t.longitude))}convertArray(t,e){return(t.values||[]).map((t=>this.convertValue(t,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const n=De(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Ae(t));default:return null}}convertTimestamp(t){const e=be(t);return new yt(e.seconds,e.nanos)}convertDocumentKey(t,e){const n=nt.fromString(t);P(Wi(n),9688,{name:t});const r=new Pe(n.get(1),n.get(3)),i=new ot(n.popFirst(5));return r.isEqual(e)||x(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),i}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qc(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Kc{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Gc extends $c{constructor(t,e,n,r,i,o){super(t,e,n,r,o),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Yc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const n=this._document.data.field(Bc("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new L(M.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=Gc._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),t&&t.isValidDocument()&&t.isFoundDocument()?(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e):e}}Gc._jsonSchemaVersion="firestore/documentSnapshot/1.0",Gc._jsonSchema={type:ft("string",Gc._jsonSchemaVersion),bundleSource:ft("string","DocumentSnapshot"),bundleName:ft("string"),bundle:ft("string")};class Yc extends Gc{data(t={}){return super.data(t)}}class Qc{constructor(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Kc(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach((n=>{t.call(e,new Yc(this._firestore,this._userDataWriter,n.key,n,new Kc(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new L(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){let e=0;return t._snapshot.docChanges.map((n=>{const r=new Yc(t._firestore,t._userDataWriter,n.doc.key,n.doc,new Kc(t._snapshot.mutatedKeys.has(n.doc.key),t._snapshot.fromCache),t.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:e++}}))}{let n=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((t=>e||3!==t.type)).map((e=>{const r=new Yc(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Kc(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter);let i=-1,o=-1;return 0!==e.type&&(i=n.indexOf(e.doc.key),n=n.delete(e.doc.key)),1!==e.type&&(n=n.add(e.doc),o=n.indexOf(e.doc.key)),{type:Xc(e.type),doc:r,oldIndex:i,newIndex:o}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new L(M.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Qc._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=K.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],n=[],r=[];return this.docs.forEach((t=>{null!==t._document&&(e.push(t._document),n.push(this._userDataWriter.convertObjectMap(t._document.data.value.mapValue.fields,"previous")),r.push(t.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function Xc(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return N(61501,{type:t})}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Jc(t){t=dt(t,ic);const e=dt(t.firestore,dc);return Ga(pc(e),t._key).then((n=>su(e,t,n)))}Qc._jsonSchemaVersion="firestore/querySnapshot/1.0",Qc._jsonSchema={type:ft("string",Qc._jsonSchemaVersion),bundleSource:ft("string","QuerySnapshot"),bundleName:ft("string"),bundle:ft("string")};class Zc extends Wc{constructor(t){super(),this.firestore=t}convertBytes(t){return new gc(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new ic(this.firestore,null,e)}}function tu(t){t=dt(t,rc);const e=dt(t.firestore,dc),n=pc(e),r=new Zc(e);return zc(t._query),Ya(n,t._query).then((n=>new Qc(e,r,t,n)))}function eu(t,e,n,...r){t=dt(t,ic);const i=dt(t.firestore,dc),o=kc(i);let s;return s="string"==typeof(e=(0,c.Ku)(e))||e instanceof yc?Nc(o,"updateDoc",t._key,e,n,r):Ac(o,"updateDoc",t._key,e),ou(i,[s.toMutation(t._key,Ir.exists(!0))])}function nu(t){return ou(dt(t.firestore,dc),[new Ur(t._key,Ir.none())])}function ru(t,e){const n=dt(t.firestore,dc),r=ac(t),i=qc(t.converter,e);return ou(n,[xc(kc(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,Ir.exists(!1))]).then((()=>r))}function iu(t,...e){t=(0,c.Ku)(t);let n={includeMetadataChanges:!1,source:"default"},r=0;"object"!=typeof e[r]||hc(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(hc(e[r])){const t=e[r];e[r]=t.next?.bind(t),e[r+1]=t.error?.bind(t),e[r+2]=t.complete?.bind(t)}let o,s,a;if(t instanceof ic)s=dt(t.firestore,dc),a=Mn(t._key.path),o={next:n=>{e[r]&&e[r](su(s,t,n))},error:e[r+1],complete:e[r+2]};else{const n=dt(t,rc);s=dt(n.firestore,dc),a=n._query;const i=new Zc(s);o={next:t=>{e[r]&&e[r](new Qc(s,i,n,t))},error:e[r+1],complete:e[r+2]},zc(t._query)}return function(t,e,n,r){const i=new Ua(r),o=new ia(e,i,n);return t.asyncQueue.enqueueAndForget((async()=>Xs(await Ka(t),o))),()=>{i.Nu(),t.asyncQueue.enqueueAndForget((async()=>Js(await Ka(t),o)))}}(pc(s),a,i,o)}function ou(t,e){return function(t,e){const n=new F;return t.asyncQueue.enqueueAndForget((async()=>va(await qa(t),e,n))),n.promise}(pc(t),e)}function su(t,e,n){const r=n.docs.get(e._key),i=new Zc(t);return new Gc(t,i,e._key,r,new Kc(n.hasPendingWrites,n.fromCache),e.converter)}new WeakMap;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(t,e=!0){!function(t){C=t}(o.MF),(0,o.om)(new s.uA("firestore",((t,{instanceIdentifier:n,options:r})=>{const i=t.getProvider("app").getImmediate(),o=new dc(new $(t.getProvider("auth-internal")),new W(i,t.getProvider("app-check-internal")),function(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new L(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pe(t.options.projectId,e)}(i,n),i);return r={useFetchStreams:e,...r},o._setSettings(r),o}),"PUBLIC").setMultipleInstances(!0)),(0,o.KO)(b,E,t),(0,o.KO)(b,E,"esm2020")}()},2839:function(t,e,n){"use strict";var r=n(4576),i=r.navigator,o=i&&i.userAgent;t.exports=o?String(o):""},2967:function(t,e,n){"use strict";var r=n(6706),i=n(34),o=n(7750),s=n(3506);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{t=r(Object.prototype,"__proto__","set"),t(n,[]),e=n instanceof Array}catch(a){}return function(n,r){return o(n),s(r),i(n)?(e?t(n,r):n.__proto__=r,n):n}}():void 0)},3092:function(t,e,n){"use strict";n(8111),n(2489);var r=n(6086),i=n(798),o=n(2455),s=n(6189);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const a=new Map,c={activated:!1,tokenObservers:[]},u={initialized:!1,enabled:!1};function l(t){return a.get(t)||{...c}}function h(){return u}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d="https://content-firebaseappcheck.googleapis.com/v1",f="exchangeDebugToken",p={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class m{constructor(t,e,n,r,i){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=n,this.lowerBound=r,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=r,r>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch((()=>{}))}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new o.cY,this.pending.promise.catch((t=>{})),await g(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new o.cY,this.pending.promise.catch((t=>{})),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch((()=>{}))}catch(e){this.retryPolicy(e)?this.process(!1).catch((()=>{})):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}function g(t){return new Promise((e=>{setTimeout(e,t)}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y={["already-initialized"]:"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.",["use-before-activation"]:"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.",["fetch-network-error"]:"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",["fetch-parse-error"]:"Fetch client could not parse response. Original error: {$originalErrorMessage}.",["fetch-status-error"]:"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",["storage-open"]:"Error thrown when opening storage. Original error: {$originalErrorMessage}.",["storage-get"]:"Error thrown when reading from storage. Original error: {$originalErrorMessage}.",["storage-set"]:"Error thrown when writing to storage. Original error: {$originalErrorMessage}.",["recaptcha-error"]:"ReCAPTCHA error.",["initial-throttle"]:"{$httpStatus} error. Attempts allowed again after {$time}",["throttled"]:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},v=new o.FA("appCheck","AppCheck",y);function _(t){if(!l(t).activated)throw v.create("use-before-activation",{appName:t.name})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function w({url:t,body:e},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const t=await i.getHeartbeatsHeader();t&&(r["X-Firebase-Client"]=t)}const o={method:"POST",body:JSON.stringify(e),headers:r};let s,a;try{s=await fetch(t,o)}catch(h){throw v.create("fetch-network-error",{originalErrorMessage:h?.message})}if(200!==s.status)throw v.create("fetch-status-error",{httpStatus:s.status});try{a=await s.json()}catch(h){throw v.create("fetch-parse-error",{originalErrorMessage:h?.message})}const c=a.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw v.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const u=1e3*Number(c[1]),l=Date.now();return{token:a.token,expireTimeMillis:l+u,issuedAtTimeMillis:l}}function b(t,e){const{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${d}/projects/${n}/apps/${r}:${f}?key=${i}`,body:{debug_token:e}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E="firebase-app-check-database",T=1,C="firebase-app-check-store";let S=null;function I(){return S||(S=new Promise(((t,e)=>{try{const n=indexedDB.open(E,T);n.onsuccess=e=>{t(e.target.result)},n.onerror=t=>{e(v.create("storage-open",{originalErrorMessage:t.target.error?.message}))},n.onupgradeneeded=t=>{const e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore(C,{keyPath:"compositeKey"})}}}catch(n){e(v.create("storage-open",{originalErrorMessage:n?.message}))}})),S)}function k(t,e){return x(D(t),e)}async function x(t,e){const n=await I(),r=n.transaction(C,"readwrite"),i=r.objectStore(C),o=i.put({compositeKey:t,value:e});return new Promise(((t,e)=>{o.onsuccess=e=>{t()},r.onerror=t=>{e(v.create("storage-set",{originalErrorMessage:t.target.error?.message}))}}))}function D(t){return`${t.options.appId}-${t.name}`}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A=new s.Vy("@firebase/app-check");
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N(t,e){return(0,o.zW)()?k(t,e).catch((t=>{A.warn(`Failed to write token to IndexedDB. Error: ${t}`)})):Promise.resolve()}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function O(){const t=h();return t.enabled}async function P(){const t=h();if(t.enabled&&t.token)return t.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const R={error:"UNKNOWN_ERROR"};function M(t){return o.K3.encodeString(JSON.stringify(t),!1)}async function L(t,e=!1,n=!1){const r=t.app;_(r);const i=l(r);let o,s=i.token;if(s&&!B(s)&&(i.token=void 0,s=void 0),!s){const t=await i.cachedTokenPromise;t&&(B(t)?s=t:await N(r,void 0))}if(!e&&s&&B(s))return{token:s.token};let a,c=!1;if(O())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=w(b(r,await P()),t.heartbeatServiceProvider).finally((()=>{i.exchangeTokenPromise=void 0})),c=!0);const e=await i.exchangeTokenPromise;return await N(r,e),i.token=e,{token:e.token}}catch(u){return"appCheck/throttled"===u.code||"appCheck/initial-throttle"===u.code?A.warn(u.message):n&&A.error(u),z(u)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally((()=>{i.exchangeTokenPromise=void 0})),c=!0),s=await l(r).exchangeTokenPromise}catch(u){"appCheck/throttled"===u.code||"appCheck/initial-throttle"===u.code?A.warn(u.message):n&&A.error(u),o=u}return s?o?a=B(s)?{token:s.token,internalError:o}:z(o):(a={token:s.token},i.token=s,await N(r,s)):a=z(o),c&&H(r,a),a}async function F(t){const e=t.app;_(e);const{provider:n}=l(e);if(O()){const n=await P(),{token:r}=await w(b(e,n),t.heartbeatServiceProvider);return{token:r}}{const{token:t}=await n.getToken();return{token:t}}}function j(t,e,n,r){const{app:i}=t,o=l(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&B(o.token)){const e=o.token;Promise.resolve().then((()=>{n({token:e.token}),V(t)})).catch((()=>{}))}o.cachedTokenPromise.then((()=>V(t)))}function U(t,e){const n=l(t),r=n.tokenObservers.filter((t=>t.next!==e));0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function V(t){const{app:e}=t,n=l(e);let r=n.tokenRefresher;r||(r=$(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function $(t){const{app:e}=t;return new m((async()=>{const n=l(e);let r;if(r=n.token?await L(t,!0):await L(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),(()=>!0),(()=>{const t=l(e);if(t.token){let e=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;const n=t.token.expireTimeMillis-3e5;return e=Math.min(e,n),Math.max(0,e-Date.now())}return 0}),p.RETRIAL_MIN_WAIT,p.RETRIAL_MAX_WAIT)}function H(t,e){const n=l(t).tokenObservers;for(const i of n)try{"EXTERNAL"===i.type&&null!=e.error?i.error(e.error):i.next(e)}catch(r){}}function B(t){return t.expireTimeMillis-Date.now()>0}function z(t){return{token:M(R),error:t}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(t,e){this.app=t,this.heartbeatServiceProvider=e}_delete(){const{tokenObservers:t}=l(this.app);for(const e of t)U(this.app,e.next);return Promise.resolve()}}function q(t,e){return new W(t,e)}function K(t){return{getToken:e=>L(t,e),getLimitedUseToken:()=>F(t),addTokenListener:e=>j(t,"INTERNAL",e),removeTokenListener:e=>U(t.app,e)}}const G="@firebase/app-check",Y="0.11.0";const Q="app-check",X="app-check-internal";function J(){(0,r.om)(new i.uA(Q,(t=>{const e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return q(e,n)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((t,e,n)=>{t.getProvider(X).initialize()}))),(0,r.om)(new i.uA(X,(t=>{const e=t.getProvider("app-check").getImmediate();return K(e)}),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,r.KO)(G,Y)}J()},3167:function(t,e,n){"use strict";var r=n(4901),i=n(34),o=n(2967);t.exports=function(t,e,n){var s,a;return o&&r(s=e.constructor)&&s!==n&&i(a=s.prototype)&&a!==n.prototype&&o(t,a),t}},3257:function(t,e,n){n(4114),
/*!
 * TOAST UI Time Picker
 * @version 2.1.6
 * @license MIT
 */
function(e,n){t.exports=n()}(window,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="dist",n(n.s=20)}([function(t,e,n){"use strict";var r=n(3);function i(t,e,n){var i,o;if(n=n||0,!r(e))return-1;if(Array.prototype.indexOf)return Array.prototype.indexOf.call(e,t,n);for(o=e.length,i=n;n>=0&&i<o;i+=1)if(e[i]===t)return i;return-1}t.exports=i},function(t,e,n){"use strict";function r(t,e,n){var r=0,i=t.length;for(n=n||null;r<i;r+=1)if(!1===e.call(n,t[r],r,t))break}t.exports=r},function(t,e,n){"use strict";function r(t,e){var n,r,i,o,s=Object.prototype.hasOwnProperty;for(i=1,o=arguments.length;i<o;i+=1)for(r in n=arguments[i],n)s.call(n,r)&&(t[r]=n[r]);return t}t.exports=r},function(t,e,n){"use strict";function r(t){return t instanceof Array}t.exports=r},function(t,e,n){"use strict";var r=n(3),i=n(1),o=n(16);function s(t,e,n){r(t)?i(t,e,n):o(t,e,n)}t.exports=s},function(t,e,n){"use strict";function r(t){return void 0===t}t.exports=r},function(t,e,n){"use strict";function r(t){return"string"===typeof t||t instanceof String}t.exports=r},function(t,e,n){"use strict";var r=n(0),i=n(4),o=n(3),s=n(6),a=n(2),c=/{{\s?|\s?}}/g,u=/^[a-zA-Z0-9_@]+\[[a-zA-Z0-9_@"']+\]$/,l=/\[\s?|\s?\]/,h=/^[a-zA-Z_]+\.[a-zA-Z_]+$/,d=/\./,f=/^["']\w+["']$/,p=/"|'/g,m=/^-?\d+\.?\d*$/,g=2,y={if:E,each:T,with:C},v=3==="a".split(/a/).length,_=function(){return v?function(t,e){return t.split(e)}:function(t,e){var n,r,i=[],o=0;e.global||(e=new RegExp(e,"g")),n=e.exec(t);while(null!==n)r=n.index,i.push(t.slice(o,r)),o=r+n[0].length,n=e.exec(t);return i.push(t.slice(o)),i}}();function w(t,e){var n,r=e[t];return"true"===t?r=!0:"false"===t?r=!1:f.test(t)?r=t.replace(p,""):u.test(t)?(n=t.split(l),r=w(n[0],e)[w(n[1],e)]):h.test(t)?(n=t.split(d),r=w(n[0],e)[n[1]]):m.test(t)&&(r=parseFloat(t)),r}function b(t,e){var n=[t],r=[],o=0,s=0;return i(e,(function(t,i){0===t.indexOf("if")?o+=1:"/if"===t?o-=1:o||0!==t.indexOf("elseif")&&"else"!==t||(n.push("else"===t?["true"]:t.split(" ").slice(1)),r.push(e.slice(s,i)),s=i+1)})),r.push(e.slice(s)),{exps:n,sourcesInsideIf:r}}function E(t,e,n){var r=b(t,e),o=!1,s="";return i(r.exps,(function(t,e){return o=k(t,n),o&&(s=D(r.sourcesInsideIf[e],n)),!o})),s}function T(t,e,n){var r=k(t,n),s=o(r)?"@index":"@key",c={},u="";return i(r,(function(t,r){c[s]=r,c["@this"]=t,a(n,c),u+=D(e.slice(),n)})),u}function C(t,e,n){var i=r("as",t),o=t[i+1],s=k(t.slice(0,i),n),c={};return c[o]=s,D(e,a(n,c))||""}function S(t,e,n){var r=t.splice(e+1,n-e);return r.pop(),r}function I(t,e,n){var r,i=y[t],o=1,a=0,c=a+g,u=e[c];while(o&&s(u))0===u.indexOf(t)?o+=1:0===u.indexOf("/"+t)&&(o-=1,r=c),c+=g,u=e[c];if(o)throw Error(t+" needs {{/"+t+"}} expression.");return e[a]=i(e[a].split(" ").slice(1),S(e,a,r),n),e}function k(t,e){var n=w(t[0],e);return n instanceof Function?x(n,t.slice(1),e):n}function x(t,e,n){var r=[];return i(e,(function(t){r.push(w(t,n))})),t.apply(null,r)}function D(t,e){var n,r,i,o=1,a=t[o];while(s(a))n=a.split(" "),r=n[0],y[r]?(i=I(r,t.splice(o,t.length-o),e),t=t.concat(i)):t[o]=k(n,e),o+=g,a=t[o];return t.join("")}function A(t,e){return D(_(t,c),e)}t.exports=A},function(t,e,n){"use strict";var r=n(2),i=n(23),o=n(6),s=n(25),a=n(3),c=n(26),u=n(4),l=/\s+/g;function h(){this.events=null,this.contexts=null}h.mixin=function(t){r(t.prototype,h.prototype)},h.prototype._getHandlerItem=function(t,e){var n={handler:t};return e&&(n.context=e),n},h.prototype._safeEvent=function(t){var e,n=this.events;return n||(n=this.events={}),t&&(e=n[t],e||(e=[],n[t]=e),n=e),n},h.prototype._safeContext=function(){var t=this.contexts;return t||(t=this.contexts=[]),t},h.prototype._indexOfContext=function(t){var e=this._safeContext(),n=0;while(e[n]){if(t===e[n][0])return n;n+=1}return-1},h.prototype._memorizeContext=function(t){var e,n;i(t)&&(e=this._safeContext(),n=this._indexOfContext(t),n>-1?e[n][1]+=1:e.push([t,1]))},h.prototype._forgetContext=function(t){var e,n;i(t)&&(e=this._safeContext(),n=this._indexOfContext(t),n>-1&&(e[n][1]-=1,e[n][1]<=0&&e.splice(n,1)))},h.prototype._bindEvent=function(t,e,n){var r=this._safeEvent(t);this._memorizeContext(n),r.push(this._getHandlerItem(e,n))},h.prototype.on=function(t,e,n){var r=this;o(t)?(t=t.split(l),u(t,(function(t){r._bindEvent(t,e,n)}))):s(t)&&(n=e,u(t,(function(t,e){r.on(e,t,n)})))},h.prototype.once=function(t,e,n){var r=this;if(s(t))return n=e,void u(t,(function(t,e){r.once(e,t,n)}));function i(){e.apply(n,arguments),r.off(t,i,n)}this.on(t,i,n)},h.prototype._spliceMatches=function(t,e){var n,r=0;if(a(t))for(n=t.length;r<n;r+=1)!0===e(t[r])&&(t.splice(r,1),n-=1,r-=1)},h.prototype._matchHandler=function(t){var e=this;return function(n){var r=t===n.handler;return r&&e._forgetContext(n.context),r}},h.prototype._matchContext=function(t){var e=this;return function(n){var r=t===n.context;return r&&e._forgetContext(n.context),r}},h.prototype._matchHandlerAndContext=function(t,e){var n=this;return function(r){var i=t===r.handler,o=e===r.context,s=i&&o;return s&&n._forgetContext(r.context),s}},h.prototype._offByEventName=function(t,e){var n=this,r=c(e),i=n._matchHandler(e);t=t.split(l),u(t,(function(t){var e=n._safeEvent(t);r?n._spliceMatches(e,i):(u(e,(function(t){n._forgetContext(t.context)})),n.events[t]=[])}))},h.prototype._offByHandler=function(t){var e=this,n=this._matchHandler(t);u(this._safeEvent(),(function(t){e._spliceMatches(t,n)}))},h.prototype._offByObject=function(t,e){var n,r=this;this._indexOfContext(t)<0?u(t,(function(t,e){r.off(e,t)})):o(e)?(n=this._matchContext(t),r._spliceMatches(this._safeEvent(e),n)):c(e)?(n=this._matchHandlerAndContext(e,t),u(this._safeEvent(),(function(t){r._spliceMatches(t,n)}))):(n=this._matchContext(t),u(this._safeEvent(),(function(t){r._spliceMatches(t,n)})))},h.prototype.off=function(t,e){o(t)?this._offByEventName(t,e):arguments.length?c(t)?this._offByHandler(t):s(t)&&this._offByObject(t,e):(this.events={},this.contexts=[])},h.prototype.fire=function(t){this.invoke.apply(this,arguments)},h.prototype.invoke=function(t){var e,n,r,i;if(!this.hasListener(t))return!0;e=this._safeEvent(t),n=Array.prototype.slice.call(arguments,1),r=0;while(e[r]){if(i=e[r],!1===i.handler.apply(i.context,n))return!1;r+=1}return!0},h.prototype.hasListener=function(t){return this.getListenerLength(t)>0},h.prototype.getListenerLength=function(t){var e=this._safeEvent(t);return e.length},t.exports=h},function(t,e,n){"use strict";var r=n(27),i=n(2);function o(t,e){var n;return e||(e=t,t=null),n=e.init||function(){},t&&r(n,t),e.hasOwnProperty("static")&&(i(n,e["static"]),delete e["static"]),i(n.prototype,e),n}t.exports=o},function(t,e,n){"use strict";var r=n(6),i=n(4),o=n(17);function s(t,e,n,o){r(e)?i(e.split(/\s+/g),(function(e){a(t,e,n,o)})):i(e,(function(e,r){a(t,r,e,n)}))}function a(t,e,n,r){function i(e){n.call(r||t,e||window.event)}"addEventListener"in t?t.addEventListener(e,i):"attachEvent"in t&&t.attachEvent("on"+e,i),c(t,e,n,i)}function c(t,e,n,r){var s=o(t,e),a=!1;i(s,(function(t){return t.handler!==n||(a=!0,!1)})),a||s.push({handler:n,wrappedHandler:r})}t.exports=s},function(t,e,n){"use strict";var r=n(6),i=n(4),o=n(17);function s(t,e,n){r(e)?i(e.split(/\s+/g),(function(e){a(t,e,n)})):i(e,(function(e,n){a(t,n,e)}))}function a(t,e,n){var r,s=o(t,e);n?(i(s,(function(i,o){return n!==i.handler||(c(t,e,i.wrappedHandler),r=o,!1)})),s.splice(r,1)):(i(s,(function(n){c(t,e,n.wrappedHandler)})),s.splice(0,s.length))}function c(t,e,n){"removeEventListener"in t?t.removeEventListener(e,n):"detachEvent"in t&&t.detachEvent("on"+e,n)}t.exports=s},function(t,e,n){"use strict";var r=n(30);function i(t,e){var n=t.parentNode;if(r(t,e))return t;while(n&&n!==document){if(r(n,e))return n;n=n.parentNode}return null}t.exports=i},function(t,e,n){"use strict";function r(t){t&&t.parentNode&&t.parentNode.removeChild(t)}t.exports=r},function(t,e,n){"use strict";function r(t){return"object"===typeof HTMLElement?t&&(t instanceof HTMLElement||!!t.nodeType):!(!t||!t.nodeType)}t.exports=r},function(t,e,n){"use strict";var r=n(0),i=n(1),o=n(35),s=0,a={getUniqueId:function(){return s+=1,s},formatTime:function(t,e){var n=["hh","mm"];return t=String(t),r(e,n)>=0&&1===t.length?"0"+t:t},getMeridiemHour:function(t){return t%=12,0===t&&(t=12),t},getRangeArr:function(t,e,n){var r,i=[];if(n=n||1,t>e)for(r=e;r>=t;r-=n)i.push(r);else for(r=t;r<=e;r+=n)i.push(r);return i},fill:function(t,e,n,r){var i,o=r||[],s=Math.min(o.length-1,e);for(i=t;i<=s;i+=1)o[i]=n;for(i=s;i<=e;i+=1)o.push(n);return o},getTarget:function(t){return t.target||t.srcElement},sendHostName:function(){o("time-picker","UA-129987462-1")},getDisabledMinuteArr:function(t,e){var n=this.fill(0,Math.floor(60/e)-2,!1);function r(t){var r=Math.ceil(t.begin/e),i=Math.floor(t.end/e);n=this.fill(r,i,!0,n)}return i(t,r.bind(this)),n},setDisabled:function(t,e){t.disabled=e}};t.exports=a},function(t,e,n){"use strict";function r(t,e,n){var r;for(r in n=n||null,t)if(t.hasOwnProperty(r)&&!1===e.call(n,t[r],r,t))break}t.exports=r},function(t,e,n){"use strict";var r="_feEventKey";function i(t,e){var n,i=t[r];return i||(i=t[r]={}),n=i[e],n||(n=i[e]=[]),n}t.exports=i},function(t,e,n){"use strict";var r=n(5);function i(t){return t&&t.className?r(t.className.baseVal)?t.className:t.className.baseVal:""}t.exports=i},function(t,e,n){"use strict";var r=n(3),i=n(5);function o(t,e){e=r(e)?e.join(" "):e,e=e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),i(t.className.baseVal)?t.className=e:t.className.baseVal=e}t.exports=o},function(t,e,n){"use strict";n(21),t.exports=n(22)},function(t,e,n){},function(t,e,n){"use strict";var r=n(0),i=n(1),o=n(8),s=n(9),a=n(2),c=n(10),u=n(11),l=n(29),h=n(12),d=n(13),f=n(32),p=n(14),m=n(33),g=n(34),y=n(38),v=n(15),_=n(40),w=n(41),b=n(42),E=".tui-timepicker-hour",T=".tui-timepicker-minute",C=".tui-timepicker-meridiem",S="tui-has-left",I="tui-hidden",k="tui-timepicker-meridiem-checked",x="spinbox",D="selectbox",A=0,N=59,O=23,P=12,R=function(t){return a({language:"en",initialHour:0,initialMinute:0,showMeridiem:!0,inputType:"selectbox",hourStep:1,minuteStep:1,meridiemPosition:"right",format:"h:m",disabledHours:[],disabledMinutes:{},usageStatistics:!0},t)},M=s({static:{localeTexts:_},init:function(t,e){e=R(e),this.id=v.getUniqueId(),this.container=p(t)?t:document.querySelector(t),this.element=null,this.meridiemElement=null,this.amEl=null,this.pmEl=null,this.showMeridiem=e.showMeridiem,this.meridiemPosition=e.meridiemPosition,this.hourInput=null,this.minuteInput=null,this.hour=e.initialHour,this.minute=e.initialMinute,this.hourStep=e.hourStep,this.minuteStep=e.minuteStep,this.disabledHours=e.disabledHours,this.disabledMinutes=e.disabledMinutes,this.inputType=e.inputType,this.localeText=_[e.language],this.format=this.getValidTimeFormat(e.format),this.render(),this.setEvents(),e.usageStatistics&&v.sendHostName()},setEvents:function(){this.hourInput.on("change",this.onChangeTimeInput,this),this.minuteInput.on("change",this.onChangeTimeInput,this),this.showMeridiem&&(this.inputType===D?c(this.meridiemElement.querySelector("select"),"change",this.onChangeMeridiem,this):this.inputType===x&&c(this.meridiemElement,"click",this.onChangeMeridiem,this))},removeEvents:function(){this.off(),this.hourInput.destroy(),this.minuteInput.destroy(),this.showMeridiem&&(this.inputType===D?u(this.meridiemElement.querySelector("select"),"change",this.onChangeMeridiem,this):this.inputType===x&&u(this.meridiemElement,"click",this.onChangeMeridiem,this))},render:function(){var t={showMeridiem:this.showMeridiem,isSpinbox:"spinbox"===this.inputType};this.showMeridiem&&a(t,{meridiemElement:this.makeMeridiemHTML()}),this.element&&d(this.element),this.container.innerHTML=w(t),this.element=this.container.firstChild,this.renderTimeInputs(),this.showMeridiem&&this.setMeridiemElement()},setMeridiemElement:function(){"left"===this.meridiemPosition&&l(this.element,S),this.meridiemElement=this.element.querySelector(C),this.amEl=this.meridiemElement.querySelector('[value="AM"]'),this.pmEl=this.meridiemElement.querySelector('[value="PM"]'),this.syncToMeridiemElements()},makeMeridiemHTML:function(){var t=this.localeText;return b({am:t.am,pm:t.pm,radioId:this.id,isSpinbox:"spinbox"===this.inputType})},renderTimeInputs:function(){var t=this.hour,e=this.showMeridiem,n=this.element.querySelector(E),r=this.element.querySelector(T),i="selectbox"===this.inputType.toLowerCase()?y:g,o=this.format.split(":"),s=this.getHourItems();e&&(t=v.getMeridiemHour(t)),this.hourInput=new i(n,{initialValue:t,items:s,format:o[0],disabledItems:this.makeDisabledStatItems(s)}),this.minuteInput=new i(r,{initialValue:this.minute,items:this.getMinuteItems(),format:o[1]})},makeDisabledStatItems:function(t){var e=[],n=this.disabledHours.slice();return this.showMeridiem&&(n=this.meridiemableTime(n)),i(t,(function(t){e.push(r(t,n)>=0)})),e},meridiemableTime:function(t){var e=0,n=0,r=11,o=[];return this.hour>=12&&(e=12,n=12,r=23),i(t,(function(t){t>=n&&t<=r&&o.push(t-e===0?12:t-e)})),o},getValidTimeFormat:function(t){return t.match(/^[h]{1,2}:[m]{1,2}$/i)?t.toLowerCase():"h:m"},syncToMeridiemElements:function(){var t=this.hour>=12?this.pmEl:this.amEl,e=t===this.pmEl?this.amEl:this.pmEl;t.setAttribute("selected",!0),t.setAttribute("checked",!0),l(t,k),e.removeAttribute("selected"),e.removeAttribute("checked"),f(e,k)},syncToInputs:function(){var t=this.hour,e=this.minute;this.showMeridiem&&(t=v.getMeridiemHour(t)),this.hourInput.setValue(t,!0),this.minuteInput.setValue(e,!0)},onChangeMeridiem:function(t){var e=this.hour,n=v.getTarget(t);n.value&&h(n,C)&&(e=this.to24Hour("PM"===n.value,e),this.setTime(e,this.minute),this.setDisabledHours(),this.setDisabledMinutes(e))},onChangeTimeInput:function(){var t=this.hourInput.getValue(),e=this.minuteInput.getValue(),n=this.hour>=12;this.showMeridiem&&(t=this.to24Hour(n,t)),this.setTime(t,e),this.setDisabledMinutes(t)},to24Hour:function(t,e){return e%=12,t&&(e+=12),e},setDisabledHours:function(){var t=this.getHourItems(),e=this.makeDisabledStatItems(t);this.hourInput.setDisabledItems(e)},setDisabledMinutes:function(t){var e;e=this.disabledMinutes[t]||[],this.minuteInput.setDisabledItems(e)},getHourItems:function(){var t=this.hourStep;return this.showMeridiem?v.getRangeArr(1,12,t):v.getRangeArr(0,23,t)},getMinuteItems:function(){return v.getRangeArr(0,59,this.minuteStep)},validItems:function(t,e){return!(!m(t)||!m(e))&&(this.showMeridiem&&(t=v.getMeridiemHour(t)),r(t,this.getHourItems())>-1&&r(e,this.getMinuteItems())>-1)},setHourStep:function(t){this.hourStep=t,this.hourInput.fire("changeItems",this.getHourItems())},getHourStep:function(){return this.hourStep},setMinuteStep:function(t){this.minuteStep=t,this.minuteInput.fire("changeItems",this.getMinuteItems())},getMinuteStep:function(){return this.minuteStep},show:function(){f(this.element,I)},hide:function(){l(this.element,I)},setHour:function(t){return this.setTime(t,this.minute)},setMinute:function(t){return this.setTime(this.hour,t)},setTime:function(t,e,n){this.validItems(t,e)&&(this.hour=t,this.minute=e,this.syncToInputs(),this.showMeridiem&&this.syncToMeridiemElements(),n||this.fire("change",{hour:this.hour,minute:this.minute}))},setRange:function(t,e){var n,r,i=t.hour,o=t.minute;this.isValidRange(t,e)&&(e&&(n=e.hour,r=e.minute),this.setRangeHour(i,n),this.setRangeMinute(i,o,n,r),this.applyRange(i,o,n))},setRangeHour:function(t,e){var n=v.getRangeArr(A,t-1);e&&(n=n.concat(v.getRangeArr(e+1,O))),this.disabledHours=n.slice()},setRangeMinute:function(t,e,n,r){var i=[];if(t||e){if(i.push({begin:A,end:e}),n&&r){if(i.push({begin:r,end:N}),t===n)return void(this.disabledMinutes[t]=v.getDisabledMinuteArr(i,this.minuteStep).slice());this.disabledMinutes[n]=v.getDisabledMinuteArr([i[1]],this.minuteStep).slice()}this.disabledMinutes[t]=v.getDisabledMinuteArr([i[0]],this.minuteStep).slice()}},applyRange:function(t,e,n){var r,i=Math.ceil(e/this.minuteStep),o=t,s=i*this.minuteStep;this.isLaterThanSetTime(t,e)&&(this.disabledMinutes[o][i]&&(r=this.disabledMinutes[o].slice(i).findIndex((function(t){return!t}))*this.minuteStep,s=r>=0?s+r:60),(1!==this.hourStep&&t%this.hourStep!==1||s>=60)&&(o=t+t%this.hourStep+1,s=0),this.setTime(o,s)),this.setDisabledHours(),this.setDisabledMinutes(this.hour),this.showMeridiem&&(this.syncToMeridiemElements(),v.setDisabled(this.amEl,t>=P),v.setDisabled(this.pmEl,n<P))},resetMinuteRange:function(){var t;for(this.disabledMinutes={},t=0;t<=O;t+=1)this.setDisabledMinutes(this.hour)},isValidRange:function(t,e){var n,r,i=t.hour,o=t.minute;return!!this.isValidTime(i,o)&&(!e||(n=e.hour,r=e.minute,this.isValidTime(n,r)&&this.compareTimes(t,e)>0))},isValidTime:function(t,e){return t>=A&&t<=O&&e>=A&&e<=N},isLaterThanSetTime:function(t,e){return t>this.hour||t===this.hour&&e>this.minute},compareTimes:function(t,e){var n=new Date(0),r=new Date(0);return n.setHours(t.hour,t.minute),r.setHours(e.hour,e.minute),r.getTime()-n.getTime()},getHour:function(){return this.hour},getMinute:function(){return this.minute},changeLanguage:function(t){this.localeText=_[t],this.render()},destroy:function(){this.removeEvents(),d(this.element),this.container=this.showMeridiem=this.hourInput=this.minuteInput=this.hour=this.minute=this.inputType=this.element=this.meridiemElement=this.amEl=this.pmEl=null}});o.mixin(M),t.exports=M},function(t,e,n){"use strict";var r=n(5),i=n(24);function o(t){return!r(t)&&!i(t)}t.exports=o},function(t,e,n){"use strict";function r(t){return null===t}t.exports=r},function(t,e,n){"use strict";function r(t){return t===Object(t)}t.exports=r},function(t,e,n){"use strict";function r(t){return t instanceof Function}t.exports=r},function(t,e,n){"use strict";var r=n(28);function i(t,e){var n=r(e.prototype);n.constructor=t,t.prototype=n}t.exports=i},function(t,e,n){"use strict";function r(t){function e(){}return e.prototype=t,new e}t.exports=r},function(t,e,n){"use strict";var r=n(4),i=n(0),o=n(18),s=n(19);function a(t){var e,n=Array.prototype.slice.call(arguments,1),a=t.classList,c=[];a?r(n,(function(e){t.classList.add(e)})):(e=o(t),e&&(n=[].concat(e.split(/\s+/),n)),r(n,(function(t){i(t,c)<0&&c.push(t)})),s(t,c))}t.exports=a},function(t,e,n){"use strict";var r=n(0),i=n(31),o=Element.prototype,s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.msMatchesSelector||function(t){var e=this.document||this.ownerDocument;return r(this,i(e.querySelectorAll(t)))>-1};function a(t,e){return s.call(t,e)}t.exports=a},function(t,e,n){"use strict";var r=n(1);function i(t){var e;try{e=Array.prototype.slice.call(t)}catch(n){e=[],r(t,(function(t){e.push(t)}))}return e}t.exports=i},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(18),s=n(19);function a(t){var e,n,a=Array.prototype.slice.call(arguments,1),c=t.classList;c?r(a,(function(t){c.remove(t)})):(e=o(t).split(/\s+/),n=[],r(e,(function(t){i(t,a)<0&&n.push(t)})),s(t,n))}t.exports=a},function(t,e,n){"use strict";function r(t){return"number"===typeof t||t instanceof Number}t.exports=r},function(t,e,n){"use strict";var r=n(0),i=n(1),o=n(8),s=n(9),a=n(2),c=n(10),u=n(11),l=n(12),h=n(13),d=n(14),f=n(15),p=n(37),m=".tui-timepicker-btn-up",g=".tui-timepicker-btn-down",y=s({init:function(t,e){e=a({items:[]},e),this._container=d(t)?t:document.querySelector(t),this._element=null,this._inputElement=null,this._items=e.items,this._disabledItems=e.disabledItems||[],this._selectedIndex=Math.max(0,r(e.initialValue,this._items)),this._format=e.format,this._render(),this._setEvents()},_render:function(){var t,e=r(this.getValue(),this._items);this._disabledItems[e]&&(this._selectedIndex=this._findEnabledIndex()),t={maxLength:this._getMaxLength(),initialValue:this.getValue(),format:this._format,formatTime:f.formatTime},this._container.innerHTML=p(t),this._element=this._container.firstChild,this._inputElement=this._element.querySelector("input")},_findEnabledIndex:function(){return r(!1,this._disabledItems)},_getMaxLength:function(){var t=[];return i(this._items,(function(e){t.push(String(e).length)})),Math.max.apply(null,t)},setDisabledItems:function(t){this._disabledItems=t,this._changeToInputValue()},_setEvents:function(){c(this._container,"click",this._onClickHandler,this),c(this._inputElement,"keydown",this._onKeydownInputElement,this),c(this._inputElement,"change",this._onChangeHandler,this),this.on("changeItems",(function(t){this._items=t,this._render()}),this)},_removeEvents:function(){this.off(),u(this._container,"click",this._onClickHandler,this),u(this._inputElement,"keydown",this._onKeydownInputElement,this),u(this._inputElement,"change",this._onChangeHandler,this)},_onClickHandler:function(t){var e=f.getTarget(t);l(e,g)?this._setNextValue(!0):l(e,m)&&this._setNextValue(!1)},_setNextValue:function(t){var e=this._selectedIndex;e=t?e?e-1:this._items.length-1:e<this._items.length-1?e+1:0,this._disabledItems[e]?(this._selectedIndex=e,this._setNextValue(t)):this.setValue(this._items[e])},_onKeydownInputElement:function(t){var e,n=t.which||t.keyCode;if(l(f.getTarget(t),"input")){switch(n){case 38:e=!1;break;case 40:e=!0;break;default:return}this._setNextValue(e)}},_onChangeHandler:function(t){l(f.getTarget(t),"input")&&this._changeToInputValue()},_changeToInputValue:function(t){var e=Number(this._inputElement.value),n=r(e,this._items);if(this._disabledItems[n])n=this._findEnabledIndex(),e=this._items[n];else if(n===this._selectedIndex)return;-1===n?this.setValue(this._items[this._selectedIndex],t):(this._selectedIndex=n,t||this.fire("change",{value:e}))},setValue:function(t,e){this._inputElement.value=f.formatTime(t,this._format),this._changeToInputValue(e)},getValue:function(){return this._items[this._selectedIndex]},destroy:function(){this._removeEvents(),h(this._element),this._container=this._element=this._inputElement=this._items=this._selectedIndex=null}});o.mixin(y),t.exports=y},function(t,e,n){"use strict";var r=n(5),i=n(36),o=6048e5;function s(t){var e=(new Date).getTime();return e-t>o}function a(t,e){var n="https://www.google-analytics.com/collect",o=location.hostname,a="event",c="use",u="TOAST UI "+t+" for "+o+": Statistics",l=window.localStorage.getItem(u);(r(window.tui)||!1!==window.tui.usageStatistics)&&(l&&!s(l)||(window.localStorage.setItem(u,(new Date).getTime()),setTimeout((function(){"interactive"!==document.readyState&&"complete"!==document.readyState||i(n,{v:1,t:a,tid:e,cid:o,dp:o,dh:t,el:t,ec:c})}),1e3)))}t.exports=a},function(t,e,n){"use strict";var r=n(16);function i(t,e){var n=document.createElement("img"),i="";return r(e,(function(t,e){i+="&"+e+"="+t})),i=i.substring(1),n.src=t+"?"+i,n.style.display="none",document.body.appendChild(n),document.body.removeChild(n),n}t.exports=i},function(t,e,n){"use strict";var r=n(7);t.exports=function(t){var e='<div class="tui-timepicker-btn-area">  <input type="text" class="tui-timepicker-spinbox-input"        maxlength="{{maxLength}}"        size="{{maxLength}}"        value="{{formatTime initialValue format}}"        aria-label="TimePicker spinbox value">  <button type="button" class="tui-timepicker-btn tui-timepicker-btn-up">    <span class="tui-ico-t-btn">Increase</span>  </button>  <button type="button" class="tui-timepicker-btn tui-timepicker-btn-down">    <span class="tui-ico-t-btn">Decrease</span>  </button></div>';return r(e,t)}},function(t,e,n){"use strict";var r=n(0),i=n(8),o=n(9),s=n(2),a=n(10),c=n(11),u=n(12),l=n(13),h=n(14),d=n(15),f=n(39),p=o({init:function(t,e){e=s({items:[]},e),this._container=h(t)?t:document.querySelector(t),this._items=e.items||[],this._disabledItems=e.disabledItems||[],this._selectedIndex=Math.max(0,r(e.initialValue,this._items)),this._format=e.format,this._element=null,this._render(),this._setEvents()},_render:function(){var t;this._changeEnabledIndex(),t={items:this._items,format:this._format,initialValue:this.getValue(),disabledItems:this._disabledItems,formatTime:d.formatTime,equals:function(t,e){return t===e}},this._element&&this._removeElement(),this._container.innerHTML=f(t),this._element=this._container.firstChild,a(this._element,"change",this._onChangeHandler,this)},_changeEnabledIndex:function(){var t=r(this.getValue(),this._items);this._disabledItems[t]&&(this._selectedIndex=r(!1,this._disabledItems))},setDisabledItems:function(t){this._disabledItems=t,this._render()},_setEvents:function(){this.on("changeItems",(function(t){this._items=t,this._render()}),this)},_removeEvents:function(){this.off()},_removeElement:function(){c(this._element,"change",this._onChangeHandler,this),l(this._element)},_onChangeHandler:function(t){u(d.getTarget(t),"select")&&this._setNewValue()},_setNewValue:function(t){var e=Number(this._element.value);this._selectedIndex=r(e,this._items),t||this.fire("change",{value:e})},getValue:function(){return this._items[this._selectedIndex]},setValue:function(t,e){var n=r(t,this._items);n>-1&&n!==this._selectedIndex&&(this._selectedIndex=n,this._element.value=t,this._setNewValue(e))},destroy:function(){this._removeEvents(),this._removeElement(),this._container=this._items=this._selectedIndex=this._element=null}});i.mixin(p),t.exports=p},function(t,e,n){"use strict";var r=n(7);t.exports=function(t){var e='<select class="tui-timepicker-select" aria-label="Time">  {{each items}}    {{if equals initialValue @this}}      <option value="{{@this}}" selected {{if disabledItems[@index]}}disabled{{/if}}>{{formatTime @this format}}</option>    {{else}}      <option value="{{@this}}" {{if disabledItems[@index]}}disabled{{/if}}>{{formatTime @this format}}</option>    {{/if}}  {{/each}}</select>';return r(e,t)}},function(t,e,n){"use strict";t.exports={en:{am:"AM",pm:"PM"},ko:{am:"",pm:""}}},function(t,e,n){"use strict";var r=n(7);t.exports=function(t){var e='<div class="tui-timepicker">  <div class="tui-timepicker-body">    <div class="tui-timepicker-row">      {{if isSpinbox}}        <div class="tui-timepicker-column tui-timepicker-spinbox tui-timepicker-hour"></div>        <span class="tui-timepicker-column tui-timepicker-colon"><span class="tui-ico-colon">:</span></span>        <div class="tui-timepicker-column tui-timepicker-spinbox tui-timepicker-minute"></div>        {{if showMeridiem}}          {{meridiemElement}}        {{/if}}      {{else}}        <div class="tui-timepicker-column tui-timepicker-selectbox tui-timepicker-hour"></div>        <span class="tui-timepicker-column tui-timepicker-colon"><span class="tui-ico-colon">:</span></span>        <div class="tui-timepicker-column tui-timepicker-selectbox tui-timepicker-minute"></div>        {{if showMeridiem}}          {{meridiemElement}}        {{/if}}      {{/if}}    </div>  </div></div>';return r(e,t)}},function(t,e,n){"use strict";var r=n(7);t.exports=function(t){var e='{{if isSpinbox}}  <div class="tui-timepicker-column tui-timepicker-checkbox tui-timepicker-meridiem">    <div class="tui-timepicker-check-area">      <ul class="tui-timepicker-check-lst">        <li class="tui-timepicker-check">          <div class="tui-timepicker-radio">            <input type="radio"                  name="optionsRadios-{{radioId}}"                  value="AM"                  class="tui-timepicker-radio-am"                  id="tui-timepicker-radio-am-{{radioId}}">            <label for="tui-timepicker-radio-am-{{radioId}}" class="tui-timepicker-radio-label">              <span class="tui-timepicker-input-radio"></span>{{am}}            </label>          </div>        </li>        <li class="tui-timepicker-check">          <div class="tui-timepicker-radio">            <input type="radio"                  name="optionsRadios-{{radioId}}"                  value="PM"                  class="tui-timepicker-radio-pm"                  id="tui-timepicker-radio-pm-{{radioId}}">            <label for="tui-timepicker-radio-pm-{{radioId}}" class="tui-timepicker-radio-label">              <span class="tui-timepicker-input-radio"></span>{{pm}}            </label>          </div>        </li>      </ul>    </div>  </div>{{else}}  <div class="tui-timepicker-column tui-timepicker-selectbox tui-is-add-picker tui-timepicker-meridiem">    <select class="tui-timepicker-select" aria-label="AM/PM">      <option value="AM">{{am}}</option>      <option value="PM">{{pm}}</option>    </select>  </div>{{/if}}';return r(e,t)}}])}))},3392:function(t,e,n){"use strict";var r=n(9504),i=0,o=Math.random(),s=r(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+s(++i+o,36)}},3440:function(t,e,n){"use strict";var r=n(7080),i=n(4402),o=n(9286),s=n(5170),a=n(3789),c=n(8469),u=n(507),l=i.has,h=i.remove;t.exports=function(t){var e=r(this),n=a(t),i=o(e);return s(e)<=n.size?c(e,(function(t){n.includes(t)&&h(i,t)})):u(n.getIterator(),(function(t){l(e,t)&&h(i,t)})),i}},3506:function(t,e,n){"use strict";var r=n(3925),i=String,o=TypeError;t.exports=function(t){if(r(t))return t;throw new o("Can't set "+i(t)+" as a prototype")}},3520:function(t,e,n){"use strict";n.d(e,{Ay:function(){return Zd}});n(4114),n(8111),n(2489),n(116),n(531),n(7588),n(1701),n(8237),n(3579),n(1806),n(7642),n(8004),n(3853),n(5876),n(2475),n(5024),n(1698);var r,i,o,s,a,c,u=n(8003),l=Object.defineProperty,h=Object.defineProperties,d=Object.getOwnPropertyDescriptors,f=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,g=(t,e,n)=>e in t?l(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,y=(t,e)=>{for(var n in e||(e={}))p.call(e,n)&&g(t,n,e[n]);if(f)for(var n of f(e))m.call(e,n)&&g(t,n,e[n]);return t},v=(t,e)=>h(t,d(e)),_=(t,e)=>{var n={};for(var r in t)p.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&f)for(var r of f(t))e.indexOf(r)<0&&m.call(t,r)&&(n[r]=t[r]);return n},w={},b=[],E=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function T(t,e){for(var n in e)t[n]=e[n];return t}function C(t){var e=t.parentNode;e&&e.removeChild(t)}function S(t,e,n){var i,o,s,a={};for(s in e)"key"==s?i=e[s]:"ref"==s?o=e[s]:a[s]=e[s];if(arguments.length>2&&(a.children=arguments.length>3?r.call(arguments,2):n),"function"==typeof t&&null!=t.defaultProps)for(s in t.defaultProps)void 0===a[s]&&(a[s]=t.defaultProps[s]);return I(t,a,i,o,null)}function I(t,e,n,r,s){var a={type:t,props:e,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==s?++o:s};return null==s&&null!=i.vnode&&i.vnode(a),a}function k(t){return t.children}function x(t,e){this.props=t,this.context=e}function D(t,e){if(null==e)return t.__?D(t.__,t.__.__k.indexOf(t)+1):null;for(var n;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e)return n.__e;return"function"==typeof t.type?D(t):null}function A(t){var e,n;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e){t.__e=t.__c.base=n.__e;break}return A(t)}}function N(t){(!t.__d&&(t.__d=!0)&&s.push(t)&&!O.__r++||a!==i.debounceRendering)&&((a=i.debounceRendering)||setTimeout)(O)}function O(){for(var t;O.__r=s.length;)t=s.sort((function(t,e){return t.__v.__b-e.__v.__b})),s=[],t.some((function(t){var e,n,r,i,o,s;t.__d&&(o=(i=(e=t).__v).__e,(s=e.__P)&&(n=[],(r=T({},i)).__v=i.__v+1,H(s,i,r,e.__n,void 0!==s.ownerSVGElement,null!=i.__h?[o]:null,n,null==o?D(i):o,i.__h),B(n,i),i.__e!=o&&A(i)))}))}function P(t,e,n,r,i,o,s,a,c,u){var l,h,d,f,p,m,g,y=r&&r.__k||b,v=y.length;for(n.__k=[],l=0;l<e.length;l++)if(null!=(f=n.__k[l]=null==(f=e[l])||"boolean"==typeof f?null:"string"==typeof f||"number"==typeof f||"bigint"==typeof f?I(null,f,null,null,f):Array.isArray(f)?I(k,{children:f},null,null,null):f.__b>0?I(f.type,f.props,f.key,null,f.__v):f)){if(f.__=n,f.__b=n.__b+1,null===(d=y[l])||d&&f.key==d.key&&f.type===d.type)y[l]=void 0;else for(h=0;h<v;h++){if((d=y[h])&&f.key==d.key&&f.type===d.type){y[h]=void 0;break}d=null}H(t,f,d=d||w,i,o,s,a,c,u),p=f.__e,(h=f.ref)&&d.ref!=h&&(g||(g=[]),d.ref&&g.push(d.ref,null,f),g.push(h,f.__c||p,f)),null!=p?(null==m&&(m=p),"function"==typeof f.type&&f.__k===d.__k?f.__d=c=R(f,c,t):c=L(t,f,d,y,p,c),"function"==typeof n.type&&(n.__d=c)):c&&d.__e==c&&c.parentNode!=t&&(c=D(d))}for(n.__e=m,l=v;l--;)null!=y[l]&&("function"==typeof n.type&&null!=y[l].__e&&y[l].__e==n.__d&&(n.__d=D(r,l+1)),q(y[l],y[l]));if(g)for(l=0;l<g.length;l++)W(g[l],g[++l],g[++l])}function R(t,e,n){for(var r,i=t.__k,o=0;i&&o<i.length;o++)(r=i[o])&&(r.__=t,e="function"==typeof r.type?R(r,e,n):L(n,r,r,i,r.__e,e));return e}function M(t,e){return e=e||[],null==t||"boolean"==typeof t||(Array.isArray(t)?t.some((function(t){M(t,e)})):e.push(t)),e}function L(t,e,n,r,i,o){var s,a,c;if(void 0!==e.__d)s=e.__d,e.__d=void 0;else if(null==n||i!=o||null==i.parentNode)t:if(null==o||o.parentNode!==t)t.appendChild(i),s=null;else{for(a=o,c=0;(a=a.nextSibling)&&c<r.length;c+=2)if(a==i)break t;t.insertBefore(i,o),s=o}return void 0!==s?s:i.nextSibling}function F(t,e,n,r,i){var o;for(o in n)"children"===o||"key"===o||o in e||U(t,o,null,n[o],r);for(o in e)i&&"function"!=typeof e[o]||"children"===o||"key"===o||"value"===o||"checked"===o||n[o]===e[o]||U(t,o,e[o],n[o],r)}function j(t,e,n){"-"===e[0]?t.setProperty(e,n):t[e]=null==n?"":"number"!=typeof n||E.test(e)?n:n+"px"}function U(t,e,n,r,i){var o;t:if("style"===e)if("string"==typeof n)t.style.cssText=n;else{if("string"==typeof r&&(t.style.cssText=r=""),r)for(e in r)n&&e in n||j(t.style,e,"");if(n)for(e in n)r&&n[e]===r[e]||j(t.style,e,n[e])}else if("o"===e[0]&&"n"===e[1])o=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+o]=n,n?r||t.addEventListener(e,o?$:V,o):t.removeEventListener(e,o?$:V,o);else if("dangerouslySetInnerHTML"!==e){if(i)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("href"!==e&&"list"!==e&&"form"!==e&&"tabIndex"!==e&&"download"!==e&&e in t)try{t[e]=null==n?"":n;break t}catch(s){}"function"==typeof n||(null!=n&&(!1!==n||"a"===e[0]&&"r"===e[1])?t.setAttribute(e,n):t.removeAttribute(e))}}function V(t){this.l[t.type+!1](i.event?i.event(t):t)}function $(t){this.l[t.type+!0](i.event?i.event(t):t)}function H(t,e,n,r,o,s,a,c,u){var l,h,d,f,p,m,g,y,v,_,w,b,E,C=e.type;if(void 0!==e.constructor)return null;null!=n.__h&&(u=n.__h,c=e.__e=n.__e,e.__h=null,s=[c]),(l=i.__b)&&l(e);try{t:if("function"==typeof C){if(y=e.props,v=(l=C.contextType)&&r[l.__c],_=l?v?v.props.value:l.__:r,n.__c?g=(h=e.__c=n.__c).__=h.__E:("prototype"in C&&C.prototype.render?e.__c=h=new C(y,_):(e.__c=h=new x(y,_),h.constructor=C,h.render=K),v&&v.sub(h),h.props=y,h.state||(h.state={}),h.context=_,h.__n=r,d=h.__d=!0,h.__h=[]),null==h.__s&&(h.__s=h.state),null!=C.getDerivedStateFromProps&&(h.__s==h.state&&(h.__s=T({},h.__s)),T(h.__s,C.getDerivedStateFromProps(y,h.__s))),f=h.props,p=h.state,d)null==C.getDerivedStateFromProps&&null!=h.componentWillMount&&h.componentWillMount(),null!=h.componentDidMount&&h.__h.push(h.componentDidMount);else{if(null==C.getDerivedStateFromProps&&y!==f&&null!=h.componentWillReceiveProps&&h.componentWillReceiveProps(y,_),!h.__e&&null!=h.shouldComponentUpdate&&!1===h.shouldComponentUpdate(y,h.__s,_)||e.__v===n.__v){h.props=y,h.state=h.__s,e.__v!==n.__v&&(h.__d=!1),h.__v=e,e.__e=n.__e,e.__k=n.__k,e.__k.forEach((function(t){t&&(t.__=e)})),h.__h.length&&a.push(h);break t}null!=h.componentWillUpdate&&h.componentWillUpdate(y,h.__s,_),null!=h.componentDidUpdate&&h.__h.push((function(){h.componentDidUpdate(f,p,m)}))}if(h.context=_,h.props=y,h.__v=e,h.__P=t,w=i.__r,b=0,"prototype"in C&&C.prototype.render)h.state=h.__s,h.__d=!1,w&&w(e),l=h.render(h.props,h.state,h.context);else do{h.__d=!1,w&&w(e),l=h.render(h.props,h.state,h.context),h.state=h.__s}while(h.__d&&++b<25);h.state=h.__s,null!=h.getChildContext&&(r=T(T({},r),h.getChildContext())),d||null==h.getSnapshotBeforeUpdate||(m=h.getSnapshotBeforeUpdate(f,p)),E=null!=l&&l.type===k&&null==l.key?l.props.children:l,P(t,Array.isArray(E)?E:[E],e,n,r,o,s,a,c,u),h.base=e.__e,e.__h=null,h.__h.length&&a.push(h),g&&(h.__E=h.__=null),h.__e=!1}else null==s&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=z(n.__e,e,n,r,o,s,a,u);(l=i.diffed)&&l(e)}catch(S){e.__v=null,(u||null!=s)&&(e.__e=c,e.__h=!!u,s[s.indexOf(c)]=null),i.__e(S,e,n)}}function B(t,e){i.__c&&i.__c(e,t),t.some((function(e){try{t=e.__h,e.__h=[],t.some((function(t){t.call(e)}))}catch(n){i.__e(n,e.__v)}}))}function z(t,e,n,i,o,s,a,c){var u,l,h,d=n.props,f=e.props,p=e.type,m=0;if("svg"===p&&(o=!0),null!=s)for(;m<s.length;m++)if((u=s[m])&&"setAttribute"in u==!!p&&(p?u.localName===p:3===u.nodeType)){t=u,s[m]=null;break}if(null==t){if(null===p)return document.createTextNode(f);t=o?document.createElementNS("http://www.w3.org/2000/svg",p):document.createElement(p,f.is&&f),s=null,c=!1}if(null===p)d===f||c&&t.data===f||(t.data=f);else{if(s=s&&r.call(t.childNodes),l=(d=n.props||w).dangerouslySetInnerHTML,h=f.dangerouslySetInnerHTML,!c){if(null!=s)for(d={},m=0;m<t.attributes.length;m++)d[t.attributes[m].name]=t.attributes[m].value;(h||l)&&(h&&(l&&h.__html==l.__html||h.__html===t.innerHTML)||(t.innerHTML=h&&h.__html||""))}if(F(t,f,d,o,c),h)e.__k=[];else if(m=e.props.children,P(t,Array.isArray(m)?m:[m],e,n,i,o&&"foreignObject"!==p,s,a,s?s[0]:n.__k&&D(n,0),c),null!=s)for(m=s.length;m--;)null!=s[m]&&C(s[m]);c||("value"in f&&void 0!==(m=f.value)&&(m!==t.value||"progress"===p&&!m||"option"===p&&m!==d.value)&&U(t,"value",m,d.value,!1),"checked"in f&&void 0!==(m=f.checked)&&m!==t.checked&&U(t,"checked",m,d.checked,!1))}return t}function W(t,e,n){try{"function"==typeof t?t(e):t.current=e}catch(r){i.__e(r,n)}}function q(t,e,n){var r,o;if(i.unmount&&i.unmount(t),(r=t.ref)&&(r.current&&r.current!==t.__e||W(r,null,e)),null!=(r=t.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(s){i.__e(s,e)}r.base=r.__P=null}if(r=t.__k)for(o=0;o<r.length;o++)r[o]&&q(r[o],e,"function"!=typeof t.type);n||null==t.__e||C(t.__e),t.__e=t.__d=void 0}function K(t,e,n){return this.constructor(t,n)}function G(t,e,n){var o,s,a;i.__&&i.__(t,e),s=(o="function"==typeof n)?null:n&&n.__k||e.__k,a=[],H(e,t=(!o&&n||e).__k=S(k,null,[t]),s||w,w,void 0!==e.ownerSVGElement,!o&&n?[n]:s?null:e.firstChild?r.call(e.childNodes):null,a,!o&&n?n:s?s.__e:e.firstChild,o),B(a,t)}function Y(t,e,n){var i,o,s,a=T({},t.props);for(s in e)"key"==s?i=e[s]:"ref"==s?o=e[s]:a[s]=e[s];return arguments.length>2&&(a.children=arguments.length>3?r.call(arguments,2):n),I(t.type,a,i||t.key,o||t.ref,null)}function Q(t,e){var n={__c:e="__cC"+c++,__:t,Consumer:function(t,e){return t.children(e)},Provider:function(t){var n,r;return this.getChildContext||(n=[],(r={})[e]=this,this.getChildContext=function(){return r},this.shouldComponentUpdate=function(t){this.props.value!==t.value&&n.some(N)},this.sub=function(t){n.push(t);var e=t.componentWillUnmount;t.componentWillUnmount=function(){n.splice(n.indexOf(t),1),e&&e.call(t)}}),t.children}};return n.Provider.__=n.Consumer.contextType=n}r=b.slice,i={__e:function(t,e,n,r){for(var i,o,s;e=e.__;)if((i=e.__c)&&!i.__)try{if((o=i.constructor)&&null!=o.getDerivedStateFromError&&(i.setState(o.getDerivedStateFromError(t)),s=i.__d),null!=i.componentDidCatch&&(i.componentDidCatch(t,r||{}),s=i.__d),s)return i.__E=i}catch(a){t=a}throw t}},o=0,x.prototype.setState=function(t,e){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=T({},this.state),"function"==typeof t&&(t=t(T({},n),this.props)),t&&T(n,t),null!=t&&this.__v&&(e&&this.__h.push(e),N(this))},x.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),N(this))},x.prototype.render=k,s=[],O.__r=0,c=0;var X,J,Z,tt,et=0,nt=[],rt=[],it=i.__b,ot=i.__r,st=i.diffed,at=i.__c,ct=i.unmount;function ut(t,e){i.__h&&i.__h(J,t,et||e),et=0;var n=J.__H||(J.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({__V:rt}),n.__[t]}function lt(t){return et=1,ht(Tt,t)}function ht(t,e,n){var r=ut(X++,2);return r.t=t,r.__c||(r.__=[n?n(e):Tt(void 0,e),function(t){var e=r.t(r.__[0],t);r.__[0]!==e&&(r.__=[e,r.__[1]],r.__c.setState({}))}],r.__c=J),r.__}function dt(t,e){var n=ut(X++,3);!i.__s&&Et(n.__H,e)&&(n.__=t,n.u=e,J.__H.__h.push(n))}function ft(t,e){var n=ut(X++,4);!i.__s&&Et(n.__H,e)&&(n.__=t,n.u=e,J.__h.push(n))}function pt(t){return et=5,mt((function(){return{current:t}}),[])}function mt(t,e){var n=ut(X++,7);return Et(n.__H,e)?(n.__V=t(),n.u=e,n.__h=t,n.__V):n.__}function gt(t,e){return et=8,mt((function(){return t}),e)}function yt(t){var e=J.context[t.__c],n=ut(X++,9);return n.c=t,e?(null==n.__&&(n.__=!0,e.sub(J)),e.props.value):t.__}function vt(){for(var t;t=nt.shift();)if(t.__P)try{t.__H.__h.forEach(wt),t.__H.__h.forEach(bt),t.__H.__h=[]}catch(e){t.__H.__h=[],i.__e(e,t.__v)}}i.__b=function(t){J=null,it&&it(t)},i.__r=function(t){ot&&ot(t),X=0;var e=(J=t.__c).__H;e&&(Z===J?(e.__h=[],J.__h=[],e.__.forEach((function(t){t.__V=rt,t.u=void 0}))):(e.__h.forEach(wt),e.__h.forEach(bt),e.__h=[])),Z=J},i.diffed=function(t){st&&st(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(1!==nt.push(e)&&tt===i.requestAnimationFrame||((tt=i.requestAnimationFrame)||function(t){var e,n=function(){clearTimeout(r),_t&&cancelAnimationFrame(e),setTimeout(t)},r=setTimeout(n,100);_t&&(e=requestAnimationFrame(n))})(vt)),e.__H.__.forEach((function(t){t.u&&(t.__H=t.u),t.__V!==rt&&(t.__=t.__V),t.u=void 0,t.__V=rt}))),Z=J=null},i.__c=function(t,e){e.some((function(t){try{t.__h.forEach(wt),t.__h=t.__h.filter((function(t){return!t.__||bt(t)}))}catch(n){e.some((function(t){t.__h&&(t.__h=[])})),e=[],i.__e(n,t.__v)}})),at&&at(t,e)},i.unmount=function(t){ct&&ct(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach((function(t){try{wt(t)}catch(n){e=n}})),e&&i.__e(e,n.__v))};var _t="function"==typeof requestAnimationFrame;function wt(t){var e=J,n=t.__c;"function"==typeof n&&(t.__c=void 0,n()),J=e}function bt(t){var e=J;t.__c=t.__(),J=e}function Et(t,e){return!t||t.length!==e.length||e.some((function(e,n){return e!==t[n]}))}function Tt(t,e){return"function"==typeof e?e(t):e}function Ct(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+t+(n.length?" "+n.map((function(t){return"'"+t+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function St(t){return!!t&&!!t[de]}function It(t){return!!t&&(function(t){if(!t||"object"!=typeof t)return!1;var e=Object.getPrototypeOf(t);if(null===e)return!0;var n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===fe}(t)||Array.isArray(t)||!!t[he]||!!t.constructor[he]||Pt(t)||Rt(t))}function kt(t,e,n){void 0===n&&(n=!1),0===xt(t)?(n?Object.keys:pe)(t).forEach((function(r){n&&"symbol"==typeof r||e(r,t[r],t)})):t.forEach((function(n,r){return e(r,n,t)}))}function xt(t){var e=t[de];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:Pt(t)?2:Rt(t)?3:0}function Dt(t,e){return 2===xt(t)?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function At(t,e){return 2===xt(t)?t.get(e):t[e]}function Nt(t,e,n){var r=xt(t);2===r?t.set(e,n):3===r?(t.delete(e),t.add(n)):t[e]=n}function Ot(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}function Pt(t){return ae&&t instanceof Map}function Rt(t){return ce&&t instanceof Set}function Mt(t){return t.o||t.t}function Lt(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=me(t);delete e[de];for(var n=pe(e),r=0;r<n.length;r++){var i=n[r],o=e[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(e[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[i]})}return Object.create(Object.getPrototypeOf(t),e)}function Ft(t,e){return void 0===e&&(e=!1),Ut(t)||St(t)||!It(t)||(xt(t)>1&&(t.set=t.add=t.clear=t.delete=jt),Object.freeze(t),e&&kt(t,(function(t,e){return Ft(e,!0)}),!0)),t}function jt(){Ct(2)}function Ut(t){return null==t||"object"!=typeof t||Object.isFrozen(t)}function Vt(t){var e=ge[t];return e||Ct(18,t),e}function $t(){return oe}function Ht(t,e){e&&(Vt("Patches"),t.u=[],t.s=[],t.v=e)}function Bt(t){zt(t),t.p.forEach(qt),t.p=null}function zt(t){t===oe&&(oe=t.l)}function Wt(t){return oe={p:[],l:oe,h:t,m:!0,_:0}}function qt(t){var e=t[de];0===e.i||1===e.i?e.j():e.O=!0}function Kt(t,e){e._=e.p.length;var n=e.p[0],r=void 0!==t&&t!==n;return e.h.g||Vt("ES5").S(e,t,r),r?(n[de].P&&(Bt(e),Ct(4)),It(t)&&(t=Gt(e,t),e.l||Qt(e,t)),e.u&&Vt("Patches").M(n[de].t,t,e.u,e.s)):t=Gt(e,n,[]),Bt(e),e.u&&e.v(e.u,e.s),t!==le?t:void 0}function Gt(t,e,n){if(Ut(e))return e;var r=e[de];if(!r)return kt(e,(function(i,o){return Yt(t,r,e,i,o,n)}),!0),e;if(r.A!==t)return e;if(!r.P)return Qt(t,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=4===r.i||5===r.i?r.o=Lt(r.k):r.o;kt(3===r.i?new Set(i):i,(function(e,o){return Yt(t,r,i,e,o,n)})),Qt(t,i,!1),n&&t.u&&Vt("Patches").R(r,n,t.u,t.s)}return r.o}function Yt(t,e,n,r,i,o){if(St(i)){var s=Gt(t,i,o&&e&&3!==e.i&&!Dt(e.D,r)?o.concat(r):void 0);if(Nt(n,r,s),!St(s))return;t.m=!1}if(It(i)&&!Ut(i)){if(!t.h.F&&t._<1)return;Gt(t,i),e&&e.A.l||Qt(t,i)}}function Qt(t,e,n){void 0===n&&(n=!1),t.h.F&&t.m&&Ft(e,n)}function Xt(t,e){var n=t[de];return(n?Mt(n):t)[e]}function Jt(t,e){if(e in t)for(var n=Object.getPrototypeOf(t);n;){var r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Object.getPrototypeOf(n)}}function Zt(t){t.P||(t.P=!0,t.l&&Zt(t.l))}function te(t){t.o||(t.o=Lt(t.t))}function ee(t,e,n){var r=Pt(e)?Vt("MapSet").N(e,n):Rt(e)?Vt("MapSet").T(e,n):t.g?function(t,e){var n=Array.isArray(t),r={i:n?1:0,A:e?e.A:$t(),P:!1,I:!1,D:{},l:e,t:t,k:null,o:null,j:null,C:!1},i=r,o=ye;n&&(i=[r],o=ve);var s=Proxy.revocable(i,o),a=s.revoke,c=s.proxy;return r.k=c,r.j=a,c}(e,n):Vt("ES5").J(e,n);return(n?n.A:$t()).p.push(r),r}function ne(t){return St(t)||Ct(22,t),function t(e){if(!It(e))return e;var n,r=e[de],i=xt(e);if(r){if(!r.P&&(r.i<4||!Vt("ES5").K(r)))return r.t;r.I=!0,n=re(e,i),r.I=!1}else n=re(e,i);return kt(n,(function(e,i){r&&At(r.t,e)===i||Nt(n,e,t(i))})),3===i?new Set(n):n}(t)}function re(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return Lt(t)}var ie,oe,se="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),ae="undefined"!=typeof Map,ce="undefined"!=typeof Set,ue="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,le=se?Symbol.for("immer-nothing"):((ie={})["immer-nothing"]=!0,ie),he=se?Symbol.for("immer-draftable"):"__$immer_draftable",de=se?Symbol.for("immer-state"):"__$immer_state",fe=""+Object.prototype.constructor,pe="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,me=Object.getOwnPropertyDescriptors||function(t){var e={};return pe(t).forEach((function(n){e[n]=Object.getOwnPropertyDescriptor(t,n)})),e},ge={},ye={get:function(t,e){if(e===de)return t;var n=Mt(t);if(!Dt(n,e))return function(t,e,n){var r,i=Jt(e,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(t.k):void 0}(t,n,e);var r=n[e];return t.I||!It(r)?r:r===Xt(t.t,e)?(te(t),t.o[e]=ee(t.A.h,r,t)):r},has:function(t,e){return e in Mt(t)},ownKeys:function(t){return Reflect.ownKeys(Mt(t))},set:function(t,e,n){var r=Jt(Mt(t),e);if(null==r?void 0:r.set)return r.set.call(t.k,n),!0;if(!t.P){var i=Xt(Mt(t),e),o=null==i?void 0:i[de];if(o&&o.t===n)return t.o[e]=n,t.D[e]=!1,!0;if(Ot(n,i)&&(void 0!==n||Dt(t.t,e)))return!0;te(t),Zt(t)}return t.o[e]===n&&"number"!=typeof n&&(void 0!==n||e in t.o)||(t.o[e]=n,t.D[e]=!0,!0)},deleteProperty:function(t,e){return void 0!==Xt(t.t,e)||e in t.t?(t.D[e]=!1,te(t),Zt(t)):delete t.D[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var n=Mt(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r?{writable:!0,configurable:1!==t.i||"length"!==e,enumerable:r.enumerable,value:n[e]}:r},defineProperty:function(){Ct(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){Ct(12)}},ve={};kt(ye,(function(t,e){ve[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}})),ve.deleteProperty=function(t,e){return ve.set.call(this,t,e,void 0)},ve.set=function(t,e,n){return ye.set.call(this,t[0],e,n,t[0])};var _e=function(){function t(t){var e=this;this.g=ue,this.F=!0,this.produce=function(t,n,r){if("function"==typeof t&&"function"!=typeof n){var i=n;n=t;var o=e;return function(t){var e=this;void 0===t&&(t=i);for(var r=arguments.length,s=Array(r>1?r-1:0),a=1;a<r;a++)s[a-1]=arguments[a];return o.produce(t,(function(t){var r;return(r=n).call.apply(r,[e,t].concat(s))}))}}var s;if("function"!=typeof n&&Ct(6),void 0!==r&&"function"!=typeof r&&Ct(7),It(t)){var a=Wt(e),c=ee(e,t,void 0),u=!0;try{s=n(c),u=!1}finally{u?Bt(a):zt(a)}return"undefined"!=typeof Promise&&s instanceof Promise?s.then((function(t){return Ht(a,r),Kt(t,a)}),(function(t){throw Bt(a),t})):(Ht(a,r),Kt(s,a))}if(!t||"object"!=typeof t){if(void 0===(s=n(t))&&(s=t),s===le&&(s=void 0),e.F&&Ft(s,!0),r){var l=[],h=[];Vt("Patches").M(t,s,l,h),r(l,h)}return s}Ct(21,t)},this.produceWithPatches=function(t,n){if("function"==typeof t)return function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return e.produceWithPatches(n,(function(e){return t.apply(void 0,[e].concat(i))}))};var r,i,o=e.produce(t,n,(function(t,e){r=t,i=e}));return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(t){return[t,r,i]})):[o,r,i]},"boolean"==typeof(null==t?void 0:t.useProxies)&&this.setUseProxies(t.useProxies),"boolean"==typeof(null==t?void 0:t.autoFreeze)&&this.setAutoFreeze(t.autoFreeze)}var e=t.prototype;return e.createDraft=function(t){It(t)||Ct(8),St(t)&&(t=ne(t));var e=Wt(this),n=ee(this,t,void 0);return n[de].C=!0,zt(e),n},e.finishDraft=function(t,e){var n=t&&t[de],r=n.A;return Ht(r,e),Kt(void 0,r)},e.setAutoFreeze=function(t){this.F=t},e.setUseProxies=function(t){t&&!ue&&Ct(20),this.g=t},e.applyPatches=function(t,e){var n;for(n=e.length-1;n>=0;n--){var r=e[n];if(0===r.path.length&&"replace"===r.op){t=r.value;break}}n>-1&&(e=e.slice(n+1));var i=Vt("Patches").$;return St(t)?i(t,e):this.produce(t,(function(t){return i(t,e)}))},t}(),we=new _e,be=we.produce;we.produceWithPatches.bind(we),we.setAutoFreeze.bind(we),we.setUseProxies.bind(we),we.applyPatches.bind(we),we.createDraft.bind(we),we.finishDraft.bind(we);var Ee=be;"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self&&self;function Te(t){return void 0===t}var Ce=Te,Se=Ce;function Ie(t,e,n){var r,i=[];for(Se(e)&&(e=t||0,t=0),n=n||1,r=n<0?-1:1,e*=r;t*r<e;t+=n)i.push(t);return i}var ke=Ie;const xe="0",De=24,Ae=2,Ne=3,Oe=27,Pe=5,Re=280,Me=44,Le=12,Fe=12,je="12px 17px 0",Ue=42,Ve=1,$e=2,He=72,Be={color:"#000",backgroundColor:"#a1b56c",dragBackgroundColor:"#a1b56c",borderColor:"#000"},ze=2,We=9;function qe(t){return"boolean"===typeof t||t instanceof Boolean}var Ke=qe;function Ge(t){return"number"===typeof t||t instanceof Number}var Ye=Ge;function Qe(t){return t===Object(t)}var Xe=Qe;function Je(t){return"string"===typeof t||t instanceof String}var Ze=Je;function tn(t){return Ce(t)||null===t}function en(t){return!tn(t)}function nn(t){return"function"===typeof t}const rn="toastui-calendar-";function on(...t){const e=[];return t.forEach((t=>{t&&(Ze(t)?e.push(t):Object.keys(t).forEach((n=>{t[n]&&e.push(n)})))})),e.map((t=>`${rn}${t}`)).join(" ")}function sn(t){return`${t}%`}function an(t){return`${t}px`}function cn(t){const e=/(\d+)%/,n=t.match(e),r=/(-?)\s?(\d+)px/,i=t.match(r);return{percent:n?parseInt(n[1],10):0,px:i?parseInt(`${i[1]}${i[2]}`,10):0}}function un(t,e){const n=t.model.getColors();return Object.keys(Be).reduce(((t,r)=>{var i,o;const s=r;return t[s]=null!=(o=null!=(i=n[s])?i:e[s])?o:Be[s],t}),{})}const ln=/^(-?(?:[1-9][0-9]*)?[0-9]{4})-(1[0-2]|0[1-9])-(3[01]|0[1-9]|[12][0-9])T(2[0-3]|[01][0-9]):([0-5][0-9]):([0-5][0-9])(\.)?([0-9]+)?([+-]\d\d(?::?\d\d)?|\s*Z)?$/;function hn(){throw new Error("This operation is not supported.")}function dn(t){const e=ln.exec(t);if(e){const[,t,n,r,i,o,s,,a,c]=e;return{y:Number(t),M:Number(n)-1,d:Number(r),h:Number(i),m:Number(o),s:Number(s),ms:Number(a)||0,zoneInfo:c}}return null}function fn(t){const e=dn(t);if(e&&!e.zoneInfo){const{y:t,M:n,d:r,h:i,m:o,s:s,ms:a}=e;return new Date(t,n,r,i,o,s,a)}return null}class pn{constructor(...t){const[e]=t;e instanceof Date?this.d=new Date(e.getTime()):Ze(e)&&1===t.length&&(this.d=fn(e)),this.d||(this.d=new Date(...t))}setTimezoneOffset(){hn()}setTimezoneName(){hn()}clone(){return new pn(this.d)}toDate(){return new Date(this.d.getTime())}toString(){return this.d.toString()}}const mn=["getTime","getTimezoneOffset","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getMilliseconds","getDay"],gn=["setTime","setFullYear","setMonth","setDate","setHours","setMinutes","setSeconds","setMilliseconds"];mn.forEach((t=>{pn.prototype[t]=function(...e){return this.d[t](...e)}})),gn.forEach((t=>{pn.prototype[t]=function(...e){return this.d[t](...e)}}));class yn extends pn{clone(){return new yn(this.d)}getTimezoneOffset(){return 0}}const vn=["FullYear","Month","Date","Hours","Minutes","Seconds","Milliseconds","Day"],_n=["FullYear","Month","Date","Hours","Minutes","Seconds","Milliseconds"];vn.forEach((t=>{const e=`get${t}`;yn.prototype[e]=function(...e){return this.d[`getUTC${t}`](...e)}})),_n.forEach((t=>{const e=`set${t}`;yn.prototype[e]=function(...e){return this.d[`setUTC${t}`](...e)}}));const wn="Invalid DateTime Format",bn="Invalid IANA Timezone Name",En="Invalid View Type",Tn="@toast-ui/calendar: ";class Cn extends Error{constructor(t){super(`${Tn}${bn} - ${t}`),this.name="InvalidTimezoneNameError"}}class Sn extends Error{constructor(t){super(`${Tn}${wn} - ${t}`),this.name="InvalidDateTimeFormatError"}}class In extends Error{constructor(t){super(`${Tn}${En} - ${t}`),this.name="InvalidViewTypeError"}}const kn={error:(t,...e)=>{console.error(`${Tn}${t}`,...e)},warn:(t,...e)=>{console.warn(`${Tn}${t}`,...e)}};let xn=pn;function Dn(...t){return new xn(...t)}function An(){return-(new Date).getTimezoneOffset()}function Nn(t,e=new Hn){if(!Mn())return kn.warn("Intl.DateTimeFormat is not fully supported. So It will return the local timezone offset only.\nYou can use a polyfill to fix this issue."),-e.toDate().getTimezoneOffset();Ln(t);const n=Un(e,t),r=Vn(n);return Math.round((r.getTime()-e.getTime())/60/1e3)}function On(t,e){e&&Ln(e);const n=new Hn(t.getFullYear(),0,1),r=new Hn(t.getFullYear(),6,1);return e?Math.max(-Nn(e,n),-Nn(e,r))!==-Nn(e,t):Math.max(n.getTimezoneOffset(),r.getTimezoneOffset())!==t.toDate().getTimezoneOffset()}const Pn={},Rn={};function Mn(){var t,e;return nn(null==(e=null==(t=null==Intl?void 0:Intl.DateTimeFormat)?void 0:t.prototype)?void 0:e.formatToParts)}function Ln(t){if(Rn[t])return!0;try{return Intl.DateTimeFormat("en-US",{timeZone:t}),Rn[t]=!0,!0}catch(e){throw new Cn(t)}}function Fn(t){if(Pn[t])return Pn[t];const e=new Intl.DateTimeFormat("en-US",{timeZone:t,hourCycle:"h23",hour12:!1,year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"});return Pn[t]=e,e}const jn={year:0,month:1,day:2,hour:3,minute:4,second:5};function Un(t,e){const n=Fn(e),r=n.formatToParts(t.toDate());return r.reduce(((t,e)=>{const n=jn[e.type];return en(n)&&(t[n]=parseInt(e.value,10)),t}),[])}function Vn(t){const[e,n,r,i,o,s]=t,a=n-1;return new Date(Date.UTC(e,a,r,i%24,o,s))}function $n(t){return(An()-t)*fr}class Hn{constructor(...t){this.tzOffset=null,t[0]instanceof Hn?this.d=Dn(t[0].getTime()):this.d=Dn(...t)}toString(){return this.d.toString()}addFullYear(t){return this.setFullYear(this.getFullYear()+t),this}addMonth(t){return this.setMonth(this.getMonth()+t),this}addDate(t){return this.setDate(this.getDate()+t),this}addHours(t){return this.setHours(this.getHours()+t),this}addMinutes(t){return this.setMinutes(this.getMinutes()+t),this}addSeconds(t){return this.setSeconds(this.getSeconds()+t),this}addMilliseconds(t){return this.setMilliseconds(this.getMilliseconds()+t),this}setWithRaw(t,e,n,r,i,o,s){return this.setFullYear(t,e,n),this.setHours(r,i,o,s),this}toDate(){return this.d.toDate()}valueOf(){return this.getTime()}getTimezoneOffset(){var t;return null!=(t=this.tzOffset)?t:this.d.getTimezoneOffset()}getTime(){return this.d.getTime()}getFullYear(){return this.d.getFullYear()}getMonth(){return this.d.getMonth()}getDate(){return this.d.getDate()}getHours(){return this.d.getHours()}getMinutes(){return this.d.getMinutes()}getSeconds(){return this.d.getSeconds()}getMilliseconds(){return this.d.getMilliseconds()}getDay(){return this.d.getDay()}setTime(t){return this.d.setTime(t)}setFullYear(t,e=this.getMonth(),n=this.getDate()){return this.d.setFullYear(t,e,n)}setMonth(t,e=this.getDate()){return this.d.setMonth(t,e)}setDate(t){return this.d.setDate(t)}setHours(t,e=this.getMinutes(),n=this.getSeconds(),r=this.getMilliseconds()){return this.d.setHours(t,e,n,r)}setMinutes(t,e=this.getSeconds(),n=this.getMilliseconds()){return this.d.setMinutes(t,e,n)}setSeconds(t,e=this.getMilliseconds()){return this.d.setSeconds(t,e)}setMilliseconds(t){return this.d.setMilliseconds(t)}tz(t){if("Local"===t)return new Hn(this.getTime());const e=Ze(t)?Nn(t,this):t,n=new Hn(this.getTime()-$n(e));return n.tzOffset=e,n}local(t){if(en(t)){const e=Ze(t)?Nn(t,this):t;return new Hn(this.getTime()+$n(e))}return new Hn(this.getTime()+(en(this.tzOffset)?$n(this.tzOffset):0))}}function Bn(t,...e){return e.reduce(((e,n)=>(t.hasOwnProperty(n)&&(e[n]=t[n]),e)),{})}function zn(t){return Object.assign(Object.create(Object.getPrototypeOf(t)),t)}function Wn(t,e={}){return Xe(e)?(Object.keys(e).forEach((n=>{const r=n,i=n;Array.isArray(e[i])||!Xe(t[r])||!Xe(e[i])||e[i]instanceof Hn?t[r]=e[i]:t[r]=Wn(t[r],e[i])})),t):t}const qn=["top","left","width","height","exceedLeft","exceedRight","croppedStart","croppedEnd","goingDurationHeight","modelDurationHeight","comingDurationHeight","duplicateEvents","duplicateEventIndex","duplicateStarts","duplicateEnds","duplicateLeft","duplicateWidth","collapse","isMain"];class Kn{constructor(t){this.top=0,this.left=0,this.width=0,this.height=0,this.exceedLeft=!1,this.exceedRight=!1,this.croppedStart=!1,this.croppedEnd=!1,this.goingDurationHeight=0,this.modelDurationHeight=100,this.comingDurationHeight=0,this.duplicateEvents=[],this.duplicateEventIndex=-1,this.duplicateLeft="",this.duplicateWidth="",this.collapse=!1,this.isMain=!1,this.model=t}getUIProps(){return Bn(this,...qn)}setUIProps(t){Object.assign(this,t)}getStarts(){return this.renderStarts?this.renderStarts:this.model.getStarts()}getEnds(){return this.renderEnds?this.renderEnds:this.model.getEnds()}cid(){return this.model.cid()}valueOf(){return this.model}duration(){return this.model.duration()}collidesWith(t,e=!0){const n=[];[this,t].forEach((t=>{const e=t instanceof Kn&&t.duplicateEvents.length>0;e?n.push({start:t.duplicateStarts,end:t.duplicateEnds,goingDuration:0,comingDuration:0}):n.push({start:t.getStarts(),end:t.getEnds(),goingDuration:t.valueOf().goingDuration,comingDuration:t.valueOf().comingDuration})}));const[r,i]=n;return zr({start:r.start.getTime(),end:r.end.getTime(),targetStart:i.start.getTime(),targetEnd:i.end.getTime(),goingDuration:r.goingDuration,comingDuration:r.comingDuration,targetGoingDuration:i.goingDuration,targetComingDuration:i.comingDuration,usingTravelTime:e})}clone(){const t=this.getUIProps(),e=new Kn(this.model);return e.setUIProps(t),this.renderStarts&&(e.renderStarts=new Hn(this.renderStarts)),this.renderEnds&&(e.renderEnds=new Hn(this.renderEnds)),e}}function Gn(t,e){return t!==e?t?-1:1:0}function Yn(t,e){return Number(t)-Number(e)}function Qn(t,e){const n=String(t),r=String(e);return n===r?0:n>r?1:-1}function Xn(t,e){const n=t instanceof Kn?t.model:t,r=e instanceof Kn?e.model:e,i=Gn(n.isAllday||n.hasMultiDates,r.isAllday||r.hasMultiDates);if(i)return i;const o=Er(t.getStarts(),e.getStarts());if(o)return o;const s=t.duration(),a=e.duration();return s<a?1:s>a?-1:n.cid()-r.cid()}function Jn(t,e,n,r){let i,o,s,a=0,c=t.length-1;r=r||Qn;while(a<=c)if(i=(a+c)/2|0,o=n?n(t[i]):t[i],s=r(o,e),s<0)a=i+1;else{if(!(s>0))return i;c=i-1}return~c}var Zn={bsearch:Jn,compare:{event:{asc:Xn},num:{asc:Yn}}};function tr(t){return t[0]}function er(t){return t[t.length-1]}function nr(t,e){for(let n=t.length-1;n>=0;n-=1)if(e(t[n]))return n;return-1}function rr(t,e){return t>0?Array.from({length:t},(()=>Array.isArray(e)?e.slice():e)):[]}var ir=(t=>(t[t["SUN"]=0]="SUN",t[t["MON"]=1]="MON",t[t["TUE"]=2]="TUE",t[t["WED"]=3]="WED",t[t["THU"]=4]="THU",t[t["FRI"]=5]="FRI",t[t["SAT"]=6]="SAT",t))(ir||{});const or=7,sr=/^(\d{4}[-|/]*\d{2}[-|/]*\d{2})\s?(\d{2}:\d{2}:\d{2})?$/,ar={millisecondsTo:{},millisecondsFrom:{}},cr=[24,60,60,1e3];function ur(t,e){let n="",r=0;if(String(t).length>e)return String(t);for(;r<e-1;r+=1)n+="0";return(n+t).slice(-1*e)}function lr(t){let e=t.getHours();return 0===e&&(e=12),e>12&&(e%=12),e}const hr={YYYYMMDD(t){return[t.getFullYear(),ur(t.getMonth()+1,2),ur(t.getDate(),2)].join("")},YYYY(t){return String(t.getFullYear())},MM(t){return ur(t.getMonth()+1,2)},DD(t){return ur(t.getDate(),2)},"HH:mm":function(t){const e=t.getHours(),n=t.getMinutes();return`${ur(e,2)}:${ur(n,2)}`},"hh:mm":function(t){const e=lr(t),n=t.getMinutes();return`${ur(e,2)}:${ur(n,2)}`},hh(t){const e=lr(t);return String(e)},tt(t){const e=t.getHours();return e<12?"am":"pm"}},dr=864e5,fr=6e4,pr=20*fr,mr=18e5;function gr(t,e){let n=e;return Object.entries(hr).forEach((([e,r])=>{n=n.replace(e,r(t))})),n}function yr(t,e,n){const r={date:0,hour:1,minute:2,second:3};return!(t in r)||isNaN(e)?0:[e].concat(cr.slice(r[t])).reduce(n)}function vr(t,e){const n=ar.millisecondsFrom,r=t+e;if(n[r])return n[r];const i=yr(t,e,((t,e)=>t*e));return i?(n[r]=i,n[r]):0}function _r(t){const e=t?new Hn(t):new Hn;return e.setHours(0,0,0,0),e}function wr(t,e,n){const r=t.getTime(),i=e.getTime(),o=new Hn(t),s=[];let a=r;while(a<=i&&i>=o.getTime())s.push(new Hn(o)),a+=n,o.addMilliseconds(n);return s}function br(t){return new Hn(t)}function Er(t,e){const n=t.getTime(),r=e.getTime();return n<r?-1:n>r?1:0}function Tr(t,e){return t.getFullYear()===e.getFullYear()}function Cr(t,e){return Tr(t,e)&&t.getMonth()===e.getMonth()}function Sr(t,e){return Cr(t,e)&&t.getDate()===e.getDate()}function Ir(t,e){return 1===Er(t,e)?t:e}function kr(t,e){return-1===Er(t,e)?t:e}function xr(t,e=-1){const n=t.match(sr);let r,i,o;if(!n)throw new Sn(t);if(t.length>8){r=~t.indexOf("/")?"/":"-";const e=n.splice(1);i=e[0].split(r),o=e[1]?e[1].split(":"):[0,0,0]}else{const[t]=n;i=[t.substr(0,4),t.substr(4,2),t.substr(6,2)],o=[0,0,0]}return(new Hn).setWithRaw(Number(i[0]),Number(i[1])+e,Number(i[2]),Number(o[0]),Number(o[1]),Number(o[2]),0)}function Dr(t){const e=t?new Hn(t):new Hn;return e.setHours(23,59,59,999),e}function Ar(t){return 0===t||6===t}function Nr(t){return 0===t}function Or(t){return 6===t}function Pr(t){const e=new Hn(t);return e.setDate(1),e.setHours(0,0,0,0),e}function Rr(t){const e=Pr(t);return e.setMonth(e.getMonth()+1),e.setDate(e.getDate()-1),e.setHours(23,59,59,999),e}function Mr(t,e,n,r){const i=5,o=100/t,s=t>i?100/(t-1):o;let a=0;const c=ke(n,or).concat(ke(t)).slice(0,or);e=!r&&e;const u=c.map((n=>{let r=e?s:o;t>i&&e&&Ar(n)&&(r=s/2);const c={width:r,left:a};return a+=r,c})),{length:l}=u,h=rr(l,rr(l,0));return u.forEach((({width:t},e)=>{for(let n=0;n<=e;n+=1)for(let r=e;r<l;r+=1)h[n][r]+=t})),h[0][l-1]=100,{rowStyleInfo:u,cellWidthMap:h.map((t=>t.map(sn)))}}function Lr(t,e){const n=br(t);return n.setMilliseconds(t.getMilliseconds()+e),n}function Fr(t,e){const n=br(t);return n.setMinutes(t.getMinutes()+e),n}function jr(t,e){const n=br(t);return n.setHours(...e.split(":").map(Number)),n}function Ur(t,e){const n=br(t);return n.setDate(t.getDate()+e),n}function Vr(t,e){const n=br(t);return n.setDate(t.getDate()-e),n}function $r(t,e=1){const n=br(t);if(0!==e){const t=n.getDate(),r=new Hn(n.getTime());r.setMonth(n.getMonth()+e+1,0);const i=r.getDate();if(t>=i)return r;n.setFullYear(r.getFullYear(),r.getMonth(),t)}return n}function Hr(t,e){const n=new Hn(t.getFullYear(),t.getMonth(),t.getDate()).getTime(),r=new Hn(e.getFullYear(),e.getMonth(),e.getDate()).getTime();return Math.round((n-r)/dr)}function Br(t,e,n,r){return n>t&&n<e||r>t&&r<e||n<=t&&r>=e}function zr({start:t,end:e,targetStart:n,targetEnd:r,goingDuration:i,comingDuration:o,targetGoingDuration:s,targetComingDuration:a,usingTravelTime:c}){return Math.abs(e-t)<pr&&(e+=pr),Math.abs(e-t)<pr&&(e+=pr),c&&(t-=vr("minute",i),e+=vr("minute",o),n-=vr("minute",s),r+=vr("minute",a)),Br(t,e,n,r)}function Wr(t,e,n){return t.id===e&&t.calendarId===n}function qr(){let t=0;return{next(){return t+=1,t}}}const Kr=function(){const t=qr();return()=>t.next()}();function Gr(t){return t.__fe_id||(t.__fe_id=Kr()),t.__fe_id}class Yr{constructor(t={}){this.id="",this.calendarId="",this.title="",this.body="",this.isAllday=!1,this.start=new Hn,this.end=new Hn,this.goingDuration=0,this.comingDuration=0,this.location="",this.attendees=[],this.category="time",this.dueDateClass="",this.recurrenceRule="",this.state="Busy",this.isVisible=!0,this.isPending=!1,this.isFocused=!1,this.isReadOnly=!1,this.isPrivate=!1,this.customStyle={},this.raw=null,this.hasMultiDates=!1,Gr(this),this.init(t)}init({id:t="",calendarId:e="",title:n="",body:r="",isAllday:i=!1,start:o=new Hn,end:s=new Hn,goingDuration:a=0,comingDuration:c=0,location:u="",attendees:l=[],category:h="time",dueDateClass:d="",recurrenceRule:f="",state:p="Busy",isVisible:m=!0,isPending:g=!1,isFocused:y=!1,isReadOnly:v=!1,isPrivate:_=!1,color:w,backgroundColor:b,dragBackgroundColor:E,borderColor:T,customStyle:C={},raw:S=null}={}){this.id=t,this.calendarId=e,this.title=n,this.body=r,this.isAllday="allday"===h||i,this.goingDuration=a,this.comingDuration=c,this.location=u,this.attendees=l,this.category=h,this.dueDateClass=d,this.recurrenceRule=f,this.state=p,this.isVisible=m,this.isPending=g,this.isFocused=y,this.isReadOnly=v,this.isPrivate=_,this.color=w,this.backgroundColor=b,this.dragBackgroundColor=E,this.borderColor=T,this.customStyle=C,this.raw=S,this.isAllday?this.setAlldayPeriod(o,s):this.setTimePeriod(o,s),"milestone"!==h&&"task"!==h||(this.start=new Hn(this.end))}setAlldayPeriod(t,e){let n,r;n=Ze(t)?xr(t.substring(0,10)):new Hn(t||Date.now()),r=Ze(e)?xr(e.substring(0,10)):new Hn(e||this.start),this.start=n,this.start.setHours(0,0,0),this.end=r||new Hn(this.start),this.end.setHours(23,59,59)}setTimePeriod(t,e){this.start=new Hn(t||Date.now()),this.end=new Hn(e||this.start),e||this.end.setMinutes(this.end.getMinutes()+30),this.hasMultiDates=this.end.getTime()-this.start.getTime()>dr}getStarts(){return this.start}getEnds(){return this.end}cid(){return Gr(this)}equals(t){return this.id===t.id&&(this.title===t.title&&(this.body===t.body&&(this.isAllday===t.isAllday&&(0===Er(this.getStarts(),t.getStarts())&&(0===Er(this.getEnds(),t.getEnds())&&(this.color===t.color&&(this.backgroundColor===t.backgroundColor&&(this.dragBackgroundColor===t.dragBackgroundColor&&this.borderColor===t.borderColor))))))))}duration(){const t=Number(this.getStarts()),e=Number(this.getEnds());let n;return n=this.isAllday?Number(Dr(e))-Number(_r(t)):e-t,n}valueOf(){return this}collidesWith(t,e=!0){return t=t instanceof Kn?t.model:t,zr({start:Number(this.getStarts()),end:Number(this.getEnds()),targetStart:Number(t.getStarts()),targetEnd:Number(t.getEnds()),goingDuration:this.goingDuration,comingDuration:this.comingDuration,targetGoingDuration:t.goingDuration,targetComingDuration:t.comingDuration,usingTravelTime:e})}toEventObject(){return{id:this.id,calendarId:this.calendarId,__cid:this.cid(),title:this.title,body:this.body,isAllday:this.isAllday,start:this.start,end:this.end,goingDuration:this.goingDuration,comingDuration:this.comingDuration,location:this.location,attendees:this.attendees,category:this.category,dueDateClass:this.dueDateClass,recurrenceRule:this.recurrenceRule,state:this.state,isVisible:this.isVisible,isPending:this.isPending,isFocused:this.isFocused,isReadOnly:this.isReadOnly,isPrivate:this.isPrivate,color:this.color,backgroundColor:this.backgroundColor,dragBackgroundColor:this.dragBackgroundColor,borderColor:this.borderColor,customStyle:this.customStyle,raw:this.raw}}getColors(){return{color:this.color,backgroundColor:this.backgroundColor,dragBackgroundColor:this.dragBackgroundColor,borderColor:this.borderColor}}}function Qr({model:t}){const{category:e,isAllday:n,hasMultiDates:r}=t;return"time"===e&&!n&&!r}Yr.schema={required:["title"],dateRange:["start","end"]};class Xr{constructor(t){this.internalMap=new Map,nn(t)&&(this.getItemID=t)}static and(...t){const{length:e}=t;return n=>{for(let r=0;r<e;r+=1)if(!t[r].call(null,n))return!1;return!0}}static or(...t){const{length:e}=t;return e?n=>{let r=t[0].call(null,n);for(let i=1;i<e;i+=1)r=r||t[i].call(null,n);return r}:()=>!1}getItemID(t){var e;return null!=(e=null==t?void 0:t._id)?e:""}getFirstItem(){const t=this.internalMap.values();return t.next().value}add(...t){return t.forEach((t=>{const e=this.getItemID(t);this.internalMap.set(e,t)})),this}remove(...t){const e=[];return t.forEach((t=>{const n=Ze(t)||Ye(t)?t:this.getItemID(t);this.internalMap.has(n)&&(e.push(this.internalMap.get(n)),this.internalMap["delete"](n))})),1===e.length?e[0]:e}has(t){const e=Ze(t)||Ye(t)?t:this.getItemID(t);return this.internalMap.has(e)}get(t){var e;const n=Ze(t)||Ye(t)?t:this.getItemID(t);return null!=(e=this.internalMap.get(n))?e:null}doWhenHas(t,e){const n=this.internalMap.get(t);tn(n)||e(n)}filter(t){const e=new Xr;return this.hasOwnProperty("getItemID")&&(e.getItemID=this.getItemID),this.internalMap.forEach((n=>{!0===t(n)&&e.add(n)})),e}groupBy(t){const e={};return this.internalMap.forEach((n=>{let r=nn(t)?t(n):n[t];nn(r)&&(r=r.call(n)),null!=e[r]||(e[r]=new Xr(this.getItemID)),e[r].add(n)})),e}find(t){let e=null;const n=this.internalMap.values();let r=n.next();while(!1===r.done){if(t(r.value)){e=r.value;break}r=n.next()}return e}sort(t){return this.toArray().sort(t)}each(t){const e=this.internalMap.entries();let n=e.next();while(!1===n.done){const[r,i]=n.value;if(!1===t(i,r))break;n=e.next()}}clear(){this.internalMap.clear()}toArray(){return Array.from(this.internalMap.values())}get size(){return this.internalMap.size}}function Jr(...t){const e=new Xr((t=>t.cid()));return t.length&&e.add(...t),e}function Zr(t,e){return wr(_r(t),Dr(e),dr)}function ti(t){return t.isAllday||"time"===t.category&&Number(t.end)-Number(t.start)>dr}function ei(t){const{model:e}=t;return ti(e)?"allday":e.category}function ni(t,e){const n=Zr(e.getStarts(),e.getEnds());n.forEach((n=>{const r=gr(n,"YYYYMMDD"),i=t[r]=t[r]||[];i.push(e.cid())}))}function ri(t,e){const n=e.cid();Object.values(t).forEach((t=>{const e=t.indexOf(n);~e&&t.splice(e,1)}))}function ii(t,e){return t.events.add(e),ni(t.idsOfDay,e),e}function oi(t,e){const n=new Yr(e);return ii(t,n)}function si(t,e=[]){return e.map((e=>oi(t,e)))}function ai(t,e,n,r){const{idsOfDay:i}=t,o=t.events.find((t=>Wr(t,e,n)));return!!o&&(o.init(y(y({},o),r)),ri(i,o),ni(i,o),!0)}function ci(t,e){return ri(t.idsOfDay,e),t.events.remove(e),e}function ui(t){t.idsOfDay={},t.events.clear()}function li(t=[]){return{calendar:{calendars:t,events:Jr(),idsOfDay:{}}}}function hi(t){return{createEvents:e=>t(Ee((t=>{si(t.calendar,e)}))),updateEvent:({event:e,eventData:n})=>t(Ee((t=>{ai(t.calendar,e.id,e.calendarId,n)}))),deleteEvent:e=>t(Ee((t=>{ci(t.calendar,e)}))),clearEvents:()=>t(Ee((t=>{ui(t.calendar)}))),setCalendars:e=>t(Ee((t=>{t.calendar.calendars=e}))),setCalendarColor:(e,n)=>t(Ee((t=>{const r=t.calendar.calendars.map((t=>t.id===e?y(y({},t),n):t)),i=t.calendar.events.toArray().map((t=>{var r,i,o,s;return t.calendarId===e&&(t.color=null!=(r=n.color)?r:t.color,t.backgroundColor=null!=(i=n.backgroundColor)?i:t.backgroundColor,t.borderColor=null!=(o=n.borderColor)?o:t.borderColor,t.dragBackgroundColor=null!=(s=n.dragBackgroundColor)?s:t.dragBackgroundColor),t})),o=Jr(...i);t.calendar.calendars=r,t.calendar.events=o}))),setCalendarVisibility:(e,n)=>t(Ee((t=>{const r=t.calendar.events.toArray();t.calendar.events=Jr(...r.map((t=>(e.includes(t.calendarId)&&(t.isVisible=n),t))))})))}}var di=(t=>(t[t["IDLE"]=0]="IDLE",t[t["INIT"]=1]="INIT",t[t["DRAGGING"]=2]="DRAGGING",t[t["CANCELED"]=3]="CANCELED",t))(di||{});function fi(){return{dnd:{draggingItemType:null,draggingState:0,initX:null,initY:null,x:null,y:null,draggingEventUIModel:null}}}function pi(t){return{initDrag:e=>{t(Ee((t=>{t.dnd=v(y(y({},t.dnd),e),{draggingState:1})})))},setDragging:e=>{t(Ee((t=>{t.dnd=v(y(y({},t.dnd),e),{draggingState:2})})))},cancelDrag:()=>{t(Ee((t=>{t.dnd=fi().dnd,t.dnd.draggingState=3})))},reset:()=>{t(Ee((t=>{t.dnd=fi().dnd})))},setDraggingEventUIModel:e=>{t(Ee((t=>{var n;t.dnd.draggingEventUIModel=null!=(n=null==e?void 0:e.clone())?n:null})))}}}function mi(){return{gridSelection:{dayGridMonth:null,dayGridWeek:null,timeGrid:null,accumulated:{dayGridMonth:[]}}}}function gi(t){return{setGridSelection:(e,n)=>{t(Ee((t=>{t.gridSelection[e]=n})))},addGridSelection:(e,n)=>{t(Ee((t=>{"dayGridMonth"===e&&n&&(t.gridSelection.accumulated[e]=[...t.gridSelection.accumulated[e],n],t.gridSelection.dayGridMonth=null)})))},clearAll:()=>t(Ee((t=>{t.gridSelection=mi().gridSelection})))}}const yi=3,vi=-1;function _i(t,e,n){return Object.keys(t).reduce(((n,r)=>r===e?n:n-t[r].height-yi),n)}function wi(){return{layout:500,weekViewLayout:{lastPanelType:null,dayGridRows:{},selectedDuplicateEventCid:vi}}}function bi(t){return{setLastPanelType:e=>{t(Ee((t=>{t.weekViewLayout.lastPanelType=e,e&&(t.weekViewLayout.dayGridRows[e].height=_i(t.weekViewLayout.dayGridRows,e,t.layout))})))},updateLayoutHeight:e=>t(Ee((t=>{const{lastPanelType:n}=t.weekViewLayout;t.layout=e,n&&(t.weekViewLayout.dayGridRows[n].height=_i(t.weekViewLayout.dayGridRows,n,e))}))),updateDayGridRowHeight:({rowName:e,height:n})=>t(Ee((t=>{const{lastPanelType:r}=t.weekViewLayout;t.weekViewLayout.dayGridRows[e]={height:n},r&&(t.weekViewLayout.dayGridRows[r].height=_i(t.weekViewLayout.dayGridRows,r,t.layout))}))),updateDayGridRowHeightByDiff:({rowName:e,diff:n})=>t(Ee((t=>{var r,i,o;const{lastPanelType:s}=t.weekViewLayout,a=null!=(o=null==(i=null==(r=t.weekViewLayout.dayGridRows)?void 0:r[e])?void 0:i.height)?o:He;t.weekViewLayout.dayGridRows[e]={height:a+n},s&&(t.weekViewLayout.dayGridRows[s].height=_i(t.weekViewLayout.dayGridRows,s,t.layout))}))),setSelectedDuplicateEventCid:e=>t(Ee((t=>{t.weekViewLayout.selectedDuplicateEventCid=null!=e?e:vi})))}}function Ei(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Ti=["sun","mon","tue","wed","thu","fri","sat"],Ci=t=>Ti[t];function Si(t,e){return t.map((t=>{const n=t.getDay(),r=e.length>0?e[n]:Ei(Ci(n));return{date:t.getDate(),day:t.getDay(),dayName:r,isToday:!0,renderDate:"date",dateInstance:t}}))}function Ii(t){if(!t)return!1;const e={getDuplicateEvents:(t,e)=>e.filter((e=>e.title===t.title&&0===Er(e.start,t.start)&&0===Er(e.end,t.end))).sort(((t,e)=>t.calendarId>e.calendarId?1:-1)),getMainEvent:t=>er(t)};return Ke(t)?e:y(y({},e),t)}function ki(t={}){const e=y({startDayOfWeek:ir.SUN,dayNames:[],narrowWeekend:!1,workweek:!1,showNowIndicator:!0,showTimezoneCollapseButton:!1,timezonesCollapsed:!1,hourStart:0,hourEnd:24,eventView:!0,taskView:!0,collapseDuplicateEvents:!1},t);return e.collapseDuplicateEvents=Ii(e.collapseDuplicateEvents),e}function xi(t={}){return y({zones:[]},t)}function Di(t={}){const e=y({dayNames:[],visibleWeeksCount:0,workweek:!1,narrowWeekend:!1,startDayOfWeek:ir.SUN,isAlways6Weeks:!0,visibleEventCount:6},t);return 0===e.dayNames.length&&(e.dayNames=Ti.slice()),e}function Ai(t){return Ke(t)?{enableDblClick:t,enableClick:t}:y({enableDblClick:!0,enableClick:!0},t)}const Ni=t=>!!t.isVisible;function Oi(t={}){var e,n,r,i,o,s;return{options:{defaultView:null!=(e=t.defaultView)?e:"week",useFormPopup:null!=(n=t.useFormPopup)&&n,useDetailPopup:null!=(r=t.useDetailPopup)&&r,isReadOnly:null!=(i=t.isReadOnly)&&i,week:ki(t.week),month:Di(t.month),gridSelection:Ai(t.gridSelection),usageStatistics:null==(o=t.usageStatistics)||o,eventFilter:null!=(s=t.eventFilter)?s:Ni,timezone:xi(t.timezone)}}}function Pi(t){return{setOptions:(e={})=>t(Ee((t=>{var n;e.gridSelection&&(e.gridSelection=Ai(e.gridSelection)),(null==(n=e.week)?void 0:n.collapseDuplicateEvents)&&(e.week.collapseDuplicateEvents=Ii(e.week.collapseDuplicateEvents)),Wn(t.options,e)})))}}var Ri=(t=>(t["SeeMore"]="seeMore",t["Form"]="form",t["Detail"]="detail",t))(Ri||{});function Mi(){return{popup:{["seeMore"]:null,["form"]:null,["detail"]:null}}}function Li(t){return{showSeeMorePopup:e=>t(Ee((t=>{t.popup["seeMore"]=e,t.popup["form"]=null,t.popup["detail"]=null}))),showFormPopup:e=>t(Ee((t=>{t.popup["form"]=e,t.popup["seeMore"]=null,t.popup["detail"]=null}))),showDetailPopup:(e,n)=>t(Ee((t=>{t.popup["detail"]=e,t.popup["form"]=null,n||(t.popup["seeMore"]=null)}))),hideSeeMorePopup:()=>t(Ee((t=>{t.popup["seeMore"]=null}))),hideFormPopup:()=>t(Ee((t=>{t.popup["form"]=null}))),hideDetailPopup:()=>t(Ee((t=>{t.popup["detail"]=null}))),hideAllPopup:()=>t(Ee((t=>{t.popup["seeMore"]=null,t.popup["form"]=null,t.popup["detail"]=null})))}}const Fi=()=>{},ji=/^auto$|^$|%/;function Ui(t,e){let n=t.style[e];if((!n||"auto"===n)&&document.defaultView){const r=document.defaultView.getComputedStyle(t,null);n=r?r[e]:null}return"auto"===n?null:n}function Vi(t){return Ze(t)?ji.test(t):null===t}function $i(t){const e=Ui(t,"width"),n=Ui(t,"height");if((Vi(e)||Vi(n))&&t.getBoundingClientRect){const{width:e,height:n}=t.getBoundingClientRect();return{width:e||t.offsetWidth,height:n||t.offsetHeight}}return{width:parseFloat(null!=e?e:"0"),height:parseFloat(null!=n?n:"0")}}const Hi="undefined"===typeof Element?Fi:Element,Bi=Hi.prototype;function zi(t){return t.replace(/<([^>]+)>/gi,"")}Bi.matches||Bi.webkitMatchesSelector||Bi.msMatchesSelector;const Wi=60,qi={milestone(t){const e=on("icon","ic-milestone");return S(k,null,S("span",{className:e}),S("span",{style:{backgroundColor:t.backgroundColor}},zi(t.title)))},milestoneTitle(){return S("span",{className:on("left-content")},"Milestone")},task(t){return`#${t.title}`},taskTitle(){return S("span",{className:on("left-content")},"Task")},alldayTitle(){return S("span",{className:on("left-content")},"All Day")},allday(t){return zi(t.title)},time(t){const{start:e,title:n}=t;return e?S("span",null,S("strong",null,gr(e,"HH:mm")),"",S("span",null,zi(n))):zi(n)},goingDuration(t){const{goingDuration:e}=t,n=Math.floor(e/Wi),r=e%Wi;return`GoingTime ${ur(n,2)}:${ur(r,2)}`},comingDuration(t){const{comingDuration:e}=t,n=Math.floor(e/Wi),r=e%Wi;return`ComingTime ${ur(n,2)}:${ur(r,2)}`},monthMoreTitleDate(t){const{date:e,day:n}=t,r=on("more-title-date"),i=on("more-title-day"),o=Ei(Ci(n));return S(k,null,S("span",{className:r},e),S("span",{className:i},o))},monthMoreClose(){return""},monthGridHeader(t){const e=parseInt(t.date.split("-")[2],10),n=on("weekday-grid-date",{"weekday-grid-date-decorator":t.isToday});return S("span",{className:n},e)},monthGridHeaderExceed(t){const e=on("weekday-grid-more-events");return S("span",{className:e},t," more")},monthGridFooter(t){return""},monthGridFooterExceed(t){return""},monthDayName(t){return t.label},weekDayName(t){const e=on("day-name__date"),n=on("day-name__name");return S(k,null,S("span",{className:e},t.date),"",S("span",{className:n},t.dayName))},weekGridFooterExceed(t){return`+${t}`},collapseBtnTitle(){const t=on("collapse-btn-icon");return S("span",{className:t})},timezoneDisplayLabel({displayLabel:t,timezoneOffset:e}){if(tn(t)&&en(e)){const t=e<0?"-":"+",n=Math.abs(e/Wi),r=Math.abs(e%Wi);return`GMT${t}${ur(n,2)}:${ur(r,2)}`}return t},timegridDisplayPrimaryTime(t){const{time:e}=t;return gr(e,"hh tt")},timegridDisplayTime(t){const{time:e}=t;return gr(e,"HH:mm")},timegridNowIndicatorLabel(t){const{time:e,format:n="HH:mm"}=t;return gr(e,n)},popupIsAllday(){return"All day"},popupStateFree(){return"Free"},popupStateBusy(){return"Busy"},titlePlaceholder(){return"Subject"},locationPlaceholder(){return"Location"},startDatePlaceholder(){return"Start date"},endDatePlaceholder(){return"End date"},popupSave(){return"Save"},popupUpdate(){return"Update"},popupEdit(){return"Edit"},popupDelete(){return"Delete"},popupDetailTitle({title:t}){return t},popupDetailDate({isAllday:t,start:e,end:n}){const r="YYYY.MM.DD",i="hh:mm tt",o=`${r} ${i}`,s=gr(e,t?r:i),a=Sr(e,n)?i:o;return t?`${s}${Sr(e,n)?"":` - ${gr(n,r)}`}`:`${gr(e,o)} - ${gr(n,a)}`},popupDetailLocation({location:t}){return t},popupDetailAttendees({attendees:t=[]}){return t.join(", ")},popupDetailState({state:t}){return t||"Busy"},popupDetailRecurrenceRule({recurrenceRule:t}){return t},popupDetailBody({body:t}){return t}};function Ki(t={}){return{template:y(y({},qi),t)}}function Gi(t){return{setTemplate:e=>t(Ee((t=>{t.template=y(y({},t.template),e)})))}}function Yi(t="week"){const e=new Hn;return e.setHours(0,0,0,0),{view:{currentView:t,renderDate:e}}}function Qi(t){return{changeView:e=>t(Ee((t=>{t.view.currentView=e}))),setRenderDate:e=>t(Ee((t=>{t.view.renderDate=_r(e)})))}}const Xi=Ce(window)||!window.navigator,Ji=Xi?dt:ft;function Zi(){const t=Q(null);function e({children:e,store:n}){return S(t.Provider,{value:n,children:e})}const n=(e,n=Object.is)=>{const r=yt(t);if(tn(r))throw new Error("StoreProvider is not found");const[,i]=ht((t=>t+1),0),o=r.getState(),s=pt(o),a=pt(e),c=pt(n),u=pt(!1),l=pt();let h;Ce(l.current)&&(l.current=e(o));let d=!1;const f=s.current!==o||a.current!==e||c.current!==n||u.current;f&&(h=e(o),d=!n(l.current,h)),Ji((()=>{d&&(l.current=h),s.current=o,a.current=e,c.current=n,u.current=!1}));const p=pt(o);return Ji((()=>{const t=()=>{try{const t=r.getState(),e=a.current(t),n=!c.current(l.current,e);n&&(s.current=t,l.current=h,i())}catch(t){console.error("[toastui-calendar] failed to update state",null==t?void 0:t.message),u.current=!0,i()}},e=r.subscribe(t);return r.getState()!==p.current&&t(),e}),[]),d?h:l.current},r=()=>{const e=yt(t);if(tn(e))throw new Error("StoreProvider is not found");return mt((()=>e),[e])};return{StoreProvider:e,useStore:n,useInternalStore:r}}function to(t){let e;const n=new Set,r=t=>{const r=t(e);if(r!==e){const t=e;e=y(y({},e),r),n.forEach((n=>n(e,t)))}},i=()=>e,o=(t,r,i)=>{let o=t;if(r){let n=r(e);const s=null!=i?i:Object.is;o=()=>{const i=r(e);if(!s(n,i)){const e=n;n=i,t(n,e)}}}return n.add(o),()=>n.delete(o)},s=()=>n.clear(),a={setState:r,getState:i,subscribe:o,clearListeners:s};return e=t(r,i,a),a}const eo=t=>e=>v(y(y(y(y(y(y(y(y({},Oi(t)),Ki(t.template)),Mi()),wi()),li(t.calendars)),Yi(t.defaultView)),fi()),mi()),{dispatch:{options:Pi(e),popup:Li(e),weekViewLayout:bi(e),calendar:hi(e),view:Qi(e),dnd:pi(e),gridSelection:gi(e),template:Gi(e)}}),no=(t={})=>to(eo(t)),{StoreProvider:ro,useStore:io,useInternalStore:oo}=Zi();function so(t){return io(gt((e=>t?e.dispatch[t]:e.dispatch),[t]))}function ao(t){return e=>e[t]}const co=ao("calendar"),uo=ao("weekViewLayout"),lo=ao("template"),ho=ao("view"),fo=ao("options"),po=ao("dnd");var mo={exports:{}};
/*! @license DOMPurify 2.3.8 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.3.8/LICENSE */(function(t){(function(e,n){t.exports=n()})(0,(function(){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,n){return e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},e(t,n)}function n(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function r(t,i,o){return r=n()?Reflect.construct:function(t,n,r){var i=[null];i.push.apply(i,n);var o=Function.bind.apply(t,i),s=new o;return r&&e(s,r.prototype),s},r.apply(null,arguments)}function i(t){return o(t)||s(t)||a(t)||u()}function o(t){if(Array.isArray(t))return c(t)}function s(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function a(t,e){if(t){if("string"===typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(t,e):void 0}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l=Object.hasOwnProperty,h=Object.setPrototypeOf,d=Object.isFrozen,f=Object.getPrototypeOf,p=Object.getOwnPropertyDescriptor,m=Object.freeze,g=Object.seal,y=Object.create,v="undefined"!==typeof Reflect&&Reflect,_=v.apply,w=v.construct;_||(_=function(t,e,n){return t.apply(e,n)}),m||(m=function(t){return t}),g||(g=function(t){return t}),w||(w=function(t,e){return r(t,i(e))});var b=N(Array.prototype.forEach),E=N(Array.prototype.pop),T=N(Array.prototype.push),C=N(String.prototype.toLowerCase),S=N(String.prototype.match),I=N(String.prototype.replace),k=N(String.prototype.indexOf),x=N(String.prototype.trim),D=N(RegExp.prototype.test),A=O(TypeError);function N(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return _(t,e,r)}}function O(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return w(t,n)}}function P(t,e){h&&h(t,null);var n=e.length;while(n--){var r=e[n];if("string"===typeof r){var i=C(r);i!==r&&(d(e)||(e[n]=i),r=i)}t[r]=!0}return t}function R(t){var e,n=y(null);for(e in t)_(l,t,[e])&&(n[e]=t[e]);return n}function M(t,e){while(null!==t){var n=p(t,e);if(n){if(n.get)return N(n.get);if("function"===typeof n.value)return N(n.value)}t=f(t)}function r(t){return console.warn("fallback value for",t),null}return r}var L=m(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),F=m(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),j=m(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),U=m(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),V=m(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),$=m(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),H=m(["#text"]),B=m(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),z=m(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),W=m(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),q=m(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),K=g(/\{\{[\w\W]*|[\w\W]*\}\}/gm),G=g(/<%[\w\W]*|[\w\W]*%>/gm),Y=g(/^data-[\-\w.\u00B7-\uFFFF]/),Q=g(/^aria-[\-\w]+$/),X=g(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),J=g(/^(?:\w+script|data):/i),Z=g(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),tt=g(/^html$/i),et=function(){return"undefined"===typeof window?null:window},nt=function(e,n){if("object"!==t(e)||"function"!==typeof e.createPolicy)return null;var r=null,i="data-tt-policy-suffix";n.currentScript&&n.currentScript.hasAttribute(i)&&(r=n.currentScript.getAttribute(i));var o="dompurify"+(r?"#"+r:"");try{return e.createPolicy(o,{createHTML:function(t){return t}})}catch(s){return console.warn("TrustedTypes policy "+o+" could not be created."),null}};function rt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et(),n=function(t){return rt(t)};if(n.version="2.3.8",n.removed=[],!e||!e.document||9!==e.document.nodeType)return n.isSupported=!1,n;var r=e.document,o=e.document,s=e.DocumentFragment,a=e.HTMLTemplateElement,c=e.Node,u=e.Element,l=e.NodeFilter,h=e.NamedNodeMap,d=void 0===h?e.NamedNodeMap||e.MozNamedAttrMap:h,f=e.HTMLFormElement,p=e.DOMParser,g=e.trustedTypes,y=u.prototype,v=M(y,"cloneNode"),_=M(y,"nextSibling"),w=M(y,"childNodes"),N=M(y,"parentNode");if("function"===typeof a){var O=o.createElement("template");O.content&&O.content.ownerDocument&&(o=O.content.ownerDocument)}var it=nt(g,r),ot=it?it.createHTML(""):"",st=o,at=st.implementation,ct=st.createNodeIterator,ut=st.createDocumentFragment,lt=st.getElementsByTagName,ht=r.importNode,dt={};try{dt=R(o).documentMode?o.documentMode:{}}catch(Se){}var ft={};n.isSupported="function"===typeof N&&at&&"undefined"!==typeof at.createHTMLDocument&&9!==dt;var pt,mt,gt=K,yt=G,vt=Y,_t=Q,wt=J,bt=Z,Et=X,Tt=null,Ct=P({},[].concat(i(L),i(F),i(j),i(V),i(H))),St=null,It=P({},[].concat(i(B),i(z),i(W),i(q))),kt=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),xt=null,Dt=null,At=!0,Nt=!0,Ot=!1,Pt=!1,Rt=!1,Mt=!1,Lt=!1,Ft=!1,jt=!1,Ut=!1,Vt=!0,$t=!0,Ht=!1,Bt={},zt=null,Wt=P({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),qt=null,Kt=P({},["audio","video","img","source","image","track"]),Gt=null,Yt=P({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Qt="http://www.w3.org/1998/Math/MathML",Xt="http://www.w3.org/2000/svg",Jt="http://www.w3.org/1999/xhtml",Zt=Jt,te=!1,ee=["application/xhtml+xml","text/html"],ne="text/html",re=null,ie=o.createElement("form"),oe=function(t){return t instanceof RegExp||t instanceof Function},se=function(e){re&&re===e||(e&&"object"===t(e)||(e={}),e=R(e),Tt="ALLOWED_TAGS"in e?P({},e.ALLOWED_TAGS):Ct,St="ALLOWED_ATTR"in e?P({},e.ALLOWED_ATTR):It,Gt="ADD_URI_SAFE_ATTR"in e?P(R(Yt),e.ADD_URI_SAFE_ATTR):Yt,qt="ADD_DATA_URI_TAGS"in e?P(R(Kt),e.ADD_DATA_URI_TAGS):Kt,zt="FORBID_CONTENTS"in e?P({},e.FORBID_CONTENTS):Wt,xt="FORBID_TAGS"in e?P({},e.FORBID_TAGS):{},Dt="FORBID_ATTR"in e?P({},e.FORBID_ATTR):{},Bt="USE_PROFILES"in e&&e.USE_PROFILES,At=!1!==e.ALLOW_ARIA_ATTR,Nt=!1!==e.ALLOW_DATA_ATTR,Ot=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Pt=e.SAFE_FOR_TEMPLATES||!1,Rt=e.WHOLE_DOCUMENT||!1,Ft=e.RETURN_DOM||!1,jt=e.RETURN_DOM_FRAGMENT||!1,Ut=e.RETURN_TRUSTED_TYPE||!1,Lt=e.FORCE_BODY||!1,Vt=!1!==e.SANITIZE_DOM,$t=!1!==e.KEEP_CONTENT,Ht=e.IN_PLACE||!1,Et=e.ALLOWED_URI_REGEXP||Et,Zt=e.NAMESPACE||Jt,e.CUSTOM_ELEMENT_HANDLING&&oe(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(kt.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&oe(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(kt.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"===typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(kt.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),pt=pt=-1===ee.indexOf(e.PARSER_MEDIA_TYPE)?ne:e.PARSER_MEDIA_TYPE,mt="application/xhtml+xml"===pt?function(t){return t}:C,Pt&&(Nt=!1),jt&&(Ft=!0),Bt&&(Tt=P({},i(H)),St=[],!0===Bt.html&&(P(Tt,L),P(St,B)),!0===Bt.svg&&(P(Tt,F),P(St,z),P(St,q)),!0===Bt.svgFilters&&(P(Tt,j),P(St,z),P(St,q)),!0===Bt.mathMl&&(P(Tt,V),P(St,W),P(St,q))),e.ADD_TAGS&&(Tt===Ct&&(Tt=R(Tt)),P(Tt,e.ADD_TAGS)),e.ADD_ATTR&&(St===It&&(St=R(St)),P(St,e.ADD_ATTR)),e.ADD_URI_SAFE_ATTR&&P(Gt,e.ADD_URI_SAFE_ATTR),e.FORBID_CONTENTS&&(zt===Wt&&(zt=R(zt)),P(zt,e.FORBID_CONTENTS)),$t&&(Tt["#text"]=!0),Rt&&P(Tt,["html","head","body"]),Tt.table&&(P(Tt,["tbody"]),delete xt.tbody),m&&m(e),re=e)},ae=P({},["mi","mo","mn","ms","mtext"]),ce=P({},["foreignobject","desc","title","annotation-xml"]),ue=P({},["title","style","font","a","script"]),le=P({},F);P(le,j),P(le,U);var he=P({},V);P(he,$);var de=function(t){var e=N(t);e&&e.tagName||(e={namespaceURI:Jt,tagName:"template"});var n=C(t.tagName),r=C(e.tagName);return t.namespaceURI===Xt?e.namespaceURI===Jt?"svg"===n:e.namespaceURI===Qt?"svg"===n&&("annotation-xml"===r||ae[r]):Boolean(le[n]):t.namespaceURI===Qt?e.namespaceURI===Jt?"math"===n:e.namespaceURI===Xt?"math"===n&&ce[r]:Boolean(he[n]):t.namespaceURI===Jt&&(!(e.namespaceURI===Xt&&!ce[r])&&(!(e.namespaceURI===Qt&&!ae[r])&&(!he[n]&&(ue[n]||!le[n]))))},fe=function(t){T(n.removed,{element:t});try{t.parentNode.removeChild(t)}catch(Se){try{t.outerHTML=ot}catch(e){t.remove()}}},pe=function(t,e){try{T(n.removed,{attribute:e.getAttributeNode(t),from:e})}catch(Se){T(n.removed,{attribute:null,from:e})}if(e.removeAttribute(t),"is"===t&&!St[t])if(Ft||jt)try{fe(e)}catch(Se){}else try{e.setAttribute(t,"")}catch(Se){}},me=function(t){var e,n;if(Lt)t="<remove></remove>"+t;else{var r=S(t,/^[\r\n\t ]+/);n=r&&r[0]}"application/xhtml+xml"===pt&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");var i=it?it.createHTML(t):t;if(Zt===Jt)try{e=(new p).parseFromString(i,pt)}catch(Se){}if(!e||!e.documentElement){e=at.createDocument(Zt,"template",null);try{e.documentElement.innerHTML=te?"":i}catch(Se){}}var s=e.body||e.documentElement;return t&&n&&s.insertBefore(o.createTextNode(n),s.childNodes[0]||null),Zt===Jt?lt.call(e,Rt?"html":"body")[0]:Rt?e.documentElement:s},ge=function(t){return ct.call(t.ownerDocument||t,t,l.SHOW_ELEMENT|l.SHOW_COMMENT|l.SHOW_TEXT,null,!1)},ye=function(t){return t instanceof f&&("string"!==typeof t.nodeName||"string"!==typeof t.textContent||"function"!==typeof t.removeChild||!(t.attributes instanceof d)||"function"!==typeof t.removeAttribute||"function"!==typeof t.setAttribute||"string"!==typeof t.namespaceURI||"function"!==typeof t.insertBefore)},ve=function(e){return"object"===t(c)?e instanceof c:e&&"object"===t(e)&&"number"===typeof e.nodeType&&"string"===typeof e.nodeName},_e=function(t,e,r){ft[t]&&b(ft[t],(function(t){t.call(n,e,r,re)}))},we=function(t){var e;if(_e("beforeSanitizeElements",t,null),ye(t))return fe(t),!0;if(D(/[\u0080-\uFFFF]/,t.nodeName))return fe(t),!0;var r=mt(t.nodeName);if(_e("uponSanitizeElement",t,{tagName:r,allowedTags:Tt}),t.hasChildNodes()&&!ve(t.firstElementChild)&&(!ve(t.content)||!ve(t.content.firstElementChild))&&D(/<[/\w]/g,t.innerHTML)&&D(/<[/\w]/g,t.textContent))return fe(t),!0;if("select"===r&&D(/<template/i,t.innerHTML))return fe(t),!0;if(!Tt[r]||xt[r]){if(!xt[r]&&Ee(r)){if(kt.tagNameCheck instanceof RegExp&&D(kt.tagNameCheck,r))return!1;if(kt.tagNameCheck instanceof Function&&kt.tagNameCheck(r))return!1}if($t&&!zt[r]){var i=N(t)||t.parentNode,o=w(t)||t.childNodes;if(o&&i)for(var s=o.length,a=s-1;a>=0;--a)i.insertBefore(v(o[a],!0),_(t))}return fe(t),!0}return t instanceof u&&!de(t)?(fe(t),!0):"noscript"!==r&&"noembed"!==r||!D(/<\/no(script|embed)/i,t.innerHTML)?(Pt&&3===t.nodeType&&(e=t.textContent,e=I(e,gt," "),e=I(e,yt," "),t.textContent!==e&&(T(n.removed,{element:t.cloneNode()}),t.textContent=e)),_e("afterSanitizeElements",t,null),!1):(fe(t),!0)},be=function(t,e,n){if(Vt&&("id"===e||"name"===e)&&(n in o||n in ie))return!1;if(Nt&&!Dt[e]&&D(vt,e));else if(At&&D(_t,e));else if(!St[e]||Dt[e]){if(!(Ee(t)&&(kt.tagNameCheck instanceof RegExp&&D(kt.tagNameCheck,t)||kt.tagNameCheck instanceof Function&&kt.tagNameCheck(t))&&(kt.attributeNameCheck instanceof RegExp&&D(kt.attributeNameCheck,e)||kt.attributeNameCheck instanceof Function&&kt.attributeNameCheck(e))||"is"===e&&kt.allowCustomizedBuiltInElements&&(kt.tagNameCheck instanceof RegExp&&D(kt.tagNameCheck,n)||kt.tagNameCheck instanceof Function&&kt.tagNameCheck(n))))return!1}else if(Gt[e]);else if(D(Et,I(n,bt,"")));else if("src"!==e&&"xlink:href"!==e&&"href"!==e||"script"===t||0!==k(n,"data:")||!qt[t]){if(Ot&&!D(wt,I(n,bt,"")));else if(n)return!1}else;return!0},Ee=function(t){return t.indexOf("-")>0},Te=function(t){var e,r,i,o;_e("beforeSanitizeAttributes",t,null);var s=t.attributes;if(s){var a={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:St};o=s.length;while(o--){e=s[o];var c=e,u=c.name,l=c.namespaceURI;if(r="value"===u?e.value:x(e.value),i=mt(u),a.attrName=i,a.attrValue=r,a.keepAttr=!0,a.forceKeepAttr=void 0,_e("uponSanitizeAttribute",t,a),r=a.attrValue,!a.forceKeepAttr&&(pe(u,t),a.keepAttr))if(D(/\/>/i,r))pe(u,t);else{Pt&&(r=I(r,gt," "),r=I(r,yt," "));var h=mt(t.nodeName);if(be(h,i,r))try{l?t.setAttributeNS(l,u,r):t.setAttribute(u,r),E(n.removed)}catch(Se){}}}_e("afterSanitizeAttributes",t,null)}},Ce=function t(e){var n,r=ge(e);_e("beforeSanitizeShadowDOM",e,null);while(n=r.nextNode())_e("uponSanitizeShadowNode",n,null),we(n)||(n.content instanceof s&&t(n.content),Te(n));_e("afterSanitizeShadowDOM",e,null)};return n.sanitize=function(i,o){var a,u,l,h,d;if(te=!i,te&&(i="\x3c!--\x3e"),"string"!==typeof i&&!ve(i)){if("function"!==typeof i.toString)throw A("toString is not a function");if(i=i.toString(),"string"!==typeof i)throw A("dirty is not a string, aborting")}if(!n.isSupported){if("object"===t(e.toStaticHTML)||"function"===typeof e.toStaticHTML){if("string"===typeof i)return e.toStaticHTML(i);if(ve(i))return e.toStaticHTML(i.outerHTML)}return i}if(Mt||se(o),n.removed=[],"string"===typeof i&&(Ht=!1),Ht){if(i.nodeName){var f=mt(i.nodeName);if(!Tt[f]||xt[f])throw A("root node is forbidden and cannot be sanitized in-place")}}else if(i instanceof c)a=me("\x3c!----\x3e"),u=a.ownerDocument.importNode(i,!0),1===u.nodeType&&"BODY"===u.nodeName||"HTML"===u.nodeName?a=u:a.appendChild(u);else{if(!Ft&&!Pt&&!Rt&&-1===i.indexOf("<"))return it&&Ut?it.createHTML(i):i;if(a=me(i),!a)return Ft?null:Ut?ot:""}a&&Lt&&fe(a.firstChild);var p=ge(Ht?i:a);while(l=p.nextNode())3===l.nodeType&&l===h||we(l)||(l.content instanceof s&&Ce(l.content),Te(l),h=l);if(h=null,Ht)return i;if(Ft){if(jt){d=ut.call(a.ownerDocument);while(a.firstChild)d.appendChild(a.firstChild)}else d=a;return St.shadowroot&&(d=ht.call(r,d,!0)),d}var m=Rt?a.outerHTML:a.innerHTML;return Rt&&Tt["!doctype"]&&a.ownerDocument&&a.ownerDocument.doctype&&a.ownerDocument.doctype.name&&D(tt,a.ownerDocument.doctype.name)&&(m="<!DOCTYPE "+a.ownerDocument.doctype.name+">\n"+m),Pt&&(m=I(m,gt," "),m=I(m,yt," ")),it&&Ut?it.createHTML(m):m},n.setConfig=function(t){se(t),Mt=!0},n.clearConfig=function(){re=null,Mt=!1},n.isValidAttribute=function(t,e,n){re||se({});var r=mt(t),i=mt(e);return be(r,i,n)},n.addHook=function(t,e){"function"===typeof e&&(ft[t]=ft[t]||[],T(ft[t],e))},n.removeHook=function(t){if(ft[t])return E(ft[t])},n.removeHooks=function(t){ft[t]&&(ft[t]=[])},n.removeAllHooks=function(){ft={}},n}var it=rt();return it}))})(mo);var go=window.DOMPurify||(window.DOMPurify=mo.exports.default||mo.exports);const yo="data-target-temp";function vo(){go.addHook("beforeSanitizeAttributes",(t=>{if("A"===t.tagName){const e=t.getAttribute("target");e?t.setAttribute(yo,e):t.setAttribute("target","_self")}})),go.addHook("afterSanitizeAttributes",(t=>{"A"===t.tagName&&t.hasAttribute(yo)&&(t.setAttribute("target",t.getAttribute(yo)),t.removeAttribute(yo),"_blank"===t.getAttribute("target")&&t.setAttribute("rel","noopener"))}))}function _o(){go.removeAllHooks()}function wo(t){return go.sanitize(t)}function bo({template:t,param:e,as:n="div"}){var r;const i=io(lo),o=i[t];if(tn(o))return null;const s=o(e);return Ze(s)?S(n,{className:on(`template-${t}`),dangerouslySetInnerHTML:{__html:wo(s)}}):Y(s,{className:`${null!=(r=s.props.className)?r:""} ${on(`template-${t}`)}`})}const Eo=Q(null),To=Eo.Provider,Co=()=>{const t=yt(Eo);if(!t)throw new Error("useEventBus must be used within a EventBusProvider");return t},So=t=>{var e,n,r,i,o;return null!=(o=null==(i=null==(r=null==(n=null==(e=t.options)?void 0:e.timezone)?void 0:n.zones)?void 0:r[0])?void 0:i.timezoneName)?o:"Local"},Io=t=>{var e,n;return null==(n=null==(e=t.options)?void 0:e.timezone)?void 0:n.customOffsetCalculator},ko=t=>{var e;return null!=(e=t.options.timezone.zones)?e:[]};function xo(){const t=io(Io),e=en(t);return gt(((n,r=new Hn)=>r.tz(e?t(n,r.getTime()):n)),[t,e])}function Do(){const t=io(So),e=xo(),n=gt((()=>e(t)),[t,e]);return[t,n]}function Ao(t,e){return"week"===t}function No({dayName:t,theme:e,today:n}){var r,i;const{day:o,dateInstance:s}=t,a=Sr(n,s),c=!a&&s<n;return Nr(o)?e.common.holiday.color:c?null==(r=e.week)?void 0:r.pastDay.color:Or(o)?e.common.saturday.color:a?null==(i=e.week)?void 0:i.today.color:e.common.dayName.color}function Oo({dayName:t,theme:e}){const{day:n}=t;return Nr(n)?e.common.holiday.color:Or(n)?e.common.saturday.color:e.common.dayName.color}function Po({dayName:t,style:e,type:n,theme:r}){const i=Co(),[,o]=Do(),s=o(),{day:a}=t,c="week"===n?No({dayName:t,theme:r,today:s}):Oo({dayName:t,theme:r}),u=`${n}DayName`,l=()=>{Ao(n)&&i.fire("clickDayName",{date:gr(t.dateInstance,"YYYY-MM-DD")})};return S("div",{className:on("day-name-item",n),style:e},S("span",{className:on({[`holiday-${Ci(a)}`]:Ar(a)}),style:{color:c},onClick:l,"data-testid":`dayName-${n}-${Ci(a)}`},S(bo,{template:u,param:t})))}const Ro=ao("common"),Mo=ao("month"),Lo=t=>t.week.dayGridLeft,Fo=t=>t.week.timeGridLeft,jo=t=>t.month.moreView,Uo=t=>t.month.gridCell,Vo={border:"1px solid #e5e5e5",backgroundColor:"white",holiday:{color:"#ff4040"},saturday:{color:"#333"},dayName:{color:"#333"},today:{color:"#fff"},gridSelection:{backgroundColor:"rgba(81, 92, 230, 0.05)",border:"1px solid #515ce6"}},$o={dayName:{borderLeft:"none",borderTop:"1px solid #e5e5e5",borderBottom:"1px solid #e5e5e5",backgroundColor:"inherit"},weekend:{backgroundColor:"inherit"},today:{color:"inherit",backgroundColor:"rgba(81, 92, 230, 0.05)"},pastDay:{color:"#bbb"},panelResizer:{border:"1px solid #e5e5e5"},dayGrid:{borderRight:"1px solid #e5e5e5",backgroundColor:"inherit"},dayGridLeft:{borderRight:"1px solid #e5e5e5",backgroundColor:"inherit",width:"72px"},timeGrid:{borderRight:"1px solid #e5e5e5"},timeGridLeft:{backgroundColor:"inherit",borderRight:"1px solid #e5e5e5",width:"72px"},timeGridLeftAdditionalTimezone:{backgroundColor:"white"},timeGridHalfHourLine:{borderBottom:"none"},timeGridHourLine:{borderBottom:"1px solid #e5e5e5"},nowIndicatorLabel:{color:"#515ce6"},nowIndicatorPast:{border:"1px dashed #515ce6"},nowIndicatorBullet:{backgroundColor:"#515ce6"},nowIndicatorToday:{border:"1px solid #515ce6"},nowIndicatorFuture:{border:"none"},pastTime:{color:"#bbb"},futureTime:{color:"#333"},gridSelection:{color:"#515ce6"}},Ho={dayName:{borderLeft:"none",backgroundColor:"inherit"},holidayExceptThisMonth:{color:"rgba(255, 64, 64, 0.4)"},dayExceptThisMonth:{color:"rgba(51, 51, 51, 0.4)"},weekend:{backgroundColor:"inherit"},moreView:{border:"1px solid #d5d5d5",boxShadow:"0 2px 6px 0 rgba(0, 0, 0, 0.1)",backgroundColor:"white",width:null,height:null},gridCell:{headerHeight:31,footerHeight:null},moreViewTitle:{backgroundColor:"inherit"}};function Bo(t={}){return{common:Wn(Vo,t)}}function zo(t){return{setTheme:e=>{t(Ee((t=>{t.common=Wn(t.common,e.common),t.week=Wn(t.week,e.week),t.month=Wn(t.month,e.month)})))},setCommonTheme:e=>{t(Ee((t=>{t.common=Wn(t.common,e)})))},setWeekTheme:e=>{t(Ee((t=>{t.week=Wn(t.week,e)})))},setMonthTheme:e=>{t(Ee((t=>{t.month=Wn(t.month,e)})))}}}function Wo(t={}){return{month:Wn(Ho,t)}}function qo(t={}){return{week:Wn($o,t)}}const Ko=(t={})=>e=>v(y(y(y({},Bo(null==t?void 0:t.common)),qo(null==t?void 0:t.week)),Wo(null==t?void 0:t.month)),{dispatch:y({},zo(e))}),Go=(t={})=>to(Ko(t)),{StoreProvider:Yo,useInternalStore:Qo,useStore:Xo}=Zi();function Jo(){return Xo(Ro)}function Zo(){return Xo(Mo)}function ts(t){return{common:{saturday:t.common.saturday,holiday:t.common.holiday,today:t.common.today,dayName:t.common.dayName},week:{pastDay:t.week.pastDay,today:t.week.today,dayName:t.week.dayName}}}function es(t){return{common:{saturday:t.common.saturday,holiday:t.common.holiday,today:t.common.today,dayName:t.common.dayName},month:{dayName:t.month.dayName}}}function ns({dayNames:t,marginLeft:e=xe,rowStyleInfo:n,type:r="month"}){var i,o;const s=Xo("month"===r?es:ts),a=null!=(o=null==(i=s[r])?void 0:i.dayName)?o:{},{backgroundColor:c="white",borderLeft:u=null}=a,l=_(a,["backgroundColor","borderLeft"]),{borderTop:h=null,borderBottom:d=null}=l;return S("div",{"data-testid":`grid-header-${r}`,className:on("day-names",r),style:{backgroundColor:c,borderTop:h,borderBottom:d}},S("div",{className:on("day-name-container"),style:{marginLeft:e}},t.map(((t,e)=>S(Po,{type:r,key:`dayNames-${t.day}`,dayName:t,style:{width:sn(n[e].width),left:sn(n[e].left),borderLeft:u},theme:s})))))}const rs=6;var is=(t=>(t["header"]="header",t["footer"]="footer",t))(is||{});function os(t,e=!0){const n=[];let r;return t.length?(n[0]=[t[0].cid()],t.slice(1).forEach(((i,o)=>{r=t.slice(0,o+1).reverse();const s=r.find((t=>i.collidesWith(t,e)));s?n.slice().reverse().some((t=>!!~t.indexOf(s.cid())&&(t.push(i.cid()),!0))):n.push([i.cid()])})),n):n}function ss(t,e){let{length:n}=t;while(n>0)if(n-=1,!Ce(t[n][e]))return n;return-1}function as(t,e,n=!0){const r=[];return e.forEach((e=>{const i=[[]];e.forEach((e=>{const r=t.get(e);let o,s,a=0,c=!1;while(!c)s=ss(i,a),-1===s?(i[0].push(r),c=!0):r.collidesWith(i[s][a],n)||(o=s+1,Ce(i[o])&&(i[o]=[]),i[o][a]=r,c=!0),a+=1})),r.push(i)})),r}function cs(t,e){return n=>{const r=n.getStarts(),i=n.getEnds();return!(i<t||r>e)}}function us(t,e,n,r){const i=wr(t,e,dr).map((t=>gr(t,"YYYYMMDD")));n.forEach((t=>{t.forEach((t=>{t.forEach(((t,e)=>{if(!t)return;const n=gr(t.getStarts(),"YYYYMMDD"),o=wr(_r(t.getStarts()),Dr(t.getEnds()),dr).length;t.top=e,t.left=i.indexOf(n),t.width=o,null==r||r(t)}))}))}))}function ls(t,e,n){return n.getStarts()<t&&(n.exceedLeft=!0,n.renderStarts=new Hn(t)),n.getEnds()>e&&(n.exceedRight=!0,n.renderEnds=new Hn(e)),n}function hs(t,e,n){return n instanceof Xr?(n.each((n=>(ls(t,e,n),!0))),null):ls(t,e,n)}function ds(t){const e=new Xr((t=>t.cid()));return t.each((function(t){e.add(new Kn(t))})),e}function fs({model:t}){return t.isAllday||t.hasMultiDates}function ps(t){return!fs(t)}function ms(t){t.top=t.top||0,t.top+=1}function gs(t,e,n){n.each((n=>{(n.model.isAllday||n.model.hasMultiDates)&&hs(_r(t),Dr(e),n)}))}function ys(t,e,n){const r=[];return t[e].forEach((t=>{n.doWhenHas(t,(t=>{r.push(t.top)}))})),r.length>0?Math.max(...r):0}function vs(t,e){const n=e.filter(fs),r=e.filter(ps).sort(Zn.compare.event.asc),i={};r.forEach((e=>{const r=gr(e.getStarts(),"YYYYMMDD");let o=i[r];Ce(o)&&(o=i[r]=ys(t,r,n)),i[r]=e.top=o+1}))}function _s(t,e){const n=e.filter(fs),r=e.filter(ps).sort(Zn.compare.event.asc),i={};r.forEach((e=>{const r=gr(e.getStarts(),"YYYYMMDD");let o=i[r];if(Ce(o)&&(o=i[r]=[],t[r].forEach((t=>{n.doWhenHas(t,(t=>{o.push(t.top)}))}))),o.indexOf(e.top)>=0){const t=Math.max(...o)+1;for(let n=1;n<=t;n+=1)if(e.top=n,o.indexOf(e.top)<0)break}o.push(e.top)}))}function ws(t){t.each((t=>{const{model:e}=t,n=e.getStarts(),r=e.getEnds();e.hasMultiDates=!Sr(n,r),!e.isAllday&&e.hasMultiDates&&(t.renderStarts=_r(n),t.renderEnds=Dr(r))}))}function bs(t,e){const{start:n,end:r,andFilters:i=[],alldayFirstMode:o=!1}=e,{events:s,idsOfDay:a}=t,c=Xr.and(...[cs(n,r)].concat(i)),u=s.filter(c),l=ds(u);ws(l),gs(n,r,l);const h=l.sort(Zn.compare.event.asc),d=!1,f=os(h,d),p=as(l,f,d);return us(n,r,p,ms),o?vs(a,l):_s(a,l),p}function Es(t,e){return n=>{const r=n.getStarts(),i=n.getEnds(),o=r.getTime(),s=i.getTime(),a=r.getFullYear(),c=r.getMonth(),u=r.getDate(),l=new Hn(a,c,u).setHours(t),h=new Hn(a,c,u).setHours(e);return o>=l&&o<h||s>l&&s<=h||o<l&&s>l||s>h&&o<h}}function Ts(t,e){return 0===t&&24===e?t=>t.sort(Zn.compare.event.asc):n=>n.filter(Es(t,e)).sort(Zn.compare.event.asc)}function Cs(t,e,n,r){const i={},o=Zr(e,n);return o.forEach((e=>{const n=gr(e,"YYYYMMDD"),o=t[n],s=i[n]=new Xr((t=>t.cid()));o&&o.length&&o.forEach((t=>{r.doWhenHas(t,(t=>{s.add(t)}))}))}),{}),i}function Ss(t,e){const{start:n,end:r,uiModelTimeColl:i,hourStart:o,hourEnd:s}=e,a=Cs(t,n,r,i),c={},u=Ts(o,s),l=!0;return Object.entries(a).forEach((([t,e])=>{const n=u(e),r=os(n,l),i=as(e,r,l);c[t]=i})),c}function Is(t){t.each((t=>{const{model:e}=t;e.hasMultiDates=!0,t.renderStarts=_r(e.getStarts()),t.renderEnds=Dr(e.getEnds())}))}function ks(t,e,n){if(!n||!n.size)return[];Is(n),hs(t,e,n);const r=n.sort(Zn.compare.event.asc),i=!0,o=os(r,i),s=as(n,o,i);return us(t,e,s),s}function xs(t,e){var n,r;const{start:i,end:o,panels:s,andFilters:a=[],options:c}=e,{events:u,idsOfDay:l}=t,h=null!=(n=null==c?void 0:c.hourStart)?n:0,d=null!=(r=null==c?void 0:c.hourEnd)?r:24,f=Xr.and(...[cs(i,o)].concat(a)),p=ds(u.filter(f)),m=p.groupBy(ei);return s.reduce(((t,e)=>{const{name:n,type:r}=e;return tn(m[n])?t:v(y({},t),{[n]:"daygrid"===r?ks(i,o,m[n]):Ss(l,{start:i,end:o,uiModelTimeColl:m[n],hourStart:h,hourEnd:d})})}),{milestone:[],task:[],allday:[],time:{}})}function Ds(t,e,n){const r=Math.max(t,...e);return Math.min(r,...n)}function As(t,e,n){return e*n/t}function Ns(t,e,n){return e<=t&&t<=n}const Os=22,Ps=100;function Rs(t,e){t.forEach((t=>{t.forEach((t=>{t.forEach(((t,n)=>{e(t,n)}))}))}))}function Ms(t,e){return({top:n})=>t>=n*e}function Ls(t,e){return({top:n})=>t<n*e}function Fs(t,e,n){return t.filter(Ls(e,n)).length}const js=t=>t.filter((t=>Ar(t.getDay()))).length;function Us(t,e,n){const r=js(t),i=t.length,o=r===i,s=n/(e&&!o?2*i-r:i),a=t.map((t=>{const n=t.getDay();return!e||o||Ar(n)?s:2*s})),c=a.reduce(((t,e,n)=>n?[...t,t[n-1]+a[n-1]]:[0]),[]);return{widthList:a,leftList:c}}function Vs(t,e,n){return t.reduce(((t,r,i)=>e<=i&&i<=n?t+r:t),0)}const $s=t=>e=>{const n=_r(e.getStarts()),r=_r(e.getEnds());return n<=t&&t<=r};function Hs(t,e){return e.findIndex((e=>t>=_r(e)&&t<=Dr(e)))}const Bs=(t,e,n,r)=>{const{widthList:i}=Us(n,r,Ps);return{left:t?Vs(i,0,t-1):0,width:Vs(i,null!=t?t:0,e<0?n.length-1:e)}},zs=(t,e,n,r)=>{const{widthList:i}=Us(n,r,Ps);let o=0,s=n.length-1;return n.forEach(((n,r)=>{n<=t&&(o=r),n<=e&&(s=r)})),{width:Vs(i,o,s),left:o?Vs(i,0,o-1):0}};function Ws(t,e,n=!1){const r=t.getStarts(),i=t.getEnds(),{width:o,left:s}=zs(r,i,e,n);return t.width=o,t.left=s,t}function qs(t,e,n){const{idsOfDay:r}=e,i=bs(e,{start:t[0],end:Dr(t[t.length-1])}),o=[];Rs(i,(e=>{const r=e.model.cid();o[r]=Ws(e,t,n)}));const s=Object.keys(r).reduce(((t,e)=>{const n=r[e];return t[e]=n.map((t=>o[t])).filter((t=>!!t)),t}),{});return{uiModels:Object.values(o),gridDateEventModelMap:s}}const Ks=(t,e,n=!1)=>(Rs(t,(t=>{const r=t.getStarts(),i=t.getEnds(),{width:o,left:s}=zs(r,i,e,n);t.width=o,t.left=s,t.top+=1})),Ys(t)),Gs=t=>t.filter((t=>!!t));function Ys(t){return t.flatMap((t=>t.flatMap((t=>Gs(t)))))}const Qs=t=>Array.from(new Set(Object.values(t).reduce(((t,e)=>t.concat(...Ys(e))),[]))),Xs=(t,e,{narrowWeekend:n,hourStart:r,hourEnd:i,weekStartDate:o,weekEndDate:s})=>{const a=[{name:"milestone",type:"daygrid",show:!0},{name:"task",type:"daygrid",show:!0},{name:"allday",type:"daygrid",show:!0},{name:"time",type:"timegrid",show:!0}],c=xs(e,{start:o,end:s,panels:a,andFilters:[],options:{hourStart:r,hourEnd:i}});return Object.keys(c).reduce(((e,r)=>{const i=c[r];return v(y({},e),{[r]:Array.isArray(i)?Ks(i,t,n):Qs(i)})}),{milestone:[],allday:[],task:[],time:[]})};function Js(t,{workweek:e=!1,visibleWeeksCount:n=0,startDayOfWeek:r=0,isAlways6Weeks:i=!0}){const o=new Hn(t),s=n>0,a=s?o:Pr(o),c=Vr(a,a.getDay()-r+(a.getDay()<r?or:0)),u=c.getDay(),l=Rr(o).getDate(),h=Hr(c,a),d=l+Math.abs(h);let f=rs;return s?f=n:!1===i&&(f=Math.ceil(d/or)),ke(0,f).map((t=>ke(0,or).reduce(((n,r)=>{const i=t*or+r,o=(i+u)%or;if(!e||e&&!Ar(o)){const t=Ur(c,i);n.push(t)}return n}),[])))}function Zs(t,{startDayOfWeek:e=ir.SUN,workweek:n}){const r=_r(t),i=r.getDay(),o=i-e,s=o>=0?ke(-o,or-o):ke(-or-o,-o);return s.reduce(((t,e)=>{const i=Ur(r,e);return n&&Ar(i.getDay())||t.push(i),t}),[])}function ta(t,e=!1){const n=t.length,r=n>5&&e,i=r?100/(n-1):100/n;return t.map((t=>{const e=r&&Ar(t.getDay())?i/2:i;return{date:t,width:e}})).reduce(((t,e,n)=>{const r=t[n-1];return t.push(v(y({},e),{left:0===n?0:r.left+r.width})),t}),[])}function ea(t,e){var n;const r=ta(t,null!=(n=e.narrowWeekend)&&n),i=2*(e.hourEnd-e.hourStart),o=100/i,s=ke(i).map(((t,n)=>{const r=n%2===1,i=e.hourStart+Math.floor(t/2),s=`${i}:${r?"30":"00"}`.padStart(5,"0"),a=(r?`${i+1}:00`:`${i}:30`).padStart(5,"0");return{top:o*n,height:o,startTime:s,endTime:a}}));return{columns:r,rows:s}}function na({clientX:t,clientY:e},{left:n,top:r,clientLeft:i,clientTop:o}){return[t-n-i,e-r-o]}function ra(t,e,n){const r=Math.floor(As(e,t,n));return Ds(r,[0],[t-1])}function ia({rowsCount:t,columnsCount:e,container:n,narrowWeekend:r=!1,startDayOfWeek:i=ir.SUN}){if(tn(n))return()=>null;const o=ke(i,i+e).map((t=>t%or)),s=r?o.filter((t=>Ar(t))).length:0;return function(i){const{left:a,top:c,width:u,height:l}=n.getBoundingClientRect(),[h,d]=na(i,{left:a,top:c,clientLeft:n.clientLeft,clientTop:n.clientTop});if(h<0||d<0||h>u||d>l)return null;const f=r?u/(e-s+1):u/e,p=o.map((t=>r&&Ar(t)?f/2:f)),m=[];p.forEach(((t,e)=>{0===e?m.push(0):m.push(m[e-1]+p[e-1])}));const g=nr(m,(t=>h>=t));return{columnIndex:g,rowIndex:ra(t,l,d)}}}function oa(t){return t.common.gridSelection}function sa({type:t,gridSelectionData:e,weekDates:n,narrowWeekend:r}){const{backgroundColor:i,border:o}=Xo(oa),{startCellIndex:s,endCellIndex:a}=e,{left:c,width:u}=Bs(Math.min(s,a),Math.max(s,a),n,r),l={left:sn(c),width:sn(u),height:sn(100),backgroundColor:i,border:o};return u>0?S("div",{className:on(t,"grid-selection"),style:l}):null}function aa(t,e,n){return{startColumnIndex:n?e.columnIndex:t.columnIndex,startRowIndex:n?e.rowIndex:t.rowIndex,endColumnIndex:n?t.columnIndex:e.columnIndex,endRowIndex:n?t.rowIndex:e.rowIndex}}function ca(t,e,n){if(tn(t))return null;const{startColumnIndex:r,endColumnIndex:i,endRowIndex:o,startRowIndex:s}=t;if(!Ns(e,r,i))return null;const a=r!==i,c=e===r,u={startRowIndex:s,endRowIndex:o,isSelectingMultipleColumns:a,isStartingColumn:c};return r<e&&e<i?(u.startRowIndex=0,u.endRowIndex=n):r!==i&&(r===e?u.endRowIndex=n:i===e&&(u.startRowIndex=0)),u}const ua={sortSelection:(t,e)=>{const n=t.columnIndex>e.columnIndex||t.columnIndex===e.columnIndex&&t.rowIndex>e.rowIndex;return aa(t,e,n)},getDateFromCollection:(t,e)=>{const n=t,r=jr(n.columns[e.startColumnIndex].date,n.rows[e.startRowIndex].startTime),i=jr(n.columns[e.endColumnIndex].date,n.rows[e.endRowIndex].endTime);return[r,i]},calculateSelection:ca};function la(t,e,n){if(!(en(t)&&en(e)&&en(n)))return null;const{startRowIndex:r,startColumnIndex:i,endRowIndex:o,endColumnIndex:s}=t;if(!Ns(e,Math.min(r,o),Math.max(r,o)))return null;let a=i,c=s;return r<e&&(a=0),o>e&&(c=n-1),{startCellIndex:a,endCellIndex:c}}const ha={sortSelection:(t,e)=>{const n=t.rowIndex>e.rowIndex||t.rowIndex===e.rowIndex&&t.columnIndex>e.columnIndex;return aa(t,e,n)},getDateFromCollection:(t,e)=>{const n=t;return[n[e.startRowIndex][e.startColumnIndex],n[e.endRowIndex][e.endColumnIndex]]},calculateSelection:la};function da(t){return en(t)?{startCellIndex:t.startColumnIndex,endCellIndex:t.endColumnIndex}:null}const fa={sortSelection:(t,e)=>{const n=t.columnIndex>e.columnIndex;return aa(t,e,n)},getDateFromCollection:(t,e)=>{const n=t;return[n[e.startColumnIndex],n[e.endColumnIndex]]},calculateSelection:da};function pa(t){return fa.calculateSelection(t.gridSelection.dayGridWeek)}function ma({weekDates:t,narrowWeekend:e}){const n=io(pa);return tn(n)?null:S(sa,{type:"allday",gridSelectionData:n,weekDates:t,narrowWeekend:e})}function ga(t,e){for(var n in e)t[n]=e[n];return t}function ya(t,e){for(var n in t)if("__source"!==n&&!(n in e))return!0;for(var r in e)if("__source"!==r&&t[r]!==e[r])return!0;return!1}function va(t){this.props=t}function _a(t,e){function n(t){var n=this.props.ref,r=n==t.ref;return!r&&n&&(n.call?n(null):n.current=null),e?!e(this.props,t)||!r:ya(this.props,t)}function r(e){return this.shouldComponentUpdate=n,S(t,e)}return r.displayName="Memo("+(t.displayName||t.name)+")",r.prototype.isReactComponent=!0,r.__f=!0,r}(va.prototype=new x).isPureReactComponent=!0,va.prototype.shouldComponentUpdate=function(t,e){return ya(this.props,t)||ya(this.state,e)};var wa=i.__b;i.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),wa&&wa(t)};var ba="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function Ea(t){function e(e){var n=ga({},e);return delete n.ref,t(n,e.ref||null)}return e.$$typeof=ba,e.render=e,e.prototype.isReactComponent=e.__f=!0,e.displayName="ForwardRef("+(t.displayName||t.name)+")",e}var Ta=i.__e;i.__e=function(t,e,n,r){if(t.then)for(var i,o=e;o=o.__;)if((i=o.__c)&&i.__c)return null==e.__e&&(e.__e=n.__e,e.__k=n.__k),i.__c(t,e);Ta(t,e,n,r)};var Ca=i.unmount;function Sa(){this.__u=0,this.t=null,this.__b=null}function Ia(t){var e=t.__.__c;return e&&e.__a&&e.__a(t)}function ka(){this.u=null,this.o=null}i.unmount=function(t){var e=t.__c;e&&e.__R&&e.__R(),e&&!0===t.__h&&(t.type=null),Ca&&Ca(t)},(Sa.prototype=new x).__c=function(t,e){var n=e.__c,r=this;null==r.t&&(r.t=[]),r.t.push(n);var i=Ia(r.__v),o=!1,s=function(){o||(o=!0,n.__R=null,i?i(a):a())};n.__R=s;var a=function(){if(! --r.__u){if(r.state.__a){var t=r.state.__a;r.__v.__k[0]=function t(e,n,r){return e&&(e.__v=null,e.__k=e.__k&&e.__k.map((function(e){return t(e,n,r)})),e.__c&&e.__c.__P===n&&(e.__e&&r.insertBefore(e.__e,e.__d),e.__c.__e=!0,e.__c.__P=r)),e}(t,t.__c.__P,t.__c.__O)}var e;for(r.setState({__a:r.__b=null});e=r.t.pop();)e.forceUpdate()}},c=!0===e.__h;r.__u++||c||r.setState({__a:r.__b=r.__v.__k[0]}),t.then(s,s)},Sa.prototype.componentWillUnmount=function(){this.t=[]},Sa.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=function t(e,n,r){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach((function(t){"function"==typeof t.__c&&t.__c()})),e.__c.__H=null),null!=(e=ga({},e)).__c&&(e.__c.__P===r&&(e.__c.__P=n),e.__c=null),e.__k=e.__k&&e.__k.map((function(e){return t(e,n,r)}))),e}(this.__b,n,r.__O=r.__P)}this.__b=null}var i=e.__a&&S(k,null,t.fallback);return i&&(i.__h=null),[S(k,null,e.__a?null:t.children),i]};var xa=function(t,e,n){if(++n[1]===n[0]&&t.o.delete(e),t.props.revealOrder&&("t"!==t.props.revealOrder[0]||!t.o.size))for(n=t.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;t.u=n=n[2]}};function Da(t){return this.getChildContext=function(){return t.context},t.children}function Aa(t){var e=this,n=t.i;e.componentWillUnmount=function(){G(null,e.l),e.l=null,e.i=null},e.i&&e.i!==n&&e.componentWillUnmount(),t.__v?(e.l||(e.i=n,e.l={nodeType:1,parentNode:n,childNodes:[],appendChild:function(t){this.childNodes.push(t),e.i.appendChild(t)},insertBefore:function(t,n){this.childNodes.push(t),e.i.appendChild(t)},removeChild:function(t){this.childNodes.splice(this.childNodes.indexOf(t)>>>1,1),e.i.removeChild(t)}}),G(S(Da,{context:e.context},t.__v),e.l)):e.l&&e.componentWillUnmount()}function Na(t,e){var n=S(Aa,{__v:t,i:e});return n.containerInfo=e,n}(ka.prototype=new x).__a=function(t){var e=this,n=Ia(e.__v),r=e.o.get(t);return r[0]++,function(i){var o=function(){e.props.revealOrder?(r.push(i),xa(e,t,r)):i()};n?n(o):o()}},ka.prototype.render=function(t){this.u=null,this.o=new Map;var e=M(t.children);t.revealOrder&&"b"===t.revealOrder[0]&&e.reverse();for(var n=e.length;n--;)this.o.set(e[n],this.u=[1,0,this.u]);return t.children},ka.prototype.componentDidUpdate=ka.prototype.componentDidMount=function(){var t=this;this.o.forEach((function(e,n){xa(t,n,e)}))};var Oa="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,Pa=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|shape|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Ra="undefined"!=typeof document,Ma=function(t){return("undefined"!=typeof Symbol&&"symbol"==typeof Symbol()?/fil|che|rad/i:/fil|che|ra/i).test(t)};x.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach((function(t){Object.defineProperty(x.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})}));var La=i.event;function Fa(){}function ja(){return this.cancelBubble}function Ua(){return this.defaultPrevented}i.event=function(t){return La&&(t=La(t)),t.persist=Fa,t.isPropagationStopped=ja,t.isDefaultPrevented=Ua,t.nativeEvent=t};var Va={configurable:!0,get:function(){return this.class}},$a=i.vnode;i.vnode=function(t){var e=t.type,n=t.props,r=n;if("string"==typeof e){var i=-1===e.indexOf("-");for(var o in r={},n){var s=n[o];Ra&&"children"===o&&"noscript"===e||"value"===o&&"defaultValue"in n&&null==s||("defaultValue"===o&&"value"in n&&null==n.value?o="value":"download"===o&&!0===s?s="":/ondoubleclick/i.test(o)?o="ondblclick":/^onchange(textarea|input)/i.test(o+e)&&!Ma(n.type)?o="oninput":/^onfocus$/i.test(o)?o="onfocusin":/^onblur$/i.test(o)?o="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(o)?o=o.toLowerCase():i&&Pa.test(o)?o=o.replace(/[A-Z0-9]/,"-$&").toLowerCase():null===s&&(s=void 0),/^oninput$/i.test(o)&&(o=o.toLowerCase(),r[o]&&(o="oninputCapture")),r[o]=s)}"select"==e&&r.multiple&&Array.isArray(r.value)&&(r.value=M(n.children).forEach((function(t){t.props.selected=-1!=r.value.indexOf(t.props.value)}))),"select"==e&&null!=r.defaultValue&&(r.value=M(n.children).forEach((function(t){t.props.selected=r.multiple?-1!=r.defaultValue.indexOf(t.props.value):r.defaultValue==t.props.value}))),t.props=r,n.class!=n.className&&(Va.enumerable="className"in n,null!=n.className&&(r.class=n.className),Object.defineProperty(r,"className",Va))}t.$$typeof=Oa,$a&&$a(t)};var Ha=i.__r;function Ba(t){return!!t.__k&&(G(null,t),!0)}function za({index:t,exceedCount:e,isClicked:n,onClickExceedCount:r}){const i=()=>r(t),o={display:n?"none":""};return e&&!n?S("span",{className:on("weekday-exceed-in-week"),onClick:i,style:o},S(bo,{template:"weekGridFooterExceed",param:e})):null}function Wa({isClicked:t,isClickedIndex:e,onClickCollapseButton:n}){return t&&e?S("span",{className:on("weekday-exceed-in-week"),onClick:n},S(bo,{template:"collapseBtnTitle"})):null}function qa({width:t,left:e,index:n,exceedCount:r,isClicked:i,onClickExceedCount:o,isClickedIndex:s,onClickCollapseButton:a,isLastCell:c}){const{borderRight:u,backgroundColor:l}=Xo(gt((t=>t.week.dayGrid),[])),h={width:t,left:e,borderRight:c?"none":u,backgroundColor:l};return S("div",{className:on("panel-grid"),style:h},S(za,{index:n,exceedCount:r,isClicked:i,onClickExceedCount:o}),S(Wa,{isClickedIndex:s,isClicked:i,onClickCollapseButton:a}))}i.__r=function(t){Ha&&Ha(t),t.__c};const Ka=_a((function({uiModels:t,weekDates:e,narrowWeekend:n,height:r,clickedIndex:i,isClickedCount:o,onClickExceedCount:s,onClickCollapseButton:a}){const c=2,{widthList:u,leftList:l}=Us(e,n,Ps),h=e.length-1;return S(k,null,e.map(((e,n)=>{const d=sn(u[n]),f=sn(l[n]),p=t.filter($s(e)),m=Fs(p,r,Os+c),g=n===i,y=n===h;return S(qa,{key:`panel-grid-${e.getDate()}`,width:d,left:f,index:n,exceedCount:m,isClicked:o,onClickExceedCount:s,isClickedIndex:g,onClickCollapseButton:a,isLastCell:y})})))}));function Ga({onMouseDown:t}){return S("span",{className:`${on("weekday-resize-handle")} ${on("handle-y")}`,onMouseDown:t,"data-testid":"horizontal-event-resize-icon"},S("i",{className:`${on("icon")} ${on("ic-handle-y")}`}))}const Ya=Q(null),Qa=Ya.Provider,Xa=()=>{const t=yt(Ya);if(Ce(t))throw new Error("LayoutContainerProvider is not found");return t},Ja={panelResizer:"panelResizer"},Za={resizeEvent:(t,e)=>`event/${t}/resize/${e}`,moveEvent:(t,e)=>`event/${t}/move/${e}`,gridSelection:t=>`gridSelection/${t}`};function tc(t){return io(gt((e=>e.calendar.calendars.find((e=>e.id===t))),[t]))}function ec(t){var e;const n=tc(null!=(e=null==t?void 0:t.calendarId)?e:null);return mt((()=>({color:null==n?void 0:n.color,borderColor:null==n?void 0:n.borderColor,backgroundColor:null==n?void 0:n.backgroundColor,dragBackgroundColor:null==n?void 0:n.dragBackgroundColor})),[n])}var nc=(t=>(t["ESCAPE"]="Escape",t))(nc||{});const rc={["Escape"]:27},ic=3;function oc(t,e){const n=oo(),r=pt(t),i=pt(e);dt((()=>{r.current=t,i.current=e}),[t,e]),dt((()=>n.subscribe((t=>i.current(t)),(t=>r.current(t)))),[t,n])}function sc(t,e){return t.key?t.key===e:t.keyCode===rc[e]}function ac(t){return 0===t}function cc(t,e,n,r){return Math.abs(t-n)>=ic||Math.abs(e-r)>=ic}function uc(t,{onInit:e,onDragStart:n,onDrag:r,onMouseUp:i,onPressESCKey:o}={}){const{initDrag:s,setDragging:a,cancelDrag:c,reset:u}=so("dnd"),l=oo(),h=pt(l.getState().dnd);oc(po,(t=>{h.current=t}));const[d,f]=lt(!1),p=pt(null),m=pt(null),g=pt(null),y=gt((n=>{ac(n.button)&&(n.currentTarget&&(n.currentTarget.ondragstart=function(){return!1}),n.preventDefault(),f(!0),s({draggingItemType:t,initX:n.clientX,initY:n.clientY}),null==e||e(n,h.current))}),[e,t,s]),v=gt((e=>{const{initX:i,initY:o,draggingState:s,draggingItemType:c}=h.current;if(c!==t)return f(!1),void u();if(!en(i)||!en(o)||cc(i,o,e.clientX,e.clientY)){if(s<=di.INIT)return a({x:e.clientX,y:e.clientY}),void(null==n||n(e,h.current));a({x:e.clientX,y:e.clientY}),null==r||r(e,h.current)}}),[t,r,n,a,u]),_=gt((t=>{t.stopPropagation(),d&&(null==i||i(t,h.current),f(!1),u())}),[d,i,u]),w=gt((t=>{sc(t,nc.ESCAPE)&&(f(!1),c(),null==o||o(t,h.current))}),[o,c]);return dt((()=>{p.current=v,m.current=_,g.current=w}),[w,v,_]),dt((()=>{const t=t=>{var e;return null==(e=p.current)?void 0:e.call(p,t)},e=t=>{var e;return null==(e=m.current)?void 0:e.call(m,t)},n=t=>{var e;return null==(e=g.current)?void 0:e.call(g,t)};return d?(document.addEventListener("mousemove",t),document.addEventListener("mouseup",e),document.addEventListener("keydown",n),()=>{document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",e),document.removeEventListener("keydown",n)}):Fi}),[d,u]),y}function lc(t,e){return t?e:void 0}function hc(t){return{vertical:t?5:2,horizontal:8}}function dc(t,e){const n=t?0:"2px",r=e?0:"2px";return`${n} ${r} ${r} ${n}`}function fc({uiModel:t,flat:e,eventHeight:n,isDraggingTarget:r,calendarColor:i}){const{exceedLeft:o,exceedRight:s}=t,{color:a,backgroundColor:c,dragBackgroundColor:u,borderColor:l}=un(t,i),h={color:a,backgroundColor:r?u:c,borderLeft:o?"none":`3px solid ${l}`,borderRadius:dc(o,s),overflow:"hidden",height:n,lineHeight:an(n),opacity:r?.5:1},d=hc(e);return y(e?{marginTop:d.vertical}:{marginLeft:o?0:d.horizontal,marginRight:s?0:d.horizontal},h)}function pc({flat:t,uiModel:e,resizingWidth:n,movingLeft:r,eventHeight:i,headerHeight:o}){const{top:s,left:a,width:c,model:u}=e,l=hc(t),h=t?{}:{width:n||sn(c),left:sn(null!=r?r:a),top:(s-1)*(i+l.vertical)+o,position:"absolute"};return Object.assign(h,u.customStyle)}function mc({model:t}){const e=t.calendarId?`${t.calendarId}-`:"",n=t.id?`${t.id}-`:"";return`${e}${n}${t.title}`}const gc={eventBody:on("weekday-event"),eventTitle:on("weekday-event-title"),eventDot:on("weekday-event-dot"),moveEvent:on("dragging--move-event"),resizeEvent:on("dragging--resize-horizontal-event")};function yc({flat:t=!1,uiModel:e,eventHeight:n,headerHeight:r,resizingWidth:i=null,movingLeft:o=null}){const{currentView:s}=io(ho),{useDetailPopup:a,isReadOnly:c}=io(fo),{setDraggingEventUIModel:u}=so("dnd"),{showDetailPopup:l}=so("popup"),h=Xa(),d=Co(),f=ec(e.model),[p,m]=lt(!1),g=pt(null),{isReadOnly:_,id:w,calendarId:b}=e.model,E=!c&&!_&&tn(i)&&tn(o),T=t=>{u(e),null==h||h.classList.add(t)},C=t=>{m(!1),null==h||h.classList.remove(t)};oc(po,(({draggingEventUIModel:t,draggingState:n})=>{n===di.DRAGGING&&(null==t?void 0:t.cid())===e.cid()&&tn(i)&&tn(o)?m(!0):m(!1)})),dt((()=>{E&&d.fire("afterRenderEvent",e.model.toEventObject())}),[]);const I=uc(Za.resizeEvent("dayGrid",`${e.cid()}`),{onDragStart:()=>T(gc.resizeEvent),onMouseUp:()=>C(gc.resizeEvent),onPressESCKey:()=>C(gc.resizeEvent)}),k=uc(Za.moveEvent("dayGrid",`${e.cid()}`),{onDragStart:()=>{E&&T(gc.moveEvent)},onMouseUp:(n,{draggingState:r})=>{C(gc.moveEvent);const i=r<=di.INIT;i&&a&&g.current&&l({event:e.model,eventRect:g.current.getBoundingClientRect()},t),i&&d.fire("clickEvent",{event:e.model.toEventObject(),nativeEvent:n})},onPressESCKey:()=>C(gc.moveEvent)}),x=t=>{t.stopPropagation(),E&&I(t)},D=t=>{t.stopPropagation(),k(t)},A=!p&&"month"===s&&"time"===e.model.category&&Sr(e.model.start,e.model.end),N=!E||t||p||e.exceedRight,O=pc({uiModel:e,eventHeight:n,headerHeight:r,flat:t,movingLeft:o,resizingWidth:i}),P=fc({uiModel:e,flat:t,eventHeight:n,isDraggingTarget:p,calendarColor:f});return S("div",{className:on("weekday-event-block",{"weekday-exceed-left":e.exceedLeft,"weekday-exceed-right":e.exceedRight}),style:O,"data-testid":lc(E,mc(e)),"data-calendar-id":b,"data-event-id":w,ref:g},S("div",{className:gc.eventBody,style:v(y({},P),{backgroundColor:A?null:P.backgroundColor,borderLeft:A?null:P.borderLeft}),onMouseDown:D},A?S("span",{className:gc.eventDot,style:{backgroundColor:P.backgroundColor}}):null,S("span",{className:gc.eventTitle},S(bo,{template:e.model.category,param:e.model})),N?null:S(Ga,{onMouseDown:x})))}function vc(t,e){const n=pt(t);dt((()=>{n.current=t}),[t]),dt((()=>{const t=()=>n.current();e&&t()}),[e])}function _c(t){const[e,n]=lt(null);oc(po,(e=>{if(en(e.x)&&en(e.y)){const r=t({clientX:e.x,clientY:e.y});r&&n(r)}}));const r=gt((()=>n(null)),[]);return[e,r]}const wc=(t,e,n)=>{function r(t){return new RegExp(`^event/${e}/${n}/\\d+$`).test(t)}return tn(t)?null:r(t)?er(t.split("/")):null};function bc(t,e){const[n,r]=lt(!1),[i,o]=lt(!1),[s,a]=lt(null);oc(po,(({draggingItemType:n,draggingEventUIModel:i,draggingState:c})=>{const u=wc(n,t,e),l=Number(u)===(null==i?void 0:i.cid()),h=c===di.IDLE,d=c===di.CANCELED;tn(s)&&l&&a(i),en(s)&&(h||d)&&(r(!0),o(d))}));const c=()=>{a(null),r(!1),o(!1)};return{isDraggingEnd:n,isDraggingCanceled:i,draggingEvent:s,clearDraggingEvent:c}}function Ec({rowStyleInfo:t,gridPositionFinder:e}){const n=Co(),{isDraggingEnd:r,isDraggingCanceled:i,draggingEvent:o,clearDraggingEvent:s}=bc("dayGrid","move"),a=pt(null),[c,u]=_c(e),{columnIndex:l}=null!=c?c:{},h=mt((()=>tn(o)?null:t.findIndex((({left:t})=>t===o.left))),[t,o]),d=mt((()=>{if(tn(l)||tn(a.current)||tn(h))return null;const e=h+l-a.current;return e<0?-t[-e].left:t[e].left}),[l,t,h]);return dt((()=>{tn(a.current)&&en(l)&&(a.current=l)}),[l]),vc((()=>{const t=!i&&en(o)&&en(l)&&en(d)&&l!==a.current;if(t&&en(a.current)){const t=l-a.current,e=new Hn(o.model.getStarts()),r=new Hn(o.model.getEnds());e.addDate(t),r.addDate(t),n.fire("beforeUpdateEvent",{event:o.model.toEventObject(),changes:{start:e,end:r}})}s(),u(),a.current=null}),r),mt((()=>({movingEvent:o,movingLeft:d})),[d,o])}function Tc({rowStyleInfo:t,gridPositionFinder:e}){const{movingEvent:n,movingLeft:r}=Ec({rowStyleInfo:t,gridPositionFinder:e});return tn(n)?null:S(yc,{uiModel:n,eventHeight:Os,headerHeight:0,movingLeft:r})}function Cc(t,e){const n=Hs(t.getStarts(),e),r=Hs(t.getEnds(),e);return{start:n,end:r}}function Sc({weekDates:t,gridColWidthMap:e,gridPositionFinder:n}){const r=Co(),{isDraggingEnd:i,isDraggingCanceled:o,draggingEvent:s,clearDraggingEvent:a}=bc("dayGrid","resize"),[c,u]=_c(n),{columnIndex:l}=null!=c?c:{},h=mt((()=>s?Cc(s,t):{start:-1,end:-1}),[t,s]),d=mt((()=>h.start>-1&&en(l)?e[h.start][l]:null),[l,e,h.start]);return vc((()=>{const e=!o&&en(s)&&en(l)&&h.start<=l&&h.end!==l;if(e){const e=t[l];r.fire("beforeUpdateEvent",{event:s.model.toEventObject(),changes:{end:e}})}u(),a()}),i),mt((()=>({resizingEvent:s,resizingWidth:d})),[d,s])}function Ic({weekDates:t,gridColWidthMap:e,gridPositionFinder:n}){const{resizingEvent:r,resizingWidth:i}=Sc({weekDates:t,gridColWidthMap:e,gridPositionFinder:n});return tn(r)?null:S(yc,{uiModel:r,eventHeight:Os,headerHeight:0,resizingWidth:i})}function kc(){const[t,e]=lt(null),n=gt((t=>{t&&e(t)}),[]);return[t,n]}function xc(t,e){const[n,r]=lt(0),[i,o]=lt(!1),{updateDayGridRowHeight:s}=so("weekViewLayout"),a=gt((n=>{o(!0),r(n),s({rowName:e,height:(t+1)*Os})}),[e,t,s]),c=gt((()=>{o(!1),s({rowName:e,height:He})}),[e,s]);return{clickedIndex:n,isClickedCount:i,onClickExceedCount:a,onClickCollapseButton:c}}function Dc(t,e,n){let r;const i=o=>{r||(r=o);const s=o-r;if(s>=e)return t(),void n(Fi);const a=requestAnimationFrame(i);n((()=>cancelAnimationFrame(a)))},o=requestAnimationFrame(i);n((()=>cancelAnimationFrame(o)))}function Ac({onClick:t,onDblClick:e,delay:n=300}){const r=pt(Fi),i=t=>{r.current=t},o=()=>{r.current()};dt((()=>o),[]);const s=e=>{o(),Dc(t.bind(null,e),n,i)},a=t=>{o(),e(t)};return[s,a]}const Nc={dayGridMonth:"month",dayGridWeek:"allday",timeGrid:"time"};function Oc(t,e){const n=t<e;return n?[t,e]:[e,t]}function Pc({type:t,selectionSorter:e,dateGetter:n,dateCollection:r,gridPositionFinder:i}){const{useFormPopup:o,gridSelection:s}=io(fo),{enableDblClick:a,enableClick:c}=s,{setGridSelection:u,addGridSelection:l,clearAll:h}=so("gridSelection"),{hideAllPopup:d,showFormPopup:f}=so("popup"),p=Co(),m=Xa(),[g,y]=lt(null),[v,_]=lt(null),w=pt(!1),b=pt(null);oc(gt((e=>e.gridSelection[t]),[t]),(t=>{b.current=t})),oc(po,(({draggingState:t,draggingItemType:e})=>{w.current=e===E&&t>=di.INIT}));const E=Za.gridSelection(t),T=n=>{const r=i(n);en(v)&&en(r)&&u(t,e(v,r))},[C,S]=Ac({onClick:t=>{c&&k(t,!0)},onDblClick:t=>{a&&k(t,!0)},delay:250}),I=t=>{const e=t.detail<=1;(c||a&&!e)&&(c?e?C(t):S(t):k(t,!0))},k=(e,i)=>{var s;if(i&&T(e),en(b.current)){const[i,a]=Oc(...n(r,b.current));if(o&&en(g)){const n={top:(e.clientY+g.y)/2,left:(e.clientX+g.x)/2};f({isCreationPopup:!0,title:"",location:"",start:i,end:a,isAllday:"timeGrid"!==t,isPrivate:!1,popupArrowPointPosition:n,close:h})}const c=`.${on(Nc[t])}.${on("grid-selection")}`,u=Array.from(null!=(s=null==m?void 0:m.querySelectorAll(c))?s:[]);p.fire("selectDateTime",{start:i.toDate(),end:a.toDate(),isAllday:"timeGrid"!==t,nativeEvent:e,gridSelectionElements:u})}},x=gt((()=>{y(null),_(null),u(t,null)}),[u,t]),D=uc(E,{onInit:e=>{o&&(y({x:e.clientX,y:e.clientY}),d());const n=i(e);en(n)&&_(n),o||l(t,b.current)},onDragStart:t=>{T(t)},onDrag:t=>{w.current&&T(t)},onMouseUp:(t,{draggingState:e})=>{t.stopPropagation();const n=e<=di.INIT;n?I(t):k(t,n)},onPressESCKey:x});return dt((()=>x),[x]),D}const Rc="alldayTitle";function Mc({events:t,weekDates:e,height:n=He,options:r={},rowStyleInfo:i,gridColWidthMap:o}){const{isReadOnly:s}=io(fo),a=Xo(Lo),[c,u]=kc(),{narrowWeekend:l=!1,startDayOfWeek:h=ir.SUN}=r,d=mt((()=>Math.max(0,...t.map((({top:t})=>t)))),[t]),f=mt((()=>ia({container:c,rowsCount:1,columnsCount:e.length,narrowWeekend:l,startDayOfWeek:h})),[c,e.length,l,h]),{clickedIndex:p,isClickedCount:m,onClickExceedCount:g,onClickCollapseButton:y}=xc(d,"allday"),v=mt((()=>t.filter(Ms(n,Os+$e)).map((t=>S(yc,{key:`allday-DayEvent-${t.cid()}`,uiModel:t,eventHeight:Os,headerHeight:0})))),[t,n]),_=Pc({type:"dayGridWeek",gridPositionFinder:f,dateCollection:e,selectionSorter:fa.sortSelection,dateGetter:fa.getDateFromCollection}),w=t=>{const e=t.target;!s&&e.classList.contains(on("panel-grid"))&&_(t)};return S(k,null,S("div",{className:on("panel-title"),style:a},S(bo,{template:Rc,param:"alldayTitle"})),S("div",{className:on("allday-panel"),ref:u,onMouseDown:w},S("div",{className:on("panel-grid-wrapper")},S(Ka,{uiModels:t,weekDates:e,narrowWeekend:l,height:n,clickedIndex:p,isClickedCount:m,onClickExceedCount:g,onClickCollapseButton:y})),S("div",{className:on("panel-allday-events")},v),S(Ic,{weekDates:e,gridPositionFinder:f,gridColWidthMap:o}),S(Tc,{rowStyleInfo:i,gridPositionFinder:f}),S(ma,{weekDates:e,narrowWeekend:l})))}function Lc({events:t,weekDates:e,category:n,height:r=He,options:i={}}){const o=Xo(Lo),s=mt((()=>Math.max(0,...t.map((({top:t})=>t)))),[t]),{narrowWeekend:a=!1}=i,c=`${n}Title`,{clickedIndex:u,isClickedCount:l,onClickExceedCount:h,onClickCollapseButton:d}=xc(s,n),f=mt((()=>t.filter(Ms(r,Os+$e)).map((t=>S(yc,{key:`${n}-DayEvent-${t.cid()}`,uiModel:t,eventHeight:Os,headerHeight:0})))),[n,t,r]);return S(k,null,S("div",{className:on("panel-title"),style:o},S(bo,{template:c,param:n})),S("div",{className:on("allday-panel")},S("div",{className:on("panel-grid-wrapper")},S(Ka,{uiModels:t,weekDates:e,narrowWeekend:a,height:r,clickedIndex:u,isClickedCount:l,onClickExceedCount:h,onClickCollapseButton:d})),S("div",{className:on(`panel-${n}-events`)},f)))}const Fc={detailItem:on("detail-item"),detailItemIndent:on("detail-item","detail-item-indent"),detailItemSeparate:on("detail-item","detail-item-separate"),sectionDetail:on("popup-section","section-detail"),content:on("content"),locationIcon:on("icon","ic-location-b"),repeatIcon:on("icon","ic-repeat-b"),userIcon:on("icon","ic-user-b"),stateIcon:on("icon","ic-state-b"),calendarDotIcon:on("icon","calendar-dot")};function jc({event:t}){var e,n;const{location:r,recurrenceRule:i,attendees:o,state:s,calendarId:a,body:c}=t,u=tc(a);return S("div",{className:Fc.sectionDetail},r&&S("div",{className:Fc.detailItem},S("span",{className:Fc.locationIcon}),S("span",{className:Fc.content},S(bo,{template:"popupDetailLocation",param:t,as:"span"}))),i&&S("div",{className:Fc.detailItem},S("span",{className:Fc.repeatIcon}),S("span",{className:Fc.content},S(bo,{template:"popupDetailRecurrenceRule",param:t,as:"span"}))),o&&S("div",{className:Fc.detailItemIndent},S("span",{className:Fc.userIcon}),S("span",{className:Fc.content},S(bo,{template:"popupDetailAttendees",param:t,as:"span"}))),s&&S("div",{className:Fc.detailItem},S("span",{className:Fc.stateIcon}),S("span",{className:Fc.content},S(bo,{template:"popupDetailState",param:t,as:"span"}))),u&&S("div",{className:Fc.detailItem},S("span",{className:Fc.calendarDotIcon,style:{backgroundColor:null!=(e=null==u?void 0:u.backgroundColor)?e:""}}),S("span",{className:Fc.content},null!=(n=null==u?void 0:u.name)?n:"")),c&&S("div",{className:Fc.detailItemSeparate},S("span",{className:Fc.content},S(bo,{template:"popupDetailBody",param:t,as:"span"}))))}const Uc={sectionHeader:on("popup-section","section-header"),content:on("content"),eventTitle:on("event-title")};function Vc({event:t}){return S("div",{className:Uc.sectionHeader},S("div",{className:Uc.eventTitle},S(bo,{template:"popupDetailTitle",param:t,as:"span"})),S("div",{className:Uc.content},S(bo,{template:"popupDetailDate",param:t,as:"span"})))}const $c=on("see-more-popup-slot"),Hc=on("event-form-popup-slot"),Bc=on("event-detail-popup-slot"),zc=8,Wc=["isPrivate","isAllday","isPending","isFocused","isVisible","isReadOnly"];var qc=(t=>(t["right"]="right",t["left"]="left",t))(qc||{}),Kc=(t=>(t["top"]="top",t["bottom"]="bottom",t))(Kc||{});const Gc=Q(null);function Yc({children:t}){const[e,n]=kc(),[r,i]=kc(),[o,s]=kc(),[a,c]=kc(),u={container:e,seeMorePopupSlot:r,formPopupSlot:o,detailPopupSlot:a};return S(Gc.Provider,{value:u},t,S("div",{ref:n,className:on("floating-layer")},S("div",{ref:i,className:$c}),S("div",{ref:s,className:Hc}),S("div",{ref:c,className:Bc})))}const Qc=t=>{var e;const n=yt(Gc);if(Ce(n))throw new Error("FloatingLayerProvider is not found");return null!=(e=null==n?void 0:n[t])?e:null};function Xc(t,e,n){return t+n.height>e.top+e.height}function Jc(t,e,n){return t+n.width>e.left+e.width}const Zc=t=>t.popup[Ri.Form],tu=t=>t.popup[Ri.Detail],eu=t=>t.popup[Ri.SeeMore],nu={popupContainer:on("popup-container"),detailContainer:on("detail-container"),topLine:on("popup-top-line"),border:on("popup-arrow-border"),fill:on("popup-arrow-fill"),sectionButton:on("popup-section","section-button"),content:on("content"),editIcon:on("icon","ic-edit"),deleteIcon:on("icon","ic-delete"),editButton:on("edit-button"),deleteButton:on("delete-button"),verticalLine:on("vertical-line")};function ru(t,e,n){let r=t.top+t.height/2-n.height/2,i=t.left+t.width;return Xc(r,e,n)&&(r=e.top+e.height-n.height),Jc(i,e,n)&&(i=t.left-n.width),[Math.max(r,e.top)+window.scrollY,Math.max(i,e.left)+window.scrollX]}function iu(t,e,n){const r=t.top+t.height/2+window.scrollY,i=t.left+t.width,o=i+n.width>e.left+e.width,s=o?qc.right:qc.left;return{top:r,direction:s}}function ou(){const{useFormPopup:t}=io(fo),e=io(tu),{event:n,eventRect:r}=null!=e?e:{},{showFormPopup:i,hideDetailPopup:o}=so("popup"),s=ec(n),a=Xa(),c=Qc("detailPopupSlot"),u=Co(),l=pt(null),[h,d]=lt({}),[f,p]=lt(0),[m,g]=lt(qc.left),y=mt((()=>{const t=m===qc.right,e=m===qc.left;return on("popup-arrow",{right:t,left:e})}),[m]);if(ft((()=>{if(l.current&&r&&a){const t=a.getBoundingClientRect(),e=l.current.getBoundingClientRect(),[n,i]=ru(r,t,e),{top:o,direction:s}=iu(r,t,e);d({top:n,left:i}),p(o-n-zc),g(s)}}),[r,a]),tn(n)||tn(r)||tn(c))return null;const{title:v="",isAllday:_=!1,start:w=new Hn,end:b=new Hn,location:E,state:T,isReadOnly:C,isPrivate:I}=n,k={top:r.top+r.height/2,left:r.left+r.width/2},x=()=>{t?i({isCreationPopup:!1,event:n,title:v,location:E,start:w,end:b,isAllday:_,isPrivate:I,eventState:T,popupArrowPointPosition:k}):u.fire("beforeUpdateEvent",{event:n.toEventObject(),changes:{}})},D=()=>{u.fire("beforeDeleteEvent",n.toEventObject()),o()};return Na(S("div",{role:"dialog",className:nu.popupContainer,ref:l,style:h},S("div",{className:nu.detailContainer},S(Vc,{event:n}),S(jc,{event:n}),!C&&S("div",{className:nu.sectionButton},S("button",{type:"button",className:nu.editButton,onClick:x},S("span",{className:nu.editIcon}),S("span",{className:nu.content},S(bo,{template:"popupEdit",as:"span"}))),S("div",{className:nu.verticalLine}),S("button",{type:"button",className:nu.deleteButton,onClick:D},S("span",{className:nu.deleteIcon}),S("span",{className:nu.content},S(bo,{template:"popupDelete",as:"span"}))))),S("div",{className:nu.topLine,style:{backgroundColor:s.backgroundColor}}),S("div",{className:y},S("div",{className:nu.border,style:{top:f}},S("div",{className:nu.fill})))),c)}const su={dropdownMenu:on("dropdown-menu"),dropdownMenuItem:on("dropdown-menu-item"),dotIcon:on("icon","dot"),content:on("content")};function au({index:t,name:e,backgroundColor:n,onClick:r}){return S("li",{className:su.dropdownMenuItem,onClick:e=>r(e,t)},S("span",{className:su.dotIcon,style:{backgroundColor:n}}),S("span",{className:su.content},e))}function cu({calendars:t,setOpened:e,onChangeIndex:n}){const r=(t,r)=>{t.stopPropagation(),e(!1),n(r)};return S("ul",{className:su.dropdownMenu},t.map((({name:t,backgroundColor:e="000"},n)=>S(au,{key:`dropdown-${t}-${n}`,index:n,name:t,backgroundColor:e,onClick:r}))))}function uu({children:t,classNames:e=[],onClick:n=Fi}){return S("div",{className:on("popup-section",...e),onClick:n},t)}function lu(){const[t,e]=lt(!1),n=()=>e((t=>!t));return{isOpened:t,setOpened:e,toggleDropdown:n}}var hu=(t=>(t["init"]="init",t["setCalendarId"]="setCalendarId",t["setTitle"]="setTitle",t["setLocation"]="setLocation",t["setPrivate"]="setPrivate",t["setAllday"]="setAllday",t["setState"]="setState",t["reset"]="reset",t))(hu||{});const du={title:"",location:"",isAllday:!1,isPrivate:!1,state:"Busy"};function fu(t,e){switch(e.type){case"init":return y(y({},du),e.event);case"setCalendarId":return v(y({},t),{calendarId:e.calendarId});case"setTitle":return v(y({},t),{title:e.title});case"setLocation":return v(y({},t),{location:e.location});case"setPrivate":return v(y({},t),{isPrivate:e.isPrivate});case"setAllday":return v(y({},t),{isAllday:e.isAllday});case"setState":return v(y({},t),{state:e.state});case"reset":return y(y({},t),du);default:return t}}function pu(t){return ht(fu,y({calendarId:t},du))}const mu={popupSection:["dropdown-section","calendar-section"],popupSectionItem:on("popup-section-item","popup-button"),dotIcon:on("icon","dot"),content:on("content","event-calendar")};function gu({calendars:t,selectedCalendarId:e,formStateDispatch:n}){const{isOpened:r,setOpened:i,toggleDropdown:o}=lu(),s=t.find((t=>t.id===e)),{backgroundColor:a="",name:c=""}=null!=s?s:{},u=e=>n({type:hu.setCalendarId,calendarId:t[e].id});return S(uu,{onClick:o,classNames:mu.popupSection},S("button",{type:"button",className:mu.popupSectionItem},S("span",{className:mu.dotIcon,style:{backgroundColor:a}}),S("span",{className:mu.content},c),S("span",{className:on("icon","ic-dropdown-arrow",{open:r})})),r&&S(cu,{calendars:t,setOpened:i,onChangeIndex:u}))}const yu={closeButton:on("popup-button","popup-close"),closeIcon:on("icon","ic-close")};function vu({type:t,close:e}){const{hideAllPopup:n}=so("popup"),r=()=>{n(),nn(e)&&e()};return S("button",{type:"button",className:yu.closeButton,onClick:r},"moreEvents"===t?S(bo,{template:"monthMoreClose"}):S("i",{className:yu.closeIcon}))}const _u={confirmButton:on("popup-button","popup-confirm")};function wu({children:t}){return S("button",{type:"submit",className:_u.confirmButton},S("span",null,t))}function bu({template:t,model:e,defaultValue:n=""}){const r=io(lo),i=r[t];if(tn(i))return n;let o=i(e);return Ze(o)||(o=n),o}const Eu={datePickerContainer:on("datepicker-container"),datePicker:on("popup-section-item","popup-date-picker"),allday:on("popup-section-item","popup-section-allday"),dateIcon:on("icon","ic-date"),dateDash:on("popup-date-dash"),content:on("content")},Tu=Ea((function({start:t,end:e,isAllday:n=!1,formStateDispatch:r},i){const{usageStatistics:o}=io(fo),s=pt(null),a=pt(null),c=pt(null),l=pt(null),h=bu({template:"startDatePlaceholder",defaultValue:"Start Date"}),d=bu({template:"endDatePlaceholder",defaultValue:"End Date"}),f=()=>r({type:hu.setAllday,isAllday:!n});return dt((()=>{if(s.current&&a.current&&c.current&&l.current){const r=new Hn(t),h=new Hn(e);n&&(r.setHours(12,0,0),h.setHours(13,0,0)),i.current=u.createRangePicker({startpicker:{date:r.toDate(),input:a.current,container:s.current},endpicker:{date:h.toDate(),input:l.current,container:c.current},format:n?"yyyy-MM-dd":"yyyy-MM-dd HH:mm",timePicker:!n&&{showMeridiem:!1,usageStatistics:o},usageStatistics:o})}}),[t,e,n,o,i]),S(uu,null,S("div",{className:Eu.datePicker},S("span",{className:Eu.dateIcon}),S("input",{name:"start",className:Eu.content,placeholder:h,ref:a}),S("div",{className:Eu.datePickerContainer,ref:s})),S("span",{className:Eu.dateDash},"-"),S("div",{className:Eu.datePicker},S("span",{className:Eu.dateIcon}),S("input",{name:"end",className:Eu.content,placeholder:d,ref:l}),S("div",{className:Eu.datePickerContainer,ref:c})),S("div",{className:Eu.allday,onClick:f},S("span",{className:on("icon",{"ic-checkbox-normal":!n,"ic-checkbox-checked":n})}),S("span",{className:Eu.content},S(bo,{template:"popupIsAllday"})),S("input",{name:"isAllday",type:"checkbox",className:on("hidden-input"),value:n?"true":"false",checked:n})))})),Cu=["Busy","Free"],Su={popupSectionItem:on("popup-section-item","dropdown-menu-item"),dropdownMenu:on("dropdown-menu"),icon:on("icon"),content:on("content")};function Iu({setOpened:t,setEventState:e}){const n=(n,r)=>{n.stopPropagation(),t(!1),e(r)};return S("ul",{className:Su.dropdownMenu},Cu.map((t=>S("li",{key:t,className:Su.popupSectionItem,onClick:e=>n(e,t)},S("span",{className:Su.icon}),S("span",{className:Su.content},S(bo,"Busy"===t?{template:"popupStateBusy"}:{template:"popupStateFree"}))))))}const ku={popupSection:["dropdown-section","state-section"],popupSectionItem:on("popup-section-item","popup-button"),stateIcon:on("icon","ic-state"),arrowIcon:on("icon","ic-dropdown-arrow"),content:on("content","event-state")};function xu({eventState:t="Busy",formStateDispatch:e}){const{isOpened:n,setOpened:r,toggleDropdown:i}=lu(),o=t=>e({type:hu.setState,state:t});return S(uu,{onClick:i,classNames:ku.popupSection},S("button",{type:"button",className:ku.popupSectionItem},S("span",{className:ku.stateIcon}),S("span",{className:ku.content},S(bo,"Busy"===t?{template:"popupStateBusy"}:{template:"popupStateFree"})),S("span",{className:ku.arrowIcon})),n&&S(Iu,{setOpened:r,setEventState:o}))}const Du={popupSectionItem:on("popup-section-item","popup-section-location"),locationIcon:on("icon","ic-location"),content:on("content")};function Au({location:t,formStateDispatch:e}){const n=bu({template:"locationPlaceholder",defaultValue:"Location"}),r=t=>{e({type:hu.setLocation,location:t.currentTarget.value})};return S(uu,null,S("div",{className:Du.popupSectionItem},S("span",{className:Du.locationIcon}),S("input",{name:"location",className:Du.content,placeholder:n,value:t,onChange:r})))}const Nu={popupSectionItem:on("popup-section-item","popup-section-title"),privateButton:on("popup-section-item","popup-section-private","popup-button"),titleIcon:on("icon","ic-title"),content:on("content")};function Ou({title:t,isPrivate:e=!1,formStateDispatch:n}){const r=bu({template:"titlePlaceholder",defaultValue:"Subject"}),i=()=>n({type:hu.setPrivate,isPrivate:!e}),o=t=>{n({type:hu.setTitle,title:t.currentTarget.value})};return S(uu,null,S("div",{className:Nu.popupSectionItem},S("span",{className:Nu.titleIcon}),S("input",{name:"title",className:Nu.content,placeholder:r,value:t,onChange:o,required:!0})),S("button",{type:"button",className:Nu.privateButton,onClick:i},S("span",{className:on("icon",{"ic-private":e,"ic-public":!e})}),S("input",{name:"isPrivate",type:"checkbox",className:on("hidden-input"),value:e?"true":"false",checked:e})))}const Pu={popupContainer:on("popup-container"),formContainer:on("form-container"),popupArrowBorder:on("popup-arrow-border"),popupArrowFill:on("popup-arrow-fill")};function Ru(t,e,n){let r=t.top-n.height-zc,i=t.left-n.width/2,o=Kc.bottom;return r<e.top&&(o=Kc.top,r=t.top+zc),Xc(r,e,n)&&(r=e.top+e.height-n.height),Jc(i,e,n)&&(i=e.left+e.width-n.width),{top:r+window.scrollY,left:Math.max(i,e.left)+window.scrollX,direction:o}}function Mu(t){return-1!==Wc.indexOf(t)}function Lu(t,e){return Object.entries(e).reduce(((e,[n,r])=>{const i=n;return t[i]instanceof Hn?0!==Er(t[i],r)&&(e[i]=r):t[i]!==r&&(e[i]=r),e}),{})}function Fu(){var t;const{calendars:e}=io(co),{hideAllPopup:n}=so("popup"),r=io(Zc),{start:i,end:o,popupArrowPointPosition:s,close:a,isCreationPopup:c,event:u}=null!=r?r:{},l=Co(),h=Qc("formPopupSlot"),[d,f]=pu(null==(t=e[0])?void 0:t.id),p=pt(null),m=pt(null),[g,v]=lt({}),[_,w]=lt(0),[b,E]=lt(Kc.bottom),T=Xa(),C=mt((()=>{const t=b===Kc.top,e=b===Kc.bottom;return on("popup-arrow",{top:t,bottom:e})}),[b]);if(ft((()=>{if(m.current&&s&&T){const t=T.getBoundingClientRect(),e=m.current.getBoundingClientRect(),{top:n,left:r,direction:i}=Ru(s,t,e),o=s.left-r;v({left:r,top:n}),w(o),E(i)}}),[T,s]),dt((()=>{en(r)&&en(u)&&f({type:hu.init,event:{title:r.title,location:r.location,isAllday:r.isAllday,isPrivate:r.isPrivate,calendarId:u.calendarId,state:r.eventState}})}),[e,u,f,r]),dt((()=>{tn(r)&&f({type:hu.reset})}),[f,r]),tn(i)||tn(o)||tn(h))return null;const I=t=>{var e,r;t.preventDefault();const i=new FormData(t.target),o=y({},d);if(i.forEach(((t,e)=>{o[e]=Mu(e)?"true"===t:t})),o.start=new Hn(null==(e=p.current)?void 0:e.getStartDate()),o.end=new Hn(null==(r=p.current)?void 0:r.getEndDate()),c)l.fire("beforeCreateEvent",o);else if(u){const t=Lu(u,o);l.fire("beforeUpdateEvent",{event:u.toEventObject(),changes:t})}n()};return Na(S("div",{role:"dialog",className:Pu.popupContainer,ref:m,style:g},S("form",{onSubmit:I},S("div",{className:Pu.formContainer},(null==e?void 0:e.length)?S(gu,{selectedCalendarId:d.calendarId,calendars:e,formStateDispatch:f}):S(uu,null),S(Ou,{title:d.title,isPrivate:d.isPrivate,formStateDispatch:f}),S(Au,{location:d.location,formStateDispatch:f}),S(Tu,{start:i,end:o,isAllday:d.isAllday,formStateDispatch:f,ref:p}),S(xu,{eventState:d.state,formStateDispatch:f}),S(vu,{type:"form",close:a}),S(uu,null,S(wu,null,S(bo,c?{template:"popupSave"}:{template:"popupUpdate"})))),S("div",{className:C},S("div",{className:Pu.popupArrowBorder,style:{left:_}},S("div",{className:Pu.popupArrowFill}))))),h)}function ju(t){return Object.values(t.popup).find((t=>en(t)))}function Uu(){const t=io(ju),{hideAllPopup:e}=so("popup"),n=en(t),r=n=>{var r;n.stopPropagation(),null==(r=null==t?void 0:t.close)||r.call(t),e()};return S("div",{className:on("popup-overlay"),style:{display:n?"block":"none"},onClick:r})}const Vu={container:on("see-more-container"),seeMore:on("see-more"),header:on("see-more-header"),list:on("month-more-list")};function $u(){const t=io(eu),{date:e,events:n=[],popupPosition:r}=null!=t?t:{},{moreView:i,moreViewTitle:o}=Zo(),s=Qc("seeMorePopupSlot"),a=Co(),c=pt(null),u=tn(e)||tn(r)||tn(s);if(dt((()=>{!u&&c.current&&a.fire("clickMoreEventsBtn",{date:e.toDate(),target:c.current})}),[e,a,u]),u)return null;const l={height:Me,marginBottom:Le,padding:je,backgroundColor:o.backgroundColor},h={ymd:gr(e,"YYYY-MM-DD"),day:e.getDay(),date:e.getDate().toString().padStart(2,"0")},d={height:`calc(100% - ${Me+Le+Fe}px)`};return Na(S("div",{role:"dialog",className:Vu.container,style:r,ref:c},S("div",{className:Vu.seeMore,style:i},S("div",{className:Vu.header,style:l},S(bo,{template:"monthMoreTitleDate",param:h}),S(vu,{type:"moreEvents"})),S("div",{className:Vu.list,style:d},n.map((t=>S(yc,{key:`see-more-event-item-${t.cid()}`,uiModel:t,eventHeight:De,headerHeight:Me,flat:!0})))))),s)}function Hu(t,e){const n={height:sn(100)};return t&&(n.width=t),e&&(n.height=e),n}function Bu({children:t,width:e,height:n,className:r="",autoAdjustPanels:i=!1}){const{backgroundColor:o}=Xo(Ro),[s,a]=kc(),{setLastPanelType:c,updateLayoutHeight:u}=so("weekViewLayout"),l=mt((()=>`${on("layout")} ${r}`),[r]);return ft((()=>{if(s){const t=()=>u(s.offsetHeight);return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)}return Fi}),[s,u]),ft((()=>{if(s&&i){const e=M(t),n=e[e.length-1];Ze(n)||Ye(n)||tn(n)||c(n.props.name)}}),[t,c,i,s]),S(Qa,{value:s},S("div",{ref:a,className:l,style:v(y({},Hu(e,n)),{backgroundColor:o})},s?t:null),S(Fu,null),S(ou,null),S($u,null),S(Uu,null))}function zu(t,e){return{height:t,width:"100%",cursor:"row-resize",borderTop:e,borderBottom:e}}function Wu({name:t,height:e}){const n=Xo(gt((t=>t.week.panelResizer.border),[])),r=zu(e,n),i=v(y({},r),{display:"none",border:"none",backgroundColor:"#999"}),[o,s]=lt(i),a=pt(null),{updateDayGridRowHeightByDiff:c}=so("weekViewLayout"),u=uc(Ja.panelResizer,{onDragStart:t=>{a.current={left:t.pageX,top:t.pageY}},onDrag:t=>{if(a.current){const e=t.pageY-a.current.top;s((t=>v(y({},t),{top:e,display:null})))}},onMouseUp:e=>{if(a.current){const n=e.pageY-a.current.top;a.current=null,s(i),c({rowName:t,diff:n})}}});return S("div",{style:{position:"relative"}},S("div",{className:on("panel-resizer"),style:r,onMouseDown:u}),S("div",{className:on("panel-resizer-guide"),style:o}))}function qu(t,e){return e?Math.min(e,t):t}function Ku({initialHeight:t,initialWidth:e,overflowX:n,overflowY:r,maxExpandableWidth:i,maxExpandableHeight:o,minHeight:s,maxHeight:a,minWidth:c,maxWidth:u}){const l={};return e&&(l.width=qu(e,i),l.height="100%"),t&&(l.width="100%",l.height=qu(t,o)),n&&(l.overflowX="auto"),r&&(l.overflowY="auto"),v(y({},l),{minHeight:s,maxHeight:a,minWidth:c,maxWidth:u})}const Gu=Ea((function({name:t,initialWidth:e=He,initialHeight:n=He,overflowX:r,overflowY:i,maxExpandableWidth:o,maxExpandableHeight:s,minHeight:a,maxHeight:c,minWidth:u,maxWidth:l,resizerWidth:h=yi,resizerHeight:d=yi,resizable:f,children:p},m){const{updateDayGridRowHeight:g}=so("weekViewLayout"),{height:y}=io(gt((e=>{var n;return null!=(n=e.weekViewLayout.dayGridRows[t])?n:{}}),[t])),v=null!=y?y:n;ft((()=>{g({rowName:t,height:n})}),[n,t,g]);const _=Ku({initialWidth:e,initialHeight:v,overflowX:r,overflowY:i,maxExpandableWidth:o,maxExpandableHeight:s,minHeight:a,maxHeight:c,minWidth:u,maxWidth:l}),w=mt((()=>tn(f)||Ke(f)?!!f:f.includes(t)),[f,t]);return S(k,null,S("div",{className:on("panel",t),style:_,ref:m},p),w?S(Wu,{name:t,width:h,height:d}):null)})),Yu="timegrid",Qu=t=>`${Yu}-${t}`,Xu={second:"HH:mm:ss",minute:"HH:mm",hour:"HH:mm",date:"HH:mm",month:"MM.DD",year:"YYYY.MM.DD"},Ju={time:on("event-time"),content:on("event-time-content"),travelTime:on("travel-time"),resizeHandleX:on("resize-handler-x"),moveEvent:on("dragging--move-event"),resizeEvent:on("dragging--resize-vertical-event")};function Zu(t){const{percent:e,px:n}=cn(`${t}`);return t>0||e>0||n>0?ze:0}function tl(t,e){return Ze(t)?t:t>=0?`calc(${sn(t)} - ${e}px)`:""}function el({uiModel:t,isDraggingTarget:e,hasNextStartTime:n,calendarColor:r,minHeight:i}){const{top:o,left:s,height:a,width:c,duplicateLeft:u,duplicateWidth:l,goingDurationHeight:h,modelDurationHeight:d,comingDurationHeight:f,croppedStart:p,croppedEnd:m}=t,g="white",y=2,v=2,_=Zu(s),{color:w,backgroundColor:b,borderColor:E,dragBackgroundColor:T}=un(t,r),C={width:tl(l||c,_),height:`calc(${sn(Math.max(a,i))} - ${v}px)`,top:sn(o),left:u||sn(s),borderRadius:y,borderLeft:`3px solid ${E}`,marginLeft:_,color:w,backgroundColor:e?T:b,opacity:e?.5:1,zIndex:n?1:0},S={height:sn(h),borderBottom:`1px dashed ${g}`},I={height:sn(d)},k={height:sn(f),borderTop:`1px dashed ${g}`};return p&&(C.borderTopLeftRadius=0,C.borderTopRightRadius=0),m&&(C.borderBottomLeftRadius=0,C.borderBottomRightRadius=0),{containerStyle:C,goingDurationStyle:S,modelDurationStyle:I,comingDurationStyle:k}}function nl({uiModel:t,isReadOnlyCalendar:e,isDraggingTarget:n,hasNextStartTime:r}){const{model:i}=t;return!e&&!i.isReadOnly&&!n&&!r}function rl({uiModel:t,nextStartTime:e,isResizingGuide:n=!1,minHeight:r=0}){const{useDetailPopup:i,isReadOnly:o,week:s}=io(fo),a=ec(t.model),{collapseDuplicateEvents:c}=s,u=Xa(),{showDetailPopup:l}=so("popup"),{setDraggingEventUIModel:h}=so("dnd"),{setSelectedDuplicateEventCid:d}=so("weekViewLayout"),f=Co(),p=pt(null),[m,g]=lt(!1),{model:_,goingDurationHeight:w,modelDurationHeight:b,comingDurationHeight:E,croppedEnd:T}=t,{id:C,calendarId:I,customStyle:k}=_,x=en(e),{containerStyle:D,goingDurationStyle:A,modelDurationStyle:N,comingDurationStyle:O}=el({uiModel:t,isDraggingTarget:m,hasNextStartTime:x,calendarColor:a,minHeight:r}),P=x||n;oc(po,(({draggingEventUIModel:e,draggingState:r})=>{r!==di.DRAGGING||(null==e?void 0:e.cid())!==t.cid()||x||n?g(!1):g(!0)})),dt((()=>{n||f.fire("afterRenderEvent",t.model.toEventObject())}),[]);const R=e=>{h(t),null==u||u.classList.add(e)},M=t=>{g(!1),null==u||u.classList.remove(t)},L=uc(Za.moveEvent("timeGrid",`${t.cid()}`),{onDragStart:()=>{V&&R(Ju.moveEvent)},onMouseUp:(e,{draggingState:n})=>{M(Ju.moveEvent);const r=n<=di.INIT;if(r&&c){const e=t.duplicateEvents.length>0?t.cid():vi;d(e)}r&&i&&p.current&&l({event:t.model,eventRect:p.current.getBoundingClientRect()},!1),r&&f.fire("clickEvent",{event:t.model.toEventObject(),nativeEvent:e})},onPressESCKey:()=>M(Ju.moveEvent)}),F=t=>{t.stopPropagation(),L(t)},j=uc(Za.resizeEvent("timeGrid",`${t.cid()}`),{onDragStart:()=>R(Ju.resizeEvent),onMouseUp:()=>M(Ju.resizeEvent),onPressESCKey:()=>M(Ju.resizeEvent)}),U=t=>{t.stopPropagation(),j(t)},V=nl({uiModel:t,isReadOnlyCalendar:o,isDraggingTarget:m,hasNextStartTime:x}),$=V&&!T;return S("div",{"data-testid":`${P?"guide-":""}time-event-${_.title}-${t.cid()}`,"data-calendar-id":I,"data-event-id":C,className:Ju.time,style:y(y({},D),k),onMouseDown:F,ref:p},w?S("div",{className:Ju.travelTime,style:A},S(bo,{template:"goingDuration",param:_})):null,b?S("div",{className:Ju.content,style:N},S(bo,{template:"time",param:v(y({},_.toEventObject()),{start:x?e:_.start})})):null,E?S("div",{className:Ju.travelTime,style:O},S(bo,{template:"comingDuration",param:_})):null,$?S("div",{className:Ju.resizeHandleX,onMouseDown:U}):null)}function il({top:t,height:e,text:n}){const{backgroundColor:r,border:i}=Xo(gt((t=>t.common.gridSelection),[])),o=Xo(gt((t=>t.week.gridSelection.color),[])),s={top:sn(t),height:sn(e),backgroundColor:r,border:i};return S("div",{className:on("time","grid-selection"),style:s,"data-testid":`time-grid-selection-${t}-${e}`},n.length>0?S("span",{className:on("grid-selection-label"),style:{color:o}},n):null)}function ol({columnIndex:t,timeGridRows:e}){const n=io(gt((n=>ua.calculateSelection(n.gridSelection.timeGrid,t,e.length-1)),[t,e])),r=mt((()=>{if(!n)return null;const{startRowIndex:t,endRowIndex:r,isStartingColumn:i,isSelectingMultipleColumns:o}=n,{top:s,startTime:a}=e[t],{top:c,height:u,endTime:l}=e[r],h=c+u-s;let d=`${a} - ${l}`;return o&&(d=i?a:""),{top:s,height:h,text:d}}),[n,e]);return tn(r)?null:S(il,y({},r))}function sl({gridPositionFinder:t,totalUIModels:e,columnIndex:n,timeGridData:r}){const i=Co(),{isDraggingEnd:o,isDraggingCanceled:s,draggingEvent:a,clearDraggingEvent:c}=bc("timeGrid","resize"),[u,l]=_c(t),[h,d]=lt(null),f=gt((()=>{d(null),c(),l()}),[l,c]),p=mt((()=>{if(tn(a))return null;const{columns:t,rows:n}=r,i=e.map((t=>t.filter((t=>t.cid()===a.cid())))),o=(e,n)=>i=>{const o=jr(t[n].date,i.startTime),s=jr(r.columns[n].date,i.endTime);return o<=e&&e<s},s=i.findIndex((t=>t.length>0)),c=i[s][0],{goingDuration:u=0}=c.model,l=Fr(c.getStarts(),-u),h=Math.max(n.findIndex(o(l,s)),0),d=nr(i,(t=>t.length>0)),f=i[d][0],{comingDuration:p=0}=f.model,m=Fr(f.getStarts(),p);let g=n.findIndex(o(m,d));return g=g>=0?g:n.length-1,{eventStartDateColumnIndex:s,eventStartDateRowIndex:h,eventEndDateColumnIndex:d,eventEndDateRowIndex:g,resizeTargetUIModelColumns:i}}),[a,r,e]),m=en(p)&&en(a)&&en(u),g=mt((()=>p?r.rows[0].height:0),[p,r.rows]);return dt((()=>{if(m){const{eventStartDateRowIndex:t,eventStartDateColumnIndex:e,eventEndDateColumnIndex:i}=p;if(n===i&&e===i){const e=a.clone(),{height:n,goingDurationHeight:i,comingDurationHeight:o}=e,s=Math.max(g+i*n/100+o*n/100,r.rows[u.rowIndex].top-r.rows[t].top+g),c=i*n/s,l=o*n/s;e.setUIProps({height:s,goingDurationHeight:c,comingDurationHeight:l,modelDurationHeight:100-(c+l)}),d(e)}}}),[p,m,n,u,a,r.rows,g]),dt((()=>{if(m){const{resizeTargetUIModelColumns:t,eventStartDateColumnIndex:e,eventEndDateColumnIndex:i}=p;if((n===e||n===i)&&e!==i){let i;n===e?i=t[n][0].clone():(i=a.clone(),i.setUIProps({height:r.rows[u.rowIndex].top+g})),d(i)}}}),[p,m,n,u,a,r.rows,g]),vc((()=>{const t=!s&&en(p)&&en(u)&&en(a)&&p.eventEndDateColumnIndex===n;if(t){const{comingDuration:t=0}=a.model,e=Fr(jr(r.columns[n].date,r.rows[u.rowIndex].endTime),-t),o=Fr(a.getStarts(),30);i.fire("beforeUpdateEvent",{event:a.model.toEventObject(),changes:{end:Ir(o,e)}})}f()}),o),h}function al({gridPositionFinder:t,totalUIModels:e,columnIndex:n,timeGridData:r}){const i=sl({gridPositionFinder:t,totalUIModels:e,columnIndex:n,timeGridData:r});return tn(i)?null:S(rl,{uiModel:i,isResizingGuide:!0})}const cl={column:on("column"),backgrounds:on("background-events"),events:on("events")};function ul({eventUIModels:t,minEventHeight:e}){const n={marginRight:8};return S("div",{className:cl.events,style:n},t.map((t=>S(rl,{key:`${t.valueOf()}-${t.cid()}`,uiModel:t,minHeight:e}))))}function ll(t){return{defaultBackgroundColor:t.week.dayGrid.backgroundColor,todayBackgroundColor:t.week.today.backgroundColor,weekendBackgroundColor:t.week.weekend.backgroundColor}}function hl({today:t,columnDate:e,defaultBackgroundColor:n,todayBackgroundColor:r,weekendBackgroundColor:i}){const o=Sr(t,e),s=Ar(e.getDay());return o?r:s?i:n}const dl=_a((function({columnDate:t,columnWidth:e,columnIndex:n,totalUIModels:r,gridPositionFinder:i,timeGridData:o,isLastColumn:s}){const{rows:a}=o,c=Xo(gt((t=>t.week.timeGrid.borderRight),[])),u=Xo(ll),[,l]=Do(),h=l(),d=hl(y({today:h,columnDate:t},u)),f={width:e,backgroundColor:d,borderRight:s?"none":c},p=r[n],m=a[0].height;return S("div",{className:cl.column,style:f,"data-testid":`timegrid-column-${t.getDay()}`},S(ul,{eventUIModels:p,minEventHeight:m}),S(al,{gridPositionFinder:i,totalUIModels:r,columnIndex:n,timeGridData:o}),S(ol,{columnIndex:n,timeGridRows:a}))}));function fl(t){return{halfHourLineBorder:t.week.timeGridHalfHourLine.borderBottom,hourLineBorder:t.week.timeGridHourLine.borderBottom}}const pl=_a((function({timeGridRows:t}){const{halfHourLineBorder:e,hourLineBorder:n}=Xo(fl);return S("div",{className:on("gridlines")},t.map(((t,r)=>{const i=r%2===0;return S("div",{key:`gridline-${t.startTime}-${t.endTime}`,className:on("gridline-half"),style:{top:sn(t.top),height:sn(t.height),borderBottom:i?e:n},"data-testid":`gridline-${t.startTime}-${t.endTime}`})})))})),ml=30;function gl(t,e){const n=t.getHours()-e,r=t.getMinutes();return 2*n+Math.floor(r/ml)}function yl({draggingEvent:t,columnDiff:e,rowDiff:n,timeGridDataRows:r,currentDate:i}){const o=r[0].height,s=o*r.length,a=n*mr+e*dr,c=Number(r[0].startTime.split(":")[0]),{goingDuration:u=0,comingDuration:l=0}=t.model,h=Fr(t.getStarts(),-u),d=Fr(t.getEnds(),l),f=Lr(h,a),p=Lr(d,a),m=Math.max(gl(f,c),0),g=Math.min(gl(p,c),r.length-1),y=f.getFullYear()<i.getFullYear()||f.getMonth()<i.getMonth()||f.getDate()<i.getDate(),v=p.getFullYear()>i.getFullYear()||p.getMonth()>i.getMonth()||p.getDate()>i.getDate(),_=g-(y?0:m),w=y?0:r[m].top,b=v?s:Math.max(_,1)*o;return{top:w,height:b}}const vl=t=>t.dnd.initX,_l=t=>t.dnd.initY;function wl({gridPositionFinder:t,timeGridData:e}){const n=io(vl),r=io(_l),i=Co(),{isDraggingEnd:o,isDraggingCanceled:s,draggingEvent:a,clearDraggingEvent:c}=bc("timeGrid","move"),[u,l]=_c(t),h=pt(null);dt((()=>{en(n)&&en(r)&&(h.current=t({clientX:n,clientY:r}))}),[t,n,r]);const d=mt((()=>tn(h.current)||tn(u)?null:{columnDiff:u.columnIndex-h.current.columnIndex,rowDiff:u.rowIndex-h.current.rowIndex}),[u]),f=mt((()=>tn(a)?null:a.getStarts()),[a]),p=gt((()=>{l(),c(),h.current=null}),[l,c]),m=mt((()=>tn(d)||tn(f)?null:Lr(f,d.rowDiff*mr+d.columnDiff*dr)),[d,f]),g=mt((()=>{if(tn(a)||tn(u)||tn(d))return null;const t=a.clone(),{top:n,height:r}=yl({draggingEvent:t,columnDiff:d.columnDiff,rowDiff:d.rowDiff,timeGridDataRows:e.rows,currentDate:e.columns[u.columnIndex].date});return t.setUIProps({left:e.columns[u.columnIndex].left,width:e.columns[u.columnIndex].width,top:n,height:r}),t}),[u,a,d,e.columns,e.rows]);return vc((()=>{const t=!s&&en(a)&&en(u)&&en(d)&&en(m)&&(0!==d.rowDiff||0!==d.columnDiff);if(t){const t=a.duration(),e=Lr(m,t);i.fire("beforeUpdateEvent",{event:a.model.toEventObject(),changes:{start:m,end:e}})}p()}),o),{movingEvent:g,nextStartTime:m}}function bl({gridPositionFinder:t,timeGridData:e}){const{movingEvent:n,nextStartTime:r}=wl({gridPositionFinder:t,timeGridData:e});return tn(n)?null:S(rl,{uiModel:n,nextStartTime:r})}const El={NOW_INDICATOR:"timegrid-now-indicator",NOW_INDICATOR_LABEL:"timegrid-now-indicator-label"},Tl={line:on(Qu("now-indicator")),left:on(Qu("now-indicator-left")),marker:on(Qu("now-indicator-marker")),today:on(Qu("now-indicator-today")),right:on(Qu("now-indicator-right"))};function Cl(t){return{pastBorder:t.week.nowIndicatorPast.border,todayBorder:t.week.nowIndicatorToday.border,futureBorder:t.week.nowIndicatorFuture.border,bulletBackgroundColor:t.week.nowIndicatorBullet.backgroundColor}}function Sl({top:t,columnWidth:e,columnCount:n,columnIndex:r}){const{pastBorder:i,todayBorder:o,futureBorder:s,bulletBackgroundColor:a}=Xo(Cl),c=Xa(),u=Co(),l=pt(null),h={left:sn(e*r),width:sn(e*r)},d={left:sn(e*(r+1)),width:sn(e*(n-r+1))};return dt((()=>{const t=t=>{var e;const n=null!=(e=null==c?void 0:c.querySelector(`.${on("panel")}.${on("time")}`))?e:null;if(n&&l.current){const{offsetHeight:e}=n,{offsetTop:r}=l.current,i=r-e/2;n.scrollTo?n.scrollTo({top:i,behavior:t}):n.scrollTop=i}};return u.on("scrollToNow",t),()=>u.off("scrollToNow",t)}),[u,c]),dt((()=>{u.fire("scrollToNow","smooth")}),[u]),S("div",{ref:l,className:Tl.line,style:{top:sn(t)},"data-testid":El.NOW_INDICATOR},S("div",{className:Tl.left,style:{width:h.width,borderTop:i}}),S("div",{className:Tl.marker,style:{left:h.left,backgroundColor:a}}),S("div",{className:Tl.today,style:{left:h.left,width:sn(e),borderTop:o}}),S("div",{className:Tl.right,style:{left:d.left,borderTop:s}}))}const Il={now:Qu("current-time"),dayDifference:Qu("day-difference")};function kl({unit:t,top:e,now:n,zonedNow:r}){const i=Xo(gt((t=>t.week.nowIndicatorLabel.color),[])),o=mt((()=>Hr(r,n)),[r,n]),s={unit:t,time:r,format:Xu[t]};return S("div",{className:on(Il.now),style:{top:sn(e),color:i},"data-testid":El.NOW_INDICATOR_LABEL},0!==o&&S("span",{className:on(Il.dayDifference)},`[${o>0?"+":"-"}${Math.abs(o)}]`),S(bo,{template:"timegridNowIndicatorLabel",param:s,as:"span"}))}const xl=t=>{var e;return null!=(e=t.options.month.visibleEventCount)?e:6},Dl=t=>t.options.week.showNowIndicator,Al=t=>{var e;return null!=(e=t.options.week.showTimezoneCollapseButton)&&e},Nl=t=>{var e;return null!=(e=t.options.week.timezonesCollapsed)&&e},Ol={timeColumn:Qu("time-column"),hourRows:Qu("hour-rows"),time:Qu("time"),timeLabel:Qu("time-label"),first:Qu("time-first"),last:Qu("time-last"),hidden:Qu("time-hidden")};function Pl(t){return{primaryTimezoneBackgroundColor:t.week.timeGridLeft.backgroundColor,subTimezoneBackgroundColor:t.week.timeGridLeftAdditionalTimezone.backgroundColor}}function Rl(t){return{pastTimeColor:t.week.pastTime.color,futureTimeColor:t.week.futureTime.color}}function Ml({rowsInfo:t,isPrimary:e,borderRight:n,width:r,nowIndicatorState:i}){var o;const s=io(Dl),{primaryTimezoneBackgroundColor:a,subTimezoneBackgroundColor:c}=Xo(Pl),{pastTimeColor:u,futureTimeColor:l}=Xo(Rl),h=en(i)?Fr(i.now,null!=(o=t[0].diffFromPrimaryTimezone)?o:0):null,d=e?a:c;return S("div",{role:"rowgroup",className:on(Ol.hourRows),style:{width:sn(r),borderRight:n,backgroundColor:d}},t.map((({date:t,top:n,className:r})=>{const i=en(h)&&t<h,o=i?u:l;return S("div",{key:t.getTime(),className:r,style:{top:sn(n),color:o},role:"row"},S(bo,{template:`timegridDisplay${e?"Primary":""}Time`,param:{time:t},as:"span"}))})),s&&en(i)&&en(h)&&S(kl,{unit:"hour",top:i.top,now:i.now,zonedNow:h}))}const Ll=_a((function({timeGridRows:t,nowIndicatorState:e}){const n=io(Dl),r=io(ko),i=io(Nl),o=xo(),{width:s,borderRight:a}=Xo(Fo),c=mt((()=>t.filter(((e,n)=>n%2===0||n===t.length-1))),[t]),u=gt(((t,r,i)=>{const o=({top:t,height:r})=>{if(!n||tn(e))return!1;const i=e.top;return t-r<=i&&i<=t+r},s=0===r,a=r===c.length-1,u=on(Ol.time,{[Ol.first]:s,[Ol.last]:a,[Ol.hidden]:o(t)});let l=jr(new Hn,a?t.endTime:t.startTime);return en(i)&&(l=Fr(l,i)),{date:l,top:t.top,className:u,diffFromPrimaryTimezone:i}}),[c,e,n]),[l,...h]=r,d=h.length>0?100/(h.length+1):100,f=c.map(((t,e)=>u(t,e))),p=mt((()=>0===h.length?[]:h.reverse().map((t=>{const{timezoneName:e}=t,n=o(l.timezoneName).getTimezoneOffset(),r=o(e).getTimezoneOffset(),i=r-n;return c.map(((t,e)=>u(t,e,i)))}))),[u,h,l,c,o]);return S("div",{className:on(Ol.timeColumn),style:{width:s},"data-testid":"timegrid-time-column"},!i&&p.map((t=>S(Ml,{key:t[0].diffFromPrimaryTimezone,rowsInfo:t,isPrimary:!1,borderRight:a,width:d,nowIndicatorState:e}))),S(Ml,{rowsInfo:f,isPrimary:!0,borderRight:a,width:i?100:d,nowIndicatorState:e}))}));function Fl(t,e,n){const r=e.getTime(),i=n.getTime(),o=Ds(t.getTime(),[r],[i])-r,s=i-r,a=As(s,100,o);return Ds(a,[0],[100])}function jl(t,e,n,r){const i=Fl(t,n,r),o=Fl(e,n,r),s=o-i;return{top:i,height:s}}const Ul=1;function Vl(t,e){return n=>{const{goingDuration:r=0,comingDuration:i=0}=n.model,o=Fr(n.getStarts(),-r),s=Fr(n.getEnds(),i);return!(s<=t||o>=e)}}function $l(t,e){const{renderStart:n,renderEnd:r,modelStart:i,modelEnd:o}=e,{goingDuration:s=0,comingDuration:a=0}=t.model;let c=100;if(s>0){const{height:e}=jl(n,i,n,r);t.goingDurationHeight=e,c-=e}if(a>0){const{height:e}=jl(o,r,n,r);t.comingDurationHeight=e,c-=e}t.modelDurationHeight=c}function Hl(t,e){const{goingStart:n,comingEnd:r,startColumnTime:i,endColumnTime:o}=e;n<i&&(t.croppedStart=!0),r>o&&(t.croppedEnd=!0)}function Bl(t,e){const{duplicateEvents:n,duplicateEventIndex:r}=t,i=n[r-1];let o=e;if(i){const{percent:t,px:e}=cn(`${i.duplicateLeft}`),{percent:n,px:r}=cn(`${i.duplicateWidth}`),s=t+n,a=e+r+ze;o=0!==s?`calc(${sn(s)} ${a>0?"+":"-"} ${an(Math.abs(a))})`:an(a)}else o=sn(o);return o}function zl(t,e){const{collapse:n}=t;return n?`${We}px`:`calc(${sn(e)} - ${an((We+ze)*(t.duplicateEvents.length-1)+ze)})`}function Wl(t,e){const{startColumnTime:n,endColumnTime:r,baseWidth:i,columnIndex:o,renderStart:s,renderEnd:a}=e,{duplicateEvents:c}=t,{top:u,height:l}=jl(s,a,n,r),h={top:u,left:i*o,width:i,height:Math.max(Ul,l),duplicateLeft:"",duplicateWidth:""};c.length>0&&(h.duplicateLeft=Bl(t,h.left),h.duplicateWidth=zl(t,h.width)),t.setUIProps(h)}function ql(t,e,n,r,i){const{goingDuration:o=0,comingDuration:s=0}=t.model,a=t.getStarts(),c=t.getEnds(),u=Fr(a,-o),l=Fr(c,s),h=Ir(u,r),d=kr(l,i);return{baseWidth:n,columnIndex:e,modelStart:a,modelEnd:c,renderStart:h,renderEnd:d,goingStart:u,comingEnd:l,startColumnTime:r,endColumnTime:i,duplicateEvents:t.duplicateEvents}}function Kl({uiModel:t,columnIndex:e,baseWidth:n,startColumnTime:r,endColumnTime:i,isDuplicateEvent:o=!1}){if(!o&&t.duplicateEvents.length>0)return void t.duplicateEvents.forEach((t=>{Kl({uiModel:t,columnIndex:e,baseWidth:n,startColumnTime:r,endColumnTime:i,isDuplicateEvent:!0})}));const s=ql(t,e,n,r,i);Wl(t,s),$l(t,s),Hl(t,s)}function Gl(t,e,n){const{getDuplicateEvents:r,getMainEvent:i}=e,o=t.map((t=>t.model.toEventObject()));return t.forEach((e=>{if(e.collapse||e.duplicateEvents.length>0)return;const s=r(e.model.toEventObject(),o);if(s.length<=1)return;const a=i(s),c=s.map((e=>t.find((t=>t.cid()===e.__cid)))),u=!!(n>vi&&s.find((t=>t.__cid===n))),l=s.reduce(((t,{start:e,goingDuration:n})=>{const r=Fr(e,-n);return kr(t,r)}),s[0].start),h=s.reduce(((t,{end:e,comingDuration:n})=>{const r=Fr(e,n);return Ir(t,r)}),s[0].end);c.forEach(((t,e)=>{const r=t.cid()===a.__cid,i=!(u&&t.cid()===n||!u&&r);t.setUIProps({duplicateEvents:c,duplicateEventIndex:e,collapse:i,isMain:r,duplicateStarts:l,duplicateEnds:h})}))})),t}function Yl(t,e,n,r,i){const o=t.filter(Qr).filter(Vl(e,n)).sort(Zn.compare.event.asc);i&&Gl(o,i,r);const s=o.filter((t=>!t.collapse)),a=Jr(...s),c=!0,u=os(s,c),l=as(a,u,c);return l.forEach((t=>{const r=Math.max(...t.map((t=>t.length))),i=Math.round(100/r);t.forEach((t=>{t.forEach(((t,r)=>{Kl({uiModel:t,columnIndex:r,baseWidth:i,startColumnTime:e,endColumnTime:n})}))}))})),o}function Ql(t,e){const n=pt(t);dt((()=>{n.current=t}),[t]),dt((()=>{const t=()=>n.current(),r=null!=e?e:-1;if(r>0){const e=setInterval(t,r);return()=>clearInterval(e)}}),[e])}function Xl(){const t=pt(!0);return dt((()=>()=>{t.current=!1}),[]),gt((()=>t.current),[])}const Jl={timegrid:on(Yu),scrollArea:on(Qu("scroll-area"))};function Zl({timeGridData:t,events:e}){const{isReadOnly:n,week:{narrowWeekend:r,startDayOfWeek:i,collapseDuplicateEvents:o}}=io(fo),s=io(Dl),a=io((t=>t.weekViewLayout.selectedDuplicateEventCid)),[,c]=Do(),u=Xl(),{width:l}=Xo(Fo),[h,d]=lt(null),{columns:f,rows:p}=t,m=f.length-1,g=mt((()=>f.map((({date:t})=>e.filter(Vl(_r(t),Dr(t))).map((t=>t.clone())))).map(((t,e)=>Yl(t,jr(f[e].date,tr(p).startTime),jr(f[e].date,er(p).endTime),a,o)))),[f,p,e,a,o]),y=mt((()=>{const e=c(),n=f.findIndex((t=>Sr(t.date,e)));if(n<0)return null;const r=jr(f[n].date,t.rows[0].startTime),i=jr(f[n].date,er(t.rows).endTime);return{startTime:r,endTime:i,currentDateIndex:n}}),[f,c,t.rows]),[v,_]=kc(),w=mt((()=>ia({rowsCount:p.length,columnsCount:f.length,container:v,narrowWeekend:r,startDayOfWeek:i})),[f.length,v,r,p.length,i]),b=Pc({type:"timeGrid",gridPositionFinder:w,selectionSorter:ua.sortSelection,dateGetter:ua.getDateFromCollection,dateCollection:t}),E=gt((()=>{if(en(y)){const{startTime:t,endTime:e}=y,n=c();t<=n&&n<=e&&d({top:Fl(n,t,e),now:n})}}),[y,c]);return ft((()=>{var t;u()&&((null!=(t=null==y?void 0:y.currentDateIndex)?t:-1)>=0?E():d(null))}),[y,u,E]),Ql(E,en(y)?fr:null),S("div",{className:Jl.timegrid},S("div",{className:Jl.scrollArea},S(Ll,{timeGridRows:p,nowIndicatorState:h}),S("div",{className:on("columns"),style:{left:l},ref:_,onMouseDown:lc(!n,b)},S(pl,{timeGridRows:p}),S(bl,{gridPositionFinder:w,timeGridData:t}),f.map(((e,n)=>S(dl,{key:e.date.toString(),timeGridData:t,columnDate:e.date,columnWidth:sn(e.width),columnIndex:n,totalUIModels:g,gridPositionFinder:w,isLastColumn:n===m}))),s&&en(y)&&en(h)?S(Sl,{top:h.top,columnWidth:f[0].width,columnCount:f.length,columnIndex:y.currentDateIndex}):null)))}function th({isCollapsed:t}){const e=Co(),n=on("icon",{"ic-arrow-right":t,"ic-arrow-left":!t});return S("button",{className:on(Qu("timezone-collapse-button")),"aria-expanded":!t,onClick:()=>e.fire("clickTimezonesCollapseBtn",t)},S("span",{className:n,role:"img"}))}function eh({label:t,offset:e,tooltip:n,width:r=100,left:i}){return S("div",{title:n,className:on(Qu("timezone-label")),style:{width:sn(r),height:sn(100),left:sn(i)},role:"gridcell"},S(bo,{template:"timezoneDisplayLabel",param:{displayLabel:t,timezoneOffset:e},as:"span"}))}function nh(){const t=io(Al),e=io(Nl);return mt((()=>({showTimezoneCollapseButton:t,timezonesCollapsed:e})),[t,e])}function rh({top:t}){const e=io(ko),{width:n}=Xo(Fo),r=xo(),{showTimezoneCollapseButton:i,timezonesCollapsed:o}=nh();if(e.length<=1)return null;const s=e.map((({displayLabel:t,timezoneName:e,tooltip:n})=>Ce(t)?{label:null,offset:r(e).getTimezoneOffset(),tooltip:null!=n?n:e}:{label:t,offset:null,tooltip:null!=n?n:e})),[a,...c]=s,u=c.reverse(),l=o?1:e.length,h=100/l;return S("div",{style:{top:t,width:n},role:"columnheader",className:on("timezone-labels-slot")},!o&&u.map(((t,e)=>{var n;return S(eh,y({key:`subTimezone-${null!=(n=t.label)?n:t.offset}`,width:h,left:h*e},t))})),i&&S(th,{isCollapsed:o}),S(eh,y({width:h,left:h*u.length},a)))}const ih={MONTH:"month",WEEK:"week",DAY:"day"},oh=["milestone","task"],sh=["allday","time"];function ah(t,e){const n=[];return!0===t?n.push(...oh):Array.isArray(t)&&n.push(...t),!0===e?n.push(...sh):Array.isArray(e)&&n.push(...e),n}function ch(t){const e=io(So),n=xo();return mt((()=>{if("Local"===e)return t;const r=On(new Hn),{timedEvents:i=Jr(),totalEvents:o=Jr()}=t.groupBy((t=>"time"===t.category?"timedEvents":"totalEvents"));return i.each((t=>{const i=zn(t);let s=n(e,i.start),a=n(e,i.end);r?(On(s)||(s=s.addHours(1)),On(a)||(a=a.addHours(1))):(On(s)&&(s=s.addHours(-1)),On(a)&&(a=a.addHours(-1))),i.start=s,i.end=a,o.add(i)})),o}),[t,e,n])}function uh(t,...e){const n=mt((()=>t.events.filter(Xr.and(...e))),[t.events,e]),r=ch(n);return mt((()=>v(y({},t),{events:r})),[t,r])}function lh(t){return/^(event|gridSelection)\/timeGrid/.test(null!=t?t:"")}function hh(t,e){oc(po,(({y:n,draggingItemType:r,draggingState:i})=>{if(en(t)&&lh(r)&&i===di.DRAGGING&&en(n)){const{offsetTop:r,offsetHeight:i,scrollHeight:o}=t,s=Math.floor(o/e),a=r+i;if(n<r+s){const e=n-(r+s);t.scrollTop=Math.max(0,t.scrollTop+e)}else if(n>a-s){const e=n-(a-s);t.scrollTop=Math.min(i,t.scrollTop+e)}}}))}function dh(t){var e,n,r;return null==(r=null==(n=null==(e=t.weekViewLayout)?void 0:e.dayGridRows)?void 0:n.time)?void 0:r.height}function fh(t){const e=io(dh),[n,r]=lt(null);return ft((()=>{en(e)&&t&&r(t.offsetTop)}),[e,t]),n}function ph(){const t=io(co),e=io(fo),{dayGridRows:n,lastPanelType:r}=io(uo),{renderDate:i}=io(ho);return mt((()=>({calendar:t,options:e,gridRowLayout:n,lastPanelType:r,renderDate:i})),[t,e,n,r,i])}function mh(){var t,e;const{calendar:n,options:r,gridRowLayout:i,lastPanelType:o,renderDate:s}=ph(),a=io(So),c=Xo(gt((t=>t.week.dayGridLeft.width),[])),[u,l]=kc(),h=r.week,{narrowWeekend:d,startDayOfWeek:f,workweek:p,hourStart:m,hourEnd:g,eventView:y,taskView:v}=h,_=mt((()=>[s]),[s]),w=Si(_,null!=(e=null==(t=r.week)?void 0:t.dayNames)?e:[]),{rowStyleInfo:b,cellWidthMap:E}=Mr(_.length,d,f,p),T=uh(n,r.eventFilter),C=mt((()=>{const t=()=>"Local"===a?[_r(_[0]),Dr(_[0])]:[_r(Ur(_[0],-1)),Dr(Ur(_[0],1))],[e,n]=t();return Xs(_,T,{narrowWeekend:d,hourStart:m,hourEnd:g,weekStartDate:e,weekEndDate:n})}),[T,_,g,m,d,a]),I=mt((()=>ea(_,{hourStart:m,hourEnd:g,narrowWeekend:d})),[_,g,m,d]),k=ah(v,y),x=k.map((t=>{var e,n;if("time"===t)return null;const r=t;return S(Gu,{key:r,name:r,resizable:r!==o},"allday"===r?S(Mc,{events:C[r],rowStyleInfo:b,gridColWidthMap:E,weekDates:_,height:null==(e=i[r])?void 0:e.height,options:h}):S(Lc,{category:r,events:C[r],weekDates:_,height:null==(n=i[r])?void 0:n.height,options:h,gridColWidthMap:E}))}));hh(u,I.rows.length);const D=fh(u);return S(Bu,{className:on("day-view"),autoAdjustPanels:!0},S(Gu,{name:"day-view-day-names",initialHeight:Ue+Ve},S(ns,{type:"week",dayNames:w,marginLeft:c,rowStyleInfo:b})),x,k.includes("time")?S(Gu,{name:"time",autoSize:1,ref:l},S(Zl,{events:C.time,timeGridData:I}),S(rh,{top:D})):null)}function gh({rowIndex:t,weekDates:e,narrowWeekend:n}){const r=io(gt((n=>n.gridSelection.accumulated.dayGridMonth.map((n=>ha.calculateSelection(n,t,e.length)))),[t,e]));return S("div",{className:on("accumulated-grid-selection")},r.map((t=>t?S(sa,{type:"accumulated",gridSelectionData:t,weekDates:e,narrowWeekend:n}):null)))}function yh({type:t,number:e,onClickButton:n,className:r}){const{reset:i}=so("dnd"),o=t=>{t.stopPropagation()},s=()=>{i(),n()},a=`monthGrid${t===is.header?"Header":"Footer"}Exceed`;return S("button",{type:"button",onMouseDown:o,onClick:s,className:r},S(bo,{template:a,param:e}))}function vh({date:t,theme:e,renderDate:n,isToday:r}){const i=t.getDay(),o=n.getMonth(),s=o===t.getMonth(),{common:{holiday:a,saturday:c,today:u,dayName:l},month:{dayExceptThisMonth:h,holidayExceptThisMonth:d}}=e;return r?u.color:Nr(i)?s?a.color:d.color:Or(i)?s?c.color:h.color:s?l.color:h.color}function _h(){const t=Jo(),e=Zo();return mt((()=>({common:t,month:e})),[t,e])}function wh({type:t=is.header,exceedCount:e=0,date:n,onClickExceedCount:r}){const{renderDate:i}=io(ho),[,o]=Do(),s=_h(),a=s.month.gridCell[`${t}Height`],c=gr(n,"YYYYMMDD"),u=gr(o(),"YYYYMMDD"),l=c===u,h={date:gr(n,"YYYY-MM-DD"),day:n.getDay(),hiddenEventCount:e,isOtherMonth:n.getMonth()!==i.getMonth(),isToday:c===u,month:n.getMonth(),ymd:c},d={color:vh({date:n,theme:s,isToday:l,renderDate:i})},f=`monthGrid${Ei(t)}`;return tn(a)?null:S("div",{className:on(`grid-cell-${t}`),style:{height:a}},S("span",{className:on("grid-cell-date"),style:d},S(bo,{template:f,param:h})),e?S(yh,{type:t,number:e,onClickButton:r,className:on("grid-cell-more-events")}):null)}function bh({grid:t,offsetWidth:e,eventLength:n,layerSize:r}){const i=$i(t).height+2*Pe;let o=e+2*Pe;const{width:s,height:a}=r,c=10;o=Math.max(o,Re);let u=Me+Le+Pe;const l=De+Ae;return u+=n<=c?l*n:l*c,s&&(o=s),a&&(u=a),(isNaN(u)||u<i)&&(u=i),{width:o,height:u}}function Eh(t,e,n){const{width:r,height:i,left:o,top:s}=e,{width:a,height:c}=t,u=o+r,l=s+i;let h=n.left+n.width/2-a/2,{top:d}=n;const f=h<o,p=h+a>u,m=d<s,g=d+c>l;return f&&(h=o),p&&(h=u-a),m&&(d=s),g&&(d=l-c),{top:d+window.scrollY,left:h+window.scrollX}}function Th({layoutContainer:t,cell:e,popupSize:n}){const r=t.getBoundingClientRect(),i=e.getBoundingClientRect(),o=Eh(n,r,i);return y(y({},n),o)}function Ch(t,e,n){const{width:r,height:i}=Xo(jo),[o,s]=kc(),[a,c]=lt(null);return dt((()=>{if(n&&e&&o){const s=bh({grid:e,offsetWidth:o.offsetWidth,eventLength:t,layerSize:{width:r,height:i}}),a=Th({cell:o,layoutContainer:n,popupSize:s});c(a)}}),[n,o,t,e,r,i]),{popupPosition:a,containerRefCallback:s}}function Sh(t){return t.month.weekend.backgroundColor}function Ih({date:t,events:e=[],style:n,parentContainer:r,contentAreaHeight:i}){const o=Xa(),{showSeeMorePopup:s}=so("popup"),a=Xo(Sh),{popupPosition:c,containerRefCallback:u}=Ch(e.length,r,o),l=gt((()=>{c&&s({date:t,popupPosition:c,events:e})}),[t,e,c,s]),h=Fs(e,i,De+Ae);return S("div",{className:on("daygrid-cell"),style:v(y({},n),{backgroundColor:Ar(t.getDay())?a:"inherit"}),ref:u},S(wh,{type:is.header,exceedCount:h,date:t,onClickExceedCount:l}),S(wh,{type:is.footer,exceedCount:h,date:t,onClickExceedCount:l}))}const kh=_a((function({week:t,rowInfo:e,gridDateEventModelMap:n={},contentAreaHeight:r}){const[i,o]=kc(),s=Xo(gt((t=>t.common.border),[]));return S("div",{className:on("weekday-grid"),style:{borderTop:s},ref:o},t.map(((t,o)=>{const s=t.getDay(),{width:a,left:c}=e[o],u=gr(_r(t),"YYYYMMDD");return S(Ih,{key:`daygrid-cell-${s}`,date:t,style:{width:sn(a),left:sn(c)},parentContainer:i,events:n[u],contentAreaHeight:r})})))}));function xh({weekDates:t,narrowWeekend:e,rowIndex:n}){const r=io(gt((e=>ha.calculateSelection(e.gridSelection.dayGridMonth,n,t.length)),[n,t.length]));return tn(r)?null:S(sa,{type:"month",gridSelectionData:r,weekDates:t,narrowWeekend:e})}const Dh=_a((function({contentAreaHeight:t,eventHeight:e=Os,events:n,name:r,className:i}){const{headerHeight:o}=Xo(Uo),s=n.filter(Ms(t,e+Ae)).map((t=>S(yc,{key:`${r}-DayEvent-${t.cid()}`,uiModel:t,eventHeight:e,headerHeight:null!=o?o:Oe})));return S("div",{className:i},s)}));function Ah({dateMatrix:t,rowInfo:e,gridPositionFinder:n,rowIndex:r}){const i=Co(),{isDraggingEnd:o,isDraggingCanceled:s,draggingEvent:a,clearDraggingEvent:c}=bc("dayGrid","move"),[u,l]=_c(n),h=mt((()=>{var t,n;let i=null;return a&&(null==u?void 0:u.rowIndex)===r&&(i=a,i.left=e[null!=(t=null==u?void 0:u.columnIndex)?t:0].left,i.width=e[null!=(n=null==u?void 0:u.columnIndex)?n:0].width),i}),[a,null==u?void 0:u.rowIndex,null==u?void 0:u.columnIndex,r,e]);return vc((()=>{const e=!s&&en(h)&&en(u);if(e){const e=h.model.getStarts(),n=h.duration(),r=t[u.rowIndex][u.columnIndex],o=Hr(r,e)*dr,s=new Hn(e.getTime()+o),a=new Hn(s.getTime()+n);i.fire("beforeUpdateEvent",{event:h.model.toEventObject(),changes:{start:s,end:a}})}c(),l()}),o),h}function Nh({dateMatrix:t,gridPositionFinder:e,rowInfo:n,rowIndex:r}){const i=Ah({dateMatrix:t,rowInfo:n,gridPositionFinder:e,rowIndex:r});return tn(i)?null:S(yc,{uiModel:i,movingLeft:i.left,eventHeight:Os,headerHeight:Ne+Oe})}function Oh(t,e){const n=Math.max(Hs(t.getStarts(),e),0),r=Hs(t.getEnds(),e);return{startColumnIndex:n,endColumnIndex:r}}function Ph({dateMatrix:t,gridPositionFinder:e,renderedUIModels:n,cellWidthMap:r,rowIndex:i}){const o=Co(),{isDraggingEnd:s,isDraggingCanceled:a,draggingEvent:c,clearDraggingEvent:u}=bc("dayGrid","resize"),[l,h]=_c(e),[d,f]=lt(null),p=gt((()=>{f(null),h(),u()}),[h,u]),m=mt((()=>{if(tn(c))return null;const e=n.map((({uiModels:t})=>t.filter((t=>t.cid()===c.cid())))),r=e.findIndex((t=>t.length>0)),i=nr(e,(t=>t.length>0)),o=Oh(e[r][0],t[r]),s=Oh(e[i][0],t[i]);return{eventStartDateColumnIndex:o.startColumnIndex,eventStartDateRowIndex:r,eventEndDateColumnIndex:s.endColumnIndex,eventEndDateRowIndex:i,resizeTargetUIModelRows:e}}),[t,n,c]),g=en(m)&&en(c)&&en(l);return dt((()=>{if(g&&i===m.eventStartDateRowIndex){const{eventStartDateRowIndex:e,eventStartDateColumnIndex:n}=m,o=m.resizeTargetUIModelRows[e][0].clone();let s;e===l.rowIndex?s=r[n][Math.max(n,l.columnIndex)]:e>l.rowIndex?s=r[n][n]:(s=r[n][t[i].length-1],o.setUIProps({exceedRight:!0})),f([o,s])}}),[m,g,r,l,t,i]),dt((()=>{if(g&&m.eventStartDateRowIndex<i&&i<l.rowIndex){const t=c.clone();t.setUIProps({left:0,exceedLeft:!0,exceedRight:!0}),f([t,"100%"])}}),[m,g,l,c,i]),dt((()=>{if(g&&m.eventStartDateRowIndex<l.rowIndex&&i===l.rowIndex){const t=c.clone();t.setUIProps({left:0,exceedLeft:!0}),f([t,r[0][l.columnIndex]])}}),[m,g,r,l,c,i]),dt((()=>{g&&i>m.eventStartDateRowIndex&&i>l.rowIndex&&f(null)}),[g,l,m,i]),vc((()=>{if(g){const{eventStartDateColumnIndex:e,eventStartDateRowIndex:n}=m,r=!a&&(l.rowIndex===n&&l.columnIndex>=e||l.rowIndex>n);if(r){const e=t[l.rowIndex][l.columnIndex];o.fire("beforeUpdateEvent",{event:c.model.toEventObject(),changes:{end:e}})}}p()}),s),d}function Rh({dateMatrix:t,cellWidthMap:e,gridPositionFinder:n,renderedUIModels:r,rowIndex:i}){const o=Ph({dateMatrix:t,gridPositionFinder:n,cellWidthMap:e,renderedUIModels:r,rowIndex:i});if(tn(o))return null;const[s,a]=o;return S("div",{className:on("weekday-events")},S(yc,{key:`resizing-event-${s.cid()}`,uiModel:s,eventHeight:De,headerHeight:Ne+Oe,resizingWidth:a}))}const Mh=100;function Lh(t){const e=io(xl),{headerHeight:n,footerHeight:r}=Xo(Uo),i=pt(null),[o,s]=lt(0);return dt((()=>{if(i.current){const o=$i(i.current).height,a=Ne+(null!=n?n:Oe),c=null!=r?r:0,u=o-a-c,l=e*(t+Ae);s(Math.min(u,l))}}),[r,n,t,e]),{ref:i,cellContentAreaHeight:o}}function Fh({dateMatrix:t=[],rowInfo:e=[],cellWidthMap:n=[]}){const[r,i]=kc(),o=io(co),{ref:s,cellContentAreaHeight:a}=Lh(De),{eventFilter:c,month:u,isReadOnly:l}=io(fo),{narrowWeekend:h,startDayOfWeek:d}=u,f=Mh/t.length,p=mt((()=>ia({container:r,rowsCount:t.length,columnsCount:t[0].length,narrowWeekend:h,startDayOfWeek:d})),[t,r,h,d]),m=uh(o,c),g=mt((()=>t.map((t=>qs(t,m,h)))),[m,t,h]),y=Pc({type:"dayGridMonth",gridPositionFinder:p,dateCollection:t,dateGetter:ha.getDateFromCollection,selectionSorter:ha.sortSelection});return S("div",{ref:i,onMouseDown:lc(!l,y),className:on("month-daygrid")},t.map(((r,i)=>{const{uiModels:o,gridDateEventModelMap:c}=g[i];return S("div",{key:`dayGrid-events-${i}`,className:on("month-week-item"),style:{height:sn(f)},ref:s},S("div",{className:on("weekday")},S(kh,{gridDateEventModelMap:c,week:r,rowInfo:e,contentAreaHeight:a}),S(Dh,{name:"month",events:o,contentAreaHeight:a,eventHeight:De,className:on("weekday-events")}),S(xh,{weekDates:r,narrowWeekend:h,rowIndex:i}),S(gh,{rowIndex:i,weekDates:r,narrowWeekend:h})),S(Rh,{dateMatrix:t,gridPositionFinder:p,rowIndex:i,cellWidthMap:n,renderedUIModels:g}),S(Nh,{dateMatrix:t,gridPositionFinder:p,rowIndex:i,rowInfo:e}))})))}function jh(t){const{dayNames:e,startDayOfWeek:n,workweek:r}=t.month,i=[...Array(7)].map(((t,e)=>(n+e)%7)),o=i.map((t=>({day:t,label:Ei(e[t])})));return o.filter((t=>!r||!Ar(t.day)))}function Uh(){const t=io(fo),{renderDate:e}=io(ho),n=jh(t),r=t.month,{narrowWeekend:i,startDayOfWeek:o,workweek:s}=r,a=mt((()=>Js(e,r)),[r,e]),{rowStyleInfo:c,cellWidthMap:u}=mt((()=>Mr(n.length,i,o,s)),[n.length,i,o,s]),l=c.map(((t,e)=>v(y({},t),{date:a[0][e]})));return S(Bu,{className:on("month")},S(ns,{type:"month",dayNames:n,options:r,rowStyleInfo:c}),S(Fh,{dateMatrix:a,rowInfo:l,cellWidthMap:u}))}function Vh(){const t=io(fo),e=io(co),{dayGridRows:n,lastPanelType:r}=io(uo),{renderDate:i}=io(ho);return mt((()=>({options:t,calendar:e,gridRowLayout:n,lastPanelType:r,renderDate:i})),[e,n,r,t,i])}function $h(){var t,e;const{options:n,calendar:r,gridRowLayout:i,lastPanelType:o,renderDate:s}=Vh(),a=Xo(gt((t=>t.week.dayGridLeft.width),[])),c=io(So),[u,l]=kc(),h=n.week,{narrowWeekend:d,startDayOfWeek:f,workweek:p,hourStart:m,hourEnd:g,eventView:y,taskView:v}=h,_=mt((()=>Zs(s,h)),[s,h]),w=Si(_,null!=(e=null==(t=n.week)?void 0:t.dayNames)?e:[]),{rowStyleInfo:b,cellWidthMap:E}=Mr(_.length,d,f,p),T=uh(r,n.eventFilter),C=mt((()=>{const t=()=>"Local"===c?[_r(tr(_)),Dr(er(_))]:[_r(Ur(tr(_),-1)),Dr(Ur(er(_),1))],[e,n]=t();return Xs(_,T,{narrowWeekend:d,hourStart:m,hourEnd:g,weekStartDate:e,weekEndDate:n})}),[T,g,m,d,c,_]),I=mt((()=>ea(_,{hourStart:m,hourEnd:g,narrowWeekend:d})),[g,m,d,_]),k=ah(v,y),x=k.map((t=>{var e,n;if("time"===t)return null;const r=t;return S(Gu,{name:r,key:r,resizable:r!==o},"allday"===r?S(Mc,{events:C[r],rowStyleInfo:b,gridColWidthMap:E,weekDates:_,height:null==(e=i[r])?void 0:e.height,options:h}):S(Lc,{category:r,events:C[r],weekDates:_,height:null==(n=i[r])?void 0:n.height,options:h,gridColWidthMap:E}))})),D=mt((()=>k.includes("time")),[k]);hh(u,I.rows.length);const A=fh(u);return S(Bu,{className:on("week-view"),autoAdjustPanels:!0},S(Gu,{name:"week-view-day-names",initialHeight:Ue+2*Ve},S(ns,{type:"week",dayNames:w,marginLeft:a,options:h,rowStyleInfo:b})),x,D?S(Gu,{name:"time",autoSize:1,ref:l},S(Zl,{events:C.time,timeGridData:I}),S(rh,{top:A})):null)}const Hh={month:Uh,week:$h,day:mh};function Bh(){const{currentView:t}=io(ho),e=mt((()=>Hh[t]||(()=>null)),[t]);return S(e,null)}var zh=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|^--/i,Wh=/[&<>"]/;function qh(t){var e=String(t);return Wh.test(e)?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"):e}var Kh=function(t,e){return String(t).replace(/(\n+)/g,"$1"+(e||"\t"))},Gh=function(t,e,n){return String(t).length>(e||40)||!n&&-1!==String(t).indexOf("\n")||-1!==String(t).indexOf("<")},Yh={};function Qh(t){var e="";for(var n in t){var r=t[n];null!=r&&""!==r&&(e&&(e+=" "),e+="-"==n[0]?n:Yh[n]||(Yh[n]=n.replace(/([A-Z])/g,"-$1").toLowerCase()),e+=": ",e+=r,"number"==typeof r&&!1===zh.test(n)&&(e+="px"),e+=";")}return e||void 0}function Xh(t,e){for(var n in e)t[n]=e[n];return t}function Jh(t,e){return Array.isArray(e)?e.reduce(Jh,t):null!=e&&!1!==e&&t.push(e),t}var Zh={shallow:!0},td=[],ed=/^(area|base|br|col|embed|hr|img|input|link|meta|param|source|track|wbr)$/,nd=/[\s\n\\/='"\0<>]/;function rd(){this.__d=!0}sd.render=sd;var id=function(t,e){return sd(t,e,Zh)},od=[];function sd(t,e,n){e=e||{},n=n||{};var r=i.__s;i.__s=!0;var o=ad(t,e,n);return i.__c&&i.__c(t,od),od.length=0,i.__s=r,o}function ad(t,e,n,r,o,s){if(null==t||"boolean"==typeof t)return"";if("object"!=typeof t)return qh(t);var a=n.pretty,c=a&&"string"==typeof a?a:"\t";if(Array.isArray(t)){for(var u="",l=0;l<t.length;l++)a&&l>0&&(u+="\n"),u+=ad(t[l],e,n,r,o,s);return u}var h,d=t.type,f=t.props,p=!1;if("function"==typeof d){if(p=!0,!n.shallow||!r&&!1!==n.renderRootComponent){if(d===k){var m=[];return Jh(m,t.props.children),ad(m,e,n,!1!==n.shallowHighOrder,o,s)}var g,y=t.__c={__v:t,context:e,props:t.props,setState:rd,forceUpdate:rd,__d:!0,__h:[]};i.__b&&i.__b(t);var v=i.__r;if(d.prototype&&"function"==typeof d.prototype.render){var _=d.contextType,w=_&&e[_.__c],b=null!=_?w?w.props.value:_.__:e;(y=t.__c=new d(f,b)).__v=t,y._dirty=y.__d=!0,y.props=f,null==y.state&&(y.state={}),null==y._nextState&&null==y.__s&&(y._nextState=y.__s=y.state),y.context=b,d.getDerivedStateFromProps?y.state=Xh(Xh({},y.state),d.getDerivedStateFromProps(y.props,y.state)):y.componentWillMount&&(y.componentWillMount(),y.state=y._nextState!==y.state?y._nextState:y.__s!==y.state?y.__s:y.state),v&&v(t),g=y.render(y.props,y.state,y.context)}else for(var E=d.contextType,T=E&&e[E.__c],C=null!=E?T?T.props.value:E.__:e,S=0;y.__d&&S++<25;)y.__d=!1,v&&v(t),g=d.call(t.__c,f,C);return y.getChildContext&&(e=Xh(Xh({},e),y.getChildContext())),i.diffed&&i.diffed(t),ad(g,e,n,!1!==n.shallowHighOrder,o,s)}d=(h=d).displayName||h!==Function&&h.name||function(t){var e=(Function.prototype.toString.call(t).match(/^\s*function\s+([^( ]+)/)||"")[1];if(!e){for(var n=-1,r=td.length;r--;)if(td[r]===t){n=r;break}n<0&&(n=td.push(t)-1),e="UnnamedComponent"+n}return e}(h)}var I,x,D="<"+d;if(f){var A=Object.keys(f);n&&!0===n.sortAttributes&&A.sort();for(var N=0;N<A.length;N++){var O=A[N],P=f[O];if("children"!==O){if(!nd.test(O)&&(n&&n.allAttributes||"key"!==O&&"ref"!==O&&"__self"!==O&&"__source"!==O)){if("defaultValue"===O)O="value";else if("defaultChecked"===O)O="checked";else if("defaultSelected"===O)O="selected";else if("className"===O){if(void 0!==f.class)continue;O="class"}else o&&/^xlink:?./.test(O)&&(O=O.toLowerCase().replace(/^xlink:?/,"xlink:"));if("htmlFor"===O){if(f.for)continue;O="for"}"style"===O&&P&&"object"==typeof P&&(P=Qh(P)),"a"===O[0]&&"r"===O[1]&&"boolean"==typeof P&&(P=String(P));var R=n.attributeHook&&n.attributeHook(O,P,e,n,p);if(R||""===R)D+=R;else if("dangerouslySetInnerHTML"===O)x=P&&P.__html;else if("textarea"===d&&"value"===O)I=P;else if((P||0===P||""===P)&&"function"!=typeof P){if(!(!0!==P&&""!==P||(P=O,n&&n.xml))){D=D+" "+O;continue}if("value"===O){if("select"===d){s=P;continue}"option"===d&&s==P&&void 0===f.selected&&(D+=" selected")}D=D+" "+O+'="'+qh(P)+'"'}}}else I=P}}if(a){var M=D.replace(/\n\s*/," ");M===D||~M.indexOf("\n")?a&&~D.indexOf("\n")&&(D+="\n"):D=M}if(D+=">",nd.test(d))throw new Error(d+" is not a valid HTML tag name in "+D);var L,F=ed.test(d)||n.voidElements&&n.voidElements.test(d),j=[];if(x)a&&Gh(x)&&(x="\n"+c+Kh(x,c)),D+=x;else if(null!=I&&Jh(L=[],I).length){for(var U=a&&~D.indexOf("\n"),V=!1,$=0;$<L.length;$++){var H=L[$];if(null!=H&&!1!==H){var B=ad(H,e,n,!0,"svg"===d||"foreignObject"!==d&&o,s);if(a&&!U&&Gh(B)&&(U=!0),B)if(a){var z=B.length>0&&"<"!=B[0];V&&z?j[j.length-1]+=B:j.push(B),V=z}else j.push(B)}}if(a&&U)for(var W=j.length;W--;)j[W]="\n"+c+Kh(j[W],c)}if(j.length||x)D+=j.join("");else if(n&&n.xml)return D.substring(0,D.length-1)+" />";return!F||L||x?(a&&~D.indexOf("\n")&&(D+="\n"),D=D+"</"+d+">"):D=D.replace(/>$/," />"),D}function cd(t,e,n){var r;for(r in n=n||null,t)if(t.hasOwnProperty(r)&&!1===e.call(n,t[r],r,t))break}sd.shallowRender=id;var ud=cd,ld=ud;function hd(t,e){var n=document.createElement("img"),r="";return ld(e,(function(t,e){r+="&"+e+"="+t})),r=r.substring(1),n.src=t+"?"+r,n.style.display="none",document.body.appendChild(n),document.body.removeChild(n),n}var dd=hd,fd=Ce,pd=dd,md=6048e5;function gd(t){var e=(new Date).getTime();return e-t>md}function yd(t,e){var n="https://www.google-analytics.com/collect",r=location.hostname,i="event",o="use",s="TOAST UI "+t+" for "+r+": Statistics",a=window.localStorage.getItem(s);(fd(window.tui)||!1!==window.tui.usageStatistics)&&(a&&!gd(a)||(window.localStorage.setItem(s,(new Date).getTime()),setTimeout((function(){"interactive"!==document.readyState&&"complete"!==document.readyState||pd(n,{v:1,t:i,tid:e,cid:r,dp:r,dh:t,el:t,ec:o})}),1e3)))}var vd=yd;function _d({theme:t,store:e,eventBus:n,children:r}){return S(To,{value:n},S(Yo,{store:t},S(ro,{store:e},S(Yc,null,r))))}const wd="UA-129951699-1";function bd(t,e){var n,r,i,o,s=Object.prototype.hasOwnProperty;for(i=1,o=arguments.length;i<o;i+=1)for(r in n=arguments[i],n)s.call(n,r)&&(t[r]=n[r]);return t}var Ed=bd;function Td(t){return null===t}var Cd=Td,Sd=Ce,Id=Cd;function kd(t){return!Sd(t)&&!Id(t)}var xd=kd;function Dd(t){return t instanceof Array}var Ad=Dd;function Nd(t){return t instanceof Function}var Od=Nd;function Pd(t,e,n){var r=0,i=t.length;for(n=n||null;r<i;r+=1)if(!1===e.call(n,t[r],r,t))break}var Rd=Pd,Md=Ad,Ld=Rd,Fd=ud;function jd(t,e,n){Md(t)?Ld(t,e,n):Fd(t,e,n)}var Ud=jd,Vd=Ed,$d=xd,Hd=Ze,Bd=Xe,zd=Ad,Wd=Od,qd=Ud,Kd=/\s+/g;function Gd(){this.events=null,this.contexts=null}Gd.mixin=function(t){Vd(t.prototype,Gd.prototype)},Gd.prototype._getHandlerItem=function(t,e){var n={handler:t};return e&&(n.context=e),n},Gd.prototype._safeEvent=function(t){var e,n=this.events;return n||(n=this.events={}),t&&(e=n[t],e||(e=[],n[t]=e),n=e),n},Gd.prototype._safeContext=function(){var t=this.contexts;return t||(t=this.contexts=[]),t},Gd.prototype._indexOfContext=function(t){var e=this._safeContext(),n=0;while(e[n]){if(t===e[n][0])return n;n+=1}return-1},Gd.prototype._memorizeContext=function(t){var e,n;$d(t)&&(e=this._safeContext(),n=this._indexOfContext(t),n>-1?e[n][1]+=1:e.push([t,1]))},Gd.prototype._forgetContext=function(t){var e,n;$d(t)&&(e=this._safeContext(),n=this._indexOfContext(t),n>-1&&(e[n][1]-=1,e[n][1]<=0&&e.splice(n,1)))},Gd.prototype._bindEvent=function(t,e,n){var r=this._safeEvent(t);this._memorizeContext(n),r.push(this._getHandlerItem(e,n))},Gd.prototype.on=function(t,e,n){var r=this;Hd(t)?(t=t.split(Kd),qd(t,(function(t){r._bindEvent(t,e,n)}))):Bd(t)&&(n=e,qd(t,(function(t,e){r.on(e,t,n)})))},Gd.prototype.once=function(t,e,n){var r=this;if(Bd(t))return n=e,void qd(t,(function(t,e){r.once(e,t,n)}));function i(){e.apply(n,arguments),r.off(t,i,n)}this.on(t,i,n)},Gd.prototype._spliceMatches=function(t,e){var n,r=0;if(zd(t))for(n=t.length;r<n;r+=1)!0===e(t[r])&&(t.splice(r,1),n-=1,r-=1)},Gd.prototype._matchHandler=function(t){var e=this;return function(n){var r=t===n.handler;return r&&e._forgetContext(n.context),r}},Gd.prototype._matchContext=function(t){var e=this;return function(n){var r=t===n.context;return r&&e._forgetContext(n.context),r}},Gd.prototype._matchHandlerAndContext=function(t,e){var n=this;return function(r){var i=t===r.handler,o=e===r.context,s=i&&o;return s&&n._forgetContext(r.context),s}},Gd.prototype._offByEventName=function(t,e){var n=this,r=Wd(e),i=n._matchHandler(e);t=t.split(Kd),qd(t,(function(t){var e=n._safeEvent(t);r?n._spliceMatches(e,i):(qd(e,(function(t){n._forgetContext(t.context)})),n.events[t]=[])}))},Gd.prototype._offByHandler=function(t){var e=this,n=this._matchHandler(t);qd(this._safeEvent(),(function(t){e._spliceMatches(t,n)}))},Gd.prototype._offByObject=function(t,e){var n,r=this;this._indexOfContext(t)<0?qd(t,(function(t,e){r.off(e,t)})):Hd(e)?(n=this._matchContext(t),r._spliceMatches(this._safeEvent(e),n)):Wd(e)?(n=this._matchHandlerAndContext(e,t),qd(this._safeEvent(),(function(t){r._spliceMatches(t,n)}))):(n=this._matchContext(t),qd(this._safeEvent(),(function(t){r._spliceMatches(t,n)})))},Gd.prototype.off=function(t,e){Hd(t)?this._offByEventName(t,e):arguments.length?Wd(t)?this._offByHandler(t):Bd(t)&&this._offByObject(t,e):(this.events={},this.contexts=[])},Gd.prototype.fire=function(t){this.invoke.apply(this,arguments)},Gd.prototype.invoke=function(t){var e,n,r,i;if(!this.hasListener(t))return!0;e=this._safeEvent(t),n=Array.prototype.slice.call(arguments,1),r=0;while(e[r]){if(i=e[r],!1===i.handler.apply(i.context,n))return!1;r+=1}return!0},Gd.prototype.hasListener=function(t){return this.getListenerLength(t)>0},Gd.prototype.getListenerLength=function(t){var e=this._safeEvent(t);return e.length};var Yd=Gd;class Qd extends Yd{on(t,e){return super.on(t,e),this}off(t,e){return super.off(t,e),this}fire(t,...e){return super.fire(t,...e),this}once(t,e){return super.once(t,e),this}}class Xd{constructor(t,e={}){var n;this.container=Ze(t)?null!=(n=null==document?void 0:document.querySelector(t))?n:null:t,this.theme=Go(e.theme),this.eventBus=new Qd,this.store=no(e),this.renderRange=this.calculateRenderRange(_r()),vo(),!0===this.getStoreState().options.usageStatistics&&vd("calendar",wd)}getStoreState(t){const e=this.store.getState();return t?e[t]:e}getStoreDispatchers(t){const e=this.store.getState().dispatch;return t?e[t]:e}destroy(){this.container&&Ba(this.container),this.store.clearListeners(),this.theme.clearListeners(),this.eventBus.off(),_o();for(const t in this)this.hasOwnProperty(t)&&delete this[t]}calculateMonthRenderDate({renderDate:t,offset:e,monthOptions:n}){let r=new Hn(t);const{visibleWeeksCount:i}=n;r=i>0?Ur(r,7*e*i):$r(r,e);const o=Js(r,n),[[s]]=o,a=er(er(o));return{renderDate:r,renderRange:{start:s,end:a}}}calculateWeekRenderDate({renderDate:t,offset:e,weekOptions:n}){const r=new Hn(t);r.addDate(7*e);const i=Zs(r,n),[o]=i,s=er(i);return{renderDate:r,renderRange:{start:o,end:s}}}calculateDayRenderDate({renderDate:t,offset:e}){const n=new Hn(t);n.addDate(e);const r=_r(n),i=Dr(n);return{renderDate:n,renderRange:{start:r,end:i}}}move(t){if(tn(t))return;const{currentView:e,renderDate:n}=this.getStoreState().view,{options:r}=this.getStoreState(),{setRenderDate:i}=this.getStoreDispatchers().view,o=new Hn(n);let s={renderDate:o,renderRange:{start:new Hn(o),end:new Hn(o)}};"month"===e?s=this.calculateMonthRenderDate({renderDate:n,offset:t,monthOptions:r.month}):"week"===e?s=this.calculateWeekRenderDate({renderDate:n,offset:t,weekOptions:r.week}):"day"===e&&(s=this.calculateDayRenderDate({renderDate:n,offset:t})),i(s.renderDate),this.renderRange=s.renderRange}createEvents(t){const{createEvents:e}=this.getStoreDispatchers("calendar");e(t)}getEventModel(t,e){const{events:n}=this.getStoreState("calendar");return n.find((({id:n,calendarId:r})=>n===t&&r===e))}getEvent(t,e){var n,r;return null!=(r=null==(n=this.getEventModel(t,e))?void 0:n.toEventObject())?r:null}updateEvent(t,e,n){const{updateEvent:r}=this.getStoreDispatchers("calendar"),i=this.getEventModel(t,e);i&&r({event:i,eventData:n})}deleteEvent(t,e){const{deleteEvent:n}=this.getStoreDispatchers("calendar"),r=this.getEventModel(t,e);r&&n(r)}setCalendarVisibility(t,e){const{setCalendarVisibility:n}=this.getStoreDispatchers("calendar"),r=Array.isArray(t)?t:[t];n(r,e)}render(){return en(this.container)&&G(S(_d,{theme:this.theme,store:this.store,eventBus:this.eventBus},this.getComponent()),this.container),this}renderToString(){return sd(S(_d,{theme:this.theme,store:this.store,eventBus:this.eventBus},this.getComponent()))}clear(){const{clearEvents:t}=this.getStoreDispatchers("calendar");t()}scrollToNow(t="auto"){this.eventBus.fire("scrollToNow",t)}calculateRenderRange(t){const{currentView:e}=this.getStoreState().view,{options:n}=this.getStoreState(),r=new Hn(t);let i={start:new Hn(r),end:new Hn(r)};return"month"===e?i=this.calculateMonthRenderDate({renderDate:t,offset:0,monthOptions:n.month}).renderRange:"week"===e?i=this.calculateWeekRenderDate({renderDate:t,offset:0,weekOptions:n.week}).renderRange:"day"===e&&(i=this.calculateDayRenderDate({renderDate:t,offset:0}).renderRange),i}today(){const{setRenderDate:t}=this.getStoreDispatchers().view,e=new Hn;t(e),this.renderRange=this.calculateRenderRange(e)}setDate(t){const{setRenderDate:e}=this.getStoreDispatchers("view"),n=new Hn(t);e(n),this.renderRange=this.calculateRenderRange(n)}next(){this.move(1)}prev(){this.move(-1)}setCalendarColor(t,e){const{setCalendarColor:n}=this.getStoreDispatchers().calendar;n(t,e)}changeView(t){const{changeView:e}=this.getStoreDispatchers("view");e(t),this.renderRange=this.calculateRenderRange(this.getDate())}getElement(t,e){const n=this.getEvent(t,e);return n&&this.container?this.container.querySelector(`[data-event-id="${t}"][data-calendar-id="${e}"]`):null}setTheme(t){const{setTheme:e}=this.theme.getState().dispatch;e(t)}getOptions(){const{options:t,template:e}=this.getStoreState(),n=this.theme.getState(),{dispatch:r}=n,i=_(n,["dispatch"]);return v(y({},t),{template:e,theme:i})}setOptions(t){const e=t,{theme:n,template:r}=e,i=_(e,["theme","template"]),{setTheme:o}=this.theme.getState().dispatch,{options:{setOptions:s},template:{setTemplate:a}}=this.getStoreDispatchers();en(n)&&o(n),en(r)&&a(r),s(i)}getDate(){const{renderDate:t}=this.getStoreState().view;return t}getDateRangeStart(){return this.renderRange.start}getDateRangeEnd(){return this.renderRange.end}getViewName(){const{currentView:t}=this.getStoreState("view");return t}setCalendars(t){const{setCalendars:e}=this.getStoreDispatchers().calendar;e(t)}openFormPopup(t){const{showFormPopup:e}=this.getStoreDispatchers().popup,n=new Yr(t),{title:r,location:i,start:o,end:s,isAllday:a,isPrivate:c,state:u}=n;e({isCreationPopup:!0,event:n,title:r,location:i,start:o,end:s,isAllday:a,isPrivate:c,eventState:u})}clearGridSelections(){const{clearAll:t}=this.getStoreDispatchers().gridSelection;t()}fire(t,...e){return this.eventBus.fire(t,...e),this}off(t,e){return this.eventBus.off(t,e),this}on(t,e){return this.eventBus.on(t,e),this}once(t,e){return this.eventBus.once(t,e),this}}function Jd(t){return!!Object.values(ih).find((e=>e===t))}class Zd extends Xd{constructor(t,e={}){super(t,e);const{defaultView:n="week"}=e;if(!Jd(n))throw new In(n);this.render()}getComponent(){return S(Bh,null)}}},3579:function(t,e,n){"use strict";var r=n(6518),i=n(9565),o=n(2652),s=n(9306),a=n(8551),c=n(1767),u=n(9539),l=n(4549),h=l("some",TypeError);r({target:"Iterator",proto:!0,real:!0,forced:h},{some:function(t){a(this);try{s(t)}catch(r){u(this,"throw",r)}if(h)return i(h,this,t);var e=c(this),n=0;return o(e,(function(e,r){if(t(e,n++))return r()}),{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},3650:function(t,e,n){"use strict";var r=n(7080),i=n(4402),o=n(9286),s=n(3789),a=n(507),c=i.add,u=i.has,l=i.remove;t.exports=function(t){var e=r(this),n=s(t).getIterator(),i=o(e);return a(n,(function(t){u(e,t)?l(i,t):c(i,t)})),i}},3706:function(t,e,n){"use strict";var r=n(9504),i=n(4901),o=n(7629),s=r(Function.toString);i(o.inspectSource)||(o.inspectSource=function(t){return s(t)}),t.exports=o.inspectSource},3717:function(t,e){"use strict";e.f=Object.getOwnPropertySymbols},3724:function(t,e,n){"use strict";var r=n(9039);t.exports=!r((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},3789:function(t,e,n){"use strict";var r=n(9306),i=n(8551),o=n(9565),s=n(1291),a=n(1767),c="Invalid size",u=RangeError,l=TypeError,h=Math.max,d=function(t,e){this.set=t,this.size=h(e,0),this.has=r(t.has),this.keys=r(t.keys)};d.prototype={getIterator:function(){return a(i(o(this.keys,this.set)))},includes:function(t){return o(this.has,this.set,t)}},t.exports=function(t){i(t);var e=+t.size;if(e!==e)throw new l(c);var n=s(e);if(n<0)throw new u(c);return new d(t,n)}},3838:function(t,e,n){"use strict";var r=n(7080),i=n(5170),o=n(8469),s=n(3789);t.exports=function(t){var e=r(this),n=s(t);return!(i(e)>n.size)&&!1!==o(e,(function(t){if(!n.includes(t))return!1}),!0)}},3853:function(t,e,n){"use strict";var r=n(6518),i=n(4449),o=n(4916),s=!o("isDisjointFrom",(function(t){return!t}));r({target:"Set",proto:!0,real:!0,forced:s},{isDisjointFrom:i})},3925:function(t,e,n){"use strict";var r=n(34);t.exports=function(t){return r(t)||null===t}},4055:function(t,e,n){"use strict";var r=n(4576),i=n(34),o=r.document,s=i(o)&&i(o.createElement);t.exports=function(t){return s?o.createElement(t):{}}},4114:function(t,e,n){"use strict";var r=n(6518),i=n(8981),o=n(6198),s=n(4527),a=n(6837),c=n(9039),u=c((function(){return 4294967297!==[].push.call({length:4294967296},1)})),l=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(t){return t instanceof TypeError}},h=u||!l();r({target:"Array",proto:!0,arity:1,forced:h},{push:function(t){var e=i(this),n=o(e),r=arguments.length;a(n+r);for(var c=0;c<r;c++)e[n]=arguments[c],n++;return s(e,n),n}})},4117:function(t){"use strict";t.exports=function(t){return null===t||void 0===t}},4204:function(t,e,n){"use strict";var r=n(7080),i=n(4402).add,o=n(9286),s=n(3789),a=n(507);t.exports=function(t){var e=r(this),n=s(t).getIterator(),c=o(e);return a(n,(function(t){i(c,t)})),c}},4209:function(t,e,n){"use strict";var r=n(8227),i=n(6269),o=r("iterator"),s=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||s[o]===t)}},4232:function(t,e,n){"use strict";n.d(e,{$3:function(){return f},$H:function(){return F},BH:function(){return W},BX:function(){return nt},Bm:function(){return b},C4:function(){return X},CE:function(){return m},CP:function(){return u},DY:function(){return j},Gv:function(){return E},J$:function(){return Z},Kg:function(){return w},MZ:function(){return i},Mp:function(){return c},NO:function(){return a},Oj:function(){return o},PT:function(){return O},Qd:function(){return k},Ro:function(){return $},SU:function(){return D},TF:function(){return h},Tg:function(){return R},Tn:function(){return _},Tr:function(){return q},We:function(){return B},X$:function(){return l},Y2:function(){return tt},ZH:function(){return M},Zf:function(){return I},bB:function(){return V},cy:function(){return p},gd:function(){return v},pD:function(){return r},rU:function(){return L},tE:function(){return s},u3:function(){return rt},vM:function(){return g},v_:function(){return ot},yI:function(){return x},yL:function(){return T},yQ:function(){return U}});n(4114),n(8111),n(2489),n(7588);
/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/
/*! #__NO_SIDE_EFFECTS__ */
function r(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return t=>t in e}const i={},o=[],s=()=>{},a=()=>!1,c=t=>111===t.charCodeAt(0)&&110===t.charCodeAt(1)&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),u=t=>t.startsWith("onUpdate:"),l=Object.assign,h=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},d=Object.prototype.hasOwnProperty,f=(t,e)=>d.call(t,e),p=Array.isArray,m=t=>"[object Map]"===S(t),g=t=>"[object Set]"===S(t),y=t=>"[object Date]"===S(t),v=t=>"[object RegExp]"===S(t),_=t=>"function"===typeof t,w=t=>"string"===typeof t,b=t=>"symbol"===typeof t,E=t=>null!==t&&"object"===typeof t,T=t=>(E(t)||_(t))&&_(t.then)&&_(t.catch),C=Object.prototype.toString,S=t=>C.call(t),I=t=>S(t).slice(8,-1),k=t=>"[object Object]"===S(t),x=t=>w(t)&&"NaN"!==t&&"-"!==t[0]&&""+parseInt(t,10)===t,D=r(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),A=t=>{const e=Object.create(null);return n=>{const r=e[n];return r||(e[n]=t(n))}},N=/-(\w)/g,O=A((t=>t.replace(N,((t,e)=>e?e.toUpperCase():"")))),P=/\B([A-Z])/g,R=A((t=>t.replace(P,"-$1").toLowerCase())),M=A((t=>t.charAt(0).toUpperCase()+t.slice(1))),L=A((t=>{const e=t?`on${M(t)}`:"";return e})),F=(t,e)=>!Object.is(t,e),j=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},U=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},V=t=>{const e=parseFloat(t);return isNaN(e)?t:e},$=t=>{const e=w(t)?Number(t):NaN;return isNaN(e)?t:e};let H;const B=()=>H||(H="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{});const z="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol",W=r(z);function q(t){if(p(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=w(r)?Q(r):q(r);if(i)for(const t in i)e[t]=i[t]}return e}if(w(t)||E(t))return t}const K=/;(?![^(]*\))/g,G=/:([^]+)/,Y=/\/\*[^]*?\*\//g;function Q(t){const e={};return t.replace(Y,"").split(K).forEach((t=>{if(t){const n=t.split(G);n.length>1&&(e[n[0].trim()]=n[1].trim())}})),e}function X(t){let e="";if(w(t))e=t;else if(p(t))for(let n=0;n<t.length;n++){const r=X(t[n]);r&&(e+=r+" ")}else if(E(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const J="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Z=r(J);function tt(t){return!!t||""===t}function et(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=nt(t[r],e[r]);return n}function nt(t,e){if(t===e)return!0;let n=y(t),r=y(e);if(n||r)return!(!n||!r)&&t.getTime()===e.getTime();if(n=b(t),r=b(e),n||r)return t===e;if(n=p(t),r=p(e),n||r)return!(!n||!r)&&et(t,e);if(n=E(t),r=E(e),n||r){if(!n||!r)return!1;const i=Object.keys(t).length,o=Object.keys(e).length;if(i!==o)return!1;for(const n in t){const r=t.hasOwnProperty(n),i=e.hasOwnProperty(n);if(r&&!i||!r&&i||!nt(t[n],e[n]))return!1}}return String(t)===String(e)}function rt(t,e){return t.findIndex((t=>nt(t,e)))}const it=t=>!(!t||!0!==t["__v_isRef"]),ot=t=>w(t)?t:null==t?"":p(t)||E(t)&&(t.toString===C||!_(t.toString))?it(t)?ot(t.value):JSON.stringify(t,st,2):String(t),st=(t,e)=>it(e)?st(t,e.value):m(e)?{[`Map(${e.size})`]:[...e.entries()].reduce(((t,[e,n],r)=>(t[at(e,r)+" =>"]=n,t)),{})}:g(e)?{[`Set(${e.size})`]:[...e.values()].map((t=>at(t)))}:b(e)?at(e):!E(e)||p(e)||k(e)?e:String(e),at=(t,e="")=>{var n;return b(t)?`Symbol(${null!=(n=t.description)?n:e})`:t}},4270:function(t,e,n){"use strict";var r=n(9565),i=n(4901),o=n(34),s=TypeError;t.exports=function(t,e){var n,a;if("string"===e&&i(n=t.toString)&&!o(a=r(n,t)))return a;if(i(n=t.valueOf)&&!o(a=r(n,t)))return a;if("string"!==e&&i(n=t.toString)&&!o(a=r(n,t)))return a;throw new s("Can't convert object to primitive value")}},4376:function(t,e,n){"use strict";var r=n(2195);t.exports=Array.isArray||function(t){return"Array"===r(t)}},4388:function(t,e,n){"use strict";n.d(e,{F0:function(){return Ye},hk:function(){return Rr},iM:function(){return en},xI:function(){return Xr},Gt:function(){return kn},Nu:function(){return Yt},iZ:function(){return Fe},x9:function(){return Le},CI:function(){return Ue}});n(4114),n(8111),n(2489),n(116),n(7588),n(1701),n(8237),n(3579),n(7642),n(8004),n(3853),n(5876),n(2475),n(5024),n(1698);var r=n(6086),i=n(2455),o=n(6189),s=n(798);function a(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const c=a,u=new i.FA("auth","Firebase",a()),l=new o.Vy("@firebase/auth");function h(t,...e){l.logLevel<=o.$b.WARN&&l.warn(`Auth (${r.MF}): ${t}`,...e)}function d(t,...e){l.logLevel<=o.$b.ERROR&&l.error(`Auth (${r.MF}): ${t}`,...e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f(t,...e){throw y(t,...e)}function p(t,...e){return y(t,...e)}function m(t,e,n){const r={...c(),[e]:n},o=new i.FA("auth","Firebase",r);return o.create(e,{appName:t.name})}function g(t){return m(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function y(t,...e){if("string"!==typeof t){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return u.create(t,...e)}function v(t,e,...n){if(!t)throw y(e,...n)}function _(t){const e="INTERNAL ASSERTION FAILED: "+t;throw d(e),new Error(e)}function w(t,e){t||_(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b(){return"undefined"!==typeof self&&self.location?.href||""}function E(){return"http:"===T()||"https:"===T()}function T(){return"undefined"!==typeof self&&self.location?.protocol||null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(E()||(0,i.sr)()||"connection"in navigator))||navigator.onLine}function S(){if("undefined"===typeof navigator)return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I{constructor(t,e){this.shortDelay=t,this.longDelay=e,w(e>t,"Short delay should be less than long delay!"),this.isMobile=(0,i.jZ)()||(0,i.lV)()}get(){return C()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k(t,e){w(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x{static initialize(t,e,n){this.fetchImpl=t,e&&(this.headersImpl=e),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void _("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void _("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void _("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D={["CREDENTIAL_MISMATCH"]:"custom-token-mismatch",["MISSING_CUSTOM_TOKEN"]:"internal-error",["INVALID_IDENTIFIER"]:"invalid-email",["MISSING_CONTINUE_URI"]:"internal-error",["INVALID_PASSWORD"]:"wrong-password",["MISSING_PASSWORD"]:"missing-password",["INVALID_LOGIN_CREDENTIALS"]:"invalid-credential",["EMAIL_EXISTS"]:"email-already-in-use",["PASSWORD_LOGIN_DISABLED"]:"operation-not-allowed",["INVALID_IDP_RESPONSE"]:"invalid-credential",["INVALID_PENDING_TOKEN"]:"invalid-credential",["FEDERATED_USER_ID_ALREADY_LINKED"]:"credential-already-in-use",["MISSING_REQ_TYPE"]:"internal-error",["EMAIL_NOT_FOUND"]:"user-not-found",["RESET_PASSWORD_EXCEED_LIMIT"]:"too-many-requests",["EXPIRED_OOB_CODE"]:"expired-action-code",["INVALID_OOB_CODE"]:"invalid-action-code",["MISSING_OOB_CODE"]:"internal-error",["CREDENTIAL_TOO_OLD_LOGIN_AGAIN"]:"requires-recent-login",["INVALID_ID_TOKEN"]:"invalid-user-token",["TOKEN_EXPIRED"]:"user-token-expired",["USER_NOT_FOUND"]:"user-token-expired",["TOO_MANY_ATTEMPTS_TRY_LATER"]:"too-many-requests",["PASSWORD_DOES_NOT_MEET_REQUIREMENTS"]:"password-does-not-meet-requirements",["INVALID_CODE"]:"invalid-verification-code",["INVALID_SESSION_INFO"]:"invalid-verification-id",["INVALID_TEMPORARY_PROOF"]:"invalid-credential",["MISSING_SESSION_INFO"]:"missing-verification-id",["SESSION_EXPIRED"]:"code-expired",["MISSING_ANDROID_PACKAGE_NAME"]:"missing-android-pkg-name",["UNAUTHORIZED_DOMAIN"]:"unauthorized-continue-uri",["INVALID_OAUTH_CLIENT_ID"]:"invalid-oauth-client-id",["ADMIN_ONLY_OPERATION"]:"admin-restricted-operation",["INVALID_MFA_PENDING_CREDENTIAL"]:"invalid-multi-factor-session",["MFA_ENROLLMENT_NOT_FOUND"]:"multi-factor-info-not-found",["MISSING_MFA_ENROLLMENT_ID"]:"missing-multi-factor-info",["MISSING_MFA_PENDING_CREDENTIAL"]:"missing-multi-factor-session",["SECOND_FACTOR_EXISTS"]:"second-factor-already-in-use",["SECOND_FACTOR_LIMIT_EXCEEDED"]:"maximum-second-factor-count-exceeded",["BLOCKING_FUNCTION_ERROR_RESPONSE"]:"internal-error",["RECAPTCHA_NOT_ENABLED"]:"recaptcha-not-enabled",["MISSING_RECAPTCHA_TOKEN"]:"missing-recaptcha-token",["INVALID_RECAPTCHA_TOKEN"]:"invalid-recaptcha-token",["INVALID_RECAPTCHA_ACTION"]:"invalid-recaptcha-action",["MISSING_CLIENT_TYPE"]:"missing-client-type",["MISSING_RECAPTCHA_VERSION"]:"missing-recaptcha-version",["INVALID_RECAPTCHA_VERSION"]:"invalid-recaptcha-version",["INVALID_REQ_TYPE"]:"invalid-req-type"},A=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],N=new I(3e4,6e4);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function P(t,e,n,r,o={}){return R(t,o,(async()=>{let o={},s={};r&&("GET"===e?s=r:o={body:JSON.stringify(r)});const a=(0,i.Am)({key:t.config.apiKey,...s}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...o};return(0,i.c1)()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&(0,i.zJ)(t.emulatorConfig.host)&&(u.credentials="include"),x.fetch()(await L(t,t.config.apiHost,n,a),u)}))}async function R(t,e,n){t._canInitEmulator=!1;const r={...D,...e};try{const e=new j(t),i=await Promise.race([n(),e.promise]);e.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw U(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const e=i.ok?o.errorMessage:o.error.message,[n,s]=e.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw U(t,"credential-already-in-use",o);if("EMAIL_EXISTS"===n)throw U(t,"email-already-in-use",o);if("USER_DISABLED"===n)throw U(t,"user-disabled",o);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(s)throw m(t,a,s);f(t,a)}}catch(o){if(o instanceof i.g)throw o;f(t,"network-request-failed",{message:String(o)})}}async function M(t,e,n,r,i={}){const o=await P(t,e,n,r,i);return"mfaPendingCredential"in o&&f(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function L(t,e,n,r){const i=`${e}${n}?${r}`,o=t,s=o.config.emulator?k(t.config,i):`${t.config.apiScheme}://${i}`;if(A.includes(n)&&(await o._persistenceManagerAvailable,"COOKIE"===o._getPersistenceType())){const t=o._getPersistence();return t._getFinalTarget(s).toString()}return s}function F(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class j{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise(((t,e)=>{this.timer=setTimeout((()=>e(p(this.auth,"network-request-failed"))),N.get())}))}}function U(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=p(t,e,r);return i.customData._tokenResponse=n,i}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V(t){return void 0!==t&&void 0!==t.enterprise}class ${constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===t.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const e of this.recaptchaEnforcementState)if(e.provider&&e.provider===t)return F(e.enforcementState);return null}isProviderEnabled(t){return"ENFORCE"===this.getProviderEnforcementState(t)||"AUDIT"===this.getProviderEnforcementState(t)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H(t,e){return P(t,"GET","/v2/recaptchaConfig",O(t,e))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B(t,e){return P(t,"POST","/v1/accounts:delete",e)}async function z(t,e){return P(t,"POST","/v1/accounts:lookup",e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch(e){}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q(t,e=!1){const n=(0,i.Ku)(t),r=await n.getIdToken(e),o=G(r);v(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const s="object"===typeof o.firebase?o.firebase:void 0,a=s?.["sign_in_provider"];return{claims:o,token:r,authTime:W(K(o.auth_time)),issuedAtTime:W(K(o.iat)),expirationTime:W(K(o.exp)),signInProvider:a||null,signInSecondFactor:s?.["sign_in_second_factor"]||null}}function K(t){return 1e3*Number(t)}function G(t){const[e,n,r]=t.split(".");if(void 0===e||void 0===n||void 0===r)return d("JWT malformed, contained fewer than 3 sections"),null;try{const t=(0,i.u)(n);return t?JSON.parse(t):(d("Failed to decode base64 JWT payload"),null)}catch(o){return d("Caught error parsing JWT payload as JSON",o?.toString()),null}}function Y(t){const e=G(t);return v(e,"internal-error"),v("undefined"!==typeof e.exp,"internal-error"),v("undefined"!==typeof e.iat,"internal-error"),Number(e.exp)-Number(e.iat)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof i.g&&X(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function X({code:t}){return"auth/user-disabled"===t||"auth/user-token-expired"===t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(t){if(t){const t=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),t}{this.errorBackoff=3e4;const t=this.user.stsTokenManager.expirationTime??0,e=t-Date.now()-3e5;return Math.max(0,e)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout((async()=>{await this.iteration()}),e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t?.code&&this.schedule(!0))}this.schedule()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=W(this.lastLoginAt),this.creationTime=W(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tt(t){const e=t.auth,n=await t.getIdToken(),r=await Q(t,z(e,{idToken:n}));v(r?.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const o=i.providerUserInfo?.length?rt(i.providerUserInfo):[],s=nt(t.providerData,o),a=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!s?.length,u=!!a&&c,l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Z(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,l)}async function et(t){const e=(0,i.Ku)(t);await tt(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function nt(t,e){const n=t.filter((t=>!e.some((e=>e.providerId===t.providerId))));return[...n,...e]}function rt(t){return t.map((({providerId:t,...e})=>({providerId:t,uid:e.rawId||"",displayName:e.displayName||null,email:e.email||null,phoneNumber:e.phoneNumber||null,photoURL:e.photoUrl||null})))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function it(t,e){const n=await R(t,{},(async()=>{const n=(0,i.Am)({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=t.config,s=await L(t,r,"/v1/token",`key=${o}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:a,body:n};return t.emulatorConfig&&(0,i.zJ)(t.emulatorConfig.host)&&(c.credentials="include"),x.fetch()(s,c)}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function ot(t,e){return P(t,"POST","/v2/accounts:revokeToken",O(t,e))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){v(t.idToken,"internal-error"),v("undefined"!==typeof t.idToken,"internal-error"),v("undefined"!==typeof t.refreshToken,"internal-error");const e="expiresIn"in t&&"undefined"!==typeof t.expiresIn?Number(t.expiresIn):Y(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){v(0!==t.length,"internal-error");const e=Y(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return e||!this.accessToken||this.isExpired?(v(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:n,refreshToken:r,expiresIn:i}=await it(t,e);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(t,e,n){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(t,e){const{refreshToken:n,accessToken:r,expirationTime:i}=e,o=new st;return n&&(v("string"===typeof n,"internal-error",{appName:t}),o.refreshToken=n),r&&(v("string"===typeof r,"internal-error",{appName:t}),o.accessToken=r),i&&(v("number"===typeof i,"internal-error",{appName:t}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new st,this.toJSON())}_performRefresh(){return _("not implemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function at(t,e){v("string"===typeof t||"undefined"===typeof t,"internal-error",{appName:e})}class ct{constructor({uid:t,auth:e,stsTokenManager:n,...r}){this.providerId="firebase",this.proactiveRefresh=new J(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=e,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Z(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(t){const e=await Q(this,this.stsTokenManager.getToken(this.auth,t));return v(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return q(this,t)}reload(){return et(this)}_assign(t){this!==t&&(v(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map((t=>({...t}))),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new ct({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return e.metadata._copy(this.metadata),e}_onReload(t){v(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),e&&await tt(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if((0,r.xZ)(this.auth.app))return Promise.reject(g(this.auth));const t=await this.getIdToken();return await Q(this,B(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((t=>({...t}))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){const n=e.displayName??void 0,r=e.email??void 0,i=e.phoneNumber??void 0,o=e.photoURL??void 0,s=e.tenantId??void 0,a=e._redirectEventId??void 0,c=e.createdAt??void 0,u=e.lastLoginAt??void 0,{uid:l,emailVerified:h,isAnonymous:d,providerData:f,stsTokenManager:p}=e;v(l&&p,t,"internal-error");const m=st.fromJSON(this.name,p);v("string"===typeof l,t,"internal-error"),at(n,t.name),at(r,t.name),v("boolean"===typeof h,t,"internal-error"),v("boolean"===typeof d,t,"internal-error"),at(i,t.name),at(o,t.name),at(s,t.name),at(a,t.name),at(c,t.name),at(u,t.name);const g=new ct({uid:l,auth:t,email:r,emailVerified:h,displayName:n,isAnonymous:d,photoURL:o,phoneNumber:i,tenantId:s,stsTokenManager:m,createdAt:c,lastLoginAt:u});return f&&Array.isArray(f)&&(g.providerData=f.map((t=>({...t})))),a&&(g._redirectEventId=a),g}static async _fromIdTokenResponse(t,e,n=!1){const r=new st;r.updateFromServerResponse(e);const i=new ct({uid:e.localId,auth:t,stsTokenManager:r,isAnonymous:n});return await tt(i),i}static async _fromGetAccountInfoResponse(t,e,n){const r=e.users[0];v(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?rt(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!i?.length,s=new st;s.updateFromIdToken(n);const a=new ct({uid:r.localId,auth:t,stsTokenManager:s,isAnonymous:o}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Z(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!i?.length};return Object.assign(a,c),a}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ut=new Map;function lt(t){w(t instanceof Function,"Expected a class definition");let e=ut.get(t);return e?(w(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,ut.set(t,e),e)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return void 0===e?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}ht.type="NONE";const dt=ht;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ft(t,e,n){return`firebase:${t}:${e}:${n}`}class pt{constructor(t,e,n){this.persistence=t,this.auth=e,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=ft(this.userKey,r.apiKey,i),this.fullPersistenceKey=ft("persistence",r.apiKey,i),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if("string"===typeof t){const e=await z(this.auth,{idToken:t}).catch((()=>{}));return e?ct._fromGetAccountInfoResponse(this.auth,e,t):null}return ct._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=t,e?this.setCurrentUser(e):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,n="authUser"){if(!e.length)return new pt(lt(dt),t,n);const r=(await Promise.all(e.map((async t=>{if(await t._isAvailable())return t})))).filter((t=>t));let i=r[0]||lt(dt);const o=ft(n,t.config.apiKey,t.name);let s=null;for(const c of e)try{const e=await c._get(o);if(e){let n;if("string"===typeof e){const r=await z(t,{idToken:e}).catch((()=>{}));if(!r)break;n=await ct._fromGetAccountInfoResponse(t,r,e)}else n=ct._fromJSON(t,e);c!==i&&(s=n),i=c;break}}catch{}const a=r.filter((t=>t._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],s&&await i._set(o,s.toJSON()),await Promise.all(e.map((async t=>{if(t!==i)try{await t._remove(o)}catch{}}))),new pt(i,t,n)):new pt(i,t,n)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_t(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(gt(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(bt(e))return"Blackberry";if(Et(e))return"Webos";if(yt(e))return"Safari";if((e.includes("chrome/")||vt(e))&&!e.includes("edge/"))return"Chrome";if(wt(e))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(e);if(2===n?.length)return n[1]}return"Other"}function gt(t=(0,i.ZQ)()){return/firefox\//i.test(t)}function yt(t=(0,i.ZQ)()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function vt(t=(0,i.ZQ)()){return/crios\//i.test(t)}function _t(t=(0,i.ZQ)()){return/iemobile/i.test(t)}function wt(t=(0,i.ZQ)()){return/android/i.test(t)}function bt(t=(0,i.ZQ)()){return/blackberry/i.test(t)}function Et(t=(0,i.ZQ)()){return/webos/i.test(t)}function Tt(t=(0,i.ZQ)()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Ct(t=(0,i.ZQ)()){return Tt(t)&&!!window.navigator?.standalone}function St(){return(0,i.lT)()&&10===document.documentMode}function It(t=(0,i.ZQ)()){return Tt(t)||wt(t)||Et(t)||bt(t)||/windows phone/i.test(t)||_t(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(t,e=[]){let n;switch(t){case"Browser":n=mt((0,i.ZQ)());break;case"Worker":n=`${mt((0,i.ZQ)())}-${t}`;break;default:n=t}const o=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${r.MF}/${o}`}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const n=e=>new Promise(((n,r)=>{try{const r=t(e);n(r)}catch(i){r(i)}}));n.onAbort=e,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const n of this.queue)await n(t),n.onAbort&&e.push(n.onAbort)}catch(n){e.reverse();for(const t of e)try{t()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n?.message})}}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dt(t,e={}){return P(t,"GET","/v2/passwordPolicy",O(t,e))}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const At=6;class Nt{constructor(t){const e=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=e.minPasswordLength??At,e.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=e.maxPasswordLength),void 0!==e.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=e.containsLowercaseCharacter),void 0!==e.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=e.containsUppercaseCharacter),void 0!==e.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=e.containsNumericCharacter),void 0!==e.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=e.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const e={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,e),this.validatePasswordCharacterOptions(t,e),e.isValid&&(e.isValid=e.meetsMinPasswordLength??!0),e.isValid&&(e.isValid=e.meetsMaxPasswordLength??!0),e.isValid&&(e.isValid=e.containsLowercaseLetter??!0),e.isValid&&(e.isValid=e.containsUppercaseLetter??!0),e.isValid&&(e.isValid=e.containsNumericCharacter??!0),e.isValid&&(e.isValid=e.containsNonAlphanumericCharacter??!0),e}validatePasswordLengthOptions(t,e){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(e.meetsMinPasswordLength=t.length>=n),r&&(e.meetsMaxPasswordLength=t.length<=r)}validatePasswordCharacterOptions(t,e){let n;this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);for(let r=0;r<t.length;r++)n=t.charAt(r),this.updatePasswordCharacterOptionsStatuses(e,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(t,e,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=i))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(t,e,n,r){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Rt(this),this.idTokenSubscription=new Rt(this),this.beforeStateQueue=new xt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=u,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise((t=>this._resolvePersistenceManagerAvailable=t))}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=lt(e)),this._initializationPromise=this.queue((async()=>{if(!this._deleted&&(this.persistenceManager=await pt.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(n){}await this.initializeCurrentUser(e),this.lastNotifiedUid=this.currentUser?.uid||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();return this.currentUser||t?this.currentUser&&t&&this.currentUser.uid===t.uid?(this._currentUser._assign(t),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(t,!0):void 0}async initializeCurrentUserFromIdToken(t){try{const e=await z(this,{idToken:t}),n=await ct._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(n)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if((0,r.xZ)(this.app)){const t=this.app.settings.authIdToken;return t?new Promise((e=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(t).then(e,e)))})):this.directlySetCurrentUser(null)}const e=await this.assertedPersistence.getCurrentUser();let n=e,i=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const e=this.redirectUser?._redirectEventId,r=n?._redirectEventId,o=await this.tryRedirectSignIn(t);e&&e!==r||!o?.user||(n=o.user,i=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(n)}catch(o){n=e,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(o)))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return v(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch(n){await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await tt(t)}catch(e){if("auth/network-request-failed"!==e?.code)return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=S()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if((0,r.xZ)(this.app))return Promise.reject(g(this));const e=t?(0,i.Ku)(t):null;return e&&v(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&v(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue((async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()}))}async signOut(){return(0,r.xZ)(this.app)?Promise.reject(g(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return(0,r.xZ)(this.app)?Promise.reject(g(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(lt(t))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await Dt(this),e=new Nt(t);null===this.tenantId?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new i.FA("auth","Firebase",t())}onAuthStateChanged(t,e,n){return this.registerStateListener(this.authStateSubscription,t,e,n)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,n){return this.registerStateListener(this.idTokenSubscription,t,e,n)}authStateReady(){return new Promise(((t,e)=>{if(this.currentUser)t();else{const n=this.onAuthStateChanged((()=>{n(),t()}),e)}}))}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};null!=this.tenantId&&(n.tenantId=this.tenantId),await ot(this,n)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,e){const n=await this.getOrInitRedirectPersistenceManager(e);return null===t?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&lt(t)||this._popupRedirectResolver;v(e,this,"argument-error"),this.redirectPersistenceManager=await pt.create(this,[lt(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue((async()=>{})),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(t)))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,n,r){if(this._deleted)return()=>{};const i="function"===typeof e?e:e.next.bind(e);let o=!1;const s=this._isInitialized?Promise.resolve():this._initializationPromise;if(v(s,this,"internal-error"),s.then((()=>{o||i(this.currentUser)})),"function"===typeof e){const i=t.addObserver(e,n,r);return()=>{o=!0,i()}}{const n=t.addObserver(e);return()=>{o=!0,n()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return v(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){t&&!this.frameworks.includes(t)&&(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=kt(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const e=await(this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader());e&&(t["X-Firebase-Client"]=e);const n=await this._getAppCheckToken();return n&&(t["X-Firebase-AppCheck"]=n),t}async _getAppCheckToken(){if((0,r.xZ)(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken());return t?.error&&h(`Error while retrieving App Check token: ${t.error}`),t?.token}}function Pt(t){return(0,i.Ku)(t)}class Rt{constructor(t){this.auth=t,this.observer=null,this.addObserver=(0,i.tD)((t=>this.observer=t))}get next(){return v(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mt={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Lt(t){Mt=t}function Ft(t){return Mt.loadJS(t)}function jt(){return Mt.recaptchaEnterpriseScript}function Ut(){return Mt.gapiScript}function Vt(t){return`__${t}${Math.floor(1e6*Math.random())}`}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(){this.enterprise=new Ht}ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}class Ht{ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}const Bt="recaptcha-enterprise",zt="NO_RECAPTCHA";class Wt{constructor(t){this.type=Bt,this.auth=Pt(t)}async verify(t="verify",e=!1){async function n(t){if(!e){if(null==t.tenantId&&null!=t._agentRecaptchaConfig)return t._agentRecaptchaConfig.siteKey;if(null!=t.tenantId&&void 0!==t._tenantRecaptchaConfigs[t.tenantId])return t._tenantRecaptchaConfigs[t.tenantId].siteKey}return new Promise((async(e,n)=>{H(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new $(r);return null==t.tenantId?t._agentRecaptchaConfig=n:t._tenantRecaptchaConfigs[t.tenantId]=n,e(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((t=>{n(t)}))}))}function r(e,n,r){const i=window.grecaptcha;V(i)?i.enterprise.ready((()=>{i.enterprise.execute(e,{action:t}).then((t=>{n(t)})).catch((()=>{n(zt)}))})):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){const t=new $t;return t.execute("siteKey",{action:"verify"})}return new Promise(((t,i)=>{n(this.auth).then((n=>{if(!e&&V(window.grecaptcha))r(n,t,i);else{if("undefined"===typeof window)return void i(new Error("RecaptchaVerifier is only supported in browser"));let e=jt();0!==e.length&&(e+=n),Ft(e).then((()=>{r(n,t,i)})).catch((t=>{i(t)}))}})).catch((t=>{i(t)}))}))}}async function qt(t,e,n,r=!1,i=!1){const o=new Wt(t);let s;if(i)s=zt;else try{s=await o.verify(n)}catch(c){s=await o.verify(n,!0)}const a={...e};if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in a){const t=a.phoneEnrollmentInfo.phoneNumber,e=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:t,recaptchaToken:e,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const t=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:t,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Kt(t,e,n,r,i){if("EMAIL_PASSWORD_PROVIDER"===i){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await qt(t,e,n,"getOobCode"===n);return r(t,i)}return r(t,e).catch((async i=>{if("auth/missing-recaptcha-token"===i.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await qt(t,e,n,"getOobCode"===n);return r(t,i)}return Promise.reject(i)}))}if("PHONE_PROVIDER"===i){if(t._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){const i=await qt(t,e,n);return r(t,i).catch((async i=>{if("AUDIT"===t._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")&&("auth/missing-recaptcha-token"===i.code||"auth/invalid-app-credential"===i.code)){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const i=await qt(t,e,n,!1,!0);return r(t,i)}return Promise.reject(i)}))}{const i=await qt(t,e,n,!1,!0);return r(t,i)}}return Promise.reject(i+" provider is not supported.")}async function Gt(t){const e=Pt(t),n=await H(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new $(n);if(null==e.tenantId?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()){const t=new Wt(e);t.verify()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(t,e){const n=(0,r.j6)(t,"auth");if(n.isInitialized()){const t=n.getImmediate(),r=n.getOptions();if((0,i.bD)(r,e??{}))return t;f(t,"already-initialized")}const o=n.initialize({options:e});return o}function Qt(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(lt);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function Xt(t,e,n){const r=Pt(t);v(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!!n?.disableWarnings,s=Jt(e),{host:a,port:c}=Zt(e),u=null===c?"":`:${c}`,l={url:`${s}//${a}${u}/`},h=Object.freeze({host:a,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator)return v(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void v((0,i.bD)(l,r.config.emulator)&&(0,i.bD)(h,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,(0,i.zJ)(a)?((0,i.gE)(`${s}//${a}${u}`),(0,i.P1)("Auth",!0)):o||ee()}function Jt(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Zt(t){const e=Jt(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const t=i[1];return{host:t,port:te(r.substr(t.length+1))}}{const[t,e]=r.split(":");return{host:t,port:te(e)}}}function te(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function ee(){function t(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",t):t())}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return _("not implemented")}_getIdTokenResponse(t){return _("not implemented")}_linkToIdToken(t,e){return _("not implemented")}_getReauthenticationResolver(t){return _("not implemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function re(t,e){return P(t,"POST","/v1/accounts:signUp",e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function ie(t,e){return M(t,"POST","/v1/accounts:signInWithPassword",O(t,e))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function oe(t,e){return M(t,"POST","/v1/accounts:signInWithEmailLink",O(t,e))}async function se(t,e){return M(t,"POST","/v1/accounts:signInWithEmailLink",O(t,e))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae extends ne{constructor(t,e,n,r=null){super("password",n),this._email=t,this._password=e,this._tenantId=r}static _fromEmailAndPassword(t,e){return new ae(t,e,"password")}static _fromEmailAndCode(t,e,n=null){return new ae(t,e,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e="string"===typeof t?JSON.parse(t):t;if(e?.email&&e?.password){if("password"===e.signInMethod)return this._fromEmailAndPassword(e.email,e.password);if("emailLink"===e.signInMethod)return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const e={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Kt(t,e,"signInWithPassword",ie,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return oe(t,{email:this._email,oobCode:this._password});default:f(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":const n={idToken:e,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Kt(t,n,"signUpPassword",re,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return se(t,{idToken:e,email:this._email,oobCode:this._password});default:f(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ce(t,e){return M(t,"POST","/v1/accounts:signInWithIdp",O(t,e))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ue="http://localhost";class le extends ne{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new le(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):f("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e="string"===typeof t?JSON.parse(t):t,{providerId:n,signInMethod:r,...i}=e;if(!n||!r)return null;const o=new le(n,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(t){const e=this.buildRequest();return ce(t,e)}_linkToIdToken(t,e){const n=this.buildRequest();return n.idToken=e,ce(t,n)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,ce(t,e)}buildRequest(){const t={requestUri:ue,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e["id_token"]=this.idToken),this.accessToken&&(e["access_token"]=this.accessToken),this.secret&&(e["oauth_token_secret"]=this.secret),e["providerId"]=this.providerId,this.nonce&&!this.pendingToken&&(e["nonce"]=this.nonce),t.postBody=(0,i.Am)(e)}return t}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function he(t,e){return P(t,"POST","/v1/accounts:sendVerificationCode",O(t,e))}async function de(t,e){return M(t,"POST","/v1/accounts:signInWithPhoneNumber",O(t,e))}async function fe(t,e){const n=await M(t,"POST","/v1/accounts:signInWithPhoneNumber",O(t,e));if(n.temporaryProof)throw U(t,"account-exists-with-different-credential",n);return n}const pe={["USER_NOT_FOUND"]:"user-not-found"};async function me(t,e){const n={...e,operation:"REAUTH"};return M(t,"POST","/v1/accounts:signInWithPhoneNumber",O(t,n),pe)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge extends ne{constructor(t){super("phone","phone"),this.params=t}static _fromVerification(t,e){return new ge({verificationId:t,verificationCode:e})}static _fromTokenResponse(t,e){return new ge({phoneNumber:t,temporaryProof:e})}_getIdTokenResponse(t){return de(t,this._makeVerificationRequest())}_linkToIdToken(t,e){return fe(t,{idToken:e,...this._makeVerificationRequest()})}_getReauthenticationResolver(t){return me(t,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:t,phoneNumber:e,verificationId:n,verificationCode:r}=this.params;return t&&e?{temporaryProof:t,phoneNumber:e}:{sessionInfo:n,code:r}}toJSON(){const t={providerId:this.providerId};return this.params.phoneNumber&&(t.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(t.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(t.verificationCode=this.params.verificationCode),this.params.verificationId&&(t.verificationId=this.params.verificationId),t}static fromJSON(t){"string"===typeof t&&(t=JSON.parse(t));const{verificationId:e,verificationCode:n,phoneNumber:r,temporaryProof:i}=t;return n||e||r||i?new ge({verificationId:e,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ye(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function ve(t){const e=(0,i.I9)((0,i.hp)(t))["link"],n=e?(0,i.I9)((0,i.hp)(e))["deep_link_id"]:null,r=(0,i.I9)((0,i.hp)(t))["deep_link_id"],o=r?(0,i.I9)((0,i.hp)(r))["link"]:null;return o||r||n||e||t}class _e{constructor(t){const e=(0,i.I9)((0,i.hp)(t)),n=e["apiKey"]??null,r=e["oobCode"]??null,o=ye(e["mode"]??null);v(n&&r&&o,"argument-error"),this.apiKey=n,this.operation=o,this.code=r,this.continueUrl=e["continueUrl"]??null,this.languageCode=e["lang"]??null,this.tenantId=e["tenantId"]??null}static parseLink(t){const e=ve(t);try{return new _e(e)}catch{return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class we{constructor(){this.providerId=we.PROVIDER_ID}static credential(t,e){return ae._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const n=_e.parseLink(e);return v(n,"argument-error"),ae._fromEmailAndCode(t,n.code,n.tenantId)}}we.PROVIDER_ID="password",we.EMAIL_PASSWORD_SIGN_IN_METHOD="password",we.EMAIL_LINK_SIGN_IN_METHOD="emailLink";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class be{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee extends be{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Te extends Ee{constructor(){super("facebook.com")}static credential(t){return le._fromParams({providerId:Te.PROVIDER_ID,signInMethod:Te.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Te.credentialFromTaggedObject(t)}static credentialFromError(t){return Te.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Te.credential(t.oauthAccessToken)}catch{return null}}}Te.FACEBOOK_SIGN_IN_METHOD="facebook.com",Te.PROVIDER_ID="facebook.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ce extends Ee{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return le._fromParams({providerId:Ce.PROVIDER_ID,signInMethod:Ce.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return Ce.credentialFromTaggedObject(t)}static credentialFromError(t){return Ce.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:n}=t;if(!e&&!n)return null;try{return Ce.credential(e,n)}catch{return null}}}Ce.GOOGLE_SIGN_IN_METHOD="google.com",Ce.PROVIDER_ID="google.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Se extends Ee{constructor(){super("github.com")}static credential(t){return le._fromParams({providerId:Se.PROVIDER_ID,signInMethod:Se.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Se.credentialFromTaggedObject(t)}static credentialFromError(t){return Se.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Se.credential(t.oauthAccessToken)}catch{return null}}}Se.GITHUB_SIGN_IN_METHOD="github.com",Se.PROVIDER_ID="github.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ie extends Ee{constructor(){super("twitter.com")}static credential(t,e){return le._fromParams({providerId:Ie.PROVIDER_ID,signInMethod:Ie.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return Ie.credentialFromTaggedObject(t)}static credentialFromError(t){return Ie.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:n}=t;if(!e||!n)return null;try{return Ie.credential(e,n)}catch{return null}}}Ie.TWITTER_SIGN_IN_METHOD="twitter.com",Ie.PROVIDER_ID="twitter.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class ke{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,n,r=!1){const i=await ct._fromIdTokenResponse(t,n,r),o=xe(n),s=new ke({user:i,providerId:o,_tokenResponse:n,operationType:e});return s}static async _forOperation(t,e,n){await t._updateTokensIfNecessary(n,!0);const r=xe(n);return new ke({user:t,providerId:r,_tokenResponse:n,operationType:e})}}function xe(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class De extends i.g{constructor(t,e,n,r){super(e.code,e.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,De.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:e.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,e,n,r){return new De(t,e,n,r)}}function Ae(t,e,n,r){const i="reauthenticate"===e?n._getReauthenticationResolver(t):n._getIdTokenResponse(t);return i.catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw De._fromErrorAndOperation(t,n,e,r);throw n}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ne(t,e,n=!1){const r=await Q(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ke._forOperation(t,"link",r)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function Oe(t,e,n=!1){const{auth:i}=t;if((0,r.xZ)(i.app))return Promise.reject(g(i));const o="reauthenticate";try{const r=await Q(t,Ae(i,o,e,t),n);v(r.idToken,i,"internal-error");const s=G(r.idToken);v(s,i,"internal-error");const{sub:a}=s;return v(t.uid===a,i,"user-mismatch"),ke._forOperation(t,o,r)}catch(s){throw"auth/user-not-found"===s?.code&&f(i,"user-mismatch"),s}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pe(t,e,n=!1){if((0,r.xZ)(t.app))return Promise.reject(g(t));const i="signIn",o=await Ae(t,i,e),s=await ke._fromIdTokenResponse(t,i,o);return n||await t._updateCurrentUser(s.user),s}async function Re(t,e){return Pe(Pt(t),e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function Me(t){const e=Pt(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function Le(t,e,n){return(0,r.xZ)(t.app)?Promise.reject(g(t)):Re((0,i.Ku)(t),we.credential(e,n)).catch((async e=>{throw"auth/password-does-not-meet-requirements"===e.code&&Me(t),e}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fe(t,e,n,r){return(0,i.Ku)(t).onIdTokenChanged(e,n,r)}function je(t,e,n){return(0,i.Ku)(t).beforeAuthStateChanged(e,n)}function Ue(t){return(0,i.Ku)(t).signOut()}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ve(t,e){return P(t,"POST","/v2/accounts/mfaEnrollment:start",O(t,e))}function $e(t,e){return P(t,"POST","/v2/accounts/mfaEnrollment:finalize",O(t,e))}function He(t,e){return P(t,"POST","/v2/accounts/mfaEnrollment:start",O(t,e))}function Be(t,e){return P(t,"POST","/v2/accounts/mfaEnrollment:finalize",O(t,e))}new WeakMap;const ze="__sak";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(ze,"1"),this.storage.removeItem(ze),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qe=1e3,Ke=10;class Ge extends We{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=It(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const n=this.storage.getItem(e),r=this.localCache[e];n!==r&&t(e,r,n)}}onStorageEvent(t,e=!1){if(!t.key)return void this.forAllChangedKeys(((t,e,n)=>{this.notifyListeners(t,n)}));const n=t.key;e?this.detachListener():this.stopPolling();const r=()=>{const t=this.storage.getItem(n);(e||this.localCache[n]!==t)&&this.notifyListeners(n,t)},i=this.storage.getItem(n);St()&&i!==t.newValue&&t.newValue!==t.oldValue?setTimeout(r,Ke):r()}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const r of Array.from(n))r(e?JSON.parse(e):e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((t,e,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:n}),!0)}))}),qe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}Ge.type="LOCAL";const Ye=Ge,Qe=1e3;
/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xe(t){const e=t.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),n=RegExp(`${e}=([^;]+)`);return document.cookie.match(n)?.[1]??null}function Je(t){const e="http:"===window.location.protocol;return`${e?"__dev_":"__HOST-"}FIREBASE_${t.split(":")[3]}`}class Ze{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(t){if(void 0===typeof window)return t;const e=new URL(`${window.location.origin}/__cookies__`);return e.searchParams.set("finalTarget",t),e}async _isAvailable(){return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(navigator.cookieEnabled??!0))}async _set(t,e){}async _get(t){if(!this._isAvailable())return null;const e=Je(t);if(window.cookieStore){const t=await window.cookieStore.get(e);return t?.value}return Xe(e)}async _remove(t){if(!this._isAvailable())return;const e=await this._get(t);if(!e)return;const n=Je(t);document.cookie=`${n}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`,await fetch("/__cookies__",{method:"DELETE"}).catch((()=>{}))}_addListener(t,e){if(!this._isAvailable())return;const n=Je(t);if(window.cookieStore){const t=t=>{const r=t.changed.find((t=>t.name===n));r&&e(r.value);const i=t.deleted.find((t=>t.name===n));i&&e(null)},r=()=>window.cookieStore.removeEventListener("change",t);return this.listenerUnsubscribes.set(e,r),window.cookieStore.addEventListener("change",t)}let r=Xe(n);const i=setInterval((()=>{const t=Xe(n);t!==r&&(e(t),r=t)}),Qe),o=()=>clearInterval(i);this.listenerUnsubscribes.set(e,o)}_removeListener(t,e){const n=this.listenerUnsubscribes.get(e);n&&(n(),this.listenerUnsubscribes.delete(e))}}Ze.type="COOKIE";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class tn extends We{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(t,e){}_removeListener(t,e){}}tn.type="SESSION";const en=tn;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nn(t){return Promise.all(t.map((async t=>{try{const e=await t;return{fulfilled:!0,value:e}}catch(e){return{fulfilled:!1,reason:e}}})))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find((e=>e.isListeningto(t)));if(e)return e;const n=new rn(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:n,eventType:r,data:i}=e.data,o=this.handlersMap[r];if(!o?.size)return;e.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const s=Array.from(o).map((async t=>t(e.origin,i))),a=await nn(s);e.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(t,e){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),e&&0!==this.handlersMap[t].size||delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function on(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(10*Math.random());return t+n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rn.receivers=[];class sn{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,n=50){const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise(((s,a)=>{const c=on("",20);r.port1.start();const u=setTimeout((()=>{a(new Error("unsupported_event"))}),n);o={messageChannel:r,onMessage(t){const e=t;if(e.data.eventId===c)switch(e.data.status){case"ack":clearTimeout(u),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),s(e.data.response);break;default:clearTimeout(u),clearTimeout(i),a(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:c,data:e},[r.port2])})).finally((()=>{o&&this.removeMessageHandler(o)}))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(){return window}function cn(t){an().location.href=t}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function un(){return"undefined"!==typeof an()["WorkerGlobalScope"]&&"function"===typeof an()["importScripts"]}async function ln(){if(!navigator?.serviceWorker)return null;try{const t=await navigator.serviceWorker.ready;return t.active}catch{return null}}function hn(){return navigator?.serviceWorker?.controller||null}function dn(){return un()?self:null}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fn="firebaseLocalStorageDb",pn=1,mn="firebaseLocalStorage",gn="fbase_key";class yn{constructor(t){this.request=t}toPromise(){return new Promise(((t,e)=>{this.request.addEventListener("success",(()=>{t(this.request.result)})),this.request.addEventListener("error",(()=>{e(this.request.error)}))}))}}function vn(t,e){return t.transaction([mn],e?"readwrite":"readonly").objectStore(mn)}function _n(){const t=indexedDB.deleteDatabase(fn);return new yn(t).toPromise()}function wn(){const t=indexedDB.open(fn,pn);return new Promise(((e,n)=>{t.addEventListener("error",(()=>{n(t.error)})),t.addEventListener("upgradeneeded",(()=>{const e=t.result;try{e.createObjectStore(mn,{keyPath:gn})}catch(r){n(r)}})),t.addEventListener("success",(async()=>{const n=t.result;n.objectStoreNames.contains(mn)?e(n):(n.close(),await _n(),e(await wn()))}))}))}async function bn(t,e,n){const r=vn(t,!0).put({[gn]:e,value:n});return new yn(r).toPromise()}async function En(t,e){const n=vn(t,!1).get(e),r=await new yn(n).toPromise();return void 0===r?null:r.value}function Tn(t,e){const n=vn(t,!0).delete(e);return new yn(n).toPromise()}const Cn=800,Sn=3;class In{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await wn()),this.db}async _withRetries(t){let e=0;while(1)try{const e=await this._openDb();return await t(e)}catch(n){if(e++>Sn)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return un()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=rn._getInstance(dn()),this.receiver._subscribe("keyChanged",(async(t,e)=>{const n=await this._poll();return{keyProcessed:n.includes(e.key)}})),this.receiver._subscribe("ping",(async(t,e)=>["keyChanged"]))}async initializeSender(){if(this.activeServiceWorker=await ln(),!this.activeServiceWorker)return;this.sender=new sn(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(this.sender&&this.activeServiceWorker&&hn()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await wn();return await bn(t,ze,"1"),await Tn(t,ze),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite((async()=>(await this._withRetries((n=>bn(n,t,e))),this.localCache[t]=e,this.notifyServiceWorker(t))))}async _get(t){const e=await this._withRetries((e=>En(e,t)));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite((async()=>(await this._withRetries((e=>Tn(e,t))),delete this.localCache[t],this.notifyServiceWorker(t))))}async _poll(){const t=await this._withRetries((t=>{const e=vn(t,!1).getAll();return new yn(e).toPromise()}));if(!t)return[];if(0!==this.pendingWrites)return[];const e=[],n=new Set;if(0!==t.length)for(const{fbase_key:r,value:i}of t)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),e.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),e.push(r));return e}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const r of Array.from(n))r(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),Cn)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}In.type="LOCAL";const kn=In;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(t,e){return P(t,"POST","/v2/accounts/mfaSignIn:start",O(t,e))}function Dn(t,e){return P(t,"POST","/v2/accounts/mfaSignIn:finalize",O(t,e))}function An(t,e){return P(t,"POST","/v2/accounts/mfaSignIn:finalize",O(t,e))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vt("rcb"),new I(3e4,6e4);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Nn="recaptcha";async function On(t,e,n){if(!t._getRecaptchaConfig())try{await Gt(t)}catch(r){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let r;if(r="string"===typeof e?{phoneNumber:e}:e,"session"in r){const e=r.session;if("phoneNumber"in r){v("enroll"===e.type,t,"internal-error");const i={idToken:e.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},o=async(t,e)=>{if(e.phoneEnrollmentInfo.captchaResponse===zt){v(n?.type===Nn,t,"argument-error");const r=await Pn(t,e,n);return Ve(t,r)}return Ve(t,e)},s=Kt(t,i,"mfaSmsEnrollment",o,"PHONE_PROVIDER"),a=await s.catch((t=>Promise.reject(t)));return a.phoneSessionInfo.sessionInfo}{v("signin"===e.type,t,"internal-error");const i=r.multiFactorHint?.uid||r.multiFactorUid;v(i,t,"missing-multi-factor-info");const o={mfaPendingCredential:e.credential,mfaEnrollmentId:i,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},s=async(t,e)=>{if(e.phoneSignInInfo.captchaResponse===zt){v(n?.type===Nn,t,"argument-error");const r=await Pn(t,e,n);return xn(t,r)}return xn(t,e)},a=Kt(t,o,"mfaSmsSignIn",s,"PHONE_PROVIDER"),c=await a.catch((t=>Promise.reject(t)));return c.phoneResponseInfo.sessionInfo}}{const e={phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"},i=async(t,e)=>{if(e.captchaResponse===zt){v(n?.type===Nn,t,"argument-error");const r=await Pn(t,e,n);return he(t,r)}return he(t,e)},o=Kt(t,e,"sendVerificationCode",i,"PHONE_PROVIDER"),s=await o.catch((t=>Promise.reject(t)));return s.sessionInfo}}finally{n?._reset()}}async function Pn(t,e,n){v(n.type===Nn,t,"argument-error");const r=await n.verify();v("string"===typeof r,t,"argument-error");const i={...e};if("phoneEnrollmentInfo"in i){const t=i.phoneEnrollmentInfo.phoneNumber,e=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,o=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:t,recaptchaToken:r,captchaResponse:e,clientType:n,recaptchaVersion:o}}),i}if("phoneSignInInfo"in i){const t=i.phoneSignInInfo.captchaResponse,e=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:t,clientType:e,recaptchaVersion:n}}),i}return Object.assign(i,{recaptchaToken:r}),i}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(t){this.providerId=Rn.PROVIDER_ID,this.auth=Pt(t)}verifyPhoneNumber(t,e){return On(this.auth,t,(0,i.Ku)(e))}static credential(t,e){return ge._fromVerification(t,e)}static credentialFromResult(t){const e=t;return Rn.credentialFromTaggedObject(e)}static credentialFromError(t){return Rn.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{phoneNumber:e,temporaryProof:n}=t;return e&&n?ge._fromTokenResponse(e,n):null}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Mn(t,e){return e?lt(e):(v(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rn.PROVIDER_ID="phone",Rn.PHONE_SIGN_IN_METHOD="phone";class Ln extends ne{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return ce(t,this._buildIdpRequest())}_linkToIdToken(t,e){return ce(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return ce(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function Fn(t){return Pe(t.auth,new Ln(t),t.bypassAuthState)}function jn(t){const{auth:e,user:n}=t;return v(n,e,"internal-error"),Oe(n,new Ln(t),t.bypassAuthState)}async function Un(t){const{auth:e,user:n}=t;return v(n,e,"internal-error"),Ne(n,new Ln(t),t.bypassAuthState)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(t,e,n,r,i=!1){this.auth=t,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise((async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}async onAuthEvent(t){const{urlResponse:e,sessionId:n,postBody:r,tenantId:i,error:o,type:s}=t;if(o)return void this.reject(o);const a={auth:this.auth,requestUri:e,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(s)(a))}catch(c){this.reject(c)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Fn;case"linkViaPopup":case"linkViaRedirect":return Un;case"reauthViaPopup":case"reauthViaRedirect":return jn;default:f(this.auth,"internal-error")}}resolve(t){w(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){w(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $n=new I(2e3,1e4);class Hn extends Vn{constructor(t,e,n,r,i){super(t,e,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Hn.currentPopupAction&&Hn.currentPopupAction.cancel(),Hn.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return v(t,this.auth,"internal-error"),t}async onExecution(){w(1===this.filter.length,"Popup operations only handle one event");const t=on();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((t=>{this.reject(t)})),this.resolver._isIframeWebStorageSupported(this.auth,(t=>{t||this.reject(p(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(p(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Hn.currentPopupAction=null}pollUserCancellation(){const t=()=>{this.authWindow?.window?.closed?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(p(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(t,$n.get())};t()}}Hn.currentPopupAction=null;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Bn="pendingRedirect",zn=new Map;class Wn extends Vn{constructor(t,e,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,n),this.eventId=null}async execute(){let t=zn.get(this.auth._key());if(!t){try{const e=await qn(this.resolver,this.auth),n=e?await super.execute():null;t=()=>Promise.resolve(n)}catch(e){t=()=>Promise.reject(e)}zn.set(this.auth._key(),t)}return this.bypassAuthState||zn.set(this.auth._key(),(()=>Promise.resolve(null))),t()}async onAuthEvent(t){if("signInViaRedirect"===t.type)return super.onAuthEvent(t);if("unknown"!==t.type){if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function qn(t,e){const n=Yn(e),r=Gn(t);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}function Kn(t,e){zn.set(t._key(),e)}function Gn(t){return lt(t._redirectPersistence)}function Yn(t){return ft(Bn,t.config.apiKey,t.name)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qn(t,e,n=!1){if((0,r.xZ)(t.app))return Promise.reject(g(t));const i=Pt(t),o=Mn(i,e),s=new Wn(i,o,n),a=await s.execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Xn=6e5;class Jn{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(t,n)&&(e=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))})),this.hasHandledPotentialRedirect||!er(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){if(t.error&&!tr(t)){const n=t.error.code?.split("auth/")[1]||"internal-error";e.onError(p(this.auth,n))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const n=null===e.eventId||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=Xn&&this.cachedEventUids.clear(),this.cachedEventUids.has(Zn(t))}saveEventToCache(t){this.cachedEventUids.add(Zn(t)),this.lastProcessedEventTime=Date.now()}}function Zn(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter((t=>t)).join("-")}function tr({type:t,error:e}){return"unknown"===t&&"auth/no-auth-event"===e?.code}function er(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tr(t);default:return!1}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nr(t,e={}){return P(t,"GET","/v1/projects",e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ir=/^https?/;async function or(t){if(t.config.emulator)return;const{authorizedDomains:e}=await nr(t);for(const n of e)try{if(sr(n))return}catch{}f(t,"unauthorized-domain")}function sr(t){const e=b(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return""===i.hostname&&""===r?"chrome-extension:"===n&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!ir.test(n))return!1;if(rr.test(t))return r===t;const i=t.replace(/\./g,"\\."),o=new RegExp("^(.+\\."+i+"|"+i+")$","i");return o.test(r)}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ar=new I(3e4,6e4);function cr(){const t=an().___jsl;if(t?.H)for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}function ur(t){return new Promise(((e,n)=>{function r(){cr(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{cr(),n(p(t,"network-request-failed"))},timeout:ar.get()})}if(an().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else{if(!an().gapi?.load){const e=Vt("iframefcb");return an()[e]=()=>{gapi.load?r():n(p(t,"network-request-failed"))},Ft(`${Ut()}?onload=${e}`).catch((t=>n(t)))}r()}})).catch((t=>{throw lr=null,t}))}let lr=null;function hr(t){return lr=lr||ur(t),lr}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dr=new I(5e3,15e3),fr="__/auth/iframe",pr="emulator/auth/iframe",mr={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gr=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yr(t){const e=t.config;v(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?k(e,pr):`https://${t.config.authDomain}/${fr}`,o={apiKey:e.apiKey,appName:t.name,v:r.MF},s=gr.get(t.config.apiHost);s&&(o.eid=s);const a=t._getFrameworks();return a.length&&(o.fw=a.join(",")),`${n}?${(0,i.Am)(o).slice(1)}`}async function vr(t){const e=await hr(t),n=an().gapi;return v(n,t,"internal-error"),e.open({where:document.body,url:yr(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mr,dontclear:!0},(e=>new Promise((async(n,r)=>{await e.restyle({setHideOnLeave:!1});const i=p(t,"network-request-failed"),o=an().setTimeout((()=>{r(i)}),dr.get());function s(){an().clearTimeout(o),n(e)}e.ping(s).then(s,(()=>{r(i)}))}))))}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _r={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},wr=500,br=600,Er="_blank",Tr="http://localhost";class Cr{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(t){}}}function Sr(t,e,n,r=wr,o=br){const s=Math.max((window.screen.availHeight-o)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u={..._r,width:r.toString(),height:o.toString(),top:s,left:a},l=(0,i.ZQ)().toLowerCase();n&&(c=vt(l)?Er:n),gt(l)&&(e=e||Tr,u.scrollbars="yes");const h=Object.entries(u).reduce(((t,[e,n])=>`${t}${e}=${n},`),"");if(Ct(l)&&"_self"!==c)return Ir(e||"",c),new Cr(null);const d=window.open(e||"",c,h);v(d,t,"popup-blocked");try{d.focus()}catch(f){}return new Cr(d)}function Ir(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kr="__/auth/handler",xr="emulator/auth/handler",Dr=encodeURIComponent("fac");async function Ar(t,e,n,o,s,a){v(t.config.authDomain,t,"auth-domain-config-required"),v(t.config.apiKey,t,"invalid-api-key");const c={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:o,v:r.MF,eventId:s};if(e instanceof be){e.setDefaultLanguage(t.languageCode),c.providerId=e.providerId||"",(0,i.Im)(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[t,e]of Object.entries(a||{}))c[t]=e}if(e instanceof Ee){const t=e.getScopes().filter((t=>""!==t));t.length>0&&(c.scopes=t.join(","))}t.tenantId&&(c.tid=t.tenantId);const u=c;for(const r of Object.keys(u))void 0===u[r]&&delete u[r];const l=await t._getAppCheckToken(),h=l?`#${Dr}=${encodeURIComponent(l)}`:"";return`${Nr(t)}?${(0,i.Am)(u).slice(1)}${h}`}function Nr({config:t}){return t.emulator?k(t,xr):`https://${t.authDomain}/${kr}`}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or="webStorageSupport";class Pr{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=en,this._completeRedirectFn=Qn,this._overrideRedirectResult=Kn}async _openPopup(t,e,n,r){w(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const i=await Ar(t,e,n,b(),r);return Sr(t,i,on())}async _openRedirect(t,e,n,r){await this._originValidation(t);const i=await Ar(t,e,n,b(),r);return cn(i),new Promise((()=>{}))}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:t,promise:n}=this.eventManagers[e];return t?Promise.resolve(t):(w(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(t);return this.eventManagers[e]={promise:n},n.catch((()=>{delete this.eventManagers[e]})),n}async initAndGetManager(t){const e=await vr(t),n=new Jn(t);return e.register("authEvent",(e=>{v(e?.authEvent,t,"invalid-auth-event");const r=n.onEvent(e.authEvent);return{status:r?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=e,n}_isIframeWebStorageSupported(t,e){const n=this.iframes[t._key()];n.send(Or,{type:Or},(n=>{const r=n?.[0]?.[Or];void 0!==r&&e(!!r),f(t,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=or(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return It()||yt()||Tt()}}const Rr=Pr;class Mr{constructor(t){this.factorId=t}_process(t,e,n){switch(e.type){case"enroll":return this._finalizeEnroll(t,e.credential,n);case"signin":return this._finalizeSignIn(t,e.credential);default:return _("unexpected MultiFactorSessionType")}}}class Lr extends Mr{constructor(t){super("phone"),this.credential=t}static _fromCredential(t){return new Lr(t)}_finalizeEnroll(t,e,n){return $e(t,{idToken:e,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(t,e){return Dn(t,{mfaPendingCredential:e,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class Fr{constructor(){}static assertion(t){return Lr._fromCredential(t)}}Fr.FACTOR_ID="phone";class jr{static assertionForEnrollment(t,e){return Ur._fromSecret(t,e)}static assertionForSignIn(t,e){return Ur._fromEnrollmentId(t,e)}static async generateSecret(t){const e=t;v("undefined"!==typeof e.user?.auth,"internal-error");const n=await He(e.user.auth,{idToken:e.credential,totpEnrollmentInfo:{}});return Vr._fromStartTotpMfaEnrollmentResponse(n,e.user.auth)}}jr.FACTOR_ID="totp";class Ur extends Mr{constructor(t,e,n){super("totp"),this.otp=t,this.enrollmentId=e,this.secret=n}static _fromSecret(t,e){return new Ur(e,void 0,t)}static _fromEnrollmentId(t,e){return new Ur(e,t)}async _finalizeEnroll(t,e,n){return v("undefined"!==typeof this.secret,t,"argument-error"),Be(t,{idToken:e,displayName:n,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)})}async _finalizeSignIn(t,e){v(void 0!==this.enrollmentId&&void 0!==this.otp,t,"argument-error");const n={verificationCode:this.otp};return An(t,{mfaPendingCredential:e,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:n})}}class Vr{constructor(t,e,n,r,i,o,s){this.sessionInfo=o,this.auth=s,this.secretKey=t,this.hashingAlgorithm=e,this.codeLength=n,this.codeIntervalSeconds=r,this.enrollmentCompletionDeadline=i}static _fromStartTotpMfaEnrollmentResponse(t,e){return new Vr(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,e)}_makeTotpVerificationInfo(t){return{sessionInfo:this.sessionInfo,verificationCode:t}}generateQrCodeUrl(t,e){let n=!1;return($r(t)||$r(e))&&(n=!0),n&&($r(t)&&(t=this.auth.currentUser?.email||"unknownuser"),$r(e)&&(e=this.auth.name)),`otpauth://totp/${e}:${t}?secret=${this.secretKey}&issuer=${e}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}}function $r(t){return"undefined"===typeof t||0===t?.length}var Hr="@firebase/auth",Br="1.11.0";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class zr{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;const e=await this.auth.currentUser.getIdToken(t);return{accessToken:e}}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged((e=>{t(e?.stsTokenManager.accessToken||null)}));this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){v(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wr(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function qr(t){(0,r.om)(new s.uA("auth",((e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;v(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:kt(t)},u=new Ot(r,i,o,c);return Qt(u,n),u}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((t,e,n)=>{const r=t.getProvider("auth-internal");r.initialize()}))),(0,r.om)(new s.uA("auth-internal",(t=>{const e=Pt(t.getProvider("auth").getImmediate());return(t=>new zr(t))(e)}),"PRIVATE").setInstantiationMode("EXPLICIT")),(0,r.KO)(Hr,Br,Wr(t)),(0,r.KO)(Hr,Br,"esm2020")}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr=300,Gr=(0,i.XA)("authIdTokenMaxAge")||Kr;let Yr=null;const Qr=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&((new Date).getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Gr)return;const i=n?.token;Yr!==i&&(Yr=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Xr(t=(0,r.Sx)()){const e=(0,r.j6)(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Yt(t,{popupRedirectResolver:Rr,persistence:[kn,Ye,en]}),o=(0,i.XA)("authTokenSyncURL");if(o&&"boolean"===typeof isSecureContext&&isSecureContext){const t=new URL(o,location.origin);if(location.origin===t.origin){const e=Qr(t.toString());je(n,e,(()=>e(n.currentUser))),Fe(n,(t=>e(t)))}}const s=(0,i.Tj)("auth");return s&&Xt(n,`http://${s}`),n}function Jr(){return document.getElementsByTagName("head")?.[0]??document}Lt({loadJS(t){return new Promise(((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=t=>{const e=p("internal-error");e.customData=t,n(e)},r.type="text/javascript",r.charset="UTF-8",Jr().appendChild(r)}))},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),qr("Browser")},4402:function(t,e,n){"use strict";var r=n(9504),i=Set.prototype;t.exports={Set:Set,add:r(i.add),has:r(i.has),remove:r(i["delete"]),proto:i}},4449:function(t,e,n){"use strict";var r=n(7080),i=n(4402).has,o=n(5170),s=n(3789),a=n(8469),c=n(507),u=n(9539);t.exports=function(t){var e=r(this),n=s(t);if(o(e)<=n.size)return!1!==a(e,(function(t){if(n.includes(t))return!1}),!0);var l=n.getIterator();return!1!==c(l,(function(t){if(i(e,t))return u(l,"normal",!1)}))}},4495:function(t,e,n){"use strict";var r=n(9519),i=n(9039),o=n(4576),s=o.String;t.exports=!!Object.getOwnPropertySymbols&&!i((function(){var t=Symbol("symbol detection");return!s(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},4527:function(t,e,n){"use strict";var r=n(3724),i=n(4376),o=TypeError,s=Object.getOwnPropertyDescriptor,a=r&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();t.exports=a?function(t,e){if(i(t)&&!s(t,"length").writable)throw new o("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e}},4549:function(t,e,n){"use strict";var r=n(4576);t.exports=function(t,e){var n=r.Iterator,i=n&&n.prototype,o=i&&i[t],s=!1;if(o)try{o.call({next:function(){return{done:!0}},return:function(){s=!0}},-1)}catch(a){a instanceof e||(s=!1)}if(!s)return o}},4576:function(t,e,n){"use strict";var r=function(t){return t&&t.Math===Math&&t};t.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n.g&&n.g)||r("object"==typeof this&&this)||function(){return this}()||Function("return this")()},4659:function(t,e,n){"use strict";var r=n(3724),i=n(4913),o=n(6980);t.exports=function(t,e,n){r?i.f(t,e,o(0,n)):t[e]=n}},4901:function(t){"use strict";var e="object"==typeof document&&document.all;t.exports="undefined"==typeof e&&void 0!==e?function(t){return"function"==typeof t||t===e}:function(t){return"function"==typeof t}},4913:function(t,e,n){"use strict";var r=n(3724),i=n(5917),o=n(8686),s=n(8551),a=n(6969),c=TypeError,u=Object.defineProperty,l=Object.getOwnPropertyDescriptor,h="enumerable",d="configurable",f="writable";e.f=r?o?function(t,e,n){if(s(t),e=a(e),s(n),"function"===typeof t&&"prototype"===e&&"value"in n&&f in n&&!n[f]){var r=l(t,e);r&&r[f]&&(t[e]=n.value,n={configurable:d in n?n[d]:r[d],enumerable:h in n?n[h]:r[h],writable:!1})}return u(t,e,n)}:u:function(t,e,n){if(s(t),e=a(e),s(n),i)try{return u(t,e,n)}catch(r){}if("get"in n||"set"in n)throw new c("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},4916:function(t,e,n){"use strict";var r=n(7751),i=function(t){return{size:t,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}},o=function(t){return{size:t,has:function(){return!0},keys:function(){throw new Error("e")}}};t.exports=function(t,e){var n=r("Set");try{(new n)[t](i(0));try{return(new n)[t](i(-1)),!1}catch(a){if(!e)return!0;try{return(new n)[t](o(-1/0)),!1}catch(c){var s=new n;return s.add(1),s.add(2),e(s[t](o(1/0)))}}}catch(c){return!1}}},4963:function(t,e,n){"use strict";n.d(e,{A:function(){return h}});const r="undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var i={randomUUID:r};let o;const s=new Uint8Array(16);function a(){if(!o){if("undefined"===typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");o=crypto.getRandomValues.bind(crypto)}return o(s)}n(4114);const c=[];for(let d=0;d<256;++d)c.push((d+256).toString(16).slice(1));function u(t,e=0){return(c[t[e+0]]+c[t[e+1]]+c[t[e+2]]+c[t[e+3]]+"-"+c[t[e+4]]+c[t[e+5]]+"-"+c[t[e+6]]+c[t[e+7]]+"-"+c[t[e+8]]+c[t[e+9]]+"-"+c[t[e+10]]+c[t[e+11]]+c[t[e+12]]+c[t[e+13]]+c[t[e+14]]+c[t[e+15]]).toLowerCase()}function l(t,e,n){if(i.randomUUID&&!e&&!t)return i.randomUUID();t=t||{};const r=t.random??t.rng?.()??a();if(r.length<16)throw new Error("Random bytes length must be >= 16");if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){if(n=n||0,n<0||n+16>e.length)throw new RangeError(`UUID byte range ${n}:${n+15} is out of buffer bounds`);for(let t=0;t<16;++t)e[n+t]=r[t];return e}return u(r)}var h=l},4979:function(t,e,n){"use strict";var r=n(6518),i=n(4576),o=n(7751),s=n(6980),a=n(4913).f,c=n(9297),u=n(679),l=n(3167),h=n(2603),d=n(5002),f=n(6193),p=n(3724),m=n(6395),g="DOMException",y=o("Error"),v=o(g),_=function(){u(this,w);var t=arguments.length,e=h(t<1?void 0:arguments[0]),n=h(t<2?void 0:arguments[1],"Error"),r=new v(e,n),i=new y(e);return i.name=g,a(r,"stack",s(1,f(i.stack,1))),l(r,this,_),r},w=_.prototype=v.prototype,b="stack"in new y(g),E="stack"in new v(1,2),T=v&&p&&Object.getOwnPropertyDescriptor(i,g),C=!!T&&!(T.writable&&T.configurable),S=b&&!C&&!E;r({global:!0,constructor:!0,forced:m||S},{DOMException:S?_:v});var I=o(g),k=I.prototype;if(k.constructor!==I)for(var x in m||a(k,"constructor",s(1,I)),d)if(c(d,x)){var D=d[x],A=D.s;c(I,A)||a(I,A,s(6,D.c))}},5002:function(t){"use strict";t.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},5024:function(t,e,n){"use strict";var r=n(6518),i=n(3650),o=n(4916);r({target:"Set",proto:!0,real:!0,forced:!o("symmetricDifference")},{symmetricDifference:i})},5031:function(t,e,n){"use strict";var r=n(7751),i=n(9504),o=n(8480),s=n(3717),a=n(8551),c=i([].concat);t.exports=r("Reflect","ownKeys")||function(t){var e=o.f(a(t)),n=s.f;return n?c(e,n(t)):e}},5130:function(t,e,n){"use strict";n.d(e,{Ef:function(){return nt},Jo:function(){return K},jR:function(){return J},u1:function(){return G}});n(4114),n(8111),n(2489),n(7588),n(1701),n(3579),n(7642),n(8004),n(3853),n(5876),n(2475),n(5024),n(1698);var r=n(6768),i=n(4232);n(144);
/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/
let o;const s="undefined"!==typeof window&&window.trustedTypes;if(s)try{o=s.createPolicy("vue",{createHTML:t=>t})}catch(ot){}const a=o?t=>o.createHTML(t):t=>t,c="http://www.w3.org/2000/svg",u="http://www.w3.org/1998/Math/MathML",l="undefined"!==typeof document?document:null,h=l&&l.createElement("template"),d={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i="svg"===e?l.createElementNS(c,t):"mathml"===e?l.createElementNS(u,t):n?l.createElement(t,{is:n}):l.createElement(t);return"select"===t&&r&&null!=r.multiple&&i.setAttribute("multiple",r.multiple),i},createText:t=>l.createTextNode(t),createComment:t=>l.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>l.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,o){const s=n?n.previousSibling:e.lastChild;if(i&&(i===o||i.nextSibling)){while(1)if(e.insertBefore(i.cloneNode(!0),n),i===o||!(i=i.nextSibling))break}else{h.innerHTML=a("svg"===r?`<svg>${t}</svg>`:"mathml"===r?`<math>${t}</math>`:t);const i=h.content;if("svg"===r||"mathml"===r){const t=i.firstChild;while(t.firstChild)i.appendChild(t.firstChild);i.removeChild(t)}e.insertBefore(i,n)}return[s?s.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},f=Symbol("_vtc"),p={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};r.QP;function m(t,e,n){const r=t[f];r&&(e=(e?[e,...r]:[...r]).join(" ")),null==e?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const g=Symbol("_vod"),y=Symbol("_vsh");const v=Symbol("");const _=/(^|;)\s*display\s*:/;function w(t,e,n){const r=t.style,o=(0,i.Kg)(n);let s=!1;if(n&&!o){if(e)if((0,i.Kg)(e))for(const t of e.split(";")){const e=t.slice(0,t.indexOf(":")).trim();null==n[e]&&E(r,e,"")}else for(const t in e)null==n[t]&&E(r,t,"");for(const t in n)"display"===t&&(s=!0),E(r,t,n[t])}else if(o){if(e!==n){const t=r[v];t&&(n+=";"+t),r.cssText=n,s=_.test(n)}}else e&&t.removeAttribute("style");g in t&&(t[g]=s?r.display:"",t[y]&&(r.display="none"))}const b=/\s*!important$/;function E(t,e,n){if((0,i.cy)(n))n.forEach((n=>E(t,e,n)));else if(null==n&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=S(t,e);b.test(n)?t.setProperty((0,i.Tg)(r),n.replace(b,""),"important"):t[r]=n}}const T=["Webkit","Moz","ms"],C={};function S(t,e){const n=C[e];if(n)return n;let r=(0,i.PT)(e);if("filter"!==r&&r in t)return C[e]=r;r=(0,i.ZH)(r);for(let i=0;i<T.length;i++){const n=T[i]+r;if(n in t)return C[e]=n}return e}const I="http://www.w3.org/1999/xlink";function k(t,e,n,r,o,s=(0,i.J$)(e)){r&&e.startsWith("xlink:")?null==n?t.removeAttributeNS(I,e.slice(6,e.length)):t.setAttributeNS(I,e,n):null==n||s&&!(0,i.Y2)(n)?t.removeAttribute(e):t.setAttribute(e,s?"":(0,i.Bm)(n)?String(n):n)}function x(t,e,n,r,o){if("innerHTML"===e||"textContent"===e)return void(null!=n&&(t[e]="innerHTML"===e?a(n):n));const s=t.tagName;if("value"===e&&"PROGRESS"!==s&&!s.includes("-")){const r="OPTION"===s?t.getAttribute("value")||"":t.value,i=null==n?"checkbox"===t.type?"on":"":String(n);return r===i&&"_value"in t||(t.value=i),null==n&&t.removeAttribute(e),void(t._value=n)}let c=!1;if(""===n||null==n){const r=typeof t[e];"boolean"===r?n=(0,i.Y2)(n):null==n&&"string"===r?(n="",c=!0):"number"===r&&(n=0,c=!0)}try{t[e]=n}catch(ot){0}c&&t.removeAttribute(o||e)}function D(t,e,n,r){t.addEventListener(e,n,r)}function A(t,e,n,r){t.removeEventListener(e,n,r)}const N=Symbol("_vei");function O(t,e,n,r,i=null){const o=t[N]||(t[N]={}),s=o[e];if(r&&s)s.value=r;else{const[n,a]=R(e);if(r){const s=o[e]=j(r,i);D(t,n,s,a)}else s&&(A(t,n,s,a),o[e]=void 0)}}const P=/(?:Once|Passive|Capture)$/;function R(t){let e;if(P.test(t)){let n;e={};while(n=t.match(P))t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}const n=":"===t[2]?t.slice(3):(0,i.Tg)(t.slice(2));return[n,e]}let M=0;const L=Promise.resolve(),F=()=>M||(L.then((()=>M=0)),M=Date.now());function j(t,e){const n=t=>{if(t._vts){if(t._vts<=n.attached)return}else t._vts=Date.now();(0,r.qL)(U(t,n.value),e,5,[t])};return n.value=t,n.attached=F(),n}function U(t,e){if((0,i.cy)(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map((t=>e=>!e._stopped&&t&&t(e)))}return e}const V=t=>111===t.charCodeAt(0)&&110===t.charCodeAt(1)&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,$=(t,e,n,r,o,s)=>{const a="svg"===o;"class"===e?m(t,r,a):"style"===e?w(t,n,r):(0,i.Mp)(e)?(0,i.CP)(e)||O(t,e,n,r,s):("."===e[0]?(e=e.slice(1),1):"^"===e[0]?(e=e.slice(1),0):H(t,e,r,a))?(x(t,e,r),t.tagName.includes("-")||"value"!==e&&"checked"!==e&&"selected"!==e||k(t,e,r,a,s,"value"!==e)):!t._isVueCE||!/[A-Z]/.test(e)&&(0,i.Kg)(r)?("true-value"===e?t._trueValue=r:"false-value"===e&&(t._falseValue=r),k(t,e,r,a)):x(t,(0,i.PT)(e),r,s,e)};function H(t,e,n,r){if(r)return"innerHTML"===e||"textContent"===e||!!(e in t&&V(e)&&(0,i.Tn)(n));if("spellcheck"===e||"draggable"===e||"translate"===e)return!1;if("form"===e)return!1;if("list"===e&&"INPUT"===t.tagName)return!1;if("type"===e&&"TEXTAREA"===t.tagName)return!1;if("width"===e||"height"===e){const e=t.tagName;if("IMG"===e||"VIDEO"===e||"CANVAS"===e||"SOURCE"===e)return!1}return(!V(e)||!(0,i.Kg)(n))&&e in t}
/*! #__NO_SIDE_EFFECTS__ */
"undefined"!==typeof HTMLElement&&HTMLElement;Symbol("_moveCb"),Symbol("_enterCb");const B=t=>{const e=t.props["onUpdate:modelValue"]||!1;return(0,i.cy)(e)?t=>(0,i.DY)(e,t):e};function z(t){t.target.composing=!0}function W(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const q=Symbol("_assign"),K={created(t,{modifiers:{lazy:e,trim:n,number:r}},o){t[q]=B(o);const s=r||o.props&&"number"===o.props.type;D(t,e?"change":"input",(e=>{if(e.target.composing)return;let r=t.value;n&&(r=r.trim()),s&&(r=(0,i.bB)(r)),t[q](r)})),n&&D(t,"change",(()=>{t.value=t.value.trim()})),e||(D(t,"compositionstart",z),D(t,"compositionend",W),D(t,"change",W))},mounted(t,{value:e}){t.value=null==e?"":e},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:o,number:s}},a){if(t[q]=B(a),t.composing)return;const c=!s&&"number"!==t.type||/^0\d/.test(t.value)?t.value:(0,i.bB)(t.value),u=null==e?"":e;if(c!==u){if(document.activeElement===t&&"range"!==t.type){if(r&&e===n)return;if(o&&t.value.trim()===u)return}t.value=u}}};const G={deep:!0,created(t,{value:e,modifiers:{number:n}},o){const s=(0,i.vM)(e);D(t,"change",(()=>{const e=Array.prototype.filter.call(t.options,(t=>t.selected)).map((t=>n?(0,i.bB)(Q(t)):Q(t)));t[q](t.multiple?s?new Set(e):e:e[0]),t._assigning=!0,(0,r.dY)((()=>{t._assigning=!1}))})),t[q]=B(o)},mounted(t,{value:e}){Y(t,e)},beforeUpdate(t,e,n){t[q]=B(n)},updated(t,{value:e}){t._assigning||Y(t,e)}};function Y(t,e){const n=t.multiple,r=(0,i.cy)(e);if(!n||r||(0,i.vM)(e)){for(let o=0,s=t.options.length;o<s;o++){const s=t.options[o],a=Q(s);if(n)if(r){const t=typeof a;s.selected="string"===t||"number"===t?e.some((t=>String(t)===String(a))):(0,i.u3)(e,a)>-1}else s.selected=e.has(a);else if((0,i.BX)(Q(s),e))return void(t.selectedIndex!==o&&(t.selectedIndex=o))}n||-1===t.selectedIndex||(t.selectedIndex=-1)}}function Q(t){return"_value"in t?t._value:t.value}const X={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},J=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=n=>{if(!("key"in n))return;const r=(0,i.Tg)(n.key);return e.some((t=>t===r||X[t]===r))?t(n):void 0})},Z=(0,i.X$)({patchProp:$},d);let tt;function et(){return tt||(tt=(0,r.K9)(Z))}const nt=(...t)=>{const e=et().createApp(...t);const{mount:n}=e;return e.mount=t=>{const r=it(t);if(!r)return;const o=e._component;(0,i.Tn)(o)||o.render||o.template||(o.template=r.innerHTML),1===r.nodeType&&(r.textContent="");const s=n(r,!1,rt(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),s},e};function rt(t){return t instanceof SVGElement?"svg":"function"===typeof MathMLElement&&t instanceof MathMLElement?"mathml":void 0}function it(t){if((0,i.Kg)(t)){const e=document.querySelector(t);return e}return t}},5170:function(t,e,n){"use strict";var r=n(6706),i=n(4402);t.exports=r(i.proto,"size","get")||function(t){return t.size}},5397:function(t,e,n){"use strict";var r=n(7055),i=n(7750);t.exports=function(t){return r(i(t))}},5555:function(t,e,n){"use strict";n.d(e,{gO:function(){return Tt}});n(8111),n(2489),n(116),n(7588),n(8237),n(1701),n(4114),n(4979);function r(t,e){if(t.match(/^[a-z]+:\/\//i))return t;if(t.match(/^\/\//))return window.location.protocol+t;if(t.match(/^[a-z]+:/i))return t;const n=document.implementation.createHTMLDocument(),r=n.createElement("base"),i=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(i),e&&(r.href=e),i.href=t,i.href}const i=(()=>{let t=0;const e=()=>`0000${(Math.random()*36**4|0).toString(36)}`.slice(-4);return()=>(t+=1,`u${e()}${t}`)})();function o(t){const e=[];for(let n=0,r=t.length;n<r;n++)e.push(t[n]);return e}let s=null;function a(t={}){return s||(t.includeStyleProperties?(s=t.includeStyleProperties,s):(s=o(window.getComputedStyle(document.documentElement)),s))}function c(t,e){const n=t.ownerDocument.defaultView||window,r=n.getComputedStyle(t).getPropertyValue(e);return r?parseFloat(r.replace("px","")):0}function u(t){const e=c(t,"border-left-width"),n=c(t,"border-right-width");return t.clientWidth+e+n}function l(t){const e=c(t,"border-top-width"),n=c(t,"border-bottom-width");return t.clientHeight+e+n}function h(t,e={}){const n=e.width||u(t),r=e.height||l(t);return{width:n,height:r}}function d(){let t,e;try{e=process}catch(r){}const n=e&&e.env?e.env.devicePixelRatio:null;return n&&(t=parseInt(n,10),Number.isNaN(t)&&(t=1)),t||window.devicePixelRatio||1}const f=16384;function p(t){(t.width>f||t.height>f)&&(t.width>f&&t.height>f?t.width>t.height?(t.height*=f/t.width,t.width=f):(t.width*=f/t.height,t.height=f):t.width>f?(t.height*=f/t.width,t.width=f):(t.width*=f/t.height,t.height=f))}function m(t){return new Promise(((e,n)=>{const r=new Image;r.onload=()=>{r.decode().then((()=>{requestAnimationFrame((()=>e(r)))}))},r.onerror=n,r.crossOrigin="anonymous",r.decoding="async",r.src=t}))}async function g(t){return Promise.resolve().then((()=>(new XMLSerializer).serializeToString(t))).then(encodeURIComponent).then((t=>`data:image/svg+xml;charset=utf-8,${t}`))}async function y(t,e,n){const r="http://www.w3.org/2000/svg",i=document.createElementNS(r,"svg"),o=document.createElementNS(r,"foreignObject");return i.setAttribute("width",`${e}`),i.setAttribute("height",`${n}`),i.setAttribute("viewBox",`0 0 ${e} ${n}`),o.setAttribute("width","100%"),o.setAttribute("height","100%"),o.setAttribute("x","0"),o.setAttribute("y","0"),o.setAttribute("externalResourcesRequired","true"),i.appendChild(o),o.appendChild(t),g(i)}const v=(t,e)=>{if(t instanceof e)return!0;const n=Object.getPrototypeOf(t);return null!==n&&(n.constructor.name===e.name||v(n,e))};function _(t){const e=t.getPropertyValue("content");return`${t.cssText} content: '${e.replace(/'|"/g,"")}';`}function w(t,e){return a(e).map((e=>{const n=t.getPropertyValue(e),r=t.getPropertyPriority(e);return`${e}: ${n}${r?" !important":""};`})).join(" ")}function b(t,e,n,r){const i=`.${t}:${e}`,o=n.cssText?_(n):w(n,r);return document.createTextNode(`${i}{${o}}`)}function E(t,e,n,r){const o=window.getComputedStyle(t,n),s=o.getPropertyValue("content");if(""===s||"none"===s)return;const a=i();try{e.className=`${e.className} ${a}`}catch(u){return}const c=document.createElement("style");c.appendChild(b(a,n,o,r)),e.appendChild(c)}function T(t,e,n){E(t,e,":before",n),E(t,e,":after",n)}const C="application/font-woff",S="image/jpeg",I={woff:C,woff2:C,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:S,jpeg:S,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function k(t){const e=/\.([^./]*?)$/g.exec(t);return e?e[1]:""}function x(t){const e=k(t).toLowerCase();return I[e]||""}function D(t){return t.split(/,/)[1]}function A(t){return-1!==t.search(/^(data:)/)}function N(t,e){return`data:${e};base64,${t}`}async function O(t,e,n){const r=await fetch(t,e);if(404===r.status)throw new Error(`Resource "${r.url}" not found`);const i=await r.blob();return new Promise(((t,e)=>{const o=new FileReader;o.onerror=e,o.onloadend=()=>{try{t(n({res:r,result:o.result}))}catch(i){e(i)}},o.readAsDataURL(i)}))}const P={};function R(t,e,n){let r=t.replace(/\?.*/,"");return n&&(r=t),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),e?`[${e}]${r}`:r}async function M(t,e,n){const r=R(t,e,n.includeQueryParams);if(null!=P[r])return P[r];let i;n.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+(new Date).getTime());try{const r=await O(t,n.fetchRequestInit,(({res:t,result:n})=>(e||(e=t.headers.get("Content-Type")||""),D(n))));i=N(r,e)}catch(o){i=n.imagePlaceholder||"";let e=`Failed to fetch resource: ${t}`;o&&(e="string"===typeof o?o:o.message),e&&console.warn(e)}return P[r]=i,i}async function L(t){const e=t.toDataURL();return"data:,"===e?t.cloneNode(!1):m(e)}async function F(t,e){if(t.currentSrc){const e=document.createElement("canvas"),n=e.getContext("2d");e.width=t.clientWidth,e.height=t.clientHeight,null===n||void 0===n||n.drawImage(t,0,0,e.width,e.height);const r=e.toDataURL();return m(r)}const n=t.poster,r=x(n),i=await M(n,r,e);return m(i)}async function j(t,e){var n;try{if(null===(n=null===t||void 0===t?void 0:t.contentDocument)||void 0===n?void 0:n.body)return await G(t.contentDocument.body,e,!0)}catch(r){}return t.cloneNode(!1)}async function U(t,e){return v(t,HTMLCanvasElement)?L(t):v(t,HTMLVideoElement)?F(t,e):v(t,HTMLIFrameElement)?j(t,e):t.cloneNode($(t))}const V=t=>null!=t.tagName&&"SLOT"===t.tagName.toUpperCase(),$=t=>null!=t.tagName&&"SVG"===t.tagName.toUpperCase();async function H(t,e,n){var r,i;if($(e))return e;let s=[];return s=V(t)&&t.assignedNodes?o(t.assignedNodes()):v(t,HTMLIFrameElement)&&(null===(r=t.contentDocument)||void 0===r?void 0:r.body)?o(t.contentDocument.body.childNodes):o((null!==(i=t.shadowRoot)&&void 0!==i?i:t).childNodes),0===s.length||v(t,HTMLVideoElement)||await s.reduce(((t,r)=>t.then((()=>G(r,n))).then((t=>{t&&e.appendChild(t)}))),Promise.resolve()),e}function B(t,e,n){const r=e.style;if(!r)return;const i=window.getComputedStyle(t);i.cssText?(r.cssText=i.cssText,r.transformOrigin=i.transformOrigin):a(n).forEach((n=>{let o=i.getPropertyValue(n);if("font-size"===n&&o.endsWith("px")){const t=Math.floor(parseFloat(o.substring(0,o.length-2)))-.1;o=`${t}px`}v(t,HTMLIFrameElement)&&"display"===n&&"inline"===o&&(o="block"),"d"===n&&e.getAttribute("d")&&(o=`path(${e.getAttribute("d")})`),r.setProperty(n,o,i.getPropertyPriority(n))}))}function z(t,e){v(t,HTMLTextAreaElement)&&(e.innerHTML=t.value),v(t,HTMLInputElement)&&e.setAttribute("value",t.value)}function W(t,e){if(v(t,HTMLSelectElement)){const n=e,r=Array.from(n.children).find((e=>t.value===e.getAttribute("value")));r&&r.setAttribute("selected","")}}function q(t,e,n){return v(e,Element)&&(B(t,e,n),T(t,e,n),z(t,e),W(t,e)),e}async function K(t,e){const n=t.querySelectorAll?t.querySelectorAll("use"):[];if(0===n.length)return t;const r={};for(let o=0;o<n.length;o++){const i=n[o],s=i.getAttribute("xlink:href");if(s){const n=t.querySelector(s),i=document.querySelector(s);n||!i||r[s]||(r[s]=await G(i,e,!0))}}const i=Object.values(r);if(i.length){const e="http://www.w3.org/1999/xhtml",n=document.createElementNS(e,"svg");n.setAttribute("xmlns",e),n.style.position="absolute",n.style.width="0",n.style.height="0",n.style.overflow="hidden",n.style.display="none";const r=document.createElementNS(e,"defs");n.appendChild(r);for(let t=0;t<i.length;t++)r.appendChild(i[t]);t.appendChild(n)}return t}async function G(t,e,n){return n||!e.filter||e.filter(t)?Promise.resolve(t).then((t=>U(t,e))).then((n=>H(t,n,e))).then((n=>q(t,n,e))).then((t=>K(t,e))):null}const Y=/url\((['"]?)([^'"]+?)\1\)/g,Q=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,X=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function J(t){const e=t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}function Z(t){const e=[];return t.replace(Y,((t,n,r)=>(e.push(r),t))),e.filter((t=>!A(t)))}async function tt(t,e,n,i,o){try{const s=n?r(e,n):e,a=x(e);let c;if(o){const t=await o(s);c=N(t,a)}else c=await M(s,a,i);return t.replace(J(e),`$1${c}$3`)}catch(s){}return t}function et(t,{preferredFontFormat:e}){return e?t.replace(X,(t=>{while(1){const[n,,r]=Q.exec(t)||[];if(!r)return"";if(r===e)return`src: ${n};`}})):t}function nt(t){return-1!==t.search(Y)}async function rt(t,e,n){if(!nt(t))return t;const r=et(t,n),i=Z(r);return i.reduce(((t,r)=>t.then((t=>tt(t,r,e,n)))),Promise.resolve(r))}async function it(t,e,n){var r;const i=null===(r=e.style)||void 0===r?void 0:r.getPropertyValue(t);if(i){const r=await rt(i,null,n);return e.style.setProperty(t,r,e.style.getPropertyPriority(t)),!0}return!1}async function ot(t,e){await it("background",t,e)||await it("background-image",t,e),await it("mask",t,e)||await it("-webkit-mask",t,e)||await it("mask-image",t,e)||await it("-webkit-mask-image",t,e)}async function st(t,e){const n=v(t,HTMLImageElement);if((!n||A(t.src))&&(!v(t,SVGImageElement)||A(t.href.baseVal)))return;const r=n?t.src:t.href.baseVal,i=await M(r,x(r),e);await new Promise(((r,o)=>{t.onload=r,t.onerror=e.onImageErrorHandler?(...t)=>{try{r(e.onImageErrorHandler(...t))}catch(n){o(n)}}:o;const s=t;s.decode&&(s.decode=r),"lazy"===s.loading&&(s.loading="eager"),n?(t.srcset="",t.src=i):t.href.baseVal=i}))}async function at(t,e){const n=o(t.childNodes),r=n.map((t=>ct(t,e)));await Promise.all(r).then((()=>t))}async function ct(t,e){v(t,Element)&&(await ot(t,e),await st(t,e),await at(t,e))}function ut(t,e){const{style:n}=t;e.backgroundColor&&(n.backgroundColor=e.backgroundColor),e.width&&(n.width=`${e.width}px`),e.height&&(n.height=`${e.height}px`);const r=e.style;return null!=r&&Object.keys(r).forEach((t=>{n[t]=r[t]})),t}n(7642),n(8004),n(3853),n(5876),n(2475),n(5024),n(1698);const lt={};async function ht(t){let e=lt[t];if(null!=e)return e;const n=await fetch(t),r=await n.text();return e={url:t,cssText:r},lt[t]=e,e}async function dt(t,e){let n=t.cssText;const r=/url\(["']?([^"')]+)["']?\)/g,i=n.match(/url\([^)]+\)/g)||[],o=i.map((async i=>{let o=i.replace(r,"$1");return o.startsWith("https://")||(o=new URL(o,t.url).href),O(o,e.fetchRequestInit,(({result:t})=>(n=n.replace(i,`url(${t})`),[i,t])))}));return Promise.all(o).then((()=>n))}function ft(t){if(null==t)return[];const e=[],n=/(\/\*[\s\S]*?\*\/)/gi;let r=t.replace(n,"");const i=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");while(1){const t=i.exec(r);if(null===t)break;e.push(t[0])}r=r.replace(i,"");const o=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,s="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",a=new RegExp(s,"gi");while(1){let t=o.exec(r);if(null===t){if(t=a.exec(r),null===t)break;o.lastIndex=a.lastIndex}else a.lastIndex=o.lastIndex;e.push(t[0])}return e}async function pt(t,e){const n=[],r=[];return t.forEach((n=>{if("cssRules"in n)try{o(n.cssRules||[]).forEach(((t,i)=>{if(t.type===CSSRule.IMPORT_RULE){let o=i+1;const s=t.href,a=ht(s).then((t=>dt(t,e))).then((t=>ft(t).forEach((t=>{try{n.insertRule(t,t.startsWith("@import")?o+=1:n.cssRules.length)}catch(e){console.error("Error inserting rule from remote css",{rule:t,error:e})}})))).catch((t=>{console.error("Error loading remote css",t.toString())}));r.push(a)}}))}catch(i){const o=t.find((t=>null==t.href))||document.styleSheets[0];null!=n.href&&r.push(ht(n.href).then((t=>dt(t,e))).then((t=>ft(t).forEach((t=>{o.insertRule(t,o.cssRules.length)})))).catch((t=>{console.error("Error loading remote stylesheet",t)}))),console.error("Error inlining remote css file",i)}})),Promise.all(r).then((()=>(t.forEach((t=>{if("cssRules"in t)try{o(t.cssRules||[]).forEach((t=>{n.push(t)}))}catch(e){console.error(`Error while reading CSS rules from ${t.href}`,e)}})),n)))}function mt(t){return t.filter((t=>t.type===CSSRule.FONT_FACE_RULE)).filter((t=>nt(t.style.getPropertyValue("src"))))}async function gt(t,e){if(null==t.ownerDocument)throw new Error("Provided element is not within a Document");const n=o(t.ownerDocument.styleSheets),r=await pt(n,e);return mt(r)}function yt(t){return t.trim().replace(/["']/g,"")}function vt(t){const e=new Set;function n(t){const r=t.style.fontFamily||getComputedStyle(t).fontFamily;r.split(",").forEach((t=>{e.add(yt(t))})),Array.from(t.children).forEach((t=>{t instanceof HTMLElement&&n(t)}))}return n(t),e}async function _t(t,e){const n=await gt(t,e),r=vt(t),i=await Promise.all(n.filter((t=>r.has(yt(t.style.fontFamily)))).map((t=>{const n=t.parentStyleSheet?t.parentStyleSheet.href:null;return rt(t.cssText,n,e)})));return i.join("\n")}async function wt(t,e){const n=null!=e.fontEmbedCSS?e.fontEmbedCSS:e.skipFonts?null:await _t(t,e);if(n){const e=document.createElement("style"),r=document.createTextNode(n);e.appendChild(r),t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}}async function bt(t,e={}){const{width:n,height:r}=h(t,e),i=await G(t,e,!0);await wt(i,e),await ct(i,e),ut(i,e);const o=await y(i,n,r);return o}async function Et(t,e={}){const{width:n,height:r}=h(t,e),i=await bt(t,e),o=await m(i),s=document.createElement("canvas"),a=s.getContext("2d"),c=e.pixelRatio||d(),u=e.canvasWidth||n,l=e.canvasHeight||r;return s.width=u*c,s.height=l*c,e.skipAutoScale||p(s),s.style.width=`${u}`,s.style.height=`${l}`,e.backgroundColor&&(a.fillStyle=e.backgroundColor,a.fillRect(0,0,s.width,s.height)),a.drawImage(o,0,0,s.width,s.height),s}async function Tt(t,e={}){const n=await Et(t,e);return n.toDataURL("image/jpeg",e.quality||1)}},5610:function(t,e,n){"use strict";var r=n(1291),i=Math.max,o=Math.min;t.exports=function(t,e){var n=r(t);return n<0?i(n+e,0):o(n,e)}},5745:function(t,e,n){"use strict";var r=n(7629);t.exports=function(t,e){return r[t]||(r[t]=e||{})}},5876:function(t,e,n){"use strict";var r=n(6518),i=n(3838),o=n(4916),s=!o("isSubsetOf",(function(t){return t}));r({target:"Set",proto:!0,real:!0,forced:s},{isSubsetOf:i})},5917:function(t,e,n){"use strict";var r=n(3724),i=n(9039),o=n(4055);t.exports=!r&&!i((function(){return 7!==Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},5966:function(t,e,n){"use strict";var r=n(9306),i=n(4117);t.exports=function(t,e){var n=t[e];return i(n)?void 0:r(n)}},6080:function(t,e,n){"use strict";var r=n(7476),i=n(9306),o=n(616),s=r(r.bind);t.exports=function(t,e){return i(t),void 0===e?t:o?s(t,e):function(){return t.apply(e,arguments)}}},6086:function(t,e,n){"use strict";n.d(e,{KO:function(){return tt},MF:function(){return X},Sx:function(){return Z},Wp:function(){return J},j6:function(){return q},om:function(){return W},xZ:function(){return K}});n(4114),n(8111),n(2489),n(1701),n(3579);var r=n(798),i=n(6189),o=n(2455),s=n(8071);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class a{constructor(t){this.container=t}getPlatformInfoString(){const t=this.container.getProviders();return t.map((t=>{if(c(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null})).filter((t=>t)).join(" ")}}function c(t){const e=t.getComponent();return"VERSION"===e?.type}const u="@firebase/app",l="0.14.1",h=new i.Vy("@firebase/app"),d="@firebase/app-compat",f="@firebase/analytics-compat",p="@firebase/analytics",m="@firebase/app-check-compat",g="@firebase/app-check",y="@firebase/auth",v="@firebase/auth-compat",_="@firebase/database",w="@firebase/data-connect",b="@firebase/database-compat",E="@firebase/functions",T="@firebase/functions-compat",C="@firebase/installations",S="@firebase/installations-compat",I="@firebase/messaging",k="@firebase/messaging-compat",x="@firebase/performance",D="@firebase/performance-compat",A="@firebase/remote-config",N="@firebase/remote-config-compat",O="@firebase/storage",P="@firebase/storage-compat",R="@firebase/firestore",M="@firebase/ai",L="@firebase/firestore-compat",F="firebase",j="12.1.0",U="[DEFAULT]",V={[u]:"fire-core",[d]:"fire-core-compat",[p]:"fire-analytics",[f]:"fire-analytics-compat",[g]:"fire-app-check",[m]:"fire-app-check-compat",[y]:"fire-auth",[v]:"fire-auth-compat",[_]:"fire-rtdb",[w]:"fire-data-connect",[b]:"fire-rtdb-compat",[E]:"fire-fn",[T]:"fire-fn-compat",[C]:"fire-iid",[S]:"fire-iid-compat",[I]:"fire-fcm",[k]:"fire-fcm-compat",[x]:"fire-perf",[D]:"fire-perf-compat",[A]:"fire-rc",[N]:"fire-rc-compat",[O]:"fire-gcs",[P]:"fire-gcs-compat",[R]:"fire-fst",[L]:"fire-fst-compat",[M]:"fire-vertex","fire-js":"fire-js",[F]:"fire-js-all"},$=new Map,H=new Map,B=new Map;function z(t,e){try{t.container.addComponent(e)}catch(n){h.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function W(t){const e=t.name;if(B.has(e))return h.debug(`There were multiple attempts to register component ${e}.`),!1;B.set(e,t);for(const n of $.values())z(n,t);for(const n of H.values())z(n,t);return!0}function q(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function K(t){return null!==t&&void 0!==t&&void 0!==t.settings}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const G={["no-app"]:"No Firebase App '{$appName}' has been created - call initializeApp() first",["bad-app-name"]:"Illegal App name: '{$appName}'",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["server-app-deleted"]:"Firebase Server App has been deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.",["finalization-registry-not-supported"]:"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.",["invalid-server-app-environment"]:"FirebaseServerApp is not for use in browser environments."},Y=new o.FA("app","Firebase",G);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Q{constructor(t,e,n){this._isDeleted=!1,this._options={...t},this._config={...e},this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new r.uA("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Y.create("app-deleted",{appName:this._name})}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const X=j;function J(t,e={}){let n=t;if("object"!==typeof e){const t=e;e={name:t}}const i={name:U,automaticDataCollectionEnabled:!0,...e},s=i.name;if("string"!==typeof s||!s)throw Y.create("bad-app-name",{appName:String(s)});if(n||(n=(0,o.T9)()),!n)throw Y.create("no-options");const a=$.get(s);if(a){if((0,o.bD)(n,a.options)&&(0,o.bD)(i,a.config))return a;throw Y.create("duplicate-app",{appName:s})}const c=new r.h1(s);for(const r of B.values())c.addComponent(r);const u=new Q(n,i,c);return $.set(s,u),u}function Z(t=U){const e=$.get(t);if(!e&&t===U&&(0,o.T9)())return J();if(!e)throw Y.create("no-app",{appName:t});return e}function tt(t,e,n){let i=V[t]??t;n&&(i+=`-${n}`);const o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const t=[`Unable to register library "${i}" with version "${e}":`];return o&&t.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&t.push("and"),s&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void h.warn(t.join(" "))}W(new r.uA(`${i}-version`,(()=>({library:i,version:e})),"VERSION"))}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const et="firebase-heartbeat-database",nt=1,rt="firebase-heartbeat-store";let it=null;function ot(){return it||(it=(0,s.P2)(et,nt,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(rt)}catch(n){console.warn(n)}}}}).catch((t=>{throw Y.create("idb-open",{originalErrorMessage:t.message})}))),it}async function st(t){try{const e=await ot(),n=e.transaction(rt),r=await n.objectStore(rt).get(ct(t));return await n.done,r}catch(e){if(e instanceof o.g)h.warn(e.message);else{const t=Y.create("idb-get",{originalErrorMessage:e?.message});h.warn(t.message)}}}async function at(t,e){try{const n=await ot(),r=n.transaction(rt,"readwrite"),i=r.objectStore(rt);await i.put(e,ct(t)),await r.done}catch(n){if(n instanceof o.g)h.warn(n.message);else{const t=Y.create("idb-set",{originalErrorMessage:n?.message});h.warn(t.message)}}}function ct(t){return`${t.name}!${t.options.appId}`}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ut=1024,lt=30;class ht{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new pt(e),this._heartbeatsCachePromise=this._storage.read().then((t=>(this._heartbeatsCache=t,t)))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate(),e=t.getPlatformInfoString(),n=dt();if(null==this._heartbeatsCache?.heartbeats&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==this._heartbeatsCache?.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some((t=>t.date===n)))return;if(this._heartbeatsCache.heartbeats.push({date:n,agent:e}),this._heartbeatsCache.heartbeats.length>lt){const t=gt(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(t,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){h.warn(t)}}async getHeartbeatsHeader(){try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==this._heartbeatsCache?.heartbeats||0===this._heartbeatsCache.heartbeats.length)return"";const t=dt(),{heartbeatsToSend:e,unsentEntries:n}=ft(this._heartbeatsCache.heartbeats),r=(0,o.Uj)(JSON.stringify({version:2,heartbeats:e}));return this._heartbeatsCache.lastSentHeartbeatDate=t,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(t){return h.warn(t),""}}}function dt(){const t=new Date;return t.toISOString().substring(0,10)}function ft(t,e=ut){const n=[];let r=t.slice();for(const i of t){const t=n.find((t=>t.agent===i.agent));if(t){if(t.dates.push(i.date),mt(n)>e){t.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),mt(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class pt{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,o.zW)()&&(0,o.eX)().then((()=>!0)).catch((()=>!1))}async read(){const t=await this._canUseIndexedDBPromise;if(t){const t=await st(this.app);return t?.heartbeats?t:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(t){const e=await this._canUseIndexedDBPromise;if(e){const e=await this.read();return at(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??e.lastSentHeartbeatDate,heartbeats:t.heartbeats})}}async add(t){const e=await this._canUseIndexedDBPromise;if(e){const e=await this.read();return at(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??e.lastSentHeartbeatDate,heartbeats:[...e.heartbeats,...t.heartbeats]})}}}function mt(t){return(0,o.Uj)(JSON.stringify({version:2,heartbeats:t})).length}function gt(t){if(0===t.length)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(t){W(new r.uA("platform-logger",(t=>new a(t)),"PRIVATE")),W(new r.uA("heartbeat",(t=>new ht(t)),"PRIVATE")),tt(u,l,t),tt(u,l,"esm2020"),tt("fire-js","")}yt("")},6119:function(t,e,n){"use strict";var r=n(5745),i=n(3392),o=r("keys");t.exports=function(t){return o[t]||(o[t]=i(t))}},6189:function(t,e,n){"use strict";n.d(e,{$b:function(){return i},Vy:function(){return u}});n(4114),n(8111),n(2489),n(1701);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const r=[];var i;(function(t){t[t["DEBUG"]=0]="DEBUG",t[t["VERBOSE"]=1]="VERBOSE",t[t["INFO"]=2]="INFO",t[t["WARN"]=3]="WARN",t[t["ERROR"]=4]="ERROR",t[t["SILENT"]=5]="SILENT"})(i||(i={}));const o={debug:i.DEBUG,verbose:i.VERBOSE,info:i.INFO,warn:i.WARN,error:i.ERROR,silent:i.SILENT},s=i.INFO,a={[i.DEBUG]:"log",[i.VERBOSE]:"log",[i.INFO]:"info",[i.WARN]:"warn",[i.ERROR]:"error"},c=(t,e,...n)=>{if(e<t.logLevel)return;const r=(new Date).toISOString(),i=a[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${t.name}:`,...n)};class u{constructor(t){this.name=t,this._logLevel=s,this._logHandler=c,this._userLogHandler=null,r.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in i))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"===typeof t?o[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!==typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,i.DEBUG,...t),this._logHandler(this,i.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,i.VERBOSE,...t),this._logHandler(this,i.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,i.INFO,...t),this._logHandler(this,i.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,i.WARN,...t),this._logHandler(this,i.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,i.ERROR,...t),this._logHandler(this,i.ERROR,...t)}}},6193:function(t,e,n){"use strict";var r=n(9504),i=Error,o=r("".replace),s=function(t){return String(new i(t).stack)}("zxcasd"),a=/\n\s*at [^:]*:[^\n]*/,c=a.test(s);t.exports=function(t,e){if(c&&"string"==typeof t&&!i.prepareStackTrace)while(e--)t=o(t,a,"");return t}},6198:function(t,e,n){"use strict";var r=n(8014);t.exports=function(t){return r(t.length)}},6269:function(t){"use strict";t.exports={}},6279:function(t,e,n){"use strict";var r=n(6840);t.exports=function(t,e,n){for(var i in e)r(t,i,e[i],n);return t}},6319:function(t,e,n){"use strict";var r=n(8551),i=n(9539);t.exports=function(t,e,n,o){try{return o?e(r(n)[0],n[1]):e(n)}catch(s){i(t,"throw",s)}}},6395:function(t){"use strict";t.exports=!1},6400:function(t,e,n){"use strict";n.d(e,{Sx:function(){return r.Sx},Wp:function(){return r.Wp}});var r=n(6086),i="firebase",o="12.1.0";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
(0,r.KO)(i,o,"app")},6509:function(t,e,n){"use strict";n.d(e,{_:function(){return c},a:function(){return _},b:function(){return w},c:function(){return b},d:function(){return f},f:function(){return C},g:function(){return m},h:function(){return g},i:function(){return v},j:function(){return E},k:function(){return d},l:function(){return I},m:function(){return k},n:function(){return l},r:function(){return A},s:function(){return N},u:function(){return u},w:function(){return h}});n(8111),n(8237);var r=n(4388),i=n(6768),o=!1;var s=n(144),a=(n(3092),n(6400));const c=Symbol("firebaseApp");function u(t){return(0,i.nI)()&&(0,i.WQ)(c,null)||(0,a.Sx)(t)}const l=()=>{};function h(t,e){return e.split(".").reduce(((t,e)=>t&&t[e]),t)}function d(t,e,n){const r=(""+e).split("."),i=r.pop(),o=r.reduce(((t,e)=>t&&t[e]),t);if(null!=o)return Array.isArray(o)?o.splice(Number(i),1,n):o[i]=n}function f(t){return!!t&&"object"===typeof t}const p=Object.prototype;function m(t){return f(t)&&Object.getPrototypeOf(t)===p}function g(t){return f(t)&&"document"===t.type}function y(t){return f(t)&&"collection"===t.type}function v(t){return g(t)||y(t)}function _(t){return f(t)&&"query"===t.type}function w(t){return f(t)&&"ref"in t}function b(t){return f(t)&&"string"===typeof t.bucket}function E(t,e){let n;return()=>{if(!n)return n=!0,t(e())}}const T=Symbol.for("v-scx");function C(){const t=(0,i.nI)();return!!(o?t&&t.proxy.$isServer:(0,i.WQ)(T,0))}const S=new WeakMap;function I(t,e){if(!S.has(t)){const n=(0,s.uY)(!0);S.set(t,n);const{unmount:r}=e;e.unmount=()=>{r.call(e),n.stop(),S.delete(t)}}return S.get(t)}const k=new WeakMap;const x=new WeakMap;function D(t){const e=u(t);if(!x.has(e)){let t;const n=new Promise((e=>{t=e})),r=[n,n=>{x.set(e,n),t(n.value)}];x.set(e,r)}return x.get(e)}function A(t){const e=D(t);return Array.isArray(e)?e[0]:Promise.resolve(e.value)}function N(t,e){(0,r.iZ)(e,(e=>{const n=D();t.value=e,Array.isArray(n)&&n[1](t)}))}Symbol("app-check-token")},6518:function(t,e,n){"use strict";var r=n(4576),i=n(7347).f,o=n(6699),s=n(6840),a=n(9433),c=n(7740),u=n(2796);t.exports=function(t,e){var n,l,h,d,f,p,m=t.target,g=t.global,y=t.stat;if(l=g?r:y?r[m]||a(m,{}):r[m]&&r[m].prototype,l)for(h in e){if(f=e[h],t.dontCallGetSet?(p=i(l,h),d=p&&p.value):d=l[h],n=u(g?h:m+(y?".":"#")+h,t.forced),!n&&void 0!==d){if(typeof f==typeof d)continue;c(f,d)}(t.sham||d&&d.sham)&&o(f,"sham",!0),s(l,h,f,t)}}},6699:function(t,e,n){"use strict";var r=n(3724),i=n(4913),o=n(6980);t.exports=r?function(t,e,n){return i.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},6706:function(t,e,n){"use strict";var r=n(9504),i=n(9306);t.exports=function(t,e,n){try{return r(i(Object.getOwnPropertyDescriptor(t,e)[n]))}catch(o){}}},6768:function(t,e,n){"use strict";n.d(e,{$u:function(){return ot},CE:function(){return Ge},Df:function(){return $},EW:function(){return Ln},FK:function(){return Fe},Fv:function(){return an},Gt:function(){return Ht},Gy:function(){return M},K9:function(){return le},Lk:function(){return tn},MZ:function(){return V},OW:function(){return U},Q3:function(){return cn},QP:function(){return F},SS:function(){return ct},WQ:function(){return Bt},Wv:function(){return Ye},bF:function(){return en},bo:function(){return D},dY:function(){return g},eW:function(){return sn},g2:function(){return ft},h:function(){return Fn},k6:function(){return x},nI:function(){return vn},pI:function(){return yt},pM:function(){return H},qL:function(){return s},uX:function(){return Be},wB:function(){return be}});n(4114),n(8111),n(1148),n(2489),n(7588),n(1701),n(8237),n(3579),n(7642),n(8004),n(3853),n(5876),n(2475),n(5024),n(1698);var r=n(144),i=n(4232);function o(t,e,n,r){try{return r?t(...r):t()}catch(i){a(i,e,n)}}function s(t,e,n,r){if((0,i.Tn)(t)){const s=o(t,e,n,r);return s&&(0,i.yL)(s)&&s.catch((t=>{a(t,e,n)})),s}if((0,i.cy)(t)){const i=[];for(let o=0;o<t.length;o++)i.push(s(t[o],e,n,r));return i}}function a(t,e,n,s=!0){const a=e?e.vnode:null,{errorHandler:u,throwUnhandledErrorInProduction:l}=e&&e.appContext.config||i.MZ;if(e){let i=e.parent;const s=e.proxy,a=`https://vuejs.org/error-reference/#runtime-${n}`;while(i){const e=i.ec;if(e)for(let n=0;n<e.length;n++)if(!1===e[n](t,s,a))return;i=i.parent}if(u)return(0,r.C4)(),o(u,null,10,[t,s,a]),void(0,r.bl)()}c(t,n,a,s,l)}function c(t,e,n,r=!0,i=!1){if(i)throw t;console.error(t)}const u=[];let l=-1;const h=[];let d=null,f=0;const p=Promise.resolve();let m=null;function g(t){const e=m||p;return t?e.then(this?t.bind(this):t):e}function y(t){let e=l+1,n=u.length;while(e<n){const r=e+n>>>1,i=u[r],o=T(i);o<t||o===t&&2&i.flags?e=r+1:n=r}return e}function v(t){if(!(1&t.flags)){const e=T(t),n=u[u.length-1];!n||!(2&t.flags)&&e>=T(n)?u.push(t):u.splice(y(e),0,t),t.flags|=1,_()}}function _(){m||(m=p.then(C))}function w(t){(0,i.cy)(t)?h.push(...t):d&&-1===t.id?d.splice(f+1,0,t):1&t.flags||(h.push(t),t.flags|=1),_()}function b(t,e,n=l+1){for(0;n<u.length;n++){const e=u[n];if(e&&2&e.flags){if(t&&e.id!==t.uid)continue;0,u.splice(n,1),n--,4&e.flags&&(e.flags&=-2),e(),4&e.flags||(e.flags&=-2)}}}function E(t){if(h.length){const t=[...new Set(h)].sort(((t,e)=>T(t)-T(e)));if(h.length=0,d)return void d.push(...t);for(d=t,f=0;f<d.length;f++){const t=d[f];0,4&t.flags&&(t.flags&=-2),8&t.flags||t(),t.flags&=-2}d=null,f=0}}const T=t=>null==t.id?2&t.flags?-1:1/0:t.id;function C(t){i.tE;try{for(l=0;l<u.length;l++){const t=u[l];!t||8&t.flags||(4&t.flags&&(t.flags&=-2),o(t,t.i,t.i?15:14),4&t.flags||(t.flags&=-2))}}finally{for(;l<u.length;l++){const t=u[l];t&&(t.flags&=-2)}l=-1,u.length=0,E(t),m=null,(u.length||h.length)&&C(t)}}let S=null,I=null;function k(t){const e=S;return S=t,I=t&&t.type.__scopeId||null,e}function x(t,e=S,n){if(!e)return t;if(t._n)return t;const r=(...n)=>{r._d&&qe(-1);const i=k(e);let o;try{o=t(...n)}finally{k(i),r._d&&qe(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function D(t,e){if(null===S)return t;const n=Pn(S),o=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[t,a,c,u=i.MZ]=e[s];t&&((0,i.Tn)(t)&&(t={mounted:t,updated:t}),t.deep&&(0,r.hV)(a),o.push({dir:t,instance:n,value:a,oldValue:void 0,arg:c,modifiers:u}))}return t}function A(t,e,n,i){const o=t.dirs,a=e&&e.dirs;for(let c=0;c<o.length;c++){const u=o[c];a&&(u.oldValue=a[c].value);let l=u.dir[i];l&&((0,r.C4)(),s(l,n,8,[t.el,u,t,e]),(0,r.bl)())}}const N=Symbol("_vte"),O=t=>t.__isTeleport;const P=Symbol("_leaveCb"),R=Symbol("_enterCb");function M(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return rt((()=>{t.isMounted=!0})),st((()=>{t.isUnmounting=!0})),t}const L=[Function,Array],F={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:L,onEnter:L,onAfterEnter:L,onEnterCancelled:L,onBeforeLeave:L,onLeave:L,onAfterLeave:L,onLeaveCancelled:L,onBeforeAppear:L,onAppear:L,onAfterAppear:L,onAppearCancelled:L};function j(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function U(t,e,n,r,o){const{appear:a,mode:c,persisted:u=!1,onBeforeEnter:l,onEnter:h,onAfterEnter:d,onEnterCancelled:f,onBeforeLeave:p,onLeave:m,onAfterLeave:g,onLeaveCancelled:y,onBeforeAppear:v,onAppear:_,onAfterAppear:w,onAppearCancelled:b}=e,E=String(t.key),T=j(n,t),C=(t,e)=>{t&&s(t,r,9,e)},S=(t,e)=>{const n=e[1];C(t,e),(0,i.cy)(t)?t.every((t=>t.length<=1))&&n():t.length<=1&&n()},I={mode:c,persisted:u,beforeEnter(e){let r=l;if(!n.isMounted){if(!a)return;r=v||l}e[P]&&e[P](!0);const i=T[E];i&&Xe(t,i)&&i.el[P]&&i.el[P](),C(r,[e])},enter(t){let e=h,r=d,i=f;if(!n.isMounted){if(!a)return;e=_||h,r=w||d,i=b||f}let o=!1;const s=t[R]=e=>{o||(o=!0,C(e?i:r,[t]),I.delayedLeave&&I.delayedLeave(),t[R]=void 0)};e?S(e,[t,s]):s()},leave(e,r){const i=String(t.key);if(e[R]&&e[R](!0),n.isUnmounting)return r();C(p,[e]);let o=!1;const s=e[P]=n=>{o||(o=!0,r(),C(n?y:g,[e]),e[P]=void 0,T[i]===t&&delete T[i])};T[i]=t,m?S(m,[e,s]):s()},clone(t){const i=U(t,e,n,r,o);return o&&o(i),i}};return I}function V(t,e){6&t.shapeFlag&&t.component?(t.transition=e,V(t.component.subTree,e)):128&t.shapeFlag?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function $(t,e=!1,n){let r=[],i=0;for(let o=0;o<t.length;o++){let s=t[o];const a=null==n?s.key:String(n)+String(null!=s.key?s.key:o);s.type===Fe?(128&s.patchFlag&&i++,r=r.concat($(s.children,e,a))):(e||s.type!==Ue)&&r.push(null!=a?on(s,{key:a}):s)}if(i>1)for(let o=0;o<r.length;o++)r[o].patchFlag=-2;return r}
/*! #__NO_SIDE_EFFECTS__ */function H(t,e){return(0,i.Tn)(t)?(()=>(0,i.X$)({name:t.name},e,{setup:t}))():t}function B(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function z(t,e,n,s,a=!1){if((0,i.cy)(t))return void t.forEach(((t,r)=>z(t,e&&((0,i.cy)(e)?e[r]:e),n,s,a)));if(W(s)&&!a)return void(512&s.shapeFlag&&s.type.__asyncResolved&&s.component.subTree.component&&z(t,e,n,s.component.subTree));const c=4&s.shapeFlag?Pn(s.component):s.el,u=a?null:c,{i:l,r:h}=t;const d=e&&e.r,f=l.refs===i.MZ?l.refs={}:l.refs,p=l.setupState,m=(0,r.ux)(p),g=p===i.MZ?()=>!1:t=>(0,i.$3)(m,t);if(null!=d&&d!==h&&((0,i.Kg)(d)?(f[d]=null,g(d)&&(p[d]=null)):(0,r.i9)(d)&&(d.value=null)),(0,i.Tn)(h))o(h,l,12,[u,f]);else{const e=(0,i.Kg)(h),o=(0,r.i9)(h);if(e||o){const r=()=>{if(t.f){const n=e?g(h)?p[h]:f[h]:h.value;a?(0,i.cy)(n)&&(0,i.TF)(n,c):(0,i.cy)(n)?n.includes(c)||n.push(c):e?(f[h]=[c],g(h)&&(p[h]=f[h])):(h.value=[c],t.k&&(f[t.k]=h.value))}else e?(f[h]=u,g(h)&&(p[h]=u)):o&&(h.value=u,t.k&&(f[t.k]=u))};u?(r.id=-1,ue(r,n)):r()}else 0}}(0,i.We)().requestIdleCallback,(0,i.We)().cancelIdleCallback;const W=t=>!!t.type.__asyncLoader
/*! #__NO_SIDE_EFFECTS__ */;const q=t=>t.type.__isKeepAlive;RegExp,RegExp;function K(t,e){return(0,i.cy)(t)?t.some((t=>K(t,e))):(0,i.Kg)(t)?t.split(",").includes(e):!!(0,i.gd)(t)&&(t.lastIndex=0,t.test(e))}function G(t,e){Q(t,"a",e)}function Y(t,e){Q(t,"da",e)}function Q(t,e,n=yn){const r=t.__wdc||(t.__wdc=()=>{let e=n;while(e){if(e.isDeactivated)return;e=e.parent}return t()});if(tt(e,r,n),n){let t=n.parent;while(t&&t.parent)q(t.parent.vnode)&&X(r,e,n,t),t=t.parent}}function X(t,e,n,r){const o=tt(e,t,r,!0);at((()=>{(0,i.TF)(r[e],o)}),n)}function J(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function Z(t){return 128&t.shapeFlag?t.ssContent:t}function tt(t,e,n=yn,i=!1){if(n){const o=n[t]||(n[t]=[]),a=e.__weh||(e.__weh=(...i)=>{(0,r.C4)();const o=bn(n),a=s(e,n,t,i);return o(),(0,r.bl)(),a});return i?o.unshift(a):o.push(a),a}}const et=t=>(e,n=yn)=>{In&&"sp"!==t||tt(t,((...t)=>e(...t)),n)},nt=et("bm"),rt=et("m"),it=et("bu"),ot=et("u"),st=et("bum"),at=et("um"),ct=et("sp"),ut=et("rtg"),lt=et("rtc");function ht(t,e=yn){tt("ec",t,e)}const dt="components";function ft(t,e){return mt(dt,t,!0,e)||t}const pt=Symbol.for("v-ndc");function mt(t,e,n=!0,r=!1){const o=S||yn;if(o){const n=o.type;if(t===dt){const t=Rn(n,!1);if(t&&(t===e||t===(0,i.PT)(e)||t===(0,i.ZH)((0,i.PT)(e))))return n}const s=gt(o[t]||n[t],e)||gt(o.appContext[t],e);return!s&&r?n:s}}function gt(t,e){return t&&(t[e]||t[(0,i.PT)(e)]||t[(0,i.ZH)((0,i.PT)(e))])}function yt(t,e,n,o){let s;const a=n&&n[o],c=(0,i.cy)(t);if(c||(0,i.Kg)(t)){const n=c&&(0,r.g8)(t);let i=!1;n&&(i=!(0,r.fE)(t),t=(0,r.qA)(t)),s=new Array(t.length);for(let o=0,c=t.length;o<c;o++)s[o]=e(i?(0,r.lJ)(t[o]):t[o],o,void 0,a&&a[o])}else if("number"===typeof t){0,s=new Array(t);for(let n=0;n<t;n++)s[n]=e(n+1,n,void 0,a&&a[n])}else if((0,i.Gv)(t))if(t[Symbol.iterator])s=Array.from(t,((t,n)=>e(t,n,void 0,a&&a[n])));else{const n=Object.keys(t);s=new Array(n.length);for(let r=0,i=n.length;r<i;r++){const i=n[r];s[r]=e(t[i],i,r,a&&a[r])}}else s=[];return n&&(n[o]=s),s}const vt=t=>t?Tn(t)?Pn(t):vt(t.parent):null,_t=(0,i.X$)(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>vt(t.parent),$root:t=>vt(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>xt(t),$forceUpdate:t=>t.f||(t.f=()=>{v(t.update)}),$nextTick:t=>t.n||(t.n=g.bind(t.proxy)),$watch:t=>Te.bind(t)}),wt=(t,e)=>t!==i.MZ&&!t.__isScriptSetup&&(0,i.$3)(t,e),bt={get({_:t},e){if("__v_skip"===e)return!0;const{ctx:n,setupState:o,data:s,props:a,accessCache:c,type:u,appContext:l}=t;let h;if("$"!==e[0]){const r=c[e];if(void 0!==r)switch(r){case 1:return o[e];case 2:return s[e];case 4:return n[e];case 3:return a[e]}else{if(wt(o,e))return c[e]=1,o[e];if(s!==i.MZ&&(0,i.$3)(s,e))return c[e]=2,s[e];if((h=t.propsOptions[0])&&(0,i.$3)(h,e))return c[e]=3,a[e];if(n!==i.MZ&&(0,i.$3)(n,e))return c[e]=4,n[e];Tt&&(c[e]=0)}}const d=_t[e];let f,p;return d?("$attrs"===e&&(0,r.u4)(t.attrs,"get",""),d(t)):(f=u.__cssModules)&&(f=f[e])?f:n!==i.MZ&&(0,i.$3)(n,e)?(c[e]=4,n[e]):(p=l.config.globalProperties,(0,i.$3)(p,e)?p[e]:void 0)},set({_:t},e,n){const{data:r,setupState:o,ctx:s}=t;return wt(o,e)?(o[e]=n,!0):r!==i.MZ&&(0,i.$3)(r,e)?(r[e]=n,!0):!(0,i.$3)(t.props,e)&&(("$"!==e[0]||!(e.slice(1)in t))&&(s[e]=n,!0))},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:o,propsOptions:s}},a){let c;return!!n[a]||t!==i.MZ&&(0,i.$3)(t,a)||wt(e,a)||(c=s[0])&&(0,i.$3)(c,a)||(0,i.$3)(r,a)||(0,i.$3)(_t,a)||(0,i.$3)(o.config.globalProperties,a)},defineProperty(t,e,n){return null!=n.get?t._.accessCache[e]=0:(0,i.$3)(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Et(t){return(0,i.cy)(t)?t.reduce(((t,e)=>(t[e]=null,t)),{}):t}let Tt=!0;function Ct(t){const e=xt(t),n=t.proxy,o=t.ctx;Tt=!1,e.beforeCreate&&It(e.beforeCreate,t,"bc");const{data:s,computed:a,methods:c,watch:u,provide:l,inject:h,created:d,beforeMount:f,mounted:p,beforeUpdate:m,updated:g,activated:y,deactivated:v,beforeDestroy:_,beforeUnmount:w,destroyed:b,unmounted:E,render:T,renderTracked:C,renderTriggered:S,errorCaptured:I,serverPrefetch:k,expose:x,inheritAttrs:D,components:A,directives:N,filters:O}=e,P=null;if(h&&St(h,o,P),c)for(const r in c){const t=c[r];(0,i.Tn)(t)&&(o[r]=t.bind(n))}if(s){0;const e=s.call(n,n);0,(0,i.Gv)(e)&&(t.data=(0,r.Kh)(e))}if(Tt=!0,a)for(const r in a){const t=a[r],e=(0,i.Tn)(t)?t.bind(n,n):(0,i.Tn)(t.get)?t.get.bind(n,n):i.tE;0;const s=!(0,i.Tn)(t)&&(0,i.Tn)(t.set)?t.set.bind(n):i.tE,c=Ln({get:e,set:s});Object.defineProperty(o,r,{enumerable:!0,configurable:!0,get:()=>c.value,set:t=>c.value=t})}if(u)for(const r in u)kt(u[r],o,n,r);if(l){const t=(0,i.Tn)(l)?l.call(n):l;Reflect.ownKeys(t).forEach((e=>{Ht(e,t[e])}))}function R(t,e){(0,i.cy)(e)?e.forEach((e=>t(e.bind(n)))):e&&t(e.bind(n))}if(d&&It(d,t,"c"),R(nt,f),R(rt,p),R(it,m),R(ot,g),R(G,y),R(Y,v),R(ht,I),R(lt,C),R(ut,S),R(st,w),R(at,E),R(ct,k),(0,i.cy)(x))if(x.length){const e=t.exposed||(t.exposed={});x.forEach((t=>{Object.defineProperty(e,t,{get:()=>n[t],set:e=>n[t]=e})}))}else t.exposed||(t.exposed={});T&&t.render===i.tE&&(t.render=T),null!=D&&(t.inheritAttrs=D),A&&(t.components=A),N&&(t.directives=N),k&&B(t)}function St(t,e,n=i.tE){(0,i.cy)(t)&&(t=Pt(t));for(const o in t){const n=t[o];let s;s=(0,i.Gv)(n)?"default"in n?Bt(n.from||o,n.default,!0):Bt(n.from||o):Bt(n),(0,r.i9)(s)?Object.defineProperty(e,o,{enumerable:!0,configurable:!0,get:()=>s.value,set:t=>s.value=t}):e[o]=s}}function It(t,e,n){s((0,i.cy)(t)?t.map((t=>t.bind(e.proxy))):t.bind(e.proxy),e,n)}function kt(t,e,n,r){let o=r.includes(".")?Ce(n,r):()=>n[r];if((0,i.Kg)(t)){const n=e[t];(0,i.Tn)(n)&&be(o,n)}else if((0,i.Tn)(t))be(o,t.bind(n));else if((0,i.Gv)(t))if((0,i.cy)(t))t.forEach((t=>kt(t,e,n,r)));else{const r=(0,i.Tn)(t.handler)?t.handler.bind(n):e[t.handler];(0,i.Tn)(r)&&be(o,r,t)}else 0}function xt(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:o,optionsCache:s,config:{optionMergeStrategies:a}}=t.appContext,c=s.get(e);let u;return c?u=c:o.length||n||r?(u={},o.length&&o.forEach((t=>Dt(u,t,a,!0))),Dt(u,e,a)):u=e,(0,i.Gv)(e)&&s.set(e,u),u}function Dt(t,e,n,r=!1){const{mixins:i,extends:o}=e;o&&Dt(t,o,n,!0),i&&i.forEach((e=>Dt(t,e,n,!0)));for(const s in e)if(r&&"expose"===s);else{const r=At[s]||n&&n[s];t[s]=r?r(t[s],e[s]):e[s]}return t}const At={data:Nt,props:Lt,emits:Lt,methods:Mt,computed:Mt,beforeCreate:Rt,created:Rt,beforeMount:Rt,mounted:Rt,beforeUpdate:Rt,updated:Rt,beforeDestroy:Rt,beforeUnmount:Rt,destroyed:Rt,unmounted:Rt,activated:Rt,deactivated:Rt,errorCaptured:Rt,serverPrefetch:Rt,components:Mt,directives:Mt,watch:Ft,provide:Nt,inject:Ot};function Nt(t,e){return e?t?function(){return(0,i.X$)((0,i.Tn)(t)?t.call(this,this):t,(0,i.Tn)(e)?e.call(this,this):e)}:e:t}function Ot(t,e){return Mt(Pt(t),Pt(e))}function Pt(t){if((0,i.cy)(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Rt(t,e){return t?[...new Set([].concat(t,e))]:e}function Mt(t,e){return t?(0,i.X$)(Object.create(null),t,e):e}function Lt(t,e){return t?(0,i.cy)(t)&&(0,i.cy)(e)?[...new Set([...t,...e])]:(0,i.X$)(Object.create(null),Et(t),Et(null!=e?e:{})):e}function Ft(t,e){if(!t)return e;if(!e)return t;const n=(0,i.X$)(Object.create(null),t);for(const r in e)n[r]=Rt(t[r],e[r]);return n}function jt(){return{app:null,config:{isNativeTag:i.NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Ut=0;function Vt(t,e){return function(n,r=null){(0,i.Tn)(n)||(n=(0,i.X$)({},n)),null==r||(0,i.Gv)(r)||(r=null);const o=jt(),a=new WeakSet,c=[];let u=!1;const l=o.app={_uid:Ut++,_component:n,_props:r,_container:null,_context:o,_instance:null,version:jn,get config(){return o.config},set config(t){0},use(t,...e){return a.has(t)||(t&&(0,i.Tn)(t.install)?(a.add(t),t.install(l,...e)):(0,i.Tn)(t)&&(a.add(t),t(l,...e))),l},mixin(t){return o.mixins.includes(t)||o.mixins.push(t),l},component(t,e){return e?(o.components[t]=e,l):o.components[t]},directive(t,e){return e?(o.directives[t]=e,l):o.directives[t]},mount(i,s,a){if(!u){0;const c=l._ceVNode||en(n,r);return c.appContext=o,!0===a?a="svg":!1===a&&(a=void 0),s&&e?e(c,i):t(c,i,a),u=!0,l._container=i,i.__vue_app__=l,Pn(c.component)}},onUnmount(t){c.push(t)},unmount(){u&&(s(c,l._instance,16),t(null,l._container),delete l._container.__vue_app__)},provide(t,e){return o.provides[t]=e,l},runWithContext(t){const e=$t;$t=l;try{return t()}finally{$t=e}}};return l}}let $t=null;function Ht(t,e){if(yn){let n=yn.provides;const r=yn.parent&&yn.parent.provides;r===n&&(n=yn.provides=Object.create(r)),n[t]=e}else 0}function Bt(t,e,n=!1){const r=yn||S;if(r||$t){const o=$t?$t._context.provides:r?null==r.parent?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(o&&t in o)return o[t];if(arguments.length>1)return n&&(0,i.Tn)(e)?e.call(r&&r.proxy):e}else 0}const zt={},Wt=()=>Object.create(zt),qt=t=>Object.getPrototypeOf(t)===zt;function Kt(t,e,n,i=!1){const o={},s=Wt();t.propsDefaults=Object.create(null),Yt(t,e,o,s);for(const r in t.propsOptions[0])r in o||(o[r]=void 0);n?t.props=i?o:(0,r.Gc)(o):t.type.props?t.props=o:t.props=s,t.attrs=s}function Gt(t,e,n,o){const{props:s,attrs:a,vnode:{patchFlag:c}}=t,u=(0,r.ux)(s),[l]=t.propsOptions;let h=!1;if(!(o||c>0)||16&c){let r;Yt(t,e,s,a)&&(h=!0);for(const o in u)e&&((0,i.$3)(e,o)||(r=(0,i.Tg)(o))!==o&&(0,i.$3)(e,r))||(l?!n||void 0===n[o]&&void 0===n[r]||(s[o]=Qt(l,u,o,void 0,t,!0)):delete s[o]);if(a!==u)for(const t in a)e&&(0,i.$3)(e,t)||(delete a[t],h=!0)}else if(8&c){const n=t.vnode.dynamicProps;for(let r=0;r<n.length;r++){let o=n[r];if(xe(t.emitsOptions,o))continue;const c=e[o];if(l)if((0,i.$3)(a,o))c!==a[o]&&(a[o]=c,h=!0);else{const e=(0,i.PT)(o);s[e]=Qt(l,u,e,c,t,!1)}else c!==a[o]&&(a[o]=c,h=!0)}}h&&(0,r.hZ)(t.attrs,"set","")}function Yt(t,e,n,o){const[s,a]=t.propsOptions;let c,u=!1;if(e)for(let r in e){if((0,i.SU)(r))continue;const l=e[r];let h;s&&(0,i.$3)(s,h=(0,i.PT)(r))?a&&a.includes(h)?(c||(c={}))[h]=l:n[h]=l:xe(t.emitsOptions,r)||r in o&&l===o[r]||(o[r]=l,u=!0)}if(a){const e=(0,r.ux)(n),o=c||i.MZ;for(let r=0;r<a.length;r++){const c=a[r];n[c]=Qt(s,e,c,o[c],t,!(0,i.$3)(o,c))}}return u}function Qt(t,e,n,r,o,s){const a=t[n];if(null!=a){const t=(0,i.$3)(a,"default");if(t&&void 0===r){const t=a.default;if(a.type!==Function&&!a.skipFactory&&(0,i.Tn)(t)){const{propsDefaults:i}=o;if(n in i)r=i[n];else{const s=bn(o);r=i[n]=t.call(null,e),s()}}else r=t;o.ce&&o.ce._setProp(n,r)}a[0]&&(s&&!t?r=!1:!a[1]||""!==r&&r!==(0,i.Tg)(n)||(r=!0))}return r}const Xt=new WeakMap;function Jt(t,e,n=!1){const r=n?Xt:e.propsCache,o=r.get(t);if(o)return o;const s=t.props,a={},c=[];let u=!1;if(!(0,i.Tn)(t)){const r=t=>{u=!0;const[n,r]=Jt(t,e,!0);(0,i.X$)(a,n),r&&c.push(...r)};!n&&e.mixins.length&&e.mixins.forEach(r),t.extends&&r(t.extends),t.mixins&&t.mixins.forEach(r)}if(!s&&!u)return(0,i.Gv)(t)&&r.set(t,i.Oj),i.Oj;if((0,i.cy)(s))for(let h=0;h<s.length;h++){0;const t=(0,i.PT)(s[h]);Zt(t)&&(a[t]=i.MZ)}else if(s){0;for(const t in s){const e=(0,i.PT)(t);if(Zt(e)){const n=s[t],r=a[e]=(0,i.cy)(n)||(0,i.Tn)(n)?{type:n}:(0,i.X$)({},n),o=r.type;let u=!1,l=!0;if((0,i.cy)(o))for(let t=0;t<o.length;++t){const e=o[t],n=(0,i.Tn)(e)&&e.name;if("Boolean"===n){u=!0;break}"String"===n&&(l=!1)}else u=(0,i.Tn)(o)&&"Boolean"===o.name;r[0]=u,r[1]=l,(u||(0,i.$3)(r,"default"))&&c.push(e)}}}const l=[a,c];return(0,i.Gv)(t)&&r.set(t,l),l}function Zt(t){return"$"!==t[0]&&!(0,i.SU)(t)}const te=t=>"_"===t[0]||"$stable"===t,ee=t=>(0,i.cy)(t)?t.map(un):[un(t)],ne=(t,e,n)=>{if(e._n)return e;const r=x(((...t)=>ee(e(...t))),n);return r._c=!1,r},re=(t,e,n)=>{const r=t._ctx;for(const o in t){if(te(o))continue;const n=t[o];if((0,i.Tn)(n))e[o]=ne(o,n,r);else if(null!=n){0;const t=ee(n);e[o]=()=>t}}},ie=(t,e)=>{const n=ee(e);t.slots.default=()=>n},oe=(t,e,n)=>{for(const r in e)(n||"_"!==r)&&(t[r]=e[r])},se=(t,e,n)=>{const r=t.slots=Wt();if(32&t.vnode.shapeFlag){const t=e._;t?(oe(r,e,n),n&&(0,i.yQ)(r,"_",t,!0)):re(e,r)}else e&&ie(t,e)},ae=(t,e,n)=>{const{vnode:r,slots:o}=t;let s=!0,a=i.MZ;if(32&r.shapeFlag){const t=e._;t?n&&1===t?s=!1:oe(o,e,n):(s=!e.$stable,re(e,o)),a=e}else e&&(ie(t,e),a={default:1});if(s)for(const i in o)te(i)||null!=a[i]||delete o[i]};function ce(){"boolean"!==typeof __VUE_PROD_HYDRATION_MISMATCH_DETAILS__&&((0,i.We)().__VUE_PROD_HYDRATION_MISMATCH_DETAILS__=!1)}const ue=Le;function le(t){return he(t)}function he(t,e){ce();const n=(0,i.We)();n.__VUE__=!0;const{insert:o,remove:s,patchProp:a,createElement:c,createText:u,createComment:l,setText:h,setElementText:d,parentNode:f,nextSibling:p,setScopeId:m=i.tE,insertStaticContent:g}=t,y=(t,e,n,r=null,i=null,o=null,s=void 0,a=null,c=!!e.dynamicChildren)=>{if(t===e)return;t&&!Xe(t,e)&&(r=Z(t),G(t,i,o,!0),t=null),-2===e.patchFlag&&(c=!1,e.dynamicChildren=null);const{type:u,ref:l,shapeFlag:h}=e;switch(u){case je:_(t,e,n,r);break;case Ue:w(t,e,n,r);break;case Ve:null==t&&T(e,n,r,s);break;case Fe:M(t,e,n,r,i,o,s,a,c);break;default:1&h?I(t,e,n,r,i,o,s,a,c):6&h?L(t,e,n,r,i,o,s,a,c):(64&h||128&h)&&u.process(t,e,n,r,i,o,s,a,c,nt)}null!=l&&i&&z(l,t&&t.ref,o,e||t,!e)},_=(t,e,n,r)=>{if(null==t)o(e.el=u(e.children),n,r);else{const n=e.el=t.el;e.children!==t.children&&h(n,e.children)}},w=(t,e,n,r)=>{null==t?o(e.el=l(e.children||""),n,r):e.el=t.el},T=(t,e,n,r)=>{[t.el,t.anchor]=g(t.children,e,n,r,t.el,t.anchor)},C=({el:t,anchor:e},n,r)=>{let i;while(t&&t!==e)i=p(t),o(t,n,r),t=i;o(e,n,r)},S=({el:t,anchor:e})=>{let n;while(t&&t!==e)n=p(t),s(t),t=n;s(e)},I=(t,e,n,r,i,o,s,a,c)=>{"svg"===e.type?s="svg":"math"===e.type&&(s="mathml"),null==t?k(e,n,r,i,o,s,a,c):O(t,e,i,o,s,a,c)},k=(t,e,n,r,s,u,l,h)=>{let f,p;const{props:m,shapeFlag:g,transition:y,dirs:v}=t;if(f=t.el=c(t.type,u,m&&m.is,m),8&g?d(f,t.children):16&g&&D(t.children,f,null,r,s,de(t,u),l,h),v&&A(t,null,r,"created"),x(f,t,t.scopeId,l,r),m){for(const t in m)"value"===t||(0,i.SU)(t)||a(f,t,null,m[t],u,r);"value"in m&&a(f,"value",null,m.value,u),(p=m.onVnodeBeforeMount)&&fn(p,r,t)}v&&A(t,null,r,"beforeMount");const _=pe(s,y);_&&y.beforeEnter(f),o(f,e,n),((p=m&&m.onVnodeMounted)||_||v)&&ue((()=>{p&&fn(p,r,t),_&&y.enter(f),v&&A(t,null,r,"mounted")}),s)},x=(t,e,n,r,i)=>{if(n&&m(t,n),r)for(let o=0;o<r.length;o++)m(t,r[o]);if(i){let n=i.subTree;if(e===n||Me(n.type)&&(n.ssContent===e||n.ssFallback===e)){const e=i.vnode;x(t,e,e.scopeId,e.slotScopeIds,i.parent)}}},D=(t,e,n,r,i,o,s,a,c=0)=>{for(let u=c;u<t.length;u++){const c=t[u]=a?ln(t[u]):un(t[u]);y(null,c,e,n,r,i,o,s,a)}},O=(t,e,n,r,o,s,c)=>{const u=e.el=t.el;let{patchFlag:l,dynamicChildren:h,dirs:f}=e;l|=16&t.patchFlag;const p=t.props||i.MZ,m=e.props||i.MZ;let g;if(n&&fe(n,!1),(g=m.onVnodeBeforeUpdate)&&fn(g,n,e,t),f&&A(e,t,n,"beforeUpdate"),n&&fe(n,!0),(p.innerHTML&&null==m.innerHTML||p.textContent&&null==m.textContent)&&d(u,""),h?P(t.dynamicChildren,h,u,n,r,de(e,o),s):c||$(t,e,u,null,n,r,de(e,o),s,!1),l>0){if(16&l)R(u,p,m,n,o);else if(2&l&&p.class!==m.class&&a(u,"class",null,m.class,o),4&l&&a(u,"style",p.style,m.style,o),8&l){const t=e.dynamicProps;for(let e=0;e<t.length;e++){const r=t[e],i=p[r],s=m[r];s===i&&"value"!==r||a(u,r,i,s,o,n)}}1&l&&t.children!==e.children&&d(u,e.children)}else c||null!=h||R(u,p,m,n,o);((g=m.onVnodeUpdated)||f)&&ue((()=>{g&&fn(g,n,e,t),f&&A(e,t,n,"updated")}),r)},P=(t,e,n,r,i,o,s)=>{for(let a=0;a<e.length;a++){const c=t[a],u=e[a],l=c.el&&(c.type===Fe||!Xe(c,u)||70&c.shapeFlag)?f(c.el):n;y(c,u,l,null,r,i,o,s,!0)}},R=(t,e,n,r,o)=>{if(e!==n){if(e!==i.MZ)for(const s in e)(0,i.SU)(s)||s in n||a(t,s,e[s],null,o,r);for(const s in n){if((0,i.SU)(s))continue;const c=n[s],u=e[s];c!==u&&"value"!==s&&a(t,s,u,c,o,r)}"value"in n&&a(t,"value",e.value,n.value,o)}},M=(t,e,n,r,i,s,a,c,l)=>{const h=e.el=t?t.el:u(""),d=e.anchor=t?t.anchor:u("");let{patchFlag:f,dynamicChildren:p,slotScopeIds:m}=e;m&&(c=c?c.concat(m):m),null==t?(o(h,n,r),o(d,n,r),D(e.children||[],n,d,i,s,a,c,l)):f>0&&64&f&&p&&t.dynamicChildren?(P(t.dynamicChildren,p,n,i,s,a,c),(null!=e.key||i&&e===i.subTree)&&me(t,e,!0)):$(t,e,n,d,i,s,a,c,l)},L=(t,e,n,r,i,o,s,a,c)=>{e.slotScopeIds=a,null==t?512&e.shapeFlag?i.ctx.activate(e,n,r,s,c):F(e,n,r,i,o,s,c):j(t,e,c)},F=(t,e,n,r,i,o,s)=>{const a=t.component=gn(t,r,i);if(q(t)&&(a.ctx.renderer=nt),kn(a,!1,s),a.asyncDep){if(i&&i.registerDep(a,U,s),!t.el){const t=a.subTree=en(Ue);w(null,t,e,n)}}else U(a,t,e,n,i,o,s)},j=(t,e,n)=>{const r=e.component=t.component;if(Oe(t,e,n)){if(r.asyncDep&&!r.asyncResolved)return void V(r,e,n);r.next=e,r.update()}else e.el=t.el,r.vnode=e},U=(t,e,n,o,s,a,c)=>{const u=()=>{if(t.isMounted){let{next:e,bu:n,u:r,parent:o,vnode:l}=t;{const n=ye(t);if(n)return e&&(e.el=l.el,V(t,e,c)),void n.asyncDep.then((()=>{t.isUnmounted||u()}))}let h,d=e;0,fe(t,!1),e?(e.el=l.el,V(t,e,c)):e=l,n&&(0,i.DY)(n),(h=e.props&&e.props.onVnodeBeforeUpdate)&&fn(h,o,e,l),fe(t,!0);const p=De(t);0;const m=t.subTree;t.subTree=p,y(m,p,f(m.el),Z(m),t,s,a),e.el=p.el,null===d&&Re(t,p.el),r&&ue(r,s),(h=e.props&&e.props.onVnodeUpdated)&&ue((()=>fn(h,o,e,l)),s)}else{let r;const{el:c,props:u}=e,{bm:l,m:h,parent:d,root:f,type:p}=t,m=W(e);if(fe(t,!1),l&&(0,i.DY)(l),!m&&(r=u&&u.onVnodeBeforeMount)&&fn(r,d,e),fe(t,!0),c&&it){const e=()=>{t.subTree=De(t),it(c,t.subTree,t,s,null)};m&&p.__asyncHydrate?p.__asyncHydrate(c,t,e):e()}else{f.ce&&f.ce._injectChildStyle(p);const r=t.subTree=De(t);0,y(null,r,n,o,t,s,a),e.el=r.el}if(h&&ue(h,s),!m&&(r=u&&u.onVnodeMounted)){const t=e;ue((()=>fn(r,d,t)),s)}(256&e.shapeFlag||d&&W(d.vnode)&&256&d.vnode.shapeFlag)&&t.a&&ue(t.a,s),t.isMounted=!0,e=n=o=null}};t.scope.on();const l=t.effect=new r.X2(u);t.scope.off();const h=t.update=l.run.bind(l),d=t.job=l.runIfDirty.bind(l);d.i=t,d.id=t.uid,l.scheduler=()=>v(d),fe(t,!0),h()},V=(t,e,n)=>{e.component=t;const i=t.vnode.props;t.vnode=e,t.next=null,Gt(t,e.props,i,n),ae(t,e.children,n),(0,r.C4)(),b(t),(0,r.bl)()},$=(t,e,n,r,i,o,s,a,c=!1)=>{const u=t&&t.children,l=t?t.shapeFlag:0,h=e.children,{patchFlag:f,shapeFlag:p}=e;if(f>0){if(128&f)return void B(u,h,n,r,i,o,s,a,c);if(256&f)return void H(u,h,n,r,i,o,s,a,c)}8&p?(16&l&&J(u,i,o),h!==u&&d(n,h)):16&l?16&p?B(u,h,n,r,i,o,s,a,c):J(u,i,o,!0):(8&l&&d(n,""),16&p&&D(h,n,r,i,o,s,a,c))},H=(t,e,n,r,o,s,a,c,u)=>{t=t||i.Oj,e=e||i.Oj;const l=t.length,h=e.length,d=Math.min(l,h);let f;for(f=0;f<d;f++){const r=e[f]=u?ln(e[f]):un(e[f]);y(t[f],r,n,null,o,s,a,c,u)}l>h?J(t,o,s,!0,!1,d):D(e,n,r,o,s,a,c,u,d)},B=(t,e,n,r,o,s,a,c,u)=>{let l=0;const h=e.length;let d=t.length-1,f=h-1;while(l<=d&&l<=f){const r=t[l],i=e[l]=u?ln(e[l]):un(e[l]);if(!Xe(r,i))break;y(r,i,n,null,o,s,a,c,u),l++}while(l<=d&&l<=f){const r=t[d],i=e[f]=u?ln(e[f]):un(e[f]);if(!Xe(r,i))break;y(r,i,n,null,o,s,a,c,u),d--,f--}if(l>d){if(l<=f){const t=f+1,i=t<h?e[t].el:r;while(l<=f)y(null,e[l]=u?ln(e[l]):un(e[l]),n,i,o,s,a,c,u),l++}}else if(l>f)while(l<=d)G(t[l],o,s,!0),l++;else{const p=l,m=l,g=new Map;for(l=m;l<=f;l++){const t=e[l]=u?ln(e[l]):un(e[l]);null!=t.key&&g.set(t.key,l)}let v,_=0;const w=f-m+1;let b=!1,E=0;const T=new Array(w);for(l=0;l<w;l++)T[l]=0;for(l=p;l<=d;l++){const r=t[l];if(_>=w){G(r,o,s,!0);continue}let i;if(null!=r.key)i=g.get(r.key);else for(v=m;v<=f;v++)if(0===T[v-m]&&Xe(r,e[v])){i=v;break}void 0===i?G(r,o,s,!0):(T[i-m]=l+1,i>=E?E=i:b=!0,y(r,e[i],n,null,o,s,a,c,u),_++)}const C=b?ge(T):i.Oj;for(v=C.length-1,l=w-1;l>=0;l--){const t=m+l,i=e[t],d=t+1<h?e[t+1].el:r;0===T[l]?y(null,i,n,d,o,s,a,c,u):b&&(v<0||l!==C[v]?K(i,n,d,2):v--)}}},K=(t,e,n,r,i=null)=>{const{el:s,type:a,transition:c,children:u,shapeFlag:l}=t;if(6&l)return void K(t.component.subTree,e,n,r);if(128&l)return void t.suspense.move(e,n,r);if(64&l)return void a.move(t,e,n,nt);if(a===Fe){o(s,e,n);for(let t=0;t<u.length;t++)K(u[t],e,n,r);return void o(t.anchor,e,n)}if(a===Ve)return void C(t,e,n);const h=2!==r&&1&l&&c;if(h)if(0===r)c.beforeEnter(s),o(s,e,n),ue((()=>c.enter(s)),i);else{const{leave:t,delayLeave:r,afterLeave:i}=c,a=()=>o(s,e,n),u=()=>{t(s,(()=>{a(),i&&i()}))};r?r(s,a,u):u()}else o(s,e,n)},G=(t,e,n,r=!1,i=!1)=>{const{type:o,props:s,ref:a,children:c,dynamicChildren:u,shapeFlag:l,patchFlag:h,dirs:d,cacheIndex:f}=t;if(-2===h&&(i=!1),null!=a&&z(a,null,n,t,!0),null!=f&&(e.renderCache[f]=void 0),256&l)return void e.ctx.deactivate(t);const p=1&l&&d,m=!W(t);let g;if(m&&(g=s&&s.onVnodeBeforeUnmount)&&fn(g,e,t),6&l)X(t.component,n,r);else{if(128&l)return void t.suspense.unmount(n,r);p&&A(t,null,e,"beforeUnmount"),64&l?t.type.remove(t,e,n,nt,r):u&&!u.hasOnce&&(o!==Fe||h>0&&64&h)?J(u,e,n,!1,!0):(o===Fe&&384&h||!i&&16&l)&&J(c,e,n),r&&Y(t)}(m&&(g=s&&s.onVnodeUnmounted)||p)&&ue((()=>{g&&fn(g,e,t),p&&A(t,null,e,"unmounted")}),n)},Y=t=>{const{type:e,el:n,anchor:r,transition:i}=t;if(e===Fe)return void Q(n,r);if(e===Ve)return void S(t);const o=()=>{s(n),i&&!i.persisted&&i.afterLeave&&i.afterLeave()};if(1&t.shapeFlag&&i&&!i.persisted){const{leave:e,delayLeave:r}=i,s=()=>e(n,o);r?r(t.el,o,s):s()}else o()},Q=(t,e)=>{let n;while(t!==e)n=p(t),s(t),t=n;s(e)},X=(t,e,n)=>{const{bum:r,scope:o,job:s,subTree:a,um:c,m:u,a:l}=t;ve(u),ve(l),r&&(0,i.DY)(r),o.stop(),s&&(s.flags|=8,G(a,t,e,n)),c&&ue(c,e),ue((()=>{t.isUnmounted=!0}),e),e&&e.pendingBranch&&!e.isUnmounted&&t.asyncDep&&!t.asyncResolved&&t.suspenseId===e.pendingId&&(e.deps--,0===e.deps&&e.resolve())},J=(t,e,n,r=!1,i=!1,o=0)=>{for(let s=o;s<t.length;s++)G(t[s],e,n,r,i)},Z=t=>{if(6&t.shapeFlag)return Z(t.component.subTree);if(128&t.shapeFlag)return t.suspense.next();const e=p(t.anchor||t.el),n=e&&e[N];return n?p(n):e};let tt=!1;const et=(t,e,n)=>{null==t?e._vnode&&G(e._vnode,null,null,!0):y(e._vnode||null,t,e,null,null,null,n),e._vnode=t,tt||(tt=!0,b(),E(),tt=!1)},nt={p:y,um:G,m:K,r:Y,mt:F,mc:D,pc:$,pbc:P,n:Z,o:t};let rt,it;return e&&([rt,it]=e(nt)),{render:et,hydrate:rt,createApp:Vt(et,rt)}}function de({type:t,props:e},n){return"svg"===n&&"foreignObject"===t||"mathml"===n&&"annotation-xml"===t&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function fe({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function pe(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function me(t,e,n=!1){const r=t.children,o=e.children;if((0,i.cy)(r)&&(0,i.cy)(o))for(let i=0;i<r.length;i++){const t=r[i];let e=o[i];1&e.shapeFlag&&!e.dynamicChildren&&((e.patchFlag<=0||32===e.patchFlag)&&(e=o[i]=ln(o[i]),e.el=t.el),n||-2===e.patchFlag||me(t,e)),e.type===je&&(e.el=t.el)}}function ge(t){const e=t.slice(),n=[0];let r,i,o,s,a;const c=t.length;for(r=0;r<c;r++){const c=t[r];if(0!==c){if(i=n[n.length-1],t[i]<c){e[r]=i,n.push(r);continue}o=0,s=n.length-1;while(o<s)a=o+s>>1,t[n[a]]<c?o=a+1:s=a;c<t[n[o]]&&(o>0&&(e[r]=n[o-1]),n[o]=r)}}o=n.length,s=n[o-1];while(o-- >0)n[o]=s,s=e[s];return n}function ye(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:ye(e)}function ve(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const _e=Symbol.for("v-scx"),we=()=>{{const t=Bt(_e);return t}};function be(t,e,n){return Ee(t,e,n)}function Ee(t,e,n=i.MZ){const{immediate:o,deep:a,flush:c,once:u}=n;const l=(0,i.X$)({},n);const h=e&&o||!e&&"post"!==c;let d;if(In)if("sync"===c){const t=we();d=t.__watcherHandles||(t.__watcherHandles=[])}else if(!h){const t=()=>{};return t.stop=i.tE,t.resume=i.tE,t.pause=i.tE,t}const f=yn;l.call=(t,e,n)=>s(t,f,e,n);let p=!1;"post"===c?l.scheduler=t=>{ue(t,f&&f.suspense)}:"sync"!==c&&(p=!0,l.scheduler=(t,e)=>{e?t():v(t)}),l.augmentJob=t=>{e&&(t.flags|=4),p&&(t.flags|=2,f&&(t.id=f.uid,t.i=f))};const m=(0,r.wB)(t,e,l);return In&&(d?d.push(m):h&&m()),m}function Te(t,e,n){const r=this.proxy,o=(0,i.Kg)(t)?t.includes(".")?Ce(r,t):()=>r[t]:t.bind(r,r);let s;(0,i.Tn)(e)?s=e:(s=e.handler,n=e);const a=bn(this),c=Ee(o,s.bind(r),n);return a(),c}function Ce(t,e){const n=e.split(".");return()=>{let e=t;for(let t=0;t<n.length&&e;t++)e=e[n[t]];return e}}const Se=(t,e)=>"modelValue"===e||"model-value"===e?t.modelModifiers:t[`${e}Modifiers`]||t[`${(0,i.PT)(e)}Modifiers`]||t[`${(0,i.Tg)(e)}Modifiers`];function Ie(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||i.MZ;let o=n;const a=e.startsWith("update:"),c=a&&Se(r,e.slice(7));let u;c&&(c.trim&&(o=n.map((t=>(0,i.Kg)(t)?t.trim():t))),c.number&&(o=n.map(i.bB)));let l=r[u=(0,i.rU)(e)]||r[u=(0,i.rU)((0,i.PT)(e))];!l&&a&&(l=r[u=(0,i.rU)((0,i.Tg)(e))]),l&&s(l,t,6,o);const h=r[u+"Once"];if(h){if(t.emitted){if(t.emitted[u])return}else t.emitted={};t.emitted[u]=!0,s(h,t,6,o)}}function ke(t,e,n=!1){const r=e.emitsCache,o=r.get(t);if(void 0!==o)return o;const s=t.emits;let a={},c=!1;if(!(0,i.Tn)(t)){const r=t=>{const n=ke(t,e,!0);n&&(c=!0,(0,i.X$)(a,n))};!n&&e.mixins.length&&e.mixins.forEach(r),t.extends&&r(t.extends),t.mixins&&t.mixins.forEach(r)}return s||c?((0,i.cy)(s)?s.forEach((t=>a[t]=null)):(0,i.X$)(a,s),(0,i.Gv)(t)&&r.set(t,a),a):((0,i.Gv)(t)&&r.set(t,null),null)}function xe(t,e){return!(!t||!(0,i.Mp)(e))&&(e=e.slice(2).replace(/Once$/,""),(0,i.$3)(t,e[0].toLowerCase()+e.slice(1))||(0,i.$3)(t,(0,i.Tg)(e))||(0,i.$3)(t,e))}function De(t){const{type:e,vnode:n,proxy:r,withProxy:o,propsOptions:[s],slots:c,attrs:u,emit:l,render:h,renderCache:d,props:f,data:p,setupState:m,ctx:g,inheritAttrs:y}=t,v=k(t);let _,w;try{if(4&n.shapeFlag){const t=o||r,e=t;_=un(h.call(e,t,d,f,m,p,g)),w=u}else{const t=e;0,_=un(t.length>1?t(f,{attrs:u,slots:c,emit:l}):t(f,null)),w=e.props?u:Ae(u)}}catch(E){$e.length=0,a(E,t,1),_=en(Ue)}let b=_;if(w&&!1!==y){const t=Object.keys(w),{shapeFlag:e}=b;t.length&&7&e&&(s&&t.some(i.CP)&&(w=Ne(w,s)),b=on(b,w,!1,!0))}return n.dirs&&(b=on(b,null,!1,!0),b.dirs=b.dirs?b.dirs.concat(n.dirs):n.dirs),n.transition&&V(b,n.transition),_=b,k(v),_}const Ae=t=>{let e;for(const n in t)("class"===n||"style"===n||(0,i.Mp)(n))&&((e||(e={}))[n]=t[n]);return e},Ne=(t,e)=>{const n={};for(const r in t)(0,i.CP)(r)&&r.slice(9)in e||(n[r]=t[r]);return n};function Oe(t,e,n){const{props:r,children:i,component:o}=t,{props:s,children:a,patchFlag:c}=e,u=o.emitsOptions;if(e.dirs||e.transition)return!0;if(!(n&&c>=0))return!(!i&&!a||a&&a.$stable)||r!==s&&(r?!s||Pe(r,s,u):!!s);if(1024&c)return!0;if(16&c)return r?Pe(r,s,u):!!s;if(8&c){const t=e.dynamicProps;for(let e=0;e<t.length;e++){const n=t[e];if(s[n]!==r[n]&&!xe(u,n))return!0}}return!1}function Pe(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const o=r[i];if(e[o]!==t[o]&&!xe(n,o))return!0}return!1}function Re({vnode:t,parent:e},n){while(e){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r!==t)break;(t=e.vnode).el=n,e=e.parent}}const Me=t=>t.__isSuspense;function Le(t,e){e&&e.pendingBranch?(0,i.cy)(t)?e.effects.push(...t):e.effects.push(t):w(t)}const Fe=Symbol.for("v-fgt"),je=Symbol.for("v-txt"),Ue=Symbol.for("v-cmt"),Ve=Symbol.for("v-stc"),$e=[];let He=null;function Be(t=!1){$e.push(He=t?null:[])}function ze(){$e.pop(),He=$e[$e.length-1]||null}let We=1;function qe(t,e=!1){We+=t,t<0&&He&&e&&(He.hasOnce=!0)}function Ke(t){return t.dynamicChildren=We>0?He||i.Oj:null,ze(),We>0&&He&&He.push(t),t}function Ge(t,e,n,r,i,o){return Ke(tn(t,e,n,r,i,o,!0))}function Ye(t,e,n,r,i){return Ke(en(t,e,n,r,i,!0))}function Qe(t){return!!t&&!0===t.__v_isVNode}function Xe(t,e){return t.type===e.type&&t.key===e.key}const Je=({key:t})=>null!=t?t:null,Ze=({ref:t,ref_key:e,ref_for:n})=>("number"===typeof t&&(t=""+t),null!=t?(0,i.Kg)(t)||(0,r.i9)(t)||(0,i.Tn)(t)?{i:S,r:t,k:e,f:!!n}:t:null);function tn(t,e=null,n=null,r=0,o=null,s=(t===Fe?0:1),a=!1,c=!1){const u={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Je(e),ref:e&&Ze(e),scopeId:I,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:S};return c?(hn(u,n),128&s&&t.normalize(u)):n&&(u.shapeFlag|=(0,i.Kg)(n)?8:16),We>0&&!a&&He&&(u.patchFlag>0||6&s)&&32!==u.patchFlag&&He.push(u),u}const en=nn;function nn(t,e=null,n=null,o=0,s=null,a=!1){if(t&&t!==pt||(t=Ue),Qe(t)){const r=on(t,e,!0);return n&&hn(r,n),We>0&&!a&&He&&(6&r.shapeFlag?He[He.indexOf(t)]=r:He.push(r)),r.patchFlag=-2,r}if(Mn(t)&&(t=t.__vccOpts),e){e=rn(e);let{class:t,style:n}=e;t&&!(0,i.Kg)(t)&&(e.class=(0,i.C4)(t)),(0,i.Gv)(n)&&((0,r.ju)(n)&&!(0,i.cy)(n)&&(n=(0,i.X$)({},n)),e.style=(0,i.Tr)(n))}const c=(0,i.Kg)(t)?1:Me(t)?128:O(t)?64:(0,i.Gv)(t)?4:(0,i.Tn)(t)?2:0;return tn(t,e,n,o,s,c,a,!0)}function rn(t){return t?(0,r.ju)(t)||qt(t)?(0,i.X$)({},t):t:null}function on(t,e,n=!1,r=!1){const{props:o,ref:s,patchFlag:a,children:c,transition:u}=t,l=e?dn(o||{},e):o,h={__v_isVNode:!0,__v_skip:!0,type:t.type,props:l,key:l&&Je(l),ref:e&&e.ref?n&&s?(0,i.cy)(s)?s.concat(Ze(e)):[s,Ze(e)]:Ze(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:c,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Fe?-1===a?16:16|a:a,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:u,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&on(t.ssContent),ssFallback:t.ssFallback&&on(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return u&&r&&V(h,u.clone(h)),h}function sn(t=" ",e=0){return en(je,null,t,e)}function an(t,e){const n=en(Ve,null,t);return n.staticCount=e,n}function cn(t="",e=!1){return e?(Be(),Ye(Ue,null,t)):en(Ue,null,t)}function un(t){return null==t||"boolean"===typeof t?en(Ue):(0,i.cy)(t)?en(Fe,null,t.slice()):Qe(t)?ln(t):en(je,null,String(t))}function ln(t){return null===t.el&&-1!==t.patchFlag||t.memo?t:on(t)}function hn(t,e){let n=0;const{shapeFlag:r}=t;if(null==e)e=null;else if((0,i.cy)(e))n=16;else if("object"===typeof e){if(65&r){const n=e.default;return void(n&&(n._c&&(n._d=!1),hn(t,n()),n._c&&(n._d=!0)))}{n=32;const r=e._;r||qt(e)?3===r&&S&&(1===S.slots._?e._=1:(e._=2,t.patchFlag|=1024)):e._ctx=S}}else(0,i.Tn)(e)?(e={default:e,_ctx:S},n=32):(e=String(e),64&r?(n=16,e=[sn(e)]):n=8);t.children=e,t.shapeFlag|=n}function dn(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const t in r)if("class"===t)e.class!==r.class&&(e.class=(0,i.C4)([e.class,r.class]));else if("style"===t)e.style=(0,i.Tr)([e.style,r.style]);else if((0,i.Mp)(t)){const n=e[t],o=r[t];!o||n===o||(0,i.cy)(n)&&n.includes(o)||(e[t]=n?[].concat(n,o):o)}else""!==t&&(e[t]=r[t])}return e}function fn(t,e,n,r=null){s(t,e,7,[n,r])}const pn=jt();let mn=0;function gn(t,e,n){const o=t.type,s=(e?e.appContext:t.appContext)||pn,a={uid:mn++,vnode:t,type:o,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new r.yC(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Jt(o,s),emitsOptions:ke(o,s),emit:null,emitted:null,propsDefaults:i.MZ,inheritAttrs:o.inheritAttrs,ctx:i.MZ,data:i.MZ,props:i.MZ,attrs:i.MZ,slots:i.MZ,refs:i.MZ,setupState:i.MZ,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=e?e.root:a,a.emit=Ie.bind(null,a),t.ce&&t.ce(a),a}let yn=null;const vn=()=>yn||S;let _n,wn;{const t=(0,i.We)(),e=(e,n)=>{let r;return(r=t[e])||(r=t[e]=[]),r.push(n),t=>{r.length>1?r.forEach((e=>e(t))):r[0](t)}};_n=e("__VUE_INSTANCE_SETTERS__",(t=>yn=t)),wn=e("__VUE_SSR_SETTERS__",(t=>In=t))}const bn=t=>{const e=yn;return _n(t),t.scope.on(),()=>{t.scope.off(),_n(e)}},En=()=>{yn&&yn.scope.off(),_n(null)};function Tn(t){return 4&t.vnode.shapeFlag}let Cn,Sn,In=!1;function kn(t,e=!1,n=!1){e&&wn(e);const{props:r,children:i}=t.vnode,o=Tn(t);Kt(t,r,o,e),se(t,i,n);const s=o?xn(t,e):void 0;return e&&wn(!1),s}function xn(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,bt);const{setup:s}=n;if(s){(0,r.C4)();const n=t.setupContext=s.length>1?On(t):null,c=bn(t),u=o(s,t,0,[t.props,n]),l=(0,i.yL)(u);if((0,r.bl)(),c(),!l&&!t.sp||W(t)||B(t),l){if(u.then(En,En),e)return u.then((n=>{Dn(t,n,e)})).catch((e=>{a(e,t,0)}));t.asyncDep=u}else Dn(t,u,e)}else An(t,e)}function Dn(t,e,n){(0,i.Tn)(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:(0,i.Gv)(e)&&(t.setupState=(0,r.Pr)(e)),An(t,n)}function An(t,e,n){const o=t.type;if(!t.render){if(!e&&Cn&&!o.render){const e=o.template||xt(t).template;if(e){0;const{isCustomElement:n,compilerOptions:r}=t.appContext.config,{delimiters:s,compilerOptions:a}=o,c=(0,i.X$)((0,i.X$)({isCustomElement:n,delimiters:s},r),a);o.render=Cn(e,c)}}t.render=o.render||i.tE,Sn&&Sn(t)}{const e=bn(t);(0,r.C4)();try{Ct(t)}finally{(0,r.bl)(),e()}}}const Nn={get(t,e){return(0,r.u4)(t,"get",""),t[e]}};function On(t){const e=e=>{t.exposed=e||{}};return{attrs:new Proxy(t.attrs,Nn),slots:t.slots,emit:t.emit,expose:e}}function Pn(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy((0,r.Pr)((0,r.IG)(t.exposed)),{get(e,n){return n in e?e[n]:n in _t?_t[n](t):void 0},has(t,e){return e in t||e in _t}})):t.proxy}function Rn(t,e=!0){return(0,i.Tn)(t)?t.displayName||t.name:t.name||e&&t.__name}function Mn(t){return(0,i.Tn)(t)&&"__vccOpts"in t}const Ln=(t,e)=>{const n=(0,r.EW)(t,e,In);return n};function Fn(t,e,n){const r=arguments.length;return 2===r?(0,i.Gv)(e)&&!(0,i.cy)(e)?Qe(e)?en(t,null,[e]):en(t,e):en(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):3===r&&Qe(n)&&(n=[n]),en(t,e,n))}const jn="3.5.13"},6801:function(t,e,n){"use strict";var r=n(3724),i=n(8686),o=n(4913),s=n(8551),a=n(5397),c=n(1072);e.f=r&&!i?Object.defineProperties:function(t,e){s(t);var n,r=a(e),i=c(e),u=i.length,l=0;while(u>l)o.f(t,n=i[l++],r[n]);return t}},6823:function(t){"use strict";var e=String;t.exports=function(t){try{return e(t)}catch(n){return"Object"}}},6837:function(t){"use strict";var e=TypeError,n=9007199254740991;t.exports=function(t){if(t>n)throw e("Maximum allowed index exceeded");return t}},6840:function(t,e,n){"use strict";var r=n(4901),i=n(4913),o=n(283),s=n(9433);t.exports=function(t,e,n,a){a||(a={});var c=a.enumerable,u=void 0!==a.name?a.name:e;if(r(n)&&o(n,u,a),a.global)c?t[e]=n:s(e,n);else{try{a.unsafe?t[e]&&(c=!0):delete t[e]}catch(l){}c?t[e]=n:i.f(t,e,{value:n,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return t}},6955:function(t,e,n){"use strict";var r=n(2140),i=n(4901),o=n(2195),s=n(8227),a=s("toStringTag"),c=Object,u="Arguments"===o(function(){return arguments}()),l=function(t,e){try{return t[e]}catch(n){}};t.exports=r?o:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=l(e=c(t),a))?n:u?o(e):"Object"===(r=o(e))&&i(e.callee)?"Arguments":r}},6969:function(t,e,n){"use strict";var r=n(2777),i=n(757);t.exports=function(t){var e=r(t,"string");return i(e)?e:e+""}},6980:function(t){"use strict";t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},7040:function(t,e,n){"use strict";var r=n(4495);t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},7055:function(t,e,n){"use strict";var r=n(9504),i=n(9039),o=n(2195),s=Object,a=r("".split);t.exports=i((function(){return!s("z").propertyIsEnumerable(0)}))?function(t){return"String"===o(t)?a(t,""):s(t)}:s},7080:function(t,e,n){"use strict";var r=n(4402).has;t.exports=function(t){return r(t),t}},7347:function(t,e,n){"use strict";var r=n(3724),i=n(9565),o=n(8773),s=n(6980),a=n(5397),c=n(6969),u=n(9297),l=n(5917),h=Object.getOwnPropertyDescriptor;e.f=r?h:function(t,e){if(t=a(t),e=c(e),l)try{return h(t,e)}catch(n){}if(u(t,e))return s(!i(o.f,t,e),t[e])}},7476:function(t,e,n){"use strict";var r=n(2195),i=n(9504);t.exports=function(t){if("Function"===r(t))return i(t)}},7588:function(t,e,n){"use strict";var r=n(6518),i=n(9565),o=n(2652),s=n(9306),a=n(8551),c=n(1767),u=n(9539),l=n(4549),h=l("forEach",TypeError);r({target:"Iterator",proto:!0,real:!0,forced:h},{forEach:function(t){a(this);try{s(t)}catch(r){u(this,"throw",r)}if(h)return i(h,this,t);var e=c(this),n=0;o(e,(function(e){t(e,n++)}),{IS_RECORD:!0})}})},7629:function(t,e,n){"use strict";var r=n(6395),i=n(4576),o=n(9433),s="__core-js_shared__",a=t.exports=i[s]||o(s,{});(a.versions||(a.versions=[])).push({version:"3.42.0",mode:r?"pure":"global",copyright:" 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.42.0/LICENSE",source:"https://github.com/zloirock/core-js"})},7642:function(t,e,n){"use strict";var r=n(6518),i=n(3440),o=n(4916),s=!o("difference",(function(t){return 0===t.size}));r({target:"Set",proto:!0,real:!0,forced:s},{difference:i})},7657:function(t,e,n){"use strict";var r,i,o,s=n(9039),a=n(4901),c=n(34),u=n(2360),l=n(2787),h=n(6840),d=n(8227),f=n(6395),p=d("iterator"),m=!1;[].keys&&(o=[].keys(),"next"in o?(i=l(l(o)),i!==Object.prototype&&(r=i)):m=!0);var g=!c(r)||s((function(){var t={};return r[p].call(t)!==t}));g?r={}:f&&(r=u(r)),a(r[p])||h(r,p,(function(){return this})),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:m}},7740:function(t,e,n){"use strict";var r=n(9297),i=n(5031),o=n(7347),s=n(4913);t.exports=function(t,e,n){for(var a=i(e),c=s.f,u=o.f,l=0;l<a.length;l++){var h=a[l];r(t,h)||n&&r(n,h)||c(t,h,u(e,h))}}},7750:function(t,e,n){"use strict";var r=n(4117),i=TypeError;t.exports=function(t){if(r(t))throw new i("Can't call method on "+t);return t}},7751:function(t,e,n){"use strict";var r=n(4576),i=n(4901),o=function(t){return i(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?o(r[t]):r[t]&&r[t][e]}},8003:function(t,e,n){n(4114),n(8111),n(2489),
/*!
 * TOAST UI Date Picker
 * @version 4.3.3
 * @author NHN Cloud. FE Development Lab <dl_javascript@nhn.com>
 * @license MIT
 */
function(e,r){t.exports=r(n(3257))}(window,(function(t){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="dist",n(n.s=34)}([function(t,e,n){"use strict";var r=n(35),i=n(7);function o(t,e){var n;return e||(e=t,t=null),n=e.init||function(){},t&&r(n,t),e.hasOwnProperty("static")&&(i(n,e["static"]),delete e["static"]),i(n.prototype,e),n}t.exports=o},function(t,e,n){"use strict";t.exports={TYPE_DATE:"date",TYPE_MONTH:"month",TYPE_YEAR:"year",TYPE_HOUR:"hour",TYPE_MINUTE:"minute",TYPE_MERIDIEM:"meridiem",MIN_DATE:new Date(1900,0,1),MAX_DATE:new Date(2999,11,31),DEFAULT_LANGUAGE_TYPE:"en",CLASS_NAME_SELECTED:"tui-is-selected",CLASS_NAME_PREV_MONTH_BTN:"tui-calendar-btn-prev-month",CLASS_NAME_PREV_YEAR_BTN:"tui-calendar-btn-prev-year",CLASS_NAME_NEXT_YEAR_BTN:"tui-calendar-btn-next-year",CLASS_NAME_NEXT_MONTH_BTN:"tui-calendar-btn-next-month",CLASS_NAME_TITLE_TODAY:"tui-calendar-title-today",DEFAULT_WEEK_START_DAY:"Sun",WEEK_START_DAY_MAP:{sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6}}},function(t,e,n){"use strict";function r(t,e,n){var r=0,i=t.length;for(n=n||null;r<i;r+=1)if(!1===e.call(n,t[r],r,t))break}t.exports=r},function(t,e,n){"use strict";var r=n(6);function i(t,e,n){var i,o;if(n=n||0,!r(e))return-1;if(Array.prototype.indexOf)return Array.prototype.indexOf.call(e,t,n);for(o=e.length,i=n;n>=0&&i<o;i+=1)if(e[i]===t)return i;return-1}t.exports=i},function(t,e,n){"use strict";var r=n(2),i=n(46),o=n(47),s=0,a={getTarget:function(t){return t.target||t.srcElement},getElement:function(t){return i(t)?t:document.querySelector(t)},getSelector:function(t){var e="";return t.id?e="#"+t.id:t.className&&(e="."+t.className.split(" ")[0]),e},generateId:function(){return s+=1,s},filter:function(t,e){var n=[];return r(t,(function(t){e(t)&&n.push(t)})),n},sendHostName:function(){o("date-picker","UA-129987462-1")}};t.exports=a},function(t,e,n){"use strict";var r=n(28),i=n(15),o=n(1),s=o.TYPE_DATE,a=o.TYPE_MONTH,c=o.TYPE_YEAR,u={getWeeksCount:function(t,e){var n=u.getFirstDay(t,e),r=u.getLastDayInMonth(t,e);return Math.ceil((n+r)/7)},isValidDate:function(t){return r(t)&&!isNaN(t.getTime())},getFirstDay:function(t,e){return new Date(t,e-1,1).getDay()},getFirstDayTimestamp:function(t,e){return new Date(t,e,1).getTime()},getLastDayInMonth:function(t,e){return new Date(t,e,0).getDate()},prependLeadingZero:function(t){var e="";return t<10&&(e="0"),e+t},getMeridiemHour:function(t){return t%=12,0===t&&(t=12),t},getSafeNumber:function(t,e){if(isNaN(e)||!i(e))throw Error("The defaultNumber must be a valid number.");return isNaN(t)?e:Number(t)},getDateOfWeek:function(t,e,n,r){var i=new Date(t,e-1).getDay(),o=i-r-1;return new Date(t,e-1,7*n-o)},getRangeArr:function(t,e){var n,r=[];if(t>e)for(n=e;n>=t;n-=1)r.push(n);else for(n=t;n<=e;n+=1)r.push(n);return r},cloneWithStartOf:function(t,e){switch(e=e||s,t=new Date(t),t.setHours(0,0,0,0),e){case s:break;case a:t.setDate(1);break;case c:t.setMonth(0,1);break;default:throw Error("Unsupported type: "+e)}return t},cloneWithEndOf:function(t,e){switch(e=e||s,t=new Date(t),t.setHours(23,59,59,999),e){case s:break;case a:t.setMonth(t.getMonth()+1,0);break;case c:t.setMonth(11,31);break;default:throw Error("Unsupported type: "+e)}return t},compare:function(t,e,n){var r,i;return u.isValidDate(t)&&u.isValidDate(e)?(n?(r=u.cloneWithStartOf(t,n).getTime(),i=u.cloneWithStartOf(e,n).getTime()):(r=t.getTime(),i=e.getTime()),r>i?1:r===i?0:-1):NaN},isSame:function(t,e,n){return 0===u.compare(t,e,n)},inRange:function(t,e,n,r){return u.compare(t,n,r)<1&&u.compare(e,n,r)>-1}};t.exports=u},function(t,e,n){"use strict";function r(t){return t instanceof Array}t.exports=r},function(t,e,n){"use strict";function r(t,e){var n,r,i,o,s=Object.prototype.hasOwnProperty;for(i=1,o=arguments.length;i<o;i+=1)for(r in n=arguments[i],n)s.call(n,r)&&(t[r]=n[r]);return t}t.exports=r},function(t,e,n){"use strict";var r=n(7),i=n(37),o=n(13),s=n(22),a=n(6),c=n(39),u=n(9),l=/\s+/g;function h(){this.events=null,this.contexts=null}h.mixin=function(t){r(t.prototype,h.prototype)},h.prototype._getHandlerItem=function(t,e){var n={handler:t};return e&&(n.context=e),n},h.prototype._safeEvent=function(t){var e,n=this.events;return n||(n=this.events={}),t&&(e=n[t],e||(e=[],n[t]=e),n=e),n},h.prototype._safeContext=function(){var t=this.contexts;return t||(t=this.contexts=[]),t},h.prototype._indexOfContext=function(t){var e=this._safeContext(),n=0;while(e[n]){if(t===e[n][0])return n;n+=1}return-1},h.prototype._memorizeContext=function(t){var e,n;i(t)&&(e=this._safeContext(),n=this._indexOfContext(t),n>-1?e[n][1]+=1:e.push([t,1]))},h.prototype._forgetContext=function(t){var e,n;i(t)&&(e=this._safeContext(),n=this._indexOfContext(t),n>-1&&(e[n][1]-=1,e[n][1]<=0&&e.splice(n,1)))},h.prototype._bindEvent=function(t,e,n){var r=this._safeEvent(t);this._memorizeContext(n),r.push(this._getHandlerItem(e,n))},h.prototype.on=function(t,e,n){var r=this;o(t)?(t=t.split(l),u(t,(function(t){r._bindEvent(t,e,n)}))):s(t)&&(n=e,u(t,(function(t,e){r.on(e,t,n)})))},h.prototype.once=function(t,e,n){var r=this;if(s(t))return n=e,void u(t,(function(t,e){r.once(e,t,n)}));function i(){e.apply(n,arguments),r.off(t,i,n)}this.on(t,i,n)},h.prototype._spliceMatches=function(t,e){var n,r=0;if(a(t))for(n=t.length;r<n;r+=1)!0===e(t[r])&&(t.splice(r,1),n-=1,r-=1)},h.prototype._matchHandler=function(t){var e=this;return function(n){var r=t===n.handler;return r&&e._forgetContext(n.context),r}},h.prototype._matchContext=function(t){var e=this;return function(n){var r=t===n.context;return r&&e._forgetContext(n.context),r}},h.prototype._matchHandlerAndContext=function(t,e){var n=this;return function(r){var i=t===r.handler,o=e===r.context,s=i&&o;return s&&n._forgetContext(r.context),s}},h.prototype._offByEventName=function(t,e){var n=this,r=c(e),i=n._matchHandler(e);t=t.split(l),u(t,(function(t){var e=n._safeEvent(t);r?n._spliceMatches(e,i):(u(e,(function(t){n._forgetContext(t.context)})),n.events[t]=[])}))},h.prototype._offByHandler=function(t){var e=this,n=this._matchHandler(t);u(this._safeEvent(),(function(t){e._spliceMatches(t,n)}))},h.prototype._offByObject=function(t,e){var n,r=this;this._indexOfContext(t)<0?u(t,(function(t,e){r.off(e,t)})):o(e)?(n=this._matchContext(t),r._spliceMatches(this._safeEvent(e),n)):c(e)?(n=this._matchHandlerAndContext(e,t),u(this._safeEvent(),(function(t){r._spliceMatches(t,n)}))):(n=this._matchContext(t),u(this._safeEvent(),(function(t){r._spliceMatches(t,n)})))},h.prototype.off=function(t,e){o(t)?this._offByEventName(t,e):arguments.length?c(t)?this._offByHandler(t):s(t)&&this._offByObject(t,e):(this.events={},this.contexts=[])},h.prototype.fire=function(t){this.invoke.apply(this,arguments)},h.prototype.invoke=function(t){var e,n,r,i;if(!this.hasListener(t))return!0;e=this._safeEvent(t),n=Array.prototype.slice.call(arguments,1),r=0;while(e[r]){if(i=e[r],!1===i.handler.apply(i.context,n))return!1;r+=1}return!0},h.prototype.hasListener=function(t){return this.getListenerLength(t)>0},h.prototype.getListenerLength=function(t){var e=this._safeEvent(t);return e.length},t.exports=h},function(t,e,n){"use strict";var r=n(6),i=n(2),o=n(23);function s(t,e,n){r(t)?i(t,e,n):o(t,e,n)}t.exports=s},function(t,e,n){"use strict";t.exports={en:{titles:{DD:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],D:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],MMM:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],MMMM:["January","February","March","April","May","June","July","August","September","October","November","December"]},titleFormat:"MMMM yyyy",todayFormat:"To\\d\\ay: DD, MMMM d, yyyy",time:"Time",date:"Date"},ko:{titles:{DD:["","","","","","",""],D:["","","","","","",""],MMM:["1","2","3","4","5","6","7","8","9","10","11","12"],MMMM:["1","2","3","4","5","6","7","8","9","10","11","12"]},titleFormat:"yyyy.MM",todayFormat:": yyyy.MM.dd (D)",date:"",time:""}}},function(t,e,n){"use strict";var r=n(3),i=n(9),o=n(6),s=n(13),a=n(7),c=/{{\s?|\s?}}/g,u=/^[a-zA-Z0-9_@]+\[[a-zA-Z0-9_@"']+\]$/,l=/\[\s?|\s?\]/,h=/^[a-zA-Z_]+\.[a-zA-Z_]+$/,d=/\./,f=/^["']\w+["']$/,p=/"|'/g,m=/^-?\d+\.?\d*$/,g=2,y={if:E,each:T,with:C},v=3==="a".split(/a/).length,_=function(){return v?function(t,e){return t.split(e)}:function(t,e){var n,r,i=[],o=0;e.global||(e=new RegExp(e,"g")),n=e.exec(t);while(null!==n)r=n.index,i.push(t.slice(o,r)),o=r+n[0].length,n=e.exec(t);return i.push(t.slice(o)),i}}();function w(t,e){var n,r=e[t];return"true"===t?r=!0:"false"===t?r=!1:f.test(t)?r=t.replace(p,""):u.test(t)?(n=t.split(l),r=w(n[0],e)[w(n[1],e)]):h.test(t)?(n=t.split(d),r=w(n[0],e)[n[1]]):m.test(t)&&(r=parseFloat(t)),r}function b(t,e){var n=[t],r=[],o=0,s=0;return i(e,(function(t,i){0===t.indexOf("if")?o+=1:"/if"===t?o-=1:o||0!==t.indexOf("elseif")&&"else"!==t||(n.push("else"===t?["true"]:t.split(" ").slice(1)),r.push(e.slice(s,i)),s=i+1)})),r.push(e.slice(s)),{exps:n,sourcesInsideIf:r}}function E(t,e,n){var r=b(t,e),o=!1,s="";return i(r.exps,(function(t,e){return o=k(t,n),o&&(s=D(r.sourcesInsideIf[e],n)),!o})),s}function T(t,e,n){var r=k(t,n),s=o(r)?"@index":"@key",c={},u="";return i(r,(function(t,r){c[s]=r,c["@this"]=t,a(n,c),u+=D(e.slice(),n)})),u}function C(t,e,n){var i=r("as",t),o=t[i+1],s=k(t.slice(0,i),n),c={};return c[o]=s,D(e,a(n,c))||""}function S(t,e,n){var r=t.splice(e+1,n-e);return r.pop(),r}function I(t,e,n){var r,i=y[t],o=1,a=0,c=a+g,u=e[c];while(o&&s(u))0===u.indexOf(t)?o+=1:0===u.indexOf("/"+t)&&(o-=1,r=c),c+=g,u=e[c];if(o)throw Error(t+" needs {{/"+t+"}} expression.");return e[a]=i(e[a].split(" ").slice(1),S(e,a,r),n),e}function k(t,e){var n=w(t[0],e);return n instanceof Function?x(n,t.slice(1),e):n}function x(t,e,n){var r=[];return i(e,(function(t){r.push(w(t,n))})),t.apply(null,r)}function D(t,e){var n,r,i,o=1,a=t[o];while(s(a))n=a.split(" "),r=n[0],y[r]?(i=I(r,t.splice(o,t.length-o),e),t=t.concat(i)):t[o]=k(n,e),o+=g,a=t[o];return t.join("")}function A(t,e){return D(_(t,c),e)}t.exports=A},function(t,e,n){"use strict";function r(t){return void 0===t}t.exports=r},function(t,e,n){"use strict";function r(t){return"string"===typeof t||t instanceof String}t.exports=r},function(t,e,n){"use strict";function r(t){t&&t.parentNode&&t.parentNode.removeChild(t)}t.exports=r},function(t,e,n){"use strict";function r(t){return"number"===typeof t||t instanceof Number}t.exports=r},function(t,e,n){"use strict";var r=n(9),i=n(3),o=n(17),s=n(24);function a(t){var e,n=Array.prototype.slice.call(arguments,1),a=t.classList,c=[];a?r(n,(function(e){t.classList.add(e)})):(e=o(t),e&&(n=[].concat(e.split(/\s+/),n)),r(n,(function(t){i(t,c)<0&&c.push(t)})),s(t,c))}t.exports=a},function(t,e,n){"use strict";var r=n(12);function i(t){return t&&t.className?r(t.className.baseVal)?t.className:t.className.baseVal:""}t.exports=i},function(t,e,n){"use strict";var r=n(2),i=n(3),o=n(17),s=n(24);function a(t){var e,n,a=Array.prototype.slice.call(arguments,1),c=t.classList;c?r(a,(function(t){c.remove(t)})):(e=o(t).split(/\s+/),n=[],r(e,(function(t){i(t,a)<0&&n.push(t)})),s(t,n))}t.exports=a},function(t,e,n){"use strict";var r=n(31),i=n(33),o={_isMobile:function(){return/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile|WPDesktop/i.test(navigator.userAgent)}(),_getEventType:function(t){return this._isMobile&&("mousedown"===t?t="touchstart":"click"===t&&(t="touchend")),t},on:function(t,e,n,i){r(t,this._getEventType(e),n,i)},off:function(t,e,n){i(t,this._getEventType(e),n)}};t.exports=o},function(t,e,n){"use strict";var r=n(0),i=n(14),o=n(10),s=n(1).DEFAULT_LANGUAGE_TYPE,a=r({init:function(t){t=t||s,this._element=null,this._localeText=o[t],this._type="base"},_makeContext:function(){c(this.getType(),"_makeContext")},render:function(){c(this.getType(),"render")},getDateElements:function(){c(this.getType(),"getDateElements")},getType:function(){return this._type},changeLanguage:function(t){this._localeText=o[t]},remove:function(){this._element&&i(this._element),this._element=null}});function c(t,e){throw new Error(t+' layer does not have the "'+e+'" method.')}t.exports=a},function(t,e,n){"use strict";var r=n(3),i=n(2),o=n(0),s=n(8),a=n(16),c=n(25),u=n(26),l=n(27),h=n(18),d=n(14),f=n(7),p=n(6),m=n(28),g=n(15),y=n(22),v=n(43),_=n(29),w=n(56),b=n(1),E=n(10),T=n(5),C=n(4),S=n(19),I=n(58),k=n(59),x=b.DEFAULT_WEEK_START_DAY,D=b.DEFAULT_LANGUAGE_TYPE,A=b.TYPE_DATE,N=b.TYPE_MONTH,O=b.TYPE_YEAR,P=b.CLASS_NAME_NEXT_YEAR_BTN,R=b.CLASS_NAME_NEXT_MONTH_BTN,M=b.CLASS_NAME_PREV_YEAR_BTN,L=b.CLASS_NAME_PREV_MONTH_BTN,F=b.CLASS_NAME_SELECTED,j=b.CLASS_NAME_TITLE_TODAY,U="tui-is-selectable",V="tui-is-blocked",$="tui-is-checked",H="tui-datepicker-selector-button",B="tui-calendar-today",z="tui-hidden",W=".tui-datepicker-body",q=".tui-ico-date",K=".tui-calendar-title",G=".tui-calendar-container",Y=".tui-timepicker-container",Q=function(t){if(t=f({language:D,calendar:{},input:{element:null,format:null},timePicker:null,date:null,showAlways:!1,type:A,selectableRanges:null,openers:[],autoClose:!0,usageStatistics:!0,weekStartDay:x},t),t.selectableRanges=t.selectableRanges||[[b.MIN_DATE,b.MAX_DATE]],!y(t.calendar))throw new Error("Calendar option must be an object");if(!y(t.input))throw new Error("Input option must be an object");if(!p(t.selectableRanges))throw new Error("Selectable-ranges must be a 2d-array");return t.localeText=E[t.language],t.calendar.language=t.language,t.calendar.type=t.type,t.timePicker=t.timePicker||t.timepicker,t},X=o({static:{localeTexts:E},init:function(t,e){e=Q(e),this._language=e.language,this._container=C.getElement(t),this._container.innerHTML=I(f(e,{isTab:e.timePicker&&"tab"===e.timePicker.layoutType})),this._element=this._container.firstChild,this._calendar=new _(this._element.querySelector(G),f(e.calendar,{usageStatistics:e.usageStatistics,weekStartDay:e.weekStartDay})),this._timePicker=null,this._datepickerInput=null,this._date=null,this._rangeModel=null,this._openers=[],this._isEnabled=!0,this._id="tui-datepicker-"+C.generateId(),this._type=e.type,this.showAlways=e.showAlways,this.autoClose=e.autoClose,this._initializeDatePicker(e)},_initializeDatePicker:function(t){this.setRanges(t.selectableRanges),this._setEvents(),this._initTimePicker(t.timePicker,t.usageStatistics),this.setInput(t.input.element),this.setDateFormat(t.input.format),this.setDate(t.date),i(t.openers,this.addOpener,this),this.showAlways||this._hide(),this.getType()===A&&a(this._element.querySelector(W),"tui-datepicker-type-date")},_setEvents:function(){S.on(this._element,"click",this._onClickHandler,this),this._calendar.on("draw",this._onDrawCalendar,this)},_removeEvents:function(){S.off(this._element,"click",this._onClickHandler,this),this._calendar.off()},_setDocumentEvents:function(){S.on(document,"mousedown",this._onMousedownDocument,this)},_removeDocumentEvents:function(){S.off(document,"mousedown",this._onMousedownDocument)},_setOpenerEvents:function(t){S.on(t,"click",this.toggle,this)},_removeOpenerEvents:function(t){S.off(t,"click",this.toggle)},_initTimePicker:function(t,e){var n;t&&(n=t.layoutType||"",y(t)?t.usageStatistics=e:t={usageStatistics:e},this._timePicker=new v(this._element.querySelector(Y),t),"tab"===n.toLowerCase()&&this._timePicker.hide(),this._timePicker.on("change",(function(t){var e;this._date&&(e=new Date(this._date),this.setDate(e.setHours(t.hour,t.minute)))}),this))},_changePicker:function(t){var e="."+H,n=c(t,e),r=!!n.querySelector(q);r?(this._calendar.show(),this._timePicker.hide()):(this._calendar.hide(),this._timePicker.show()),h(this._element.querySelector("."+$),$),a(n,$)},_isOpener:function(t){var e=C.getElement(t);return r(e,this._openers)>-1},_setTodayClassName:function(t){var e,n;this.getCalendarType()===A&&(e=Number(u(t,"timestamp")),n=e===(new Date).setHours(0,0,0,0),n?a(t,B):h(t,B))},_setSelectableClassName:function(t){var e=new Date(Number(u(t,"timestamp")));this._isSelectableOnCalendar(e)?(a(t,U),h(t,V)):(h(t,U),a(t,V))},_setSelectedClassName:function(t){var e=new Date(Number(u(t,"timestamp")));this._isSelectedOnCalendar(e)?a(t,F):h(t,F)},_isSelectableOnCalendar:function(t){var e=this.getCalendarType(),n=T.cloneWithStartOf(t,e).getTime(),r=T.cloneWithEndOf(t,e).getTime();return this._rangeModel.hasOverlap(n,r)},_isSelectedOnCalendar:function(t){var e=this.getDate(),n=this.getCalendarType();return e&&T.isSame(e,t,n)},_show:function(){h(this._element,z)},_hide:function(){a(this._element,z)},_syncToInput:function(){this._date&&this._datepickerInput.setDate(this._date)},_syncFromInput:function(t){var e,n=!1;try{e=this._datepickerInput.getDate(),this.isSelectable(e)?(this._timePicker&&this._timePicker.setTime(e.getHours(),e.getMinutes()),this.setDate(e)):n=!0}catch(r){this.fire("error",{type:"ParsingError",message:r.message}),n=!0}finally{n&&(t?this._syncToInput():this.setNull())}},_onMousedownDocument:function(t){var e=C.getTarget(t),n=C.getSelector(e),i=!!n&&this._element.querySelector(n),o=this._datepickerInput.is(e),s=r(e,this._openers)>-1,a=!(this.showAlways||o||i||s);a&&this.close()},_onClickHandler:function(t){var e=C.getTarget(t);c(e,"."+U)?(t.preventDefault(),this._updateDate(e)):c(e,"."+j)?(t.preventDefault(),this._updateDateToToday()):c(e,K)?this.drawUpperCalendar(this._date):c(e,"."+H)&&this._changePicker(e)},_updateDateToToday:function(){this.setDate(Date.now()),this.close()},_updateDate:function(t){var e=Number(u(t,"timestamp")),n=new Date(e),r=this._timePicker,i=this._date,o=this.getCalendarType(),s=this.getType();o!==s?this.drawLowerCalendar(n):(r?n.setHours(r.getHour(),r.getMinute()):i&&n.setHours(i.getHours(),i.getMinutes()),this.setDate(n),!this.showAlways&&this.autoClose&&this.close())},_onDrawCalendar:function(t){i(t.dateElements,(function(t){this._setTodayClassName(t),this._setSelectableClassName(t),this._setSelectedClassName(t)}),this),this._setDisplayHeadButtons(),this.fire("draw",t)},_setDisplayHeadButtons:function(){var t,e,n,r,i=60,o=this._calendar.getNextYearDate(this.getCalendarType()===O?i:null),s=this._calendar.getPrevYearDate(this.getCalendarType()===O?-i:null),a=this._rangeModel.getMaximumValue(),c=this._rangeModel.getMinimumValue(),u=this._element.querySelector("."+P),l=this._element.querySelector("."+M);this.getCalendarType()===A?(t=T.cloneWithStartOf(this._calendar.getNextDate(),N),e=T.cloneWithEndOf(this._calendar.getPrevDate(),N),n=this._element.querySelector("."+R),r=this._element.querySelector("."+L),this._setDisplay(n,t.getTime()<=a),this._setDisplay(r,e.getTime()>=c),s.setDate(1),o.setDate(1)):(s.setMonth(12,0),o.setMonth(0,1)),this._setDisplay(u,o.getTime()<=a),this._setDisplay(l,s.getTime()>=c)},_setDisplay:function(t,e){t&&(e?h(t,z):a(t,z))},_onChangeInput:function(){this._syncFromInput(!0)},_isChanged:function(t){var e=this.getDate();return!e||t.getTime()!==e.getTime()},_refreshFromRanges:function(){this.isSelectable(this._date)?this._calendar.draw():this.setNull()},getCalendarType:function(){return this._calendar.getType()},getType:function(){return this._type},isSelectable:function(t){var e,n,r=this.getType();return!!T.isValidDate(t)&&(e=T.cloneWithStartOf(t,r).getTime(),n=T.cloneWithEndOf(t,r).getTime(),this._rangeModel.hasOverlap(e,n))},isSelected:function(t){return T.isValidDate(t)&&T.isSame(this._date,t,this.getType())},setRanges:function(t){var e=[];i(t,(function(t){var n=new Date(t[0]).getTime(),r=new Date(t[1]).getTime();e.push([n,r])})),this._rangeModel=new w(e),this._refreshFromRanges()},setType:function(t){this._type=t},addRange:function(t,e){t=new Date(t).getTime(),e=new Date(e).getTime(),this._rangeModel.add(t,e),this._refreshFromRanges()},removeRange:function(t,e,n){t=new Date(t),e=new Date(e),n&&(t=T.cloneWithStartOf(t,n),e=T.cloneWithEndOf(e,n)),this._rangeModel.exclude(t.getTime(),e.getTime()),this._refreshFromRanges()},addOpener:function(t){t=C.getElement(t),this._isOpener(t)||(this._openers.push(t),this._setOpenerEvents(t))},removeOpener:function(t){var e;t=C.getElement(t),e=r(t,this._openers),e>-1&&(this._removeOpenerEvents(t),this._openers.splice(e,1))},removeAllOpeners:function(){i(this._openers,(function(t){this._removeOpenerEvents(t)}),this),this._openers=[]},open:function(){!this.isOpened()&&this._isEnabled&&(this._calendar.draw({date:this._date,type:this._type}),this._show(),this.showAlways||this._setDocumentEvents(),this.fire("open"))},drawUpperCalendar:function(t){var e=this.getCalendarType();e===A?this._calendar.draw({date:t,type:N}):e===N&&this._calendar.draw({date:t,type:O})},drawLowerCalendar:function(t){var e=this.getCalendarType(),n=this.getType(),r=e===n;r||(e===N?this._calendar.draw({date:t,type:A}):e===O&&this._calendar.draw({date:t,type:N}))},close:function(){this.isOpened()&&(this._removeDocumentEvents(),this._hide(),this.fire("close"))},toggle:function(){this.isOpened()?this.close():this.open()},getDate:function(){return this._date?new Date(this._date):null},setDate:function(t,e){var n,r,i;null!==t?(n=g(t)||m(t),r=new Date(t),i=n&&this._isChanged(r)&&this.isSelectable(r),i&&(r=new Date(t),this._date=r,this._calendar.draw({date:r}),this._timePicker&&this._timePicker.setTime(r.getHours(),r.getMinutes(),!0),this._syncToInput(),e||this.fire("change"))):this.setNull()},setNull:function(){var t=this._calendar.getDate(),e=null!==this._date;this._date=null,this._datepickerInput&&this._datepickerInput.clearText(),this._timePicker&&this._timePicker.setTime(0,0),this.isSelectable(t)?this._calendar.draw():this._calendar.draw({date:new Date(this._rangeModel.getMinimumValue())}),e&&this.fire("change")},setDateFormat:function(t){this._datepickerInput.setFormat(t),this._syncToInput()},isOpened:function(){return!l(this._element,z)},getTimePicker:function(){return this._timePicker},getCalendar:function(){return this._calendar},getLocaleText:function(){return E[this._language]||E[D]},setInput:function(t,e){var n,r=this._datepickerInput,i=this.getLocaleText();e=e||{},r&&(n=r.getFormat(),r.destroy()),this._datepickerInput=new k(t,{format:e.format||n,id:this._id,localeText:i}),this._datepickerInput.on({change:this._onChangeInput,click:this.open},this),e.syncFromInput?this._syncFromInput():this._syncToInput()},enable:function(){this._isEnabled||(this._isEnabled=!0,this._datepickerInput.enable(),i(this._openers,(function(t){t.removeAttribute("disabled"),this._setOpenerEvents(t)}),this))},disable:function(){this._isEnabled&&(this._isEnabled=!1,this.close(),this._datepickerInput.disable(),i(this._openers,(function(t){t.setAttribute("disabled",!0),this._removeOpenerEvents(t)}),this))},isDisabled:function(){return!this._isEnabled},addCssClass:function(t){a(this._element,t)},removeCssClass:function(t){h(this._element,t)},getDateElements:function(){return this._calendar.getDateElements()},findOverlappedRange:function(t,e){var n=new Date(t).getTime(),r=new Date(e).getTime(),i=this._rangeModel.findOverlappedRange(n,r);return[new Date(i[0]),new Date(i[1])]},changeLanguage:function(t){this._language=t,this._calendar.changeLanguage(this._language),this._datepickerInput.changeLocaleTitles(this.getLocaleText().titles),this.setDateFormat(this._datepickerInput.getFormat()),this._timePicker&&this._timePicker.changeLanguage(this._language)},destroy:function(){this._removeDocumentEvents(),this._calendar.destroy(),this._timePicker&&this._timePicker.destroy(),this._datepickerInput&&this._datepickerInput.destroy(),this._removeEvents(),d(this._element),this.removeAllOpeners(),this._calendar=this._timePicker=this._datepickerInput=this._container=this._element=this._date=this._rangeModel=this._openers=this._isEnabled=this._id=null}});s.mixin(X),t.exports=X},function(t,e,n){"use strict";function r(t){return t===Object(t)}t.exports=r},function(t,e,n){"use strict";function r(t,e,n){var r;for(r in n=n||null,t)if(t.hasOwnProperty(r)&&!1===e.call(n,t[r],r,t))break}t.exports=r},function(t,e,n){"use strict";var r=n(6),i=n(12);function o(t,e){e=r(e)?e.join(" "):e,e=e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),i(t.className.baseVal)?t.className=e:t.className.baseVal=e}t.exports=o},function(t,e,n){"use strict";var r=n(40);function i(t,e){var n=t.parentNode;if(r(t,e))return t;while(n&&n!==document){if(r(n,e))return n;n=n.parentNode}return null}t.exports=i},function(t,e,n){"use strict";var r=n(42);function i(t,e){return t.dataset?t.dataset[e]:t.getAttribute("data-"+r(e))}t.exports=i},function(t,e,n){"use strict";var r=n(3),i=n(17);function o(t,e){var n;return t.classList?t.classList.contains(e):(n=i(t).split(/\s+/),r(e,n)>-1)}t.exports=o},function(t,e,n){"use strict";function r(t){return t instanceof Date}t.exports=r},function(t,e,n){"use strict";var r=n(0),i=n(8),o=n(16),s=n(27),a=n(18),c=n(14),u=n(7),l=n(44),h=n(49),d=n(10),f=n(1),p=n(5),m=n(4),g=f.DEFAULT_WEEK_START_DAY,y=f.DEFAULT_LANGUAGE_TYPE,v=f.TYPE_DATE,_=f.TYPE_MONTH,w=f.TYPE_YEAR,b=f.CLASS_NAME_PREV_MONTH_BTN,E=f.CLASS_NAME_PREV_YEAR_BTN,T=f.CLASS_NAME_NEXT_YEAR_BTN,C=f.CLASS_NAME_NEXT_MONTH_BTN,S="tui-calendar-month",I="tui-calendar-year",k="tui-hidden",x=".tui-calendar-header",D=".tui-calendar-body",A=r({static:{localeTexts:d},init:function(t,e){e=u({language:y,showToday:!0,showJumpButtons:!1,date:new Date,type:v,usageStatistics:!0,weekStartDay:g},e),this._container=m.getElement(t),this._container.innerHTML='<div class="tui-calendar">    <div class="tui-calendar-header"></div>    <div class="tui-calendar-body"></div></div>',this._element=this._container.firstChild,this._date=null,this._type=null,this._header=null,this._body=null,this._initHeader(e),this._initBody(e),this.draw({date:e.date,type:e.type}),e.usageStatistics&&m.sendHostName()},_initHeader:function(t){var e=this._element.querySelector(x);this._header=new l(e,t),this._header.on("click",(function(t){var e=m.getTarget(t);s(e,b)?this.drawPrev():s(e,E)?this._onClickPrevYear():s(e,C)?this.drawNext():s(e,T)&&this._onClickNextYear()}),this)},_initBody:function(t){var e=this._element.querySelector(D);this._body=new h(e,t)},_onClickPrevYear:function(){this.getType()===v?this.draw({date:this._getRelativeDate(-12)}):this.drawPrev()},_onClickNextYear:function(){this.getType()===v?this.draw({date:this._getRelativeDate(12)}):this.drawNext()},_isValidType:function(t){return t===v||t===_||t===w},_shouldUpdate:function(t,e){var n=this._date;if(!p.isValidDate(t))throw new Error("Invalid date");if(!this._isValidType(e))throw new Error("Invalid layer type");return!n||n.getFullYear()!==t.getFullYear()||n.getMonth()!==t.getMonth()||this.getType()!==e},_render:function(){var t=this._date,e=this.getType();switch(this._header.render(t,e),this._body.render(t,e),a(this._element,S,I),e){case _:o(this._element,S);break;case w:o(this._element,I);break;default:break}},_getRelativeDate:function(t){var e=this._date;return new Date(e.getFullYear(),e.getMonth()+t)},draw:function(t){var e,n;t=t||{},e=t.date||this._date,n=(t.type||this.getType()).toLowerCase(),this._shouldUpdate(e,n)&&(this._date=e,this._type=n,this._render()),this.fire("draw",{date:this._date,type:n,dateElements:this._body.getDateElements()})},show:function(){a(this._element,k)},hide:function(){o(this._element,k)},drawNext:function(){this.draw({date:this.getNextDate()})},drawPrev:function(){this.draw({date:this.getPrevDate()})},getNextDate:function(){return this.getType()===v?this._getRelativeDate(1):this.getNextYearDate()},getPrevDate:function(){return this.getType()===v?this._getRelativeDate(-1):this.getPrevYearDate()},getNextYearDate:function(t){if(t)return this._getRelativeDate(t);switch(this.getType()){case v:case _:return this._getRelativeDate(12);case w:return this._getRelativeDate(108);default:throw new Error("Unknown layer type")}},getPrevYearDate:function(t){if(t)return this._getRelativeDate(t);switch(this.getType()){case v:case _:return this._getRelativeDate(-12);case w:return this._getRelativeDate(-108);default:throw new Error("Unknown layer type")}},changeLanguage:function(t){this._header.changeLanguage(t),this._body.changeLanguage(t),this._render()},getDate:function(){return new Date(this._date)},getType:function(){return this._type},getDateElements:function(){return this._body.getDateElements()},addCssClass:function(t){o(this._element,t)},removeCssClass:function(t){a(this._element,t)},destroy:function(){this._header.destroy(),this._body.destroy(),c(this._element),this._type=this._date=this._container=this._element=this._header=this._body=null}});i.mixin(A),t.exports=A},function(t,e,n){"use strict";var r=n(3),i=n(2),o=n(0),s=n(4),a=n(5),c=n(1),u=n(10),l=/\\?(yyyy|yy|mmmm|mmm|mm|m|dd|d|hh|h|a)/gi,h={yyyy:{expression:"(\\d{4}|\\d{2})",type:c.TYPE_YEAR},yy:{expression:"(\\d{4}|\\d{2})",type:c.TYPE_YEAR},y:{expression:"(\\d{4}|\\d{2})",type:c.TYPE_YEAR},M:{expression:"(1[012]|0[1-9]|[1-9])",type:c.TYPE_MONTH},MM:{expression:"(1[012]|0[1-9]|[1-9])",type:c.TYPE_MONTH},MMM:{expression:"(1[012]|0[1-9]|[1-9])",type:c.TYPE_MONTH},MMMM:{expression:"(1[012]|0[1-9]|[1-9])",type:c.TYPE_MONTH},mmm:{expression:"(1[012]|0[1-9]|[1-9])",type:c.TYPE_MONTH},mmmm:{expression:"(1[012]|0[1-9]|[1-9])",type:c.TYPE_MONTH},dd:{expression:"([12]\\d{1}|3[01]|0[1-9]|[1-9])",type:c.TYPE_DATE},d:{expression:"([12]\\d{1}|3[01]|0[1-9]|[1-9])",type:c.TYPE_DATE},D:{expression:"([12]\\d{1}|3[01]|0[1-9]|[1-9])",type:c.TYPE_DATE},DD:{expression:"([12]\\d{1}|3[01]|0[1-9]|[1-9])",type:c.TYPE_DATE},h:{expression:"(d{1}|0\\d{1}|1\\d{1}|2[0123])",type:c.TYPE_HOUR},hh:{expression:"(d{1}|[01]\\d{1}|2[0123])",type:c.TYPE_HOUR},H:{expression:"(d{1}|0\\d{1}|1\\d{1}|2[0123])",type:c.TYPE_HOUR},HH:{expression:"(d{1}|[01]\\d{1}|2[0123])",type:c.TYPE_HOUR},m:{expression:"(d{1}|[012345]\\d{1})",type:c.TYPE_MINUTE},mm:{expression:"(d{1}|[012345]\\d{1})",type:c.TYPE_MINUTE},a:{expression:"([ap]m)",type:c.TYPE_MERIDIEM},A:{expression:"([ap]m)",type:c.TYPE_MERIDIEM}},d=o({init:function(t,e){this._rawStr=t,this._keyOrder=null,this._regExp=null,this._titles=e||u.en.titles,this._parseFormat()},_parseFormat:function(){var t="^",e=this._rawStr.match(l),n=[];e=s.filter(e,(function(t){return"\\"!==t[0]})),i(e,(function(e,r){/m/i.test(e)||(e=e.toLowerCase()),t+=h[e].expression+"[\\D\\s]*",n[r]=h[e].type})),t+="$",this._keyOrder=n,this._regExp=new RegExp(t,"gi")},parse:function(t){var e,n={year:0,month:1,date:1,hour:0,minute:0},r=!1,o=!1;if(this._regExp.lastIndex=0,e=this._regExp.exec(t),!e)throw Error('DateTimeFormatter: Not matched - "'+t+'"');return i(this._keyOrder,(function(t,i){var s=e[i+1];if(t===c.TYPE_MERIDIEM&&/[ap]m/i.test(s))r=!0,o=/pm/i.test(s);else{if(s=Number(s),0!==s&&!s)throw Error("DateTimeFormatter: Unknown value - "+e[i+1]);t===c.TYPE_YEAR&&s<100&&(s+=2e3),n[t]=s}})),r&&(o=o||n.hour>12,n.hour%=12,o&&(n.hour+=12)),new Date(n.year,n.month-1,n.date,n.hour,n.minute)},getRawString:function(){return this._rawStr},format:function(t){var e,n=t.getFullYear(),i=t.getMonth()+1,o=t.getDate(),s=t.getDay(),u=t.getHours(),h=t.getMinutes(),d="a";return r(c.TYPE_MERIDIEM,this._keyOrder)>-1&&(d=u>=12?"pm":"am",u=a.getMeridiemHour(u)),e={yyyy:n,yy:String(n).substr(2,2),M:i,MM:a.prependLeadingZero(i),MMM:this._titles.MMM[i-1],MMMM:this._titles.MMMM[i-1],d:o,dd:a.prependLeadingZero(o),D:this._titles.D[s],DD:this._titles.DD[s],hh:a.prependLeadingZero(u),h:u,mm:a.prependLeadingZero(h),m:h,A:d.toUpperCase(),a:d},this._rawStr.replace(l,(function(t){return"\\"===t[0]?t.substr(1):e[t]||e[t.toLowerCase()]||""}))}});t.exports=d},function(t,e,n){"use strict";var r=n(13),i=n(9),o=n(32);function s(t,e,n,o){r(e)?i(e.split(/\s+/g),(function(e){a(t,e,n,o)})):i(e,(function(e,r){a(t,r,e,n)}))}function a(t,e,n,r){function i(e){n.call(r||t,e||window.event)}"addEventListener"in t?t.addEventListener(e,i):"attachEvent"in t&&t.attachEvent("on"+e,i),c(t,e,n,i)}function c(t,e,n,r){var s=o(t,e),a=!1;i(s,(function(t){return t.handler!==n||(a=!0,!1)})),a||s.push({handler:n,wrappedHandler:r})}t.exports=s},function(t,e,n){"use strict";var r="_feEventKey";function i(t,e){var n,i=t[r];return i||(i=t[r]={}),n=i[e],n||(n=i[e]=[]),n}t.exports=i},function(t,e,n){"use strict";var r=n(13),i=n(9),o=n(32);function s(t,e,n){r(e)?i(e.split(/\s+/g),(function(e){a(t,e,n)})):i(e,(function(e,n){a(t,n,e)}))}function a(t,e,n){var r,s=o(t,e);n?(i(s,(function(i,o){return n!==i.handler||(c(t,e,i.wrappedHandler),r=o,!1)})),s.splice(r,1)):(i(s,(function(n){c(t,e,n.wrappedHandler)})),s.splice(0,s.length))}function c(t,e,n){"removeEventListener"in t?t.removeEventListener(e,n):"detachEvent"in t&&t.detachEvent("on"+e,n)}t.exports=s},function(t,e,n){"use strict";var r=n(21),i=n(60),o=n(29);n(61),r.createCalendar=function(t,e){return new o(t,e)},r.createRangePicker=function(t){return new i(t)},t.exports=r},function(t,e,n){"use strict";var r=n(36);function i(t,e){var n=r(e.prototype);n.constructor=t,t.prototype=n}t.exports=i},function(t,e,n){"use strict";function r(t){function e(){}return e.prototype=t,new e}t.exports=r},function(t,e,n){"use strict";var r=n(12),i=n(38);function o(t){return!r(t)&&!i(t)}t.exports=o},function(t,e,n){"use strict";function r(t){return null===t}t.exports=r},function(t,e,n){"use strict";function r(t){return t instanceof Function}t.exports=r},function(t,e,n){"use strict";var r=n(3),i=n(41),o=Element.prototype,s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.msMatchesSelector||function(t){var e=this.document||this.ownerDocument;return r(this,i(e.querySelectorAll(t)))>-1};function a(t,e){return s.call(t,e)}t.exports=a},function(t,e,n){"use strict";var r=n(2);function i(t){var e;try{e=Array.prototype.slice.call(t)}catch(n){e=[],r(t,(function(t){e.push(t)}))}return e}t.exports=i},function(t,e,n){"use strict";function r(t){return t.replace(/([A-Z])/g,(function(t){return"-"+t.toLowerCase()}))}t.exports=r},function(e,n){e.exports=t},function(t,e,n){"use strict";var r=n(0),i=n(8),o=n(25),s=n(14),a=n(10),c=n(45),u=n(30),l=n(1),h=n(4),d=n(19),f=l.TYPE_DATE,p=l.TYPE_MONTH,m=l.TYPE_YEAR,g="tui-calendar-title-month",y="tui-calendar-title-year",v="tui-calendar-title-year-to-year",_=".tui-calendar-header-inner",w=".tui-calendar-header-info",b=".tui-calendar-btn",E="yyyy",T=r({init:function(t,e){this._container=h.getElement(t),this._innerElement=null,this._infoElement=null,this._showToday=e.showToday,this._showJumpButtons=e.showJumpButtons,this._yearMonthTitleFormatter=null,this._yearTitleFormatter=null,this._todayFormatter=null,this._setFormatters(a[e.language]),this._setEvents(e)},_setFormatters:function(t){this._yearMonthTitleFormatter=new u(t.titleFormat,t.titles),this._yearTitleFormatter=new u(E,t.titles),this._todayFormatter=new u(t.todayFormat,t.titles)},_setEvents:function(){d.on(this._container,"click",this._onClickHandler,this)},_removeEvents:function(){this.off(),d.off(this._container,"click",this._onClickHandler)},_onClickHandler:function(t){var e=h.getTarget(t);o(e,b)&&this.fire("click",t)},_getTitleClass:function(t){switch(t){case f:return g;case p:return y;case m:return v;default:return""}},_getTitleText:function(t,e){var n,r,i;switch(e){case f:return this._yearMonthTitleFormatter.format(t);case p:return this._yearTitleFormatter.format(t);case m:return n=t.getFullYear(),r=new Date(n-4,0,1),i=new Date(n+4,0,1),this._yearTitleFormatter.format(r)+" - "+this._yearTitleFormatter.format(i);default:return""}},changeLanguage:function(t){this._setFormatters(a[t])},render:function(t,e){var n={showToday:this._showToday,showJumpButtons:this._showJumpButtons,todayText:this._todayFormatter.format(new Date),isDateCalendar:e===f,titleClass:this._getTitleClass(e),title:this._getTitleText(t,e)};this._container.innerHTML=c(n).replace(/^\s+|\s+$/g,""),this._innerElement=this._container.querySelector(_),n.showToday&&(this._infoElement=this._container.querySelector(w))},destroy:function(){this._removeEvents(),s(this._innerElement),s(this._infoElement),this._container=this._showToday=this._showJumpButtons=this._yearMonthTitleFormatter=this._yearTitleFormatter=this._todayFormatter=this._innerElement=this._infoElement=null}});i.mixin(T),t.exports=T},function(t,e,n){"use strict";var r=n(11);t.exports=function(t){var e='{{if isDateCalendar}}  {{if showJumpButtons}}    <div class="tui-calendar-header-inner tui-calendar-has-btns">      <button class="tui-calendar-btn tui-calendar-btn-prev-year">Prev year</button>      <button class="tui-calendar-btn tui-calendar-btn-prev-month">Prev month</button>      <em class="tui-calendar-title {{titleClass}}">{{title}}</em>      <button class="tui-calendar-btn tui-calendar-btn-next-month">Next month</button>      <button class="tui-calendar-btn tui-calendar-btn-next-year">Next year</button>    </div>  {{else}}    <div class="tui-calendar-header-inner">      <button class="tui-calendar-btn tui-calendar-btn-prev-month">Prev month</button>      <em class="tui-calendar-title {{titleClass}}">{{title}}</em>      <button class="tui-calendar-btn tui-calendar-btn-next-month">Next month</button>    </div>  {{/if}}{{else}}  <div class="tui-calendar-header-inner">    <button class="tui-calendar-btn tui-calendar-btn-prev-year">Prev year</button>    <em class="tui-calendar-title {{titleClass}}">{{title}}</em>    <button class="tui-calendar-btn tui-calendar-btn-next-year">Next year</button>  </div>{{/if}}{{if showToday}}  <div class="tui-calendar-header-info">    <p class="tui-calendar-title-today">{{todayText}}</p>  </div>{{/if}}';return r(e,t)}},function(t,e,n){"use strict";function r(t){return"object"===typeof HTMLElement?t&&(t instanceof HTMLElement||!!t.nodeType):!(!t||!t.nodeType)}t.exports=r},function(t,e,n){"use strict";var r=n(12),i=n(48),o=6048e5;function s(t){var e=(new Date).getTime();return e-t>o}function a(t,e){var n="https://www.google-analytics.com/collect",o=location.hostname,a="event",c="use",u="TOAST UI "+t+" for "+o+": Statistics",l=window.localStorage.getItem(u);(r(window.tui)||!1!==window.tui.usageStatistics)&&(l&&!s(l)||(window.localStorage.setItem(u,(new Date).getTime()),setTimeout((function(){"interactive"!==document.readyState&&"complete"!==document.readyState||i(n,{v:1,t:a,tid:e,cid:o,dp:o,dh:t,el:t,ec:c})}),1e3)))}t.exports=a},function(t,e,n){"use strict";var r=n(23);function i(t,e){var n=document.createElement("img"),i="";return r(e,(function(t,e){i+="&"+e+"="+t})),i=i.substring(1),n.src=t+"?"+i,n.style.display="none",document.body.appendChild(n),document.body.removeChild(n),n}t.exports=i},function(t,e,n){"use strict";var r=n(2),i=n(0),o=n(50),s=n(52),a=n(54),c=n(1),u=c.TYPE_DATE,l=c.TYPE_MONTH,h=c.TYPE_YEAR,d=i({init:function(t,e){var n=e.language,r=e.weekStartDay;this._container=t,this._dateLayer=new o(n,r),this._monthLayer=new s(n),this._yearLayer=new a(n),this._currentLayer=this._dateLayer},_getLayer:function(t){switch(t){case u:return this._dateLayer;case l:return this._monthLayer;case h:return this._yearLayer;default:return this._currentLayer}},_eachLayer:function(t){r([this._dateLayer,this._monthLayer,this._yearLayer],t)},changeLanguage:function(t){this._eachLayer((function(e){e.changeLanguage(t)}))},render:function(t,e){var n=this._getLayer(e),r=this._currentLayer;r.remove(),n.render(t,this._container),this._currentLayer=n},getDateElements:function(){return this._currentLayer.getDateElements()},destroy:function(){this._eachLayer((function(t){t.remove()})),this._container=this._currentLayer=this._dateLayer=this._monthLayer=this._yearLayer=null}});t.exports=d},function(t,e,n){"use strict";var r=n(0),i=n(5),o=n(51),s=n(20),a=n(1).TYPE_DATE,c=n(1).WEEK_START_DAY_MAP,u=".tui-calendar-date",l=7,h=r(s,{init:function(t,e){s.call(this,t),this.weekStartDay=c[String(e).toLowerCase()]||0},_type:a,_makeContext:function(t){var e,n,r,i,o=this._localeText.titles.D;if(t=t||new Date,e=t.getFullYear(),n=t.getMonth()+1,this.weekStartDay){for(r=o.slice(),i=0;i<this.weekStartDay;i+=1)r.push(r.shift());o=r}return{Sun:o[0],Mon:o[1],Tue:o[2],Wed:o[3],Thu:o[4],Fri:o[5],Sat:o[6],year:e,month:n,weeks:this._getWeeks(e,n)}},_getWeeks:function(t,e){var n,r,o,s=0,a=6,c=[];while(s<a){for(r=[],o=this.weekStartDay;o<l+this.weekStartDay;o+=1)r.push(i.getDateOfWeek(t,e,s,o));n=this._getWeek(t,e,r),this.weekStartDay&&!d(s,n[0].dayInMonth)&&(c.push(this._getFirstWeek(t,e)),a-=1),c.push(n),s+=1}return c},_getWeek:function(t,e,n){for(var r,i,o=new Date(t,e-1,1),s=new Date(t,e,0),a=[],c=0,u=n.length;c<u;c+=1)i="tui-calendar-date",r=n[c],r<o&&(i+=" tui-calendar-prev-month"),r>s&&(i+=" tui-calendar-next-month"),0===r.getDay()?i+=" tui-calendar-sun":6===r.getDay()&&(i+=" tui-calendar-sat"),a.push({dayInMonth:r.getDate(),className:i,timestamp:r.getTime()});return a},render:function(t,e){var n=this._makeContext(t);e.innerHTML=o(n),this._element=e.firstChild},getDateElements:function(){return this._element.querySelectorAll(u)},_getFirstWeek:function(t,e){var n,r=[];for(n=this.weekStartDay;n<l+this.weekStartDay;n+=1)r.push(i.getDateOfWeek(t,e,-1,n));return this._getWeek(t,e,r)}});function d(t,e){return t||1===e||e>l}t.exports=h},function(t,e,n){"use strict";var r=n(11);t.exports=function(t){var e='<table class="tui-calendar-body-inner" cellspacing="0" cellpadding="0">  <caption><span>Dates</span></caption>  <thead class="tui-calendar-body-header">    <tr>      <th class="tui-sun" scope="col">{{Sun}}</th>      <th scope="col">{{Mon}}</th>      <th scope="col">{{Tue}}</th>      <th scope="col">{{Wed}}</th>      <th scope="col">{{Thu}}</th>      <th scope="col">{{Fri}}</th>      <th class="tui-sat" scope="col">{{Sat}}</th>    </tr>  </thead>  <tbody>    {{each weeks}}    <tr class="tui-calendar-week">      {{each @this}}      <td class="{{@this["className"]}}" data-timestamp="{{@this["timestamp"]}}">{{@this["dayInMonth"]}}</td>      {{/each}}    </tr>    {{/each}}  </tbody></table>';return r(e,t)}},function(t,e,n){"use strict";var r=n(0),i=n(53),o=n(20),s=n(1).TYPE_MONTH,a=n(5),c=".tui-calendar-month",u=r(o,{init:function(t){o.call(this,t)},_type:s,_makeContext:function(t){var e=this._localeText.titles.MMM;return{year:t.getFullYear(),Jan:e[0],Feb:e[1],Mar:e[2],Apr:e[3],May:e[4],Jun:e[5],Jul:e[6],Aug:e[7],Sep:e[8],Oct:e[9],Nov:e[10],Dec:e[11],getFirstDayTimestamp:a.getFirstDayTimestamp}},render:function(t,e){var n=this._makeContext(t);e.innerHTML=i(n),this._element=e.firstChild},getDateElements:function(){return this._element.querySelectorAll(c)}});t.exports=u},function(t,e,n){"use strict";var r=n(11);t.exports=function(t){var e='<table class="tui-calendar-body-inner">  <caption><span>Months</span></caption>  <tbody>    <tr class="tui-calendar-month-group">      <td class="tui-calendar-month" data-timestamp={{getFirstDayTimestamp year 0}}>{{Jan}}</td>      <td class="tui-calendar-month" data-timestamp={{getFirstDayTimestamp year 1}}>{{Feb}}</td>      <td class="tui-calendar-month" data-timestamp={{getFirstDayTimestamp year 2}}>{{Mar}}</td>      <td class="tui-calendar-month" data-timestamp={{getFirstDayTimestamp year 3}}>{{Apr}}</td>    </tr>    <tr class="tui-calendar-month-group">      <td class="tui-calendar-month" data-timestamp={{getFirstDayTimestamp year 4}}>{{May}}</td>      <td class="tui-calendar-month" data-timestamp={{getFirstDayTimestamp year 5}}>{{Jun}}</td>      <td class="tui-calendar-month" data-timestamp={{getFirstDayTimestamp year 6}}>{{Jul}}</td>      <td class="tui-calendar-month" data-timestamp={{getFirstDayTimestamp year 7}}>{{Aug}}</td>    </tr>    <tr class="tui-calendar-month-group">      <td class="tui-calendar-month" data-timestamp={{getFirstDayTimestamp year 8}}>{{Sep}}</td>      <td class="tui-calendar-month" data-timestamp={{getFirstDayTimestamp year 9}}>{{Oct}}</td>      <td class="tui-calendar-month" data-timestamp={{getFirstDayTimestamp year 10}}>{{Nov}}</td>      <td class="tui-calendar-month" data-timestamp={{getFirstDayTimestamp year 11}}>{{Dec}}</td>    </tr>  </tbody></table>';return r(e,t)}},function(t,e,n){"use strict";var r=n(0),i=n(55),o=n(20),s=n(1).TYPE_YEAR,a=n(5),c=".tui-calendar-year",u=r(o,{init:function(t){o.call(this,t)},_type:s,_makeContext:function(t){var e=t.getFullYear();return{yearGroups:[a.getRangeArr(e-4,e-2),a.getRangeArr(e-1,e+1),a.getRangeArr(e+2,e+4)],getFirstDayTimestamp:a.getFirstDayTimestamp}},render:function(t,e){var n=this._makeContext(t);e.innerHTML=i(n),this._element=e.firstChild},getDateElements:function(){return this._element.querySelectorAll(c)}});t.exports=u},function(t,e,n){"use strict";var r=n(11);t.exports=function(t){var e='<table class="tui-calendar-body-inner">  <caption><span>Years</span></caption>  <tbody>    {{each yearGroups}}    <tr class="tui-calendar-year-group">      {{each @this}}      <td class="tui-calendar-year" data-timestamp={{getFirstDayTimestamp @this 0}}>        {{@this}}      </td>      {{/each}}    </tr>    {{/each}}  </tbody></table>';return r(e,t)}},function(t,e,n){"use strict";var r=n(2),i=n(0),o=n(15),s=n(57),a=n(4),c=i({init:function(t){t=t||[],this._ranges=[],r(t,(function(t){this.add(t[0],t[1])}),this)},contains:function(t,e){for(var n,r=0,i=this._ranges.length;r<i;r+=1)if(n=this._ranges[r],n.contains(t,e))return!0;return!1},hasOverlap:function(t,e){for(var n,r=0,i=this._ranges.length;r<i;r+=1)if(n=this._ranges[r],n.isOverlapped(t,e))return!0;return!1},add:function(t,e){for(var n,r=!1,i=0,o=this._ranges.length;i<o;i+=1){if(n=this._ranges[i],r=n.isOverlapped(t,e),r){n.merge(t,e);break}if(t<n.start)break}r||this._ranges.splice(i,0,new s(t,e))},getMinimumValue:function(){return this._ranges[0].start},getMaximumValue:function(){var t=this._ranges.length;return this._ranges[t-1].end},exclude:function(t,e){o(e)||(e=t),r(this._ranges,(function(n){var r;n.isOverlapped(t,e)&&(r=n.end,n.exclude(t,e),e+1<=r&&this.add(e+1,r))}),this),this._ranges=a.filter(this._ranges,(function(t){return!t.isEmpty()}))},findOverlappedRange:function(t,e){for(var n,r=0,i=this._ranges.length;r<i;r+=1)if(n=this._ranges[r],n.isOverlapped(t,e))return[n.start,n.end];return null}});t.exports=c},function(t,e,n){"use strict";var r=n(0),i=n(15),o=r({init:function(t,e){this.setRange(t,e)},setRange:function(t,e){i(e)||(e=t),this.start=Math.min(t,e),this.end=Math.max(t,e)},merge:function(t,e){i(t)&&i(e)&&this.isOverlapped(t,e)&&(this.start=Math.min(t,this.start),this.end=Math.max(e,this.end))},isEmpty:function(){return!i(this.start)||!i(this.end)},setEmpty:function(){this.start=this.end=null},contains:function(t,e){return i(e)||(e=t),this.start<=t&&e<=this.end},isOverlapped:function(t,e){return i(e)||(e=t),this.start<=e&&this.end>=t},exclude:function(t,e){t<=this.start&&e>=this.end?this.setEmpty():this.contains(t)?this.setRange(this.start,t-1):this.contains(e)&&this.setRange(e+1,this.end)}});t.exports=o},function(t,e,n){"use strict";var r=n(11);t.exports=function(t){var e='<div class="tui-datepicker">  {{if timePicker}}    {{if isTab}}      <div class="tui-datepicker-selector">        <button type="button" class="tui-datepicker-selector-button tui-is-checked" aria-label="selected">          <span class="tui-ico-date"></span>{{localeText["date"]}}        </button>        <button type="button" class="tui-datepicker-selector-button">          <span class="tui-ico-time"></span>{{localeText["time"]}}        </button>      </div>      <div class="tui-datepicker-body">        <div class="tui-calendar-container"></div>        <div class="tui-timepicker-container"></div>      </div>    {{else}}      <div class="tui-datepicker-body">        <div class="tui-calendar-container"></div>      </div>      <div class="tui-datepicker-footer">        <div class="tui-timepicker-container"></div>      </div>    {{/if}}  {{else}}    <div class="tui-datepicker-body">      <div class="tui-calendar-container"></div>    </div>  {{/if}}</div>';return r(e,t)}},function(t,e,n){"use strict";var r=n(0),i=n(8),o=n(31),s=n(33),a=n(30),c=n(19),u=n(4),l="yyyy-MM-dd",h=r({init:function(t,e){e.format=e.format||l,this._input=u.getElement(t),this._id=e.id,this._titles=e.localeText.titles,this._formatter=new a(e.format,this._titles),this._setEvents()},changeLocaleTitles:function(t){this._titles=t},_setEvents:function(){this._input&&(o(this._input,"change",this._onChangeHandler,this),c.on(this._input,"click",this._onClickHandler,this))},_removeEvents:function(){this.off(),this._input&&(s(this._input,"change",this._onChangeHandler),c.off(this._input,"click",this._onClickHandler))},_onChangeHandler:function(){this.fire("change")},_onClickHandler:function(){this.fire("click")},is:function(t){return this._input===t},enable:function(){this._input&&this._input.removeAttribute("disabled")},disable:function(){this._input&&this._input.setAttribute("disabled",!0)},getFormat:function(){return this._formatter.getRawString()},setFormat:function(t){t&&(this._formatter=new a(t,this._titles))},clearText:function(){this._input&&(this._input.value="")},setDate:function(t){this._input&&(this._input.value=this._formatter.format(t))},getDate:function(){var t="";return this._input&&(t=this._input.value),this._formatter.parse(t)},destroy:function(){this._removeEvents(),this._input=this._id=this._formatter=null}});i.mixin(h),t.exports=h},function(t,e,n){"use strict";var r=n(2),i=n(0),o=n(8),s=n(16),a=n(26),c=n(18),u=n(7),l=n(21),h=n(5),d=n(1),f=n(4),p="tui-rangepicker",m=d.CLASS_NAME_SELECTED,g="tui-is-selected-range",y=i({init:function(t){var e,n;if(t=t||{},e=t.startpicker,n=t.endpicker,!e)throw new Error('The "startpicker" option is required.');if(!n)throw new Error('The "endpicker" option is required.');this._startpicker=null,this._endpicker=null,this._isRangeSet=!1,this._preEndPickerDate=(new Date).getDate(),this._initializePickers(t),this._syncRangesToEndpicker()},_initializePickers:function(t){var e=f.getElement(t.startpicker.container),n=f.getElement(t.endpicker.container),r=f.getElement(t.startpicker.input),i=f.getElement(t.endpicker.input),o=u({},t,{input:{element:r,format:t.format},date:t.startpicker.date,weekStartDay:t.startpicker.weekStartDay}),s=u({},t,{input:{element:i,format:t.format},date:t.endpicker.date,weekStartDay:t.endpicker.weekStartDay});this._startpicker=new l(e,o),this._startpicker.addCssClass(p),this._startpicker.on("change",this._onChangeStartpicker,this),this._startpicker.on("draw",this._onDrawPicker,this),this._endpicker=new l(n,s),this._endpicker.addCssClass(p),this._endpicker.on("change",this._onChangeEndpicker,this),this._endpicker.on("draw",this._onDrawPicker,this)},_onDrawPicker:function(t){var e=t.type,n=this._startpicker.getDate(),i=this._endpicker.getDate();n&&(i||(i=new Date(NaN)),r(t.dateElements,(function(t){var r=new Date(Number(a(t,"timestamp"))),o=h.inRange(n,i,r,e),s=h.isSame(n,r,e)||h.isSame(i,r,e);this._setRangeClass(t,o),this._setSelectedClass(t,s)}),this))},_setRangeClass:function(t,e){e?s(t,g):c(t,g)},_setSelectedClass:function(t,e){e?s(t,m):c(t,m)},_syncRangesToEndpicker:function(){var t,e=this._startpicker.getDate();e?(t=this._startpicker.findOverlappedRange(h.cloneWithStartOf(e).getTime(),h.cloneWithEndOf(e).getTime()),this._endpicker.enable(),this._endpicker.setRanges([[e.getTime(),t[1].getTime()]]),this._setTimeRangeOnEndPicker()):(this._endpicker.setNull(),this._endpicker.disable())},_onChangeStartpicker:function(){this._syncRangesToEndpicker(),this.fire("change:start")},_onChangeEndpicker:function(){var t,e=this._endpicker.getDate();e?(t=e.getDate(),this._preEndPickerDate!==t&&this._setTimeRangeOnEndPicker(),this._preEndPickerDate=t):this._preEndPickerDate=null,this.fire("change:end")},_isStartAndEndDateSame:function(){return!!this._endpicker.getDate()&&!!this._startpicker.getDate()&&0===h.compare(this._endpicker.getDate(),this._startpicker.getDate(),d.TYPE_DATE)},_setTimeRangeOnEndPicker:function(){var t,e,n,r=this._endpicker._timePicker;r&&(t=this._endpicker.getDate()||this._startpicker.getDate(),e=this._getTimeRangeFromStartPicker(),n=t&&e[t.getDate()],this._isStartAndEndDateSame()&&n?(r.setRange(n),this._isRangeSet=!0):this._isRangeSet&&(r.setRange({hour:0,minute:0}),r.resetMinuteRange(),this._isRangeSet=!1))},_getTimeRangeFromStartPicker:function(){var t=this._startpicker.getDate(),e={};return e[t.getDate()]={hour:t.getHours(),minute:t.getMinutes()},e},getStartpicker:function(){return this._startpicker},getEndpicker:function(){return this._endpicker},setStartDate:function(t){this._startpicker.setDate(t)},getStartDate:function(){return this._startpicker.getDate()},getEndDate:function(){return this._endpicker.getDate()},setEndDate:function(t){this._endpicker.setDate(t)},setRanges:function(t){this._startpicker.setRanges(t),this._syncRangesToEndpicker()},addRange:function(t,e){this._startpicker.addRange(t,e),this._syncRangesToEndpicker()},removeRange:function(t,e,n){this._startpicker.removeRange(t,e,n),this._syncRangesToEndpicker()},changeLanguage:function(t){this._startpicker.changeLanguage(t),this._endpicker.changeLanguage(t)},destroy:function(){this.off(),this._startpicker.destroy(),this._endpicker.destroy(),this._startpicker=this._endpicker=null}});o.mixin(y),t.exports=y},function(t,e,n){}])}))},8004:function(t,e,n){"use strict";var r=n(6518),i=n(9039),o=n(8750),s=n(4916),a=!s("intersection",(function(t){return 2===t.size&&t.has(1)&&t.has(2)}))||i((function(){return"3,2"!==String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))}));r({target:"Set",proto:!0,real:!0,forced:a},{intersection:o})},8014:function(t,e,n){"use strict";var r=n(1291),i=Math.min;t.exports=function(t){var e=r(t);return e>0?i(e,9007199254740991):0}},8071:function(t,e,n){"use strict";n.d(e,{P2:function(){return b}});n(8111),n(3579),n(4979);const r=(t,e)=>e.some((e=>t instanceof e));let i,o;function s(){return i||(i=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function a(){return o||(o=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const c=new WeakMap,u=new WeakMap,l=new WeakMap,h=new WeakMap,d=new WeakMap;function f(t){const e=new Promise(((e,n)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{e(_(t.result)),r()},o=()=>{n(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)}));return e.then((e=>{e instanceof IDBCursor&&c.set(e,t)})).catch((()=>{})),d.set(e,t),e}function p(t){if(u.has(t))return;const e=new Promise(((e,n)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{e(),r()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)}));u.set(t,e)}let m={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return u.get(t);if("objectStoreNames"===e)return t.objectStoreNames||l.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t}};function g(t){m=t(m)}function y(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?a().includes(t)?function(...e){return t.apply(w(this),e),_(c.get(this))}:function(...e){return _(t.apply(w(this),e))}:function(e,...n){const r=t.call(w(this),e,...n);return l.set(r,e.sort?e.sort():[e]),_(r)}}function v(t){return"function"===typeof t?y(t):(t instanceof IDBTransaction&&p(t),r(t,s())?new Proxy(t,m):t)}function _(t){if(t instanceof IDBRequest)return f(t);if(h.has(t))return h.get(t);const e=v(t);return e!==t&&(h.set(t,e),d.set(e,t)),e}const w=t=>d.get(t);function b(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),a=_(s);return r&&s.addEventListener("upgradeneeded",(t=>{r(_(s.result),t.oldVersion,t.newVersion,_(s.transaction),t)})),n&&s.addEventListener("blocked",(t=>n(t.oldVersion,t.newVersion,t))),a.then((t=>{o&&t.addEventListener("close",(()=>o())),i&&t.addEventListener("versionchange",(t=>i(t.oldVersion,t.newVersion,t)))})).catch((()=>{})),a}const E=["get","getKey","getAll","getAllKeys","count"],T=["put","add","delete","clear"],C=new Map;function S(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!==typeof e)return;if(C.get(e))return C.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=T.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!E.includes(n))return;const o=async function(t,...e){const o=this.transaction(t,i?"readwrite":"readonly");let s=o.store;return r&&(s=s.index(e.shift())),(await Promise.all([s[n](...e),i&&o.done]))[0]};return C.set(e,o),o}g((t=>({...t,get:(e,n,r)=>S(e,n)||t.get(e,n,r),has:(e,n)=>!!S(e,n)||t.has(e,n)})))},8111:function(t,e,n){"use strict";var r=n(6518),i=n(4576),o=n(679),s=n(8551),a=n(4901),c=n(2787),u=n(2106),l=n(4659),h=n(9039),d=n(9297),f=n(8227),p=n(7657).IteratorPrototype,m=n(3724),g=n(6395),y="constructor",v="Iterator",_=f("toStringTag"),w=TypeError,b=i[v],E=g||!a(b)||b.prototype!==p||!h((function(){b({})})),T=function(){if(o(this,p),c(this)===p)throw new w("Abstract class Iterator not directly constructable")},C=function(t,e){m?u(p,t,{configurable:!0,get:function(){return e},set:function(e){if(s(this),this===p)throw new w("You can't redefine this property");d(this,t)?this[t]=e:l(this,t,e)}}):p[t]=e};d(p,_)||C(_,v),!E&&d(p,y)&&p[y]!==Object||C(y,T),T.prototype=p,r({global:!0,constructor:!0,forced:E},{Iterator:T})},8227:function(t,e,n){"use strict";var r=n(4576),i=n(5745),o=n(9297),s=n(3392),a=n(4495),c=n(7040),u=r.Symbol,l=i("wks"),h=c?u["for"]||u:u&&u.withoutSetter||s;t.exports=function(t){return o(l,t)||(l[t]=a&&o(u,t)?u[t]:h("Symbol."+t)),l[t]}},8237:function(t,e,n){"use strict";var r=n(6518),i=n(2652),o=n(9306),s=n(8551),a=n(1767),c=n(9539),u=n(4549),l=n(8745),h=n(9039),d=TypeError,f=h((function(){[].keys().reduce((function(){}),void 0)})),p=!f&&u("reduce",d);r({target:"Iterator",proto:!0,real:!0,forced:f||p},{reduce:function(t){s(this);try{o(t)}catch(h){c(this,"throw",h)}var e=arguments.length<2,n=e?void 0:arguments[1];if(p)return l(p,this,e?[t]:[t,n]);var r=a(this),u=0;if(i(r,(function(r){e?(e=!1,n=r):n=t(n,r,u),u++}),{IS_RECORD:!0}),e)throw new d("Reduce of empty iterator with no initial value");return n}})},8469:function(t,e,n){"use strict";var r=n(9504),i=n(507),o=n(4402),s=o.Set,a=o.proto,c=r(a.forEach),u=r(a.keys),l=u(new s).next;t.exports=function(t,e,n){return n?i({iterator:u(t),next:l},e):c(t,e)}},8480:function(t,e,n){"use strict";var r=n(1828),i=n(8727),o=i.concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},8527:function(t,e,n){"use strict";var r=n(7080),i=n(4402).has,o=n(5170),s=n(3789),a=n(507),c=n(9539);t.exports=function(t){var e=r(this),n=s(t);if(o(e)<n.size)return!1;var u=n.getIterator();return!1!==a(u,(function(t){if(!i(e,t))return c(u,"normal",!1)}))}},8551:function(t,e,n){"use strict";var r=n(34),i=String,o=TypeError;t.exports=function(t){if(r(t))return t;throw new o(i(t)+" is not an object")}},8622:function(t,e,n){"use strict";var r=n(4576),i=n(4901),o=r.WeakMap;t.exports=i(o)&&/native code/.test(String(o))},8646:function(t,e,n){"use strict";var r=n(9565),i=n(8551),o=n(1767),s=n(851);t.exports=function(t,e){e&&"string"===typeof t||i(t);var n=s(t);return o(i(void 0!==n?r(n,t):t))}},8686:function(t,e,n){"use strict";var r=n(3724),i=n(9039);t.exports=r&&i((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},8727:function(t){"use strict";t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},8745:function(t,e,n){"use strict";var r=n(616),i=Function.prototype,o=i.apply,s=i.call;t.exports="object"==typeof Reflect&&Reflect.apply||(r?s.bind(o):function(){return s.apply(o,arguments)})},8750:function(t,e,n){"use strict";var r=n(7080),i=n(4402),o=n(5170),s=n(3789),a=n(8469),c=n(507),u=i.Set,l=i.add,h=i.has;t.exports=function(t){var e=r(this),n=s(t),i=new u;return o(e)>n.size?c(n.getIterator(),(function(t){h(e,t)&&l(i,t)})):a(e,(function(t){n.includes(t)&&l(i,t)})),i}},8773:function(t,e){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,i=r&&!n.call({1:2},1);e.f=i?function(t){var e=r(this,t);return!!e&&e.enumerable}:n},8981:function(t,e,n){"use strict";var r=n(7750),i=Object;t.exports=function(t){return i(r(t))}},9039:function(t){"use strict";t.exports=function(t){try{return!!t()}catch(e){return!0}}},9286:function(t,e,n){"use strict";var r=n(4402),i=n(8469),o=r.Set,s=r.add;t.exports=function(t){var e=new o;return i(t,(function(t){s(e,t)})),e}},9297:function(t,e,n){"use strict";var r=n(9504),i=n(8981),o=r({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return o(i(t),e)}},9306:function(t,e,n){"use strict";var r=n(4901),i=n(6823),o=TypeError;t.exports=function(t){if(r(t))return t;throw new o(i(t)+" is not a function")}},9433:function(t,e,n){"use strict";var r=n(4576),i=Object.defineProperty;t.exports=function(t,e){try{i(r,t,{value:e,configurable:!0,writable:!0})}catch(n){r[t]=e}return e}},9462:function(t,e,n){"use strict";var r=n(9565),i=n(2360),o=n(6699),s=n(6279),a=n(8227),c=n(1181),u=n(5966),l=n(7657).IteratorPrototype,h=n(2529),d=n(9539),f=a("toStringTag"),p="IteratorHelper",m="WrapForValidIterator",g=c.set,y=function(t){var e=c.getterFor(t?m:p);return s(i(l),{next:function(){var n=e(this);if(t)return n.nextHandler();if(n.done)return h(void 0,!0);try{var r=n.nextHandler();return n.returnHandlerResult?r:h(r,n.done)}catch(i){throw n.done=!0,i}},return:function(){var n=e(this),i=n.iterator;if(n.done=!0,t){var o=u(i,"return");return o?r(o,i):h(void 0,!0)}if(n.inner)try{d(n.inner.iterator,"normal")}catch(s){return d(i,"throw",s)}return i&&d(i,"normal"),h(void 0,!0)}})},v=y(!0),_=y(!1);o(_,f,"Iterator Helper"),t.exports=function(t,e,n){var r=function(r,i){i?(i.iterator=r.iterator,i.next=r.next):i=r,i.type=e?m:p,i.returnHandlerResult=!!n,i.nextHandler=t,i.counter=0,i.done=!1,g(this,i)};return r.prototype=e?v:_,r}},9504:function(t,e,n){"use strict";var r=n(616),i=Function.prototype,o=i.call,s=r&&i.bind.bind(o,o);t.exports=r?s:function(t){return function(){return o.apply(t,arguments)}}},9519:function(t,e,n){"use strict";var r,i,o=n(4576),s=n(2839),a=o.process,c=o.Deno,u=a&&a.versions||c&&c.version,l=u&&u.v8;l&&(r=l.split("."),i=r[0]>0&&r[0]<4?1:+(r[0]+r[1])),!i&&s&&(r=s.match(/Edge\/(\d+)/),(!r||r[1]>=74)&&(r=s.match(/Chrome\/(\d+)/),r&&(i=+r[1]))),t.exports=i},9539:function(t,e,n){"use strict";var r=n(9565),i=n(8551),o=n(5966);t.exports=function(t,e,n){var s,a;i(t);try{if(s=o(t,"return"),!s){if("throw"===e)throw n;return n}s=r(s,t)}catch(c){a=!0,s=c}if("throw"===e)throw n;if(a)throw s;return i(s),n}},9565:function(t,e,n){"use strict";var r=n(616),i=Function.prototype.call;t.exports=r?i.bind(i):function(){return i.apply(i,arguments)}},9617:function(t,e,n){"use strict";var r=n(5397),i=n(5610),o=n(6198),s=function(t){return function(e,n,s){var a=r(e),c=o(a);if(0===c)return!t&&-1;var u,l=i(s,c);if(t&&n!==n){while(c>l)if(u=a[l++],u!==u)return!0}else for(;c>l;l++)if((t||l in a)&&a[l]===n)return t||l||0;return!t&&-1}};t.exports={includes:s(!0),indexOf:s(!1)}}}]);
//# sourceMappingURL=chunk-vendors.b59b94ec.js.map